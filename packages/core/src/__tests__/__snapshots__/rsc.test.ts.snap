// Vitest Snapshot v1

exports[`RSC > jsx > Javascript Test > AdvancedRef 1`] = `
"import * as React from \\"react\\";

export default function MyBasicRefComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    name: \\"PatrickJS\\",
    onBlur: function onBlur() {
      // Maintain focus
      inputRef.focus();
    },
    lowerCaseName: function lowerCaseName() {
      return state.name.toLowerCase();
    },
  };

  return (
    <>
      <div>
        {props.showInput ? (
          <>
            <input className=\\"input-37c780bb\\" value={state.name} />

            <label htmlFor=\\"cars\\">Choose a car:</label>

            <select name=\\"cars\\" id=\\"cars\\">
              <option value=\\"supra\\">GR Supra</option>

              <option value=\\"86\\">GR 86</option>
            </select>
          </>
        ) : null}
        Hello
        {state.lowerCaseName()}! I can run in React, Qwik, Vue, Solid, or Web
        Component!
      </div>
      <style>{\`.input-37c780bb {
color: red;
}\`}</style>
    </>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > Basic 1`] = `
"import * as React from \\"react\\";

export const DEFAULT_VALUES = {
  name: \\"Steve\\",
};

export default function MyBasicComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    name: \\"Steve\\",
    underscore_fn_name() {
      return \\"bar\\";
    },
    age: 1,
    sports: [\\"\\"],
  };

  return (
    <>
      <div className=\\"test div-251ed544\\">
        <input value={DEFAULT_VALUES.name || state.name} />
        Hello! I can run in React, Vue, Solid, or Liquid!
      </div>
      <style>{\`.div-251ed544 {
padding: 10px;
}\`}</style>
    </>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > Basic Context 1`] = `
"import * as React from \\"react\\";
import { useEffect } from \\"react\\";
import { Injector, createInjector, MyService } from \\"@dummy/injection-js\\";

export default function MyBasicComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    name: \\"PatrickJS\\",
    onChange: function onChange() {
      const change = myService.method(\\"change\\");
      console.log(change);
    },
  };

  const myService = _context[\\"MyService\\"];

  useEffect(() => {
    const hi = myService.method(\\"hi\\");
    console.log(hi);
  }, []);

  return (
    <div>
      {myService.method(\\"hello\\") + state.name}
      Hello! I can run in React, Vue, Solid, or Liquid!
      <input />
    </div>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > Basic OnMount Update 1`] = `
"import * as React from \\"react\\";
import { useEffect } from \\"react\\";

export default function MyBasicOnMountUpdateComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = { name: \\"PatrickJS\\", names: [\\"Steve\\", \\"PatrickJS\\"] };

  useEffect(() => {
    state.name = \\"PatrickJS onInit\\" + props.hi;
  }, []);

  return (
    <div>
      Hello
      {state.name}
    </div>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > Basic Outputs 1`] = `
"import * as React from \\"react\\";

export default function MyBasicOutputsComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = { name: \\"PatrickJS\\" };

  return <div />;
}
"
`;

exports[`RSC > jsx > Javascript Test > Basic Outputs Meta 1`] = `
"import * as React from \\"react\\";

export default function MyBasicOutputsComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = { name: \\"PatrickJS\\" };

  return <div />;
}
"
`;

exports[`RSC > jsx > Javascript Test > BasicAttribute 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  return <input autoCapitalize=\\"on\\" autoComplete=\\"on\\" spellCheck={true} />;
}
"
`;

exports[`RSC > jsx > Javascript Test > BasicBooleanAttribute 1`] = `
"import * as React from \\"react\\";
import MyBooleanAttributeComponent from \\"./basic-boolean-attribute-component.raw\\";

export default function MyBooleanAttribute(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <div>
      {props.children}

      {props.type}

      <MyBooleanAttributeComponent toggle={true} _context={_context} />

      <MyBooleanAttributeComponent toggle={true} _context={_context} />

      <MyBooleanAttributeComponent list={null} _context={_context} />
    </div>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > BasicChildComponent 1`] = `
"import * as React from \\"react\\";
import MyBasicComponent from \\"./basic.raw\\";
import MyBasicOnMountUpdateComponent from \\"./basic-onMount-update.raw\\";

export default function MyBasicChildComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = { name: \\"Steve\\", dev: \\"PatrickJS\\" };

  return (
    <div>
      <MyBasicComponent id={state.dev} _context={_context} />

      <div>
        <MyBasicOnMountUpdateComponent
          hi={state.name}
          bye={state.dev}
          _context={_context}
        />
      </div>
    </div>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > BasicFor 1`] = `
"import * as React from \\"react\\";

export default function MyBasicForComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = { name: \\"PatrickJS\\", names: [\\"Steve\\", \\"PatrickJS\\"] };

  return (
    <div>
      {state.names?.map((person) => (
        <>
          <input value={state.name} />
          Hello
          {person}! I can run in Qwik, Web Component, React, Vue, Solid, or
          Liquid!
        </>
      ))}
    </div>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > BasicRef 1`] = `
"import * as React from \\"react\\";

export default function MyBasicRefComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    name: \\"PatrickJS\\",
    onBlur: function onBlur() {
      // Maintain focus
      inputRef.focus();
    },
    lowerCaseName: function lowerCaseName() {
      return state.name.toLowerCase();
    },
  };

  return (
    <>
      <div>
        {props.showInput ? (
          <>
            <input className=\\"input-37c780bb\\" value={state.name} />

            <label htmlFor=\\"cars\\">Choose a car:</label>

            <select name=\\"cars\\" id=\\"cars\\">
              <option value=\\"supra\\">GR Supra</option>

              <option value=\\"86\\">GR 86</option>
            </select>
          </>
        ) : null}
        Hello
        {state.lowerCaseName()}! I can run in React, Qwik, Vue, Solid, or Web
        Component!
      </div>
      <style>{\`.input-37c780bb {
color: red;
}\`}</style>
    </>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > BasicRefAssignment 1`] = `
"import * as React from \\"react\\";

export default function MyBasicRefAssignmentComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    handlerClick: function handlerClick(event) {
      event.preventDefault();
      console.log(\\"current value\\", holdValueRef);
      holdValueRef = holdValueRef + \\"JS\\";
    },
  };

  return (
    <div>
      <button>Click</button>
    </div>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > BasicRefPrevious 1`] = `
"import * as React from \\"react\\";

export function usePrevious<T>(value: T) {
  // The ref object is a generic container whose current property is mutable ...
  // ... and can hold any value, similar to an instance property on a class
  let ref = useRef<T>(null); // Store current value in ref

  onUpdate(() => {
    ref = value;
  }, [value]); // Only re-run if value changes
  // Return previous value (happens before update in useEffect above)

  return ref;
}

export default function MyPreviousComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = { count: 0 };

  return (
    <div>
      <h1>
        Now:
        {state.count}, before:
        {prevCount}
      </h1>

      <button>Increment</button>
    </div>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > Button 1`] = `
"import * as React from \\"react\\";

export default function Button(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <div>
      {props.link ? (
        <>
          <a
            {...props.attributes}
            href={props.link}
            target={props.openLinkInNewTab ? \\"_blank\\" : undefined}
          >
            {props.text}
          </a>
        </>
      ) : null}

      {!props.link ? (
        <>
          <button type=\\"button\\" {...props.attributes}>
            {props.text}
          </button>
        </>
      ) : null}
    </div>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > Columns 1`] = `
"import * as React from \\"react\\";

export default function Column(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    getColumns() {
      return props.columns || [];
    },
    getGutterSize() {
      return typeof props.space === \\"number\\" ? props.space || 0 : 20;
    },
    getWidth(index) {
      const columns = state.getColumns();
      return (columns[index] && columns[index].width) || 100 / columns.length;
    },
    getColumnCssWidth(index) {
      const columns = state.getColumns();
      const gutterSize = state.getGutterSize();
      const subtractWidth =
        (gutterSize * (columns.length - 1)) / columns.length;
      return \`calc(\${state.getWidth(index)}% - \${subtractWidth}px)\`;
    },
  };

  return (
    <>
      <div className=\\"builder-columns div-033a66b8\\">
        {props.columns?.map((column, index) => (
          <div className=\\"builder-column div-033a66b8-2\\">
            {column.content}

            {index}
          </div>
        ))}
      </div>
      <style>{\`.div-033a66b8 {
display: flex;
flex-direction: column;
align-items: stretch;
line-height: normal;
}@media (max-width: 999px) { .div-033a66b8 {   flex-direction: row; } }@media (max-width: 639px) { .div-033a66b8 {   flex-direction: row-reverse; } }.div-033a66b8-2 {
flex-grow: 1;
}\`}</style>
    </>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > ContentSlotHtml 1`] = `
"import * as React from \\"react\\";

export default function ContentSlotCode(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <div>
      {props.slotTesting}

      <div>
        <hr />
      </div>

      <div slotContext={_context}></div>
    </div>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > ContentSlotJSX 1`] = `
"import * as React from \\"react\\";

export default function ContentSlotJsxCode(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <div>
      {props.slotTesting ? (
        <>
          <div>{props.slotTesting}</div>
        </>
      ) : null}

      <div>
        <hr />
      </div>

      <div>{props.children}</div>
    </div>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > CustomCode 1`] = `
"import * as React from \\"react\\";

export default function CustomCode(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    scriptsInserted: [],
    scriptsRun: [],
    findAndRunScripts() {
      // TODO: Move this function to standalone one in '@builder.io/utils'
      if (elem && typeof window !== \\"undefined\\") {
        /** @type {HTMLScriptElement[]} */
        const scripts = elem.getElementsByTagName(\\"script\\");

        for (let i = 0; i < scripts.length; i++) {
          const script = scripts[i];

          if (script.src) {
            if (state.scriptsInserted.includes(script.src)) {
              continue;
            }

            state.scriptsInserted.push(script.src);
            const newScript = document.createElement(\\"script\\");
            newScript.async = true;
            newScript.src = script.src;
            document.head.appendChild(newScript);
          } else if (
            !script.type ||
            [
              \\"text/javascript\\",
              \\"application/javascript\\",
              \\"application/ecmascript\\",
            ].includes(script.type)
          ) {
            if (state.scriptsRun.includes(script.innerText)) {
              continue;
            }

            try {
              state.scriptsRun.push(script.innerText);
              new Function(script.innerText)();
            } catch (error) {
              console.warn(\\"\`CustomCode\`: Error running script:\\", error);
            }
          }
        }
      }
    },
  };

  return (
    <div
      className={
        \\"builder-custom-code\\" + (props.replaceNodes ? \\" replace-nodes\\" : \\"\\")
      }
      dangerouslySetInnerHTML={{ __html: props.code }}
    />
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > Embed 1`] = `
"import * as React from \\"react\\";

export default function CustomCode(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    scriptsInserted: [],
    scriptsRun: [],
    findAndRunScripts() {
      // TODO: Move this function to standalone one in '@builder.io/utils'
      if (elem && typeof window !== \\"undefined\\") {
        /** @type {HTMLScriptElement[]} */
        const scripts = elem.getElementsByTagName(\\"script\\");

        for (let i = 0; i < scripts.length; i++) {
          const script = scripts[i];

          if (script.src) {
            if (state.scriptsInserted.includes(script.src)) {
              continue;
            }

            state.scriptsInserted.push(script.src);
            const newScript = document.createElement(\\"script\\");
            newScript.async = true;
            newScript.src = script.src;
            document.head.appendChild(newScript);
          } else if (
            !script.type ||
            [
              \\"text/javascript\\",
              \\"application/javascript\\",
              \\"application/ecmascript\\",
            ].includes(script.type)
          ) {
            if (state.scriptsRun.includes(script.innerText)) {
              continue;
            }

            try {
              state.scriptsRun.push(script.innerText);
              new Function(script.innerText)();
            } catch (error) {
              console.warn(\\"\`CustomCode\`: Error running script:\\", error);
            }
          }
        }
      }
    },
  };

  return (
    <div
      className={
        \\"builder-custom-code\\" + (props.replaceNodes ? \\" replace-nodes\\" : \\"\\")
      }
      dangerouslySetInnerHTML={{ __html: props.code }}
    />
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > Form 1`] = `
"import * as React from \\"react\\";
import { BuilderBlock as BuilderBlockComponent } from \\"@fake\\";
import { Builder, builder } from \\"@builder.io/sdk\\";
import { BuilderBlocks } from \\"@fake\\";
import { set } from \\"@fake\\";
import { get } from \\"@fake\\";

export default function FormComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    formState: \\"unsubmitted\\",
    responseData: null,
    formErrorMessage: \\"\\",
    get submissionState() {
      return (Builder.isEditing && props.previewState) || state.formState;
    },
    onSubmit(event) {
      const sendWithJs =
        props.sendWithJs || props.sendSubmissionsTo === \\"email\\";

      if (props.sendSubmissionsTo === \\"zapier\\") {
        event.preventDefault();
      } else if (sendWithJs) {
        if (!(props.action || props.sendSubmissionsTo === \\"email\\")) {
          event.preventDefault();
          return;
        }

        event.preventDefault();
        const el = event.currentTarget;
        const headers = props.customHeaders || {};
        let body;
        const formData = new FormData(el); // TODO: maybe support null

        const formPairs = Array.from(
          event.currentTarget.querySelectorAll(\\"input,select,textarea\\")
        )
          .filter((el) => !!el.name)
          .map((el) => {
            let value;
            const key = el.name;

            if (el instanceof HTMLInputElement) {
              if (el.type === \\"radio\\") {
                if (el.checked) {
                  value = el.name;
                  return {
                    key,
                    value,
                  };
                }
              } else if (el.type === \\"checkbox\\") {
                value = el.checked;
              } else if (el.type === \\"number\\" || el.type === \\"range\\") {
                const num = el.valueAsNumber;

                if (!isNaN(num)) {
                  value = num;
                }
              } else if (el.type === \\"file\\") {
                // TODO: one vs multiple files
                value = el.files;
              } else {
                value = el.value;
              }
            } else {
              value = el.value;
            }

            return {
              key,
              value,
            };
          });
        let contentType = props.contentType;

        if (props.sendSubmissionsTo === \\"email\\") {
          contentType = \\"multipart/form-data\\";
        }

        Array.from(formPairs).forEach(({ value }) => {
          if (
            value instanceof File ||
            (Array.isArray(value) && value[0] instanceof File) ||
            value instanceof FileList
          ) {
            contentType = \\"multipart/form-data\\";
          }
        }); // TODO: send as urlEncoded or multipart by default
        // because of ease of use and reliability in browser API
        // for encoding the form?

        if (contentType !== \\"application/json\\") {
          body = formData;
        } else {
          // Json
          const json = {};
          Array.from(formPairs).forEach(({ value, key }) => {
            set(json, key, value);
          });
          body = JSON.stringify(json);
        }

        if (contentType && contentType !== \\"multipart/form-data\\") {
          if (
            /* Zapier doesn't allow content-type header to be sent from browsers */ !(
              sendWithJs && props.action?.includes(\\"zapier.com\\")
            )
          ) {
            headers[\\"content-type\\"] = contentType;
          }
        }
        const presubmitEvent = new CustomEvent(\\"presubmit\\", {
          detail: { body },
        });
        if (formRef) {
          formRef.dispatchEvent(presubmitEvent);
          if (presubmitEvent.defaultPrevented) {
            return;
          }
        }
        state.formState = \\"sending\\";
        const formUrl = \`\${
          builder.env === \\"dev\\" ? \\"http://localhost:5000\\" : \\"https://builder.io\\"
        }/api/v1/form-submit?apiKey=\${builder.apiKey}&to=\${btoa(
          props.sendSubmissionsToEmail || \\"\\"
        )}&name=\${encodeURIComponent(props.name || \\"\\")}\`;
        fetch(
          props.sendSubmissionsTo === \\"email\\"
            ? formUrl
            : props.action /* TODO: throw error if no action URL */,
          { body, headers, method: props.method || \\"post\\" }
        ).then(
          async (res) => {
            let body;
            const contentType = res.headers.get(\\"content-type\\");
            if (contentType && contentType.indexOf(\\"application/json\\") !== -1) {
              body = await res.json();
            } else {
              body = await res.text();
            }
            if (!res.ok && props.errorMessagePath) {
              /* TODO: allow supplying an error formatter function */ let message =
                get(body, props.errorMessagePath);
              if (message) {
                if (typeof message !== \\"string\\") {
                  /* TODO: ideally convert json to yaml so it woul dbe like            error: - email has been taken */ message =
                    JSON.stringify(message);
                }
                state.formErrorMessage = message;
              }
            }
            state.responseData = body;
            state.formState = res.ok ? \\"success\\" : \\"error\\";
            if (res.ok) {
              const submitSuccessEvent = new CustomEvent(\\"submit:success\\", {
                detail: { res, body },
              });
              if (formRef) {
                formRef.dispatchEvent(submitSuccessEvent);
                if (submitSuccessEvent.defaultPrevented) {
                  return;
                }
                /* TODO: option to turn this on/off? */ if (
                  props.resetFormOnSubmit !== false
                ) {
                  formRef.reset();
                }
              }
              /* TODO: client side route event first that can be preventDefaulted */ if (
                props.successUrl
              ) {
                if (formRef) {
                  const event = new CustomEvent(\\"route\\", {
                    detail: { url: props.successUrl },
                  });
                  formRef.dispatchEvent(event);
                  if (!event.defaultPrevented) {
                    location.href = props.successUrl;
                  }
                } else {
                  location.href = props.successUrl;
                }
              }
            }
          },
          (err) => {
            const submitErrorEvent = new CustomEvent(\\"submit:error\\", {
              detail: { error: err },
            });
            if (formRef) {
              formRef.dispatchEvent(submitErrorEvent);
              if (submitErrorEvent.defaultPrevented) {
                return;
              }
            }
            state.responseData = err;
            state.formState = \\"error\\";
          }
        );
      }
    },
  };
  return (
    <>
      {\\" \\"}
      <form
        validate={props.validate}
        action={!props.sendWithJs && props.action}
        method={props.method}
        name={props.name}
        {...props.attributes}
      >
        {\\" \\"}
        {props.builderBlock && props.builderBlock.children ? (
          <>
            {props.builderBlock?.children?.map((block, index) => (
              <BuilderBlockComponent
                key={block.id}
                block={block}
                index={index}
                _context={_context}
              />
            ))}
          </>
        ) : null}{\\" \\"}
        {state.submissionState === \\"error\\" ? (
          <>
            <BuilderBlocks
              dataPath=\\"errorMessage\\"
              blocks={props.errorMessage}
              _context={_context}
            />
          </>
        ) : null}{\\" \\"}
        {state.submissionState === \\"sending\\" ? (
          <>
            <BuilderBlocks
              dataPath=\\"sendingMessage\\"
              blocks={props.sendingMessage}
              _context={_context}
            />
          </>
        ) : null}{\\" \\"}
        {state.submissionState === \\"error\\" && state.responseData ? (
          <>
            <pre className=\\"builder-form-error-text pre-170708b2\\">
              {\\" \\"}
              {JSON.stringify(state.responseData, null, 2)}{\\" \\"}
            </pre>
          </>
        ) : null}{\\" \\"}
        {state.submissionState === \\"success\\" ? (
          <>
            <BuilderBlocks
              dataPath=\\"successMessage\\"
              blocks={props.successMessage}
              _context={_context}
            />
          </>
        ) : null}{\\" \\"}
      </form>{\\" \\"}
      <style>{\`.pre-170708b2 { padding: 10px; color: red; text-align: center; }\`}</style>{\\" \\"}
    </>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > Image 1`] = `
"import * as React from \\"react\\";

export default function Image(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    scrollListener: null,
    imageLoaded: false,
    setLoaded() {
      state.imageLoaded = true;
    },
    useLazyLoading() {
      // TODO: Add more checks here, like testing for real web browsers
      return !!props.lazy && isBrowser();
    },
    isBrowser: function isBrowser() {
      return (
        typeof window !== \\"undefined\\" &&
        window.navigator.product != \\"ReactNative\\"
      );
    },
    load: false,
  };

  return (
    <>
      <div>
        <picture>
          {!state.useLazyLoading() || state.load ? (
            <>
              <img
                alt={props.altText}
                aria-role={props.altText ? \\"presentation\\" : undefined}
                className={
                  \\"builder-image\\" +
                  (props._class ? \\" \\" + props._class : \\"\\") +
                  \\" img-ccac6a98\\"
                }
                src={props.image}
                srcset={props.srcset}
                sizes={props.sizes}
              />
            </>
          ) : null}

          <source srcset={props.srcset} />
        </picture>

        {props.children}
      </div>
      <style>{\`.img-ccac6a98 {
opacity: 1;
transition: opacity 0.2s ease-in-out;
object-fit: cover;
object-position: center;
}\`}</style>
    </>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > Image State 1`] = `
"import * as React from \\"react\\";

export default function ImgStateComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = { canShow: true, images: [\\"http://example.com/qwik.png\\"] };

  return (
    <div>
      {state.images?.map((item, itemIndex) => (
        <>
          <img className=\\"custom-class\\" src={item} key={itemIndex} />
        </>
      ))}
    </div>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > Img 1`] = `
"import * as React from \\"react\\";
import { Builder } from \\"@builder.io/sdk\\";

export default function ImgComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <img
      style={{
        objectFit: props.backgroundSize || \\"cover\\",
        objectPosition: props.backgroundPosition || \\"center\\",
      }}
      {...props.attributes}
      key={(Builder.isEditing && props.imgSrc) || \\"default-key\\"}
      alt={props.altText}
      src={props.imgSrc}
    />
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > Input 1`] = `
"import * as React from \\"react\\";
import { Builder } from \\"@builder.io/sdk\\";

export default function FormInputComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <input
      {...props.attributes}
      key={
        Builder.isEditing && props.defaultValue
          ? props.defaultValue
          : \\"default-key\\"
      }
      placeholder={props.placeholder}
      type={props.type}
      name={props.name}
      value={props.value}
      defaultValue={props.defaultValue}
      required={props.required}
    />
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > RawText 1`] = `
"import * as React from \\"react\\";

export default function RawText(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <span
      className={props.attributes?.class || props.attributes?.className}
      dangerouslySetInnerHTML={{ __html: props.text || \\"\\" }}
    />
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > Section 1`] = `
"import * as React from \\"react\\";

export default function SectionComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <section
      {...props.attributes}
      style={
        props.maxWidth && typeof props.maxWidth === \\"number\\"
          ? {
              maxWidth: props.maxWidth,
            }
          : undefined
      }
    >
      {props.children}
    </section>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > Select 1`] = `
"import * as React from \\"react\\";
import { Builder } from \\"@builder.io/sdk\\";

export default function SelectComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <select
      {...props.attributes}
      value={props.value}
      key={
        Builder.isEditing && props.defaultValue
          ? props.defaultValue
          : \\"default-key\\"
      }
      defaultValue={props.defaultValue}
      name={props.name}
    >
      {props.options?.map((option, index) => (
        <option value={option.value} data-index={index}>
          {option.name || option.value}
        </option>
      ))}
    </select>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > SlotDefault 1`] = `
"import * as React from \\"react\\";

export default function SlotCode(props) {
  const _context = { ...props[\\"_context\\"] };

  return <div slotContext={_context}></div>;
}
"
`;

exports[`RSC > jsx > Javascript Test > SlotHtml 1`] = `
"import * as React from \\"react\\";
import ContentSlotCode from \\"./content-slot-jsx.raw\\";

export default function SlotCode(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <div>
      <ContentSlotCode
        _context={_context}
        slotTesting={<div>Hello</div>}
      ></ContentSlotCode>
    </div>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > SlotJsx 1`] = `
"import * as React from \\"react\\";
import ContentSlotCode from \\"./content-slot-jsx.raw\\";

export default function SlotCode(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <div>
      <ContentSlotCode slotTesting={<div>Hello</div>} _context={_context} />
    </div>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > SlotNamed 1`] = `
"import * as React from \\"react\\";

export default function SlotCode(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <div slotContext={_context}>
      {props.slotTop}

      {props.slotLeft}
    </div>
  );
}

SlotCode.defaultProps = { slotLeft: \\"Default left\\" };
"
`;

exports[`RSC > jsx > Javascript Test > Stamped.io 1`] = `
"import * as React from \\"react\\";
import { kebabCase } from \\"lodash\\";
import { snakeCase } from \\"lodash\\";

export default function SmileReviews(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    reviews: [],
    name: \\"test\\",
    showReviewPrompt: false,
    kebabCaseValue() {
      return kebabCase(\\"testThat\\");
    },
    snakeCaseValue() {
      return snakeCase(\\"testThis\\");
    },
  };

  return (
    <>
      <div data-user={state.name}>
        <button>Write a review</button>

        {state.showReviewPrompt || \\"asdf\\" ? (
          <>
            <input placeholder=\\"Email\\" />
            <input placeholder=\\"Title\\" className=\\"input-000d4b30\\" />
            <textarea
              placeholder=\\"How was your experience?\\"
              className=\\"textarea-000d4b30\\"
            />
            <button className=\\"button-000d4b30\\">Submit</button>
          </>
        ) : null}

        {state.reviews?.map((review, index) => (
          <div className=\\"review-000d4b30\\" key={review.id}>
            <img className=\\"img-000d4b30\\" src={review.avatar} />

            <div
              className={state.showReviewPrompt ? \\"bg-primary\\" : \\"bg-secondary\\"}
            >
              <div>
                N:
                {index}
              </div>

              <div>{review.author}</div>

              <div>{review.reviewMessage}</div>
            </div>
          </div>
        ))}
      </div>
      <style>{\`.input-000d4b30 {
display: block;
}.textarea-000d4b30 {
display: block;
}.button-000d4b30 {
display: block;
}.review-000d4b30 {
margin: 10px;
padding: 10px;
background: white;
display: flex;
border-radius: 5px;
box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}.img-000d4b30 {
height: 30px;
width: 30px;
margin-right: 10px;
}\`}</style>
    </>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > Submit 1`] = `
"import * as React from \\"react\\";

export default function SubmitButton(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <button type=\\"submit\\" {...props.attributes}>
      {props.text}
    </button>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > Text 1`] = `
"import * as React from \\"react\\";
import { Builder } from \\"@builder.io/sdk\\";

export default function Text(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = { name: \\"Decadef20\\" };

  return (
    <div
      contentEditable={allowEditingText || undefined}
      data-name={{
        test: state.name || \\"any name\\",
      }}
      dangerouslySetInnerHTML={{
        __html:
          props.text ||
          props.content ||
          state.name ||
          '<p class=\\"text-lg\\">my name</p>',
      }}
    />
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > Textarea 1`] = `
"import * as React from \\"react\\";

export default function Textarea(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <textarea
      {...props.attributes}
      placeholder={props.placeholder}
      name={props.name}
      value={props.value}
      defaultValue={props.defaultValue}
    />
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > Video 1`] = `
"import * as React from \\"react\\";

export default function Video(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <video
      preload=\\"none\\"
      {...props.attributes}
      style={{
        width: \\"100%\\",
        height: \\"100%\\",
        ...props.attributes?.style,
        objectFit: props.fit,
        objectPosition: props.position,
        // Hack to get object fit to work as expected and
        // not have the video overflow
        borderRadius: 1,
      }}
      key={props.video || \\"no-src\\"}
      poster={props.posterImage}
      autoplay={props.autoPlay}
      muted={props.muted}
      controls={props.controls}
      loop={props.loop}
    />
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > arrowFunctionInUseStore 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    name: \\"steve\\",
    setName(value) {
      state.name = value;
    },
    updateNameWithArrowFn(value) {
      state.name = value;
    },
  };

  return (
    <div>
      Hello
      {state.name}
    </div>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > basicForwardRef 1`] = `
"import * as React from \\"react\\";

export default function MyBasicForwardRefComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = { name: \\"PatrickJS\\" };

  return (
    <>
      <div>
        <input className=\\"input-346a570f\\" value={state.name} />
      </div>
      <style>{\`.input-346a570f {
color: red;
}\`}</style>
    </>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > basicForwardRefMetadata 1`] = `
"import * as React from \\"react\\";

export default forwardRef(function MyBasicForwardRefComponent(props, inputRef) {
  const _context = { ...props[\\"_context\\"] };

  const state = { name: \\"PatrickJS\\" };

  return (
    <>
      <div>
        <input className=\\"input-52d8b09f\\" value={state.name} />
      </div>
      <style>{\`.input-52d8b09f {
color: red;
}\`}</style>
    </>
  );
});
"
`;

exports[`RSC > jsx > Javascript Test > basicOnUpdateReturn 1`] = `
"import * as React from \\"react\\";

export default function MyBasicOnUpdateReturnComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = { name: \\"PatrickJS\\" };

  return (
    <div>
      Hello!
      {state.name}
    </div>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > class + ClassName + css 1`] = `
"import * as React from \\"react\\";

export default function MyBasicComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <>
      <div className=\\"test2 test div-0a30b052\\">
        Hello! I can run in React, Vue, Solid, or Liquid!
      </div>
      <style>{\`.div-0a30b052 {
padding: 10px;
}\`}</style>
    </>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > class + css 1`] = `
"import * as React from \\"react\\";

export default function MyBasicComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <>
      <div className=\\"test div-3e236934\\">
        Hello! I can run in React, Vue, Solid, or Liquid!
      </div>
      <style>{\`.div-3e236934 {
padding: 10px;
}\`}</style>
    </>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > className + css 1`] = `
"import * as React from \\"react\\";

export default function MyBasicComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <>
      <div className=\\"test div-3e236934\\">
        Hello! I can run in React, Vue, Solid, or Liquid!
      </div>
      <style>{\`.div-3e236934 {
padding: 10px;
}\`}</style>
    </>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > className 1`] = `
"import * as React from \\"react\\";

export default function ClassNameCode(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = { bindings: \\"a binding\\" };

  return (
    <div>
      <div className=\\"no binding\\">Without Binding</div>

      <div className={state.bindings}>With binding</div>
    </div>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > classState 1`] = `
"import * as React from \\"react\\";

export default function MyBasicComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    classState: \\"testClassName\\",
    styleState: {
      color: \\"red\\",
    },
  };

  return (
    <>
      <div
        className={state.classState + \\" div-a140d134\\"}
        style={state.styleState}
      >
        Hello! I can run in React, Vue, Solid, or Liquid!
      </div>
      <style>{\`.div-a140d134 {
padding: 10px;
}\`}</style>
    </>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > componentWithContext 1`] = `
"import * as React from \\"react\\";
import Context1 from \\"@dummy/1\\";
import Context2 from \\"@dummy/2\\";

export default function ComponentWithContext(props) {
  const _context = { ...props[\\"_context\\"] };

  const foo = _context[\\"Context1\\"];

  _context.Context1 = {
    foo: \\"bar\\",
    content() {
      return props.content;
    },
  };

  _context.Context2 = { bar: \\"baz\\" };

  return <>{foo.value}</>;
}
"
`;

exports[`RSC > jsx > Javascript Test > componentWithContextMultiRoot 1`] = `
"import * as React from \\"react\\";
import Context1 from \\"@dummy/1\\";
import Context2 from \\"@dummy/2\\";

export default function ComponentWithContext(props) {
  const _context = { ...props[\\"_context\\"] };

  const foo = _context[\\"Context1\\"];

  _context.Context1 = {
    foo: \\"bar\\",
    content() {
      return props.content;
    },
  };

  _context.Context2 = { bar: \\"baz\\" };

  return (
    <>
      {foo.value}

      <div>other</div>
    </>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > contentState 1`] = `
"import * as React from \\"react\\";
import BuilderContext from \\"@dummy/context.lite\\";

export default function RenderContent(props) {
  const _context = { ...props[\\"_context\\"] };

  _context.BuilderContext = {
    content: props.content,
    registeredComponents: props.customComponents,
  };

  return <div>setting context</div>;
}
"
`;

exports[`RSC > jsx > Javascript Test > defaultProps 1`] = `
"import * as React from \\"react\\";

export default function Button(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <div>
      {props.link ? (
        <>
          <a
            {...props.attributes}
            href={props.link}
            target={props.openLinkInNewTab ? \\"_blank\\" : undefined}
          >
            {props.text}
          </a>
        </>
      ) : null}

      {!props.link ? (
        <>
          <button type=\\"button\\" {...props.attributes}>
            {props.buttonText}
          </button>
        </>
      ) : null}
    </div>
  );
}

Button.defaultProps = {
  text: \\"default text\\",
  link: \\"https://builder.io/\\",
  openLinkInNewTab: false,
  onClick: () => {
    console.log(\\"hi\\");
  },
};
"
`;

exports[`RSC > jsx > Javascript Test > defaultPropsOutsideComponent 1`] = `
"import * as React from \\"react\\";

export default function Button(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <div>
      {props.link ? (
        <>
          <a
            {...props.attributes}
            href={props.link}
            target={props.openLinkInNewTab ? \\"_blank\\" : undefined}
          >
            {props.text}
          </a>
        </>
      ) : null}

      {!props.link ? (
        <>
          <button type=\\"button\\" {...props.attributes}>
            {props.text}
          </button>
        </>
      ) : null}
    </div>
  );
}

Button.defaultProps = {
  text: \\"default text\\",
  link: \\"https://builder.io/\\",
  openLinkInNewTab: false,
  onClick: () => {},
};
"
`;

exports[`RSC > jsx > Javascript Test > defaultValsWithTypes 1`] = `
"import * as React from \\"react\\";

const DEFAULT_VALUES: Props = {
  name: \\"Sami\\",
};

export default function ComponentWithTypes(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <div>
      {\\" \\"}
      Hello
      {props.name || DEFAULT_VALUES.name}
    </div>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > expressionState 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    refToUse: !(props.componentRef instanceof Function)
      ? props.componentRef
      : null,
  };

  return <div>{state.refToUse}</div>;
}
"
`;

exports[`RSC > jsx > Javascript Test > import types 1`] = `
"import * as React from \\"react\\";
import RenderBlock from \\"./builder-render-block.raw\\";

export default function RenderContent(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    getRenderContentProps(block, index) {
      return {
        block: block,
        index: index,
      };
    },
  };

  return (
    <RenderBlock
      {...state.getRenderContentProps(props.renderContentProps.block, 0)}
      _context={_context}
    />
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > multipleOnUpdate 1`] = `
"import * as React from \\"react\\";

export default function MultipleOnUpdate(props) {
  const _context = { ...props[\\"_context\\"] };

  return <div />;
}
"
`;

exports[`RSC > jsx > Javascript Test > multipleOnUpdateWithDeps 1`] = `
"import * as React from \\"react\\";

export default function MultipleOnUpdateWithDeps(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = { a: \\"a\\", b: \\"b\\", c: \\"c\\", d: \\"d\\" };

  return <div />;
}
"
`;

exports[`RSC > jsx > Javascript Test > multipleSpreads 1`] = `
"import * as React from \\"react\\";

export default function MyBasicComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    attrs: {
      hello: \\"world\\",
    },
  };

  return <input {...state.attrs} {...props} />;
}
"
`;

exports[`RSC > jsx > Javascript Test > nestedShow 1`] = `
"import * as React from \\"react\\";

export default function NestedShow(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <>
      {props.conditionA ? (
        <>
          {!props.conditionB ? (
            <>
              <div>if condition A and condition B</div>
            </>
          ) : (
            <div>else-condition-B</div>
          )}
        </>
      ) : (
        <div>else-condition-A</div>
      )}
    </>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > nestedStyles 1`] = `
"import * as React from \\"react\\";

export default function NestedStyles(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <>
      <div className=\\"div-caf6a574\\">Hello world</div>
      <style>{\`.div-caf6a574 {
display: flex;
foo: var(--bar);
}@media (max-width: env(--mobile)) { .div-caf6a574 {   display: block; } }.div-caf6a574:hover {
display: flex;
}.div-caf6a574 .nested-selector {
display: grid;
}\`}</style>
    </>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > onInit & onMount 1`] = `
"import * as React from \\"react\\";
import { useEffect } from \\"react\\";

export default function OnInit(props) {
  const _context = { ...props[\\"_context\\"] };

  useEffect(() => {
    console.log(\\"onInit\\");
  }, []);

  return <div />;
}
"
`;

exports[`RSC > jsx > Javascript Test > onInit 1`] = `
"import * as React from \\"react\\";
import { useEffect } from \\"react\\";

export const defaultValues = {
  name: \\"PatrickJS\\",
};

export default function OnInit(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = { name: \\"\\" };

  useEffect(() => {
    state.name = defaultValues.name || props.name;
    console.log(\\"set defaults with props\\");
  }, []);

  return (
    <div>
      Default name defined by parent
      {state.name}
    </div>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > onMount 1`] = `
"import * as React from \\"react\\";

export default function Comp(props) {
  const _context = { ...props[\\"_context\\"] };

  return <div />;
}
"
`;

exports[`RSC > jsx > Javascript Test > onUpdate 1`] = `
"import * as React from \\"react\\";

export default function OnUpdate(props) {
  const _context = { ...props[\\"_context\\"] };

  return <div />;
}
"
`;

exports[`RSC > jsx > Javascript Test > onUpdateWithDeps 1`] = `
"import * as React from \\"react\\";

export default function OnUpdateWithDeps(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = { a: \\"a\\", b: \\"b\\" };

  return <div />;
}
"
`;

exports[`RSC > jsx > Javascript Test > preserveExportOrLocalStatement 1`] = `
"import * as React from \\"react\\";

const b = 3;
const foo = () => {};
export const a = 3;
export const bar = () => {};
export function run<T>(value: T) {}

export default function MyBasicComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  return <div />;
}
"
`;

exports[`RSC > jsx > Javascript Test > preserveTyping 1`] = `
"import * as React from \\"react\\";

export default function MyBasicComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <div>
      Hello! I can run in React, Vue, Solid, or Liquid!
      {props.name}
    </div>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > propsDestructure 1`] = `
"import * as React from \\"react\\";

export default function MyBasicComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = { name: \\"Decadef20\\" };

  return (
    <div>
      {props.children}
      {props.type}
      Hello! I can run in React, Vue, Solid, or Liquid!
    </div>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > propsInterface 1`] = `
"import * as React from \\"react\\";

export default function MyBasicComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <div>
      Hello! I can run in React, Vue, Solid, or Liquid!
      {props.name}
    </div>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > propsType 1`] = `
"import * as React from \\"react\\";

export default function MyBasicComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <div>
      Hello! I can run in React, Vue, Solid, or Liquid!
      {props.name}
    </div>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > referencingFunInsideHook 1`] = `
"import * as React from \\"react\\";

export default function OnUpdate(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    foo: function foo(params) {},
    bar: function bar() {},
    zoo: function zoo() {
      const params = {
        cb: state.bar,
      };
    },
  };

  return <div />;
}
"
`;

exports[`RSC > jsx > Javascript Test > renderBlock 1`] = `
"import * as React from \\"react\\";
import { getBlockActions } from \\"../../functions/get-block-actions.js\\";
import { getBlockComponentOptions } from \\"../../functions/get-block-component-options.js\\";
import { getBlockProperties } from \\"../../functions/get-block-properties.js\\";
import { getBlockTag } from \\"../../functions/get-block-tag.js\\";
import { getProcessedBlock } from \\"../../functions/get-processed-block.js\\";
import { evaluate } from \\"../../functions/evaluate.js\\";
import BlockStyles from \\"./block-styles.lite\\";
import { isEmptyHtmlElement } from \\"./render-block.helpers.js\\";
import RenderRepeatedBlock from \\"./render-repeated-block.lite\\";
import { TARGET } from \\"../../constants/target.js\\";
import { extractTextStyles } from \\"../../functions/extract-text-styles.js\\";
import RenderComponentWithContext from \\"./render-component-with-context.lite\\";
import RenderComponent from \\"./render-component.lite\\";
import { getReactNativeBlockStyles } from \\"../../functions/get-react-native-block-styles.js\\";

export default function RenderBlock(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    get component() {
      const componentName = getProcessedBlock({
        block: props.block,
        state: props.context.state,
        context: props.context.context,
        shouldEvaluateBindings: false,
      }).component?.name;

      if (!componentName) {
        return null;
      }

      const ref = props.context.registeredComponents[componentName];

      if (!ref) {
        // TODO: Public doc page with more info about this message
        console.warn(\`
        Could not find a registered component named \\"\${componentName}\\". 
        If you registered it, is the file that registered it imported by the file that needs to render it?\`);
        return undefined;
      } else {
        return ref;
      }
    },
    get tag() {
      return getBlockTag(state.useBlock);
    },
    get useBlock() {
      return state.repeatItemData
        ? props.block
        : getProcessedBlock({
            block: props.block,
            state: props.context.state,
            context: props.context.context,
            shouldEvaluateBindings: true,
          });
    },
    get actions() {
      return getBlockActions({
        block: state.useBlock,
        state: props.context.state,
        context: props.context.context,
      });
    },
    get attributes() {
      const blockProperties = getBlockProperties(state.useBlock);
      return {
        ...blockProperties,
        ...(TARGET === \\"reactNative\\"
          ? {
              style: getReactNativeBlockStyles({
                block: state.useBlock,
                context: props.context,
                blockStyles: blockProperties.style,
              }),
            }
          : {}),
      };
    },
    get shouldWrap() {
      return !state.component?.noWrap;
    },
    get renderComponentProps() {
      return {
        blockChildren: state.useChildren,
        componentRef: state.component?.component,
        componentOptions: {
          ...getBlockComponentOptions(state.useBlock),

          /**
           * These attributes are passed to the wrapper element when there is one. If \`noWrap\` is set to true, then
           * they are provided to the component itself directly.
           */
          ...(state.shouldWrap
            ? {}
            : {
                attributes: { ...state.attributes, ...state.actions },
              }),
          customBreakpoints: state.childrenContext?.content?.meta?.breakpoints,
        },
        context: state.childrenContext,
      };
    },
    get useChildren() {
      // TO-DO: When should \`canHaveChildren\` dictate rendering?
      // This is currently commented out because some Builder components (e.g. Box) do not have \`canHaveChildren: true\`,
      // but still receive and need to render children.
      // return state.componentInfo?.canHaveChildren ? state.useBlock.children : [];
      return state.useBlock.children ?? [];
    },
    get childrenWithoutParentComponent() {
      /**
       * When there is no \`componentRef\`, there might still be children that need to be rendered. In this case,
       * we render them outside of \`componentRef\`.
       * NOTE: We make sure not to render this if \`repeatItemData\` is non-null, because that means we are rendering an array of
       * blocks, and the children will be repeated within those blocks.
       */
      const shouldRenderChildrenOutsideRef =
        !state.component?.component && !state.repeatItemData;
      return shouldRenderChildrenOutsideRef ? state.useChildren : [];
    },
    get repeatItemData() {
      /**
       * we don't use \`state.useBlock\` here because the processing done within its logic includes evaluating the block's bindings,
       * which will not work if there is a repeat.
       */
      const { repeat, ...blockWithoutRepeat } = props.block;

      if (!repeat?.collection) {
        return undefined;
      }

      const itemsArray = evaluate({
        code: repeat.collection,
        state: props.context.state,
        context: props.context.context,
      });

      if (!Array.isArray(itemsArray)) {
        return undefined;
      }

      const collectionName = repeat.collection.split(\\".\\").pop();
      const itemNameToUse =
        repeat.itemName || (collectionName ? collectionName + \\"Item\\" : \\"item\\");
      const repeatArray = itemsArray.map((item, index) => ({
        context: {
          ...props.context,
          state: {
            ...props.context.state,
            $index: index,
            $item: item,
            [itemNameToUse]: item,
            [\`$\${itemNameToUse}Index\`]: index,
          },
        },
        block: blockWithoutRepeat,
      }));
      return repeatArray;
    },
    get inheritedTextStyles() {
      if (TARGET !== \\"reactNative\\") {
        return {};
      }

      const styles = getReactNativeBlockStyles({
        block: state.useBlock,
        context: props.context,
        blockStyles: state.attributes.style,
      });
      return extractTextStyles(styles);
    },
    get childrenContext() {
      return {
        apiKey: props.context.apiKey,
        state: props.context.state,
        content: props.context.content,
        context: props.context.context,
        registeredComponents: props.context.registeredComponents,
        inheritedStyles: state.inheritedTextStyles,
      };
    },
    get renderComponentTag() {
      if (TARGET === \\"reactNative\\") {
        return RenderComponentWithContext;
      } else if (TARGET === \\"vue3\\") {
        // vue3 expects a string for the component tag
        return \\"RenderComponent\\";
      } else {
        return RenderComponent;
      }
    },
    componentInfo: null,
  };

  const RenderComponentTagRef = state.renderComponentTag;
  const TagRef = state.tag;

  return (
    <>
      {state.shouldWrap ? (
        <>
          {isEmptyHtmlElement(state.tag) ? (
            <>
              <TagRef {...state.attributes} {...state.actions} />
            </>
          ) : null}
          {!isEmptyHtmlElement(state.tag) && state.repeatItemData ? (
            <>
              {state.repeatItemData?.map((data, index) => (
                <RenderRepeatedBlock
                  key={index}
                  repeatContext={data.context}
                  block={data.block}
                  _context={_context}
                />
              ))}
            </>
          ) : null}
          {!isEmptyHtmlElement(state.tag) && !state.repeatItemData ? (
            <>
              <TagRef {...state.attributes} {...state.actions}>
                <RenderComponentTagRef
                  {...state.renderComponentProps}
                  _context={_context}
                />

                {state.childrenWithoutParentComponent?.map((child) => (
                  <RenderBlock
                    key={\\"render-block-\\" + child.id}
                    block={child}
                    context={state.childrenContext}
                    _context={_context}
                  />
                ))}

                {state.childrenWithoutParentComponent?.map((child) => (
                  <BlockStyles
                    key={\\"block-style-\\" + child.id}
                    block={child}
                    context={state.childrenContext}
                    _context={_context}
                  />
                ))}
              </TagRef>
            </>
          ) : null}
        </>
      ) : (
        <RenderComponentTagRef
          {...state.renderComponentProps}
          _context={_context}
        />
      )}
    </>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > renderContentExample 1`] = `
"import * as React from \\"react\\";
import {
  sendComponentsToVisualEditor,
  dispatchNewContentToVisualEditor,
  trackClick,
} from \\"@dummy/injection-js\\";
import BuilderContext from \\"@dummy/context.lite\\";
import RenderBlocks from \\"@dummy/RenderBlocks.lite.tsx\\";

export default function RenderContent(props) {
  const _context = { ...props[\\"_context\\"] };

  _context.BuilderContext = {
    get content() {
      return 3;
    },
    get registeredComponents() {
      return 4;
    },
  };

  return (
    <>
      <div className=\\"div-a387715c\\">
        <RenderBlocks blocks={props.content.blocks} _context={_context} />
      </div>
      <style>{\`.div-a387715c {
display: flex;
flex-direction: columns;
}\`}</style>
    </>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > rootFragmentMultiNode 1`] = `
"import * as React from \\"react\\";

export default function Button(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <>
      {props.link ? (
        <>
          <a
            {...props.attributes}
            href={props.link}
            target={props.openLinkInNewTab ? \\"_blank\\" : undefined}
          >
            {props.text}
          </a>
        </>
      ) : null}

      {!props.link ? (
        <>
          <button type=\\"button\\" {...props.attributes}>
            {props.text}
          </button>
        </>
      ) : null}
    </>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > rootShow 1`] = `
"import * as React from \\"react\\";

export default function RenderStyles(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <>
      {props.foo === \\"bar\\" ? (
        <>
          <div>Bar</div>
        </>
      ) : (
        <div>Foo</div>
      )}
    </>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > self-referencing component 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <div>
      {props.name}

      {props.name === \\"Batman\\" ? (
        <>
          <MyComponent name=\\"Bruce Wayne\\" _context={_context} />
        </>
      ) : null}
    </div>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > self-referencing component with children 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <div>
      {props.name}

      {props.children}

      {props.name === \\"Batman\\" ? (
        <>
          <MyComponent name=\\"Bruce\\" _context={_context}>
            <div>Wayne</div>
          </MyComponent>
        </>
      ) : null}
    </div>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > showWithFor 1`] = `
"import * as React from \\"react\\";

export default function NestedShow(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <>
      {props.conditionA ? (
        <>
          {props.items?.map((item, idx) => (
            <div key={idx}>{item}</div>
          ))}
        </>
      ) : (
        <div>else-condition-A</div>
      )}
    </>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > spreadAttrs 1`] = `
"import * as React from \\"react\\";

export default function MyBasicComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  return <input {...attrs} />;
}
"
`;

exports[`RSC > jsx > Javascript Test > spreadNestedProps 1`] = `
"import * as React from \\"react\\";

export default function MyBasicComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  return <input {...props.nested} />;
}
"
`;

exports[`RSC > jsx > Javascript Test > spreadProps 1`] = `
"import * as React from \\"react\\";

export default function MyBasicComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  return <input {...props} />;
}
"
`;

exports[`RSC > jsx > Javascript Test > subComponent 1`] = `
"import * as React from \\"react\\";
import Foo from \\"./foo-sub-component.lite\\";

export default function SubComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  return <Foo _context={_context} />;
}
"
`;

exports[`RSC > jsx > Javascript Test > svgComponent 1`] = `
"import * as React from \\"react\\";

export default function SvgComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <svg
      fill=\\"none\\"
      role=\\"img\\"
      viewBox={\\"0 0 \\" + 42 + \\" \\" + 42}
      width={42}
      height={42}
    >
      <defs>
        <filter id=\\"prefix__filter0_f\\" filterUnits=\\"userSpaceOnUse\\">
          <feFlood result=\\"BackgroundImageFix\\" _context={_context} />

          <feBlend
            in=\\"SourceGraphic\\"
            in2=\\"BackgroundImageFix\\"
            result=\\"shape\\"
            _context={_context}
          />

          <feGaussianBlur
            result=\\"effect1_foregroundBlur\\"
            stdDeviation={7}
            _context={_context}
          />
        </filter>
      </defs>
    </svg>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > typeDependency 1`] = `
"import * as React from \\"react\\";

export default function TypeDependency(props) {
  const _context = { ...props[\\"_context\\"] };

  return <div>{props.foo}</div>;
}
"
`;

exports[`RSC > jsx > Javascript Test > use-style 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <>
      <button type=\\"button\\">Button</button>
      <style>{\`

      button {
          background: blue;
          color: white;
          font-size: 12px;
          outline: 1px solid black;
      }
  \`}</style>
    </>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > use-style-and-css 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <>
      <button type=\\"button\\" className=\\"button-4fd6647d\\">
        Button
      </button>
      <style>{\`.button-4fd6647d {
background: blue;
color: white;
}

      button {
          font-size: 12px;
          outline: 1px solid black;
      }
  \`}</style>
    </>
  );
}
"
`;

exports[`RSC > jsx > Javascript Test > use-style-outside-component 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <>
      <button type=\\"button\\">Button</button>
      <style>{\`

button {
    background: blue;
    color: white;
    font-size: 12px;
    outline: 1px solid black;
}
\`}</style>
    </>
  );
}
"
`;

exports[`RSC > jsx > Remove Internal mitosis package 1`] = `
"import * as React from \\"react\\";

export default function MyBasicComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = { name: \\"PatrickJS\\" };

  return (
    <div>
      Hello
      {state.name}! I can run in React, Qwik, Vue, Solid, or Liquid!
    </div>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > AdvancedRef 1`] = `
"import * as React from \\"react\\";

export interface Props {
  showInput: boolean;
}

export default function MyBasicRefComponent(props: Props) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    name: \\"PatrickJS\\",
    onBlur: function onBlur() {
      // Maintain focus
      inputRef.focus();
    },
    lowerCaseName: function lowerCaseName() {
      return state.name.toLowerCase();
    },
  };

  return (
    <>
      <div>
        {props.showInput ? (
          <>
            <input className=\\"input-37c780bb\\" value={state.name} />

            <label htmlFor=\\"cars\\">Choose a car:</label>

            <select name=\\"cars\\" id=\\"cars\\">
              <option value=\\"supra\\">GR Supra</option>

              <option value=\\"86\\">GR 86</option>
            </select>
          </>
        ) : null}
        Hello
        {state.lowerCaseName()}! I can run in React, Qwik, Vue, Solid, or Web
        Component!
      </div>
      <style>{\`.input-37c780bb {
color: red;
}\`}</style>
    </>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > Basic 1`] = `
"import * as React from \\"react\\";

export interface MyBasicComponentProps {
  id: string;
}

export const DEFAULT_VALUES = {
  name: \\"Steve\\",
};

export default function MyBasicComponent(props: MyBasicComponentProps) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    name: \\"Steve\\",
    underscore_fn_name() {
      return \\"bar\\";
    },
    age: 1,
    sports: [\\"\\"],
  };

  return (
    <>
      <div className=\\"test div-251ed544\\">
        <input value={DEFAULT_VALUES.name || state.name} />
        Hello! I can run in React, Vue, Solid, or Liquid!
      </div>
      <style>{\`.div-251ed544 {
padding: 10px;
}\`}</style>
    </>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > Basic Context 1`] = `
"import * as React from \\"react\\";
import { useEffect } from \\"react\\";
import { Injector, createInjector, MyService } from \\"@dummy/injection-js\\";

export default function MyBasicComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    name: \\"PatrickJS\\",
    onChange: function onChange() {
      const change = myService.method(\\"change\\");
      console.log(change);
    },
  };

  const myService = _context[\\"MyService\\"];

  useEffect(() => {
    const hi = myService.method(\\"hi\\");
    console.log(hi);
  }, []);

  return (
    <div>
      {myService.method(\\"hello\\") + state.name}
      Hello! I can run in React, Vue, Solid, or Liquid!
      <input />
    </div>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > Basic OnMount Update 1`] = `
"import * as React from \\"react\\";
import { useEffect } from \\"react\\";

export interface Props {
  hi: string;
  bye: string;
}

export default function MyBasicOnMountUpdateComponent(props: Props) {
  const _context = { ...props[\\"_context\\"] };

  const state = { name: \\"PatrickJS\\", names: [\\"Steve\\", \\"PatrickJS\\"] };

  useEffect(() => {
    state.name = \\"PatrickJS onInit\\" + props.hi;
  }, []);

  return (
    <div>
      Hello
      {state.name}
    </div>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > Basic Outputs 1`] = `
"import * as React from \\"react\\";

export default function MyBasicOutputsComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  const state = { name: \\"PatrickJS\\" };

  return <div />;
}
"
`;

exports[`RSC > jsx > Typescript Test > Basic Outputs Meta 1`] = `
"import * as React from \\"react\\";

export default function MyBasicOutputsComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  const state = { name: \\"PatrickJS\\" };

  return <div />;
}
"
`;

exports[`RSC > jsx > Typescript Test > BasicAttribute 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  return <input autoCapitalize=\\"on\\" autoComplete=\\"on\\" spellCheck={true} />;
}
"
`;

exports[`RSC > jsx > Typescript Test > BasicBooleanAttribute 1`] = `
"import * as React from \\"react\\";

type Props = {
  children: any;
  type: string;
};
import MyBooleanAttributeComponent from \\"./basic-boolean-attribute-component.raw\\";

export default function MyBooleanAttribute(props: Props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <div>
      {props.children}

      {props.type}

      <MyBooleanAttributeComponent toggle={true} _context={_context} />

      <MyBooleanAttributeComponent toggle={true} _context={_context} />

      <MyBooleanAttributeComponent list={null} _context={_context} />
    </div>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > BasicChildComponent 1`] = `
"import * as React from \\"react\\";
import MyBasicComponent from \\"./basic.raw\\";
import MyBasicOnMountUpdateComponent from \\"./basic-onMount-update.raw\\";

export default function MyBasicChildComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  const state = { name: \\"Steve\\", dev: \\"PatrickJS\\" };

  return (
    <div>
      <MyBasicComponent id={state.dev} _context={_context} />

      <div>
        <MyBasicOnMountUpdateComponent
          hi={state.name}
          bye={state.dev}
          _context={_context}
        />
      </div>
    </div>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > BasicFor 1`] = `
"import * as React from \\"react\\";

export default function MyBasicForComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  const state = { name: \\"PatrickJS\\", names: [\\"Steve\\", \\"PatrickJS\\"] };

  return (
    <div>
      {state.names?.map((person) => (
        <>
          <input value={state.name} />
          Hello
          {person}! I can run in Qwik, Web Component, React, Vue, Solid, or
          Liquid!
        </>
      ))}
    </div>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > BasicRef 1`] = `
"import * as React from \\"react\\";

export interface Props {
  showInput: boolean;
}

export default function MyBasicRefComponent(props: Props) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    name: \\"PatrickJS\\",
    onBlur: function onBlur() {
      // Maintain focus
      inputRef.focus();
    },
    lowerCaseName: function lowerCaseName() {
      return state.name.toLowerCase();
    },
  };

  return (
    <>
      <div>
        {props.showInput ? (
          <>
            <input className=\\"input-37c780bb\\" value={state.name} />

            <label htmlFor=\\"cars\\">Choose a car:</label>

            <select name=\\"cars\\" id=\\"cars\\">
              <option value=\\"supra\\">GR Supra</option>

              <option value=\\"86\\">GR 86</option>
            </select>
          </>
        ) : null}
        Hello
        {state.lowerCaseName()}! I can run in React, Qwik, Vue, Solid, or Web
        Component!
      </div>
      <style>{\`.input-37c780bb {
color: red;
}\`}</style>
    </>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > BasicRefAssignment 1`] = `
"import * as React from \\"react\\";

export interface Props {
  showInput: boolean;
}

export default function MyBasicRefAssignmentComponent(props: Props) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    handlerClick: function handlerClick(event) {
      event.preventDefault();
      console.log(\\"current value\\", holdValueRef);
      holdValueRef = holdValueRef + \\"JS\\";
    },
  };

  return (
    <div>
      <button>Click</button>
    </div>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > BasicRefPrevious 1`] = `
"import * as React from \\"react\\";

export interface Props {
  showInput: boolean;
}

export function usePrevious<T>(value: T) {
  // The ref object is a generic container whose current property is mutable ...
  // ... and can hold any value, similar to an instance property on a class
  let ref = useRef<T>(null); // Store current value in ref

  onUpdate(() => {
    ref = value;
  }, [value]); // Only re-run if value changes
  // Return previous value (happens before update in useEffect above)

  return ref;
}

export default function MyPreviousComponent(props: Props) {
  const _context = { ...props[\\"_context\\"] };

  const state = { count: 0 };

  return (
    <div>
      <h1>
        Now:
        {state.count}, before:
        {prevCount}
      </h1>

      <button>Increment</button>
    </div>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > Button 1`] = `
"import * as React from \\"react\\";

export interface ButtonProps {
  attributes?: any;
  text?: string;
  link?: string;
  openLinkInNewTab?: boolean;
}

export default function Button(props: ButtonProps) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <div>
      {props.link ? (
        <>
          <a
            {...props.attributes}
            href={props.link}
            target={props.openLinkInNewTab ? \\"_blank\\" : undefined}
          >
            {props.text}
          </a>
        </>
      ) : null}

      {!props.link ? (
        <>
          <button type=\\"button\\" {...props.attributes}>
            {props.text}
          </button>
        </>
      ) : null}
    </div>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > Columns 1`] = `
"import * as React from \\"react\\";

type Column = {
  content: any; // TODO: Implement this when support for dynamic CSS lands

  width?: number;
};
export interface ColumnProps {
  columns?: Column[]; // TODO: Implement this when support for dynamic CSS lands

  space?: number; // TODO: Implement this when support for dynamic CSS lands

  stackColumnsAt?: \\"tablet\\" | \\"mobile\\" | \\"never\\"; // TODO: Implement this when support for dynamic CSS lands

  reverseColumnsWhenStacked?: boolean;
}

export default function Column(props: ColumnProps) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    getColumns() {
      return props.columns || [];
    },
    getGutterSize() {
      return typeof props.space === \\"number\\" ? props.space || 0 : 20;
    },
    getWidth(index) {
      const columns = state.getColumns();
      return (columns[index] && columns[index].width) || 100 / columns.length;
    },
    getColumnCssWidth(index) {
      const columns = state.getColumns();
      const gutterSize = state.getGutterSize();
      const subtractWidth =
        (gutterSize * (columns.length - 1)) / columns.length;
      return \`calc(\${state.getWidth(index)}% - \${subtractWidth}px)\`;
    },
  };

  return (
    <>
      <div className=\\"builder-columns div-033a66b8\\">
        {props.columns?.map((column, index) => (
          <div className=\\"builder-column div-033a66b8-2\\">
            {column.content}

            {index}
          </div>
        ))}
      </div>
      <style>{\`.div-033a66b8 {
display: flex;
flex-direction: column;
align-items: stretch;
line-height: normal;
}@media (max-width: 999px) { .div-033a66b8 {   flex-direction: row; } }@media (max-width: 639px) { .div-033a66b8 {   flex-direction: row-reverse; } }.div-033a66b8-2 {
flex-grow: 1;
}\`}</style>
    </>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > ContentSlotHtml 1`] = `
"import * as React from \\"react\\";

type Props = {
  [key: string]: string | JSX.Element;
  slotTesting: JSX.Element;
};

export default function ContentSlotCode(props: Props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <div>
      {props.slotTesting}

      <div>
        <hr />
      </div>

      <div slotContext={_context}></div>
    </div>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > ContentSlotJSX 1`] = `
"import * as React from \\"react\\";

type Props = {
  [key: string]: string | JSX.Element;
};

export default function ContentSlotJsxCode(props: Props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <div>
      {props.slotTesting ? (
        <>
          <div>{props.slotTesting}</div>
        </>
      ) : null}

      <div>
        <hr />
      </div>

      <div>{props.children}</div>
    </div>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > CustomCode 1`] = `
"import * as React from \\"react\\";

export interface CustomCodeProps {
  code: string;
  replaceNodes?: boolean;
}

export default function CustomCode(props: CustomCodeProps) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    scriptsInserted: [],
    scriptsRun: [],
    findAndRunScripts() {
      // TODO: Move this function to standalone one in '@builder.io/utils'
      if (elem && typeof window !== \\"undefined\\") {
        /** @type {HTMLScriptElement[]} */
        const scripts = elem.getElementsByTagName(\\"script\\");

        for (let i = 0; i < scripts.length; i++) {
          const script = scripts[i];

          if (script.src) {
            if (state.scriptsInserted.includes(script.src)) {
              continue;
            }

            state.scriptsInserted.push(script.src);
            const newScript = document.createElement(\\"script\\");
            newScript.async = true;
            newScript.src = script.src;
            document.head.appendChild(newScript);
          } else if (
            !script.type ||
            [
              \\"text/javascript\\",
              \\"application/javascript\\",
              \\"application/ecmascript\\",
            ].includes(script.type)
          ) {
            if (state.scriptsRun.includes(script.innerText)) {
              continue;
            }

            try {
              state.scriptsRun.push(script.innerText);
              new Function(script.innerText)();
            } catch (error) {
              console.warn(\\"\`CustomCode\`: Error running script:\\", error);
            }
          }
        }
      }
    },
  };

  return (
    <div
      className={
        \\"builder-custom-code\\" + (props.replaceNodes ? \\" replace-nodes\\" : \\"\\")
      }
      dangerouslySetInnerHTML={{ __html: props.code }}
    />
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > Embed 1`] = `
"import * as React from \\"react\\";

export interface CustomCodeProps {
  code: string;
  replaceNodes?: boolean;
}

export default function CustomCode(props: CustomCodeProps) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    scriptsInserted: [],
    scriptsRun: [],
    findAndRunScripts() {
      // TODO: Move this function to standalone one in '@builder.io/utils'
      if (elem && typeof window !== \\"undefined\\") {
        /** @type {HTMLScriptElement[]} */
        const scripts = elem.getElementsByTagName(\\"script\\");

        for (let i = 0; i < scripts.length; i++) {
          const script = scripts[i];

          if (script.src) {
            if (state.scriptsInserted.includes(script.src)) {
              continue;
            }

            state.scriptsInserted.push(script.src);
            const newScript = document.createElement(\\"script\\");
            newScript.async = true;
            newScript.src = script.src;
            document.head.appendChild(newScript);
          } else if (
            !script.type ||
            [
              \\"text/javascript\\",
              \\"application/javascript\\",
              \\"application/ecmascript\\",
            ].includes(script.type)
          ) {
            if (state.scriptsRun.includes(script.innerText)) {
              continue;
            }

            try {
              state.scriptsRun.push(script.innerText);
              new Function(script.innerText)();
            } catch (error) {
              console.warn(\\"\`CustomCode\`: Error running script:\\", error);
            }
          }
        }
      }
    },
  };

  return (
    <div
      className={
        \\"builder-custom-code\\" + (props.replaceNodes ? \\" replace-nodes\\" : \\"\\")
      }
      dangerouslySetInnerHTML={{ __html: props.code }}
    />
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > Form 1`] = `
"import * as React from \\"react\\";

export interface FormProps {
  attributes?: any;
  name?: string;
  action?: string;
  validate?: boolean;
  method?: string;
  builderBlock?: BuilderElement;
  sendSubmissionsTo?: string;
  sendSubmissionsToEmail?: string;
  sendWithJs?: boolean;
  contentType?: string;
  customHeaders?: {
    [key: string]: string;
  };
  successUrl?: string;
  previewState?: FormState;
  successMessage?: BuilderElement[];
  errorMessage?: BuilderElement[];
  sendingMessage?: BuilderElement[];
  resetFormOnSubmit?: boolean;
  errorMessagePath?: string;
}
export type FormState = \\"unsubmitted\\" | \\"sending\\" | \\"success\\" | \\"error\\";
import { BuilderBlock as BuilderBlockComponent } from \\"@fake\\";
import { Builder, builder } from \\"@builder.io/sdk\\";
import { BuilderBlocks } from \\"@fake\\";
import { set } from \\"@fake\\";
import { get } from \\"@fake\\";

export default function FormComponent(props: FormProps) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    formState: \\"unsubmitted\\",
    responseData: null,
    formErrorMessage: \\"\\",
    get submissionState() {
      return (Builder.isEditing && props.previewState) || state.formState;
    },
    onSubmit(event) {
      const sendWithJs =
        props.sendWithJs || props.sendSubmissionsTo === \\"email\\";

      if (props.sendSubmissionsTo === \\"zapier\\") {
        event.preventDefault();
      } else if (sendWithJs) {
        if (!(props.action || props.sendSubmissionsTo === \\"email\\")) {
          event.preventDefault();
          return;
        }

        event.preventDefault();
        const el = event.currentTarget;
        const headers = props.customHeaders || {};
        let body;
        const formData = new FormData(el); // TODO: maybe support null

        const formPairs = Array.from(
          event.currentTarget.querySelectorAll(\\"input,select,textarea\\")
        )
          .filter((el) => !!el.name)
          .map((el) => {
            let value;
            const key = el.name;

            if (el instanceof HTMLInputElement) {
              if (el.type === \\"radio\\") {
                if (el.checked) {
                  value = el.name;
                  return {
                    key,
                    value,
                  };
                }
              } else if (el.type === \\"checkbox\\") {
                value = el.checked;
              } else if (el.type === \\"number\\" || el.type === \\"range\\") {
                const num = el.valueAsNumber;

                if (!isNaN(num)) {
                  value = num;
                }
              } else if (el.type === \\"file\\") {
                // TODO: one vs multiple files
                value = el.files;
              } else {
                value = el.value;
              }
            } else {
              value = el.value;
            }

            return {
              key,
              value,
            };
          });
        let contentType = props.contentType;

        if (props.sendSubmissionsTo === \\"email\\") {
          contentType = \\"multipart/form-data\\";
        }

        Array.from(formPairs).forEach(({ value }) => {
          if (
            value instanceof File ||
            (Array.isArray(value) && value[0] instanceof File) ||
            value instanceof FileList
          ) {
            contentType = \\"multipart/form-data\\";
          }
        }); // TODO: send as urlEncoded or multipart by default
        // because of ease of use and reliability in browser API
        // for encoding the form?

        if (contentType !== \\"application/json\\") {
          body = formData;
        } else {
          // Json
          const json = {};
          Array.from(formPairs).forEach(({ value, key }) => {
            set(json, key, value);
          });
          body = JSON.stringify(json);
        }

        if (contentType && contentType !== \\"multipart/form-data\\") {
          if (
            /* Zapier doesn't allow content-type header to be sent from browsers */ !(
              sendWithJs && props.action?.includes(\\"zapier.com\\")
            )
          ) {
            headers[\\"content-type\\"] = contentType;
          }
        }
        const presubmitEvent = new CustomEvent(\\"presubmit\\", {
          detail: { body },
        });
        if (formRef) {
          formRef.dispatchEvent(presubmitEvent);
          if (presubmitEvent.defaultPrevented) {
            return;
          }
        }
        state.formState = \\"sending\\";
        const formUrl = \`\${
          builder.env === \\"dev\\" ? \\"http://localhost:5000\\" : \\"https://builder.io\\"
        }/api/v1/form-submit?apiKey=\${builder.apiKey}&to=\${btoa(
          props.sendSubmissionsToEmail || \\"\\"
        )}&name=\${encodeURIComponent(props.name || \\"\\")}\`;
        fetch(
          props.sendSubmissionsTo === \\"email\\"
            ? formUrl
            : props.action /* TODO: throw error if no action URL */,
          { body, headers, method: props.method || \\"post\\" }
        ).then(
          async (res) => {
            let body;
            const contentType = res.headers.get(\\"content-type\\");
            if (contentType && contentType.indexOf(\\"application/json\\") !== -1) {
              body = await res.json();
            } else {
              body = await res.text();
            }
            if (!res.ok && props.errorMessagePath) {
              /* TODO: allow supplying an error formatter function */ let message =
                get(body, props.errorMessagePath);
              if (message) {
                if (typeof message !== \\"string\\") {
                  /* TODO: ideally convert json to yaml so it woul dbe like            error: - email has been taken */ message =
                    JSON.stringify(message);
                }
                state.formErrorMessage = message;
              }
            }
            state.responseData = body;
            state.formState = res.ok ? \\"success\\" : \\"error\\";
            if (res.ok) {
              const submitSuccessEvent = new CustomEvent(\\"submit:success\\", {
                detail: { res, body },
              });
              if (formRef) {
                formRef.dispatchEvent(submitSuccessEvent);
                if (submitSuccessEvent.defaultPrevented) {
                  return;
                }
                /* TODO: option to turn this on/off? */ if (
                  props.resetFormOnSubmit !== false
                ) {
                  formRef.reset();
                }
              }
              /* TODO: client side route event first that can be preventDefaulted */ if (
                props.successUrl
              ) {
                if (formRef) {
                  const event = new CustomEvent(\\"route\\", {
                    detail: { url: props.successUrl },
                  });
                  formRef.dispatchEvent(event);
                  if (!event.defaultPrevented) {
                    location.href = props.successUrl;
                  }
                } else {
                  location.href = props.successUrl;
                }
              }
            }
          },
          (err) => {
            const submitErrorEvent = new CustomEvent(\\"submit:error\\", {
              detail: { error: err },
            });
            if (formRef) {
              formRef.dispatchEvent(submitErrorEvent);
              if (submitErrorEvent.defaultPrevented) {
                return;
              }
            }
            state.responseData = err;
            state.formState = \\"error\\";
          }
        );
      }
    },
  };
  return (
    <>
      {\\" \\"}
      <form
        validate={props.validate}
        action={!props.sendWithJs && props.action}
        method={props.method}
        name={props.name}
        {...props.attributes}
      >
        {\\" \\"}
        {props.builderBlock && props.builderBlock.children ? (
          <>
            {props.builderBlock?.children?.map((block, index) => (
              <BuilderBlockComponent
                key={block.id}
                block={block}
                index={index}
                _context={_context}
              />
            ))}
          </>
        ) : null}{\\" \\"}
        {state.submissionState === \\"error\\" ? (
          <>
            <BuilderBlocks
              dataPath=\\"errorMessage\\"
              blocks={props.errorMessage}
              _context={_context}
            />
          </>
        ) : null}{\\" \\"}
        {state.submissionState === \\"sending\\" ? (
          <>
            <BuilderBlocks
              dataPath=\\"sendingMessage\\"
              blocks={props.sendingMessage}
              _context={_context}
            />
          </>
        ) : null}{\\" \\"}
        {state.submissionState === \\"error\\" && state.responseData ? (
          <>
            <pre className=\\"builder-form-error-text pre-170708b2\\">
              {\\" \\"}
              {JSON.stringify(state.responseData, null, 2)}{\\" \\"}
            </pre>
          </>
        ) : null}{\\" \\"}
        {state.submissionState === \\"success\\" ? (
          <>
            <BuilderBlocks
              dataPath=\\"successMessage\\"
              blocks={props.successMessage}
              _context={_context}
            />
          </>
        ) : null}{\\" \\"}
      </form>{\\" \\"}
      <style>{\`.pre-170708b2 { padding: 10px; color: red; text-align: center; }\`}</style>{\\" \\"}
    </>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > Image 1`] = `
"import * as React from \\"react\\";

// TODO: AMP Support?
export interface ImageProps {
  _class?: string;
  image: string;
  sizes?: string;
  lazy?: boolean;
  height?: number;
  width?: number;
  altText?: string;
  backgroundSize?: string;
  backgroundPosition?: string; // TODO: Support generating Builder.io and or Shopify \`srcset\`s when needed

  srcset?: string; // TODO: Implement support for custom aspect ratios

  aspectRatio?: number; // TODO: This might not work as expected in terms of positioning

  children?: any;
}

export default function Image(props: ImageProps) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    scrollListener: null,
    imageLoaded: false,
    setLoaded() {
      state.imageLoaded = true;
    },
    useLazyLoading() {
      // TODO: Add more checks here, like testing for real web browsers
      return !!props.lazy && isBrowser();
    },
    isBrowser: function isBrowser() {
      return (
        typeof window !== \\"undefined\\" &&
        window.navigator.product != \\"ReactNative\\"
      );
    },
    load: false,
  };

  return (
    <>
      <div>
        <picture>
          {!state.useLazyLoading() || state.load ? (
            <>
              <img
                alt={props.altText}
                aria-role={props.altText ? \\"presentation\\" : undefined}
                className={
                  \\"builder-image\\" +
                  (props._class ? \\" \\" + props._class : \\"\\") +
                  \\" img-ccac6a98\\"
                }
                src={props.image}
                srcset={props.srcset}
                sizes={props.sizes}
              />
            </>
          ) : null}

          <source srcset={props.srcset} />
        </picture>

        {props.children}
      </div>
      <style>{\`.img-ccac6a98 {
opacity: 1;
transition: opacity 0.2s ease-in-out;
object-fit: cover;
object-position: center;
}\`}</style>
    </>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > Image State 1`] = `
"import * as React from \\"react\\";

export default function ImgStateComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  const state = { canShow: true, images: [\\"http://example.com/qwik.png\\"] };

  return (
    <div>
      {state.images?.map((item, itemIndex) => (
        <>
          <img className=\\"custom-class\\" src={item} key={itemIndex} />
        </>
      ))}
    </div>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > Img 1`] = `
"import * as React from \\"react\\";

export interface ImgProps {
  attributes?: any;
  imgSrc?: string;
  altText?: string;
  backgroundSize?: \\"cover\\" | \\"contain\\";
  backgroundPosition?:
    | \\"center\\"
    | \\"top\\"
    | \\"left\\"
    | \\"right\\"
    | \\"bottom\\"
    | \\"top left\\"
    | \\"top right\\"
    | \\"bottom left\\"
    | \\"bottom right\\";
}

import { Builder } from \\"@builder.io/sdk\\";

export default function ImgComponent(props: ImgProps) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <img
      style={{
        objectFit: props.backgroundSize || \\"cover\\",
        objectPosition: props.backgroundPosition || \\"center\\",
      }}
      {...props.attributes}
      key={(Builder.isEditing && props.imgSrc) || \\"default-key\\"}
      alt={props.altText}
      src={props.imgSrc}
    />
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > Input 1`] = `
"import * as React from \\"react\\";

export interface FormInputProps {
  type?: string;
  attributes?: any;
  name?: string;
  value?: string;
  placeholder?: string;
  defaultValue?: string;
  required?: boolean;
}

import { Builder } from \\"@builder.io/sdk\\";

export default function FormInputComponent(props: FormInputProps) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <input
      {...props.attributes}
      key={
        Builder.isEditing && props.defaultValue
          ? props.defaultValue
          : \\"default-key\\"
      }
      placeholder={props.placeholder}
      type={props.type}
      name={props.name}
      value={props.value}
      defaultValue={props.defaultValue}
      required={props.required}
    />
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > RawText 1`] = `
"import * as React from \\"react\\";

export interface RawTextProps {
  attributes?: any;
  text?: string; // builderBlock?: any;
}

export default function RawText(props: RawTextProps) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <span
      className={props.attributes?.class || props.attributes?.className}
      dangerouslySetInnerHTML={{ __html: props.text || \\"\\" }}
    />
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > Section 1`] = `
"import * as React from \\"react\\";

export interface SectionProps {
  maxWidth?: number;
  attributes?: any;
  children?: any;
}

export default function SectionComponent(props: SectionProps) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <section
      {...props.attributes}
      style={
        props.maxWidth && typeof props.maxWidth === \\"number\\"
          ? {
              maxWidth: props.maxWidth,
            }
          : undefined
      }
    >
      {props.children}
    </section>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > Select 1`] = `
"import * as React from \\"react\\";

export interface FormSelectProps {
  options?: {
    name?: string;
    value: string;
  }[];
  attributes?: any;
  name?: string;
  value?: string;
  defaultValue?: string;
}

import { Builder } from \\"@builder.io/sdk\\";

export default function SelectComponent(props: FormSelectProps) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <select
      {...props.attributes}
      value={props.value}
      key={
        Builder.isEditing && props.defaultValue
          ? props.defaultValue
          : \\"default-key\\"
      }
      defaultValue={props.defaultValue}
      name={props.name}
    >
      {props.options?.map((option, index) => (
        <option value={option.value} data-index={index}>
          {option.name || option.value}
        </option>
      ))}
    </select>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > SlotDefault 1`] = `
"import * as React from \\"react\\";

type Props = {
  [key: string]: string;
};

export default function SlotCode(props: Props) {
  const _context = { ...props[\\"_context\\"] };

  return <div slotContext={_context}></div>;
}
"
`;

exports[`RSC > jsx > Typescript Test > SlotHtml 1`] = `
"import * as React from \\"react\\";

type Props = {
  [key: string]: string;
};
import ContentSlotCode from \\"./content-slot-jsx.raw\\";

export default function SlotCode(props: Props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <div>
      <ContentSlotCode
        _context={_context}
        slotTesting={<div>Hello</div>}
      ></ContentSlotCode>
    </div>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > SlotJsx 1`] = `
"import * as React from \\"react\\";

type Props = {
  [key: string]: string;
};
import ContentSlotCode from \\"./content-slot-jsx.raw\\";

export default function SlotCode(props: Props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <div>
      <ContentSlotCode slotTesting={<div>Hello</div>} _context={_context} />
    </div>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > SlotNamed 1`] = `
"import * as React from \\"react\\";

type Props = {
  [key: string]: string;
};

export default function SlotCode(props: Props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <div slotContext={_context}>
      {props.slotTop}

      {props.slotLeft}
    </div>
  );
}

SlotCode.defaultProps = { slotLeft: \\"Default left\\" };
"
`;

exports[`RSC > jsx > Typescript Test > Stamped.io 1`] = `
"import * as React from \\"react\\";

type SmileReviewsProps = {
  productId: string;
  apiKey: string;
};
import { kebabCase } from \\"lodash\\";
import { snakeCase } from \\"lodash\\";

export default function SmileReviews(props: SmileReviewsProps) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    reviews: [],
    name: \\"test\\",
    showReviewPrompt: false,
    kebabCaseValue() {
      return kebabCase(\\"testThat\\");
    },
    snakeCaseValue() {
      return snakeCase(\\"testThis\\");
    },
  };

  return (
    <>
      <div data-user={state.name}>
        <button>Write a review</button>

        {state.showReviewPrompt || \\"asdf\\" ? (
          <>
            <input placeholder=\\"Email\\" />
            <input placeholder=\\"Title\\" className=\\"input-000d4b30\\" />
            <textarea
              placeholder=\\"How was your experience?\\"
              className=\\"textarea-000d4b30\\"
            />
            <button className=\\"button-000d4b30\\">Submit</button>
          </>
        ) : null}

        {state.reviews?.map((review, index) => (
          <div className=\\"review-000d4b30\\" key={review.id}>
            <img className=\\"img-000d4b30\\" src={review.avatar} />

            <div
              className={state.showReviewPrompt ? \\"bg-primary\\" : \\"bg-secondary\\"}
            >
              <div>
                N:
                {index}
              </div>

              <div>{review.author}</div>

              <div>{review.reviewMessage}</div>
            </div>
          </div>
        ))}
      </div>
      <style>{\`.input-000d4b30 {
display: block;
}.textarea-000d4b30 {
display: block;
}.button-000d4b30 {
display: block;
}.review-000d4b30 {
margin: 10px;
padding: 10px;
background: white;
display: flex;
border-radius: 5px;
box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}.img-000d4b30 {
height: 30px;
width: 30px;
margin-right: 10px;
}\`}</style>
    </>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > Submit 1`] = `
"import * as React from \\"react\\";

export interface ButtonProps {
  attributes?: any;
  text?: string;
}

export default function SubmitButton(props: ButtonProps) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <button type=\\"submit\\" {...props.attributes}>
      {props.text}
    </button>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > Text 1`] = `
"import * as React from \\"react\\";

export interface TextProps {
  attributes?: any;
  rtlMode: boolean;
  text?: string;
  content?: string;
  builderBlock?: any;
}

import { Builder } from \\"@builder.io/sdk\\";

export default function Text(props: TextProps) {
  const _context = { ...props[\\"_context\\"] };

  const state = { name: \\"Decadef20\\" };

  return (
    <div
      contentEditable={allowEditingText || undefined}
      data-name={{
        test: state.name || \\"any name\\",
      }}
      dangerouslySetInnerHTML={{
        __html:
          props.text ||
          props.content ||
          state.name ||
          '<p class=\\"text-lg\\">my name</p>',
      }}
    />
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > Textarea 1`] = `
"import * as React from \\"react\\";

export interface TextareaProps {
  attributes?: any;
  name?: string;
  value?: string;
  defaultValue?: string;
  placeholder?: string;
}

export default function Textarea(props: TextareaProps) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <textarea
      {...props.attributes}
      placeholder={props.placeholder}
      name={props.name}
      value={props.value}
      defaultValue={props.defaultValue}
    />
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > Video 1`] = `
"import * as React from \\"react\\";

export interface VideoProps {
  attributes?: any;
  video?: string;
  autoPlay?: boolean;
  controls?: boolean;
  muted?: boolean;
  loop?: boolean;
  playsInline?: boolean;
  aspectRatio?: number;
  width?: number;
  height?: number;
  fit?: \\"contain\\" | \\"cover\\" | \\"fill\\";
  position?:
    | \\"center\\"
    | \\"top\\"
    | \\"left\\"
    | \\"right\\"
    | \\"bottom\\"
    | \\"top left\\"
    | \\"top right\\"
    | \\"bottom left\\"
    | \\"bottom right\\";
  posterImage?: string;
  lazyLoad?: boolean;
}

export default function Video(props: VideoProps) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <video
      preload=\\"none\\"
      {...props.attributes}
      style={{
        width: \\"100%\\",
        height: \\"100%\\",
        ...props.attributes?.style,
        objectFit: props.fit,
        objectPosition: props.position,
        // Hack to get object fit to work as expected and
        // not have the video overflow
        borderRadius: 1,
      }}
      key={props.video || \\"no-src\\"}
      poster={props.posterImage}
      autoplay={props.autoPlay}
      muted={props.muted}
      controls={props.controls}
      loop={props.loop}
    />
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > arrowFunctionInUseStore 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    name: \\"steve\\",
    setName(value) {
      state.name = value;
    },
    updateNameWithArrowFn(value) {
      state.name = value;
    },
  };

  return (
    <div>
      Hello
      {state.name}
    </div>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > basicForwardRef 1`] = `
"import * as React from \\"react\\";

export interface Props {
  showInput: boolean;
  inputRef: HTMLInputElement;
}

export default function MyBasicForwardRefComponent(props: Props) {
  const _context = { ...props[\\"_context\\"] };

  const state = { name: \\"PatrickJS\\" };

  return (
    <>
      <div>
        <input className=\\"input-346a570f\\" value={state.name} />
      </div>
      <style>{\`.input-346a570f {
color: red;
}\`}</style>
    </>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > basicForwardRefMetadata 1`] = `
"import * as React from \\"react\\";

export interface Props {
  showInput: boolean;
  inputRef: HTMLInputElement;
}

export default forwardRef(function MyBasicForwardRefComponent(
  props: Props,
  inputRef
) {
  const _context = { ...props[\\"_context\\"] };

  const state = { name: \\"PatrickJS\\" };

  return (
    <>
      <div>
        <input className=\\"input-52d8b09f\\" value={state.name} />
      </div>
      <style>{\`.input-52d8b09f {
color: red;
}\`}</style>
    </>
  );
});
"
`;

exports[`RSC > jsx > Typescript Test > basicOnUpdateReturn 1`] = `
"import * as React from \\"react\\";

export default function MyBasicOnUpdateReturnComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  const state = { name: \\"PatrickJS\\" };

  return (
    <div>
      Hello!
      {state.name}
    </div>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > class + ClassName + css 1`] = `
"import * as React from \\"react\\";

export default function MyBasicComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <>
      <div className=\\"test2 test div-0a30b052\\">
        Hello! I can run in React, Vue, Solid, or Liquid!
      </div>
      <style>{\`.div-0a30b052 {
padding: 10px;
}\`}</style>
    </>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > class + css 1`] = `
"import * as React from \\"react\\";

export default function MyBasicComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <>
      <div className=\\"test div-3e236934\\">
        Hello! I can run in React, Vue, Solid, or Liquid!
      </div>
      <style>{\`.div-3e236934 {
padding: 10px;
}\`}</style>
    </>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > className + css 1`] = `
"import * as React from \\"react\\";

export default function MyBasicComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <>
      <div className=\\"test div-3e236934\\">
        Hello! I can run in React, Vue, Solid, or Liquid!
      </div>
      <style>{\`.div-3e236934 {
padding: 10px;
}\`}</style>
    </>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > className 1`] = `
"import * as React from \\"react\\";

type Props = {
  [key: string]: string | JSX.Element;
  slotTesting: JSX.Element;
};

export default function ClassNameCode(props: Props) {
  const _context = { ...props[\\"_context\\"] };

  const state = { bindings: \\"a binding\\" };

  return (
    <div>
      <div className=\\"no binding\\">Without Binding</div>

      <div className={state.bindings}>With binding</div>
    </div>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > classState 1`] = `
"import * as React from \\"react\\";

export default function MyBasicComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    classState: \\"testClassName\\",
    styleState: {
      color: \\"red\\",
    },
  };

  return (
    <>
      <div
        className={state.classState + \\" div-a140d134\\"}
        style={state.styleState}
      >
        Hello! I can run in React, Vue, Solid, or Liquid!
      </div>
      <style>{\`.div-a140d134 {
padding: 10px;
}\`}</style>
    </>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > componentWithContext 1`] = `
"import * as React from \\"react\\";

export interface ComponentWithContextProps {
  content: string;
}

import Context1 from \\"@dummy/1\\";
import Context2 from \\"@dummy/2\\";

export default function ComponentWithContext(props: ComponentWithContextProps) {
  const _context = { ...props[\\"_context\\"] };

  const foo = _context[\\"Context1\\"];

  _context.Context1 = {
    foo: \\"bar\\",
    content() {
      return props.content;
    },
  };

  _context.Context2 = { bar: \\"baz\\" };

  return <>{foo.value}</>;
}
"
`;

exports[`RSC > jsx > Typescript Test > componentWithContextMultiRoot 1`] = `
"import * as React from \\"react\\";

export interface ComponentWithContextProps {
  content: string;
}

import Context1 from \\"@dummy/1\\";
import Context2 from \\"@dummy/2\\";

export default function ComponentWithContext(props: ComponentWithContextProps) {
  const _context = { ...props[\\"_context\\"] };

  const foo = _context[\\"Context1\\"];

  _context.Context1 = {
    foo: \\"bar\\",
    content() {
      return props.content;
    },
  };

  _context.Context2 = { bar: \\"baz\\" };

  return (
    <>
      {foo.value}

      <div>other</div>
    </>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > contentState 1`] = `
"import * as React from \\"react\\";
import BuilderContext from \\"@dummy/context.lite\\";

export default function RenderContent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  _context.BuilderContext = {
    content: props.content,
    registeredComponents: props.customComponents,
  };

  return <div>setting context</div>;
}
"
`;

exports[`RSC > jsx > Typescript Test > defaultProps 1`] = `
"import * as React from \\"react\\";

export interface ButtonProps {
  attributes?: any;
  text?: string;
  buttonText?: string; // no default value

  link?: string;
  openLinkInNewTab?: boolean;
  onClick?: () => void;
}

export default function Button(props: ButtonProps) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <div>
      {props.link ? (
        <>
          <a
            {...props.attributes}
            href={props.link}
            target={props.openLinkInNewTab ? \\"_blank\\" : undefined}
          >
            {props.text}
          </a>
        </>
      ) : null}

      {!props.link ? (
        <>
          <button type=\\"button\\" {...props.attributes}>
            {props.buttonText}
          </button>
        </>
      ) : null}
    </div>
  );
}

Button.defaultProps = {
  text: \\"default text\\",
  link: \\"https://builder.io/\\",
  openLinkInNewTab: false,
  onClick: () => {
    console.log(\\"hi\\");
  },
};
"
`;

exports[`RSC > jsx > Typescript Test > defaultPropsOutsideComponent 1`] = `
"import * as React from \\"react\\";

export interface ButtonProps {
  attributes?: any;
  text?: string;
  link?: string;
  openLinkInNewTab?: boolean;
  onClick: () => void;
}

export default function Button(props: ButtonProps) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <div>
      {props.link ? (
        <>
          <a
            {...props.attributes}
            href={props.link}
            target={props.openLinkInNewTab ? \\"_blank\\" : undefined}
          >
            {props.text}
          </a>
        </>
      ) : null}

      {!props.link ? (
        <>
          <button type=\\"button\\" {...props.attributes}>
            {props.text}
          </button>
        </>
      ) : null}
    </div>
  );
}

Button.defaultProps = {
  text: \\"default text\\",
  link: \\"https://builder.io/\\",
  openLinkInNewTab: false,
  onClick: () => {},
};
"
`;

exports[`RSC > jsx > Typescript Test > defaultValsWithTypes 1`] = `
"import * as React from \\"react\\";

type Props = {
  name: string;
};

const DEFAULT_VALUES: Props = {
  name: \\"Sami\\",
};

export default function ComponentWithTypes(props: Props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <div>
      {\\" \\"}
      Hello
      {props.name || DEFAULT_VALUES.name}
    </div>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > expressionState 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    refToUse: !(props.componentRef instanceof Function)
      ? props.componentRef
      : null,
  };

  return <div>{state.refToUse}</div>;
}
"
`;

exports[`RSC > jsx > Typescript Test > import types 1`] = `
"import * as React from \\"react\\";

type RenderContentProps = {
  options?: GetContentOptions;
  content: BuilderContent;
  renderContentProps: RenderBlockProps;
};
import RenderBlock from \\"./builder-render-block.raw\\";

export default function RenderContent(props: RenderContentProps) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    getRenderContentProps(block, index) {
      return {
        block: block,
        index: index,
      };
    },
  };

  return (
    <RenderBlock
      {...state.getRenderContentProps(props.renderContentProps.block, 0)}
      _context={_context}
    />
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > multipleOnUpdate 1`] = `
"import * as React from \\"react\\";

export default function MultipleOnUpdate(props: any) {
  const _context = { ...props[\\"_context\\"] };

  return <div />;
}
"
`;

exports[`RSC > jsx > Typescript Test > multipleOnUpdateWithDeps 1`] = `
"import * as React from \\"react\\";

export default function MultipleOnUpdateWithDeps(props: any) {
  const _context = { ...props[\\"_context\\"] };

  const state = { a: \\"a\\", b: \\"b\\", c: \\"c\\", d: \\"d\\" };

  return <div />;
}
"
`;

exports[`RSC > jsx > Typescript Test > multipleSpreads 1`] = `
"import * as React from \\"react\\";

export default function MyBasicComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    attrs: {
      hello: \\"world\\",
    },
  };

  return <input {...state.attrs} {...props} />;
}
"
`;

exports[`RSC > jsx > Typescript Test > nestedShow 1`] = `
"import * as React from \\"react\\";

interface Props {
  conditionA: boolean;
  conditionB: boolean;
}

export default function NestedShow(props: Props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <>
      {props.conditionA ? (
        <>
          {!props.conditionB ? (
            <>
              <div>if condition A and condition B</div>
            </>
          ) : (
            <div>else-condition-B</div>
          )}
        </>
      ) : (
        <div>else-condition-A</div>
      )}
    </>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > nestedStyles 1`] = `
"import * as React from \\"react\\";

export default function NestedStyles(props: any) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <>
      <div className=\\"div-caf6a574\\">Hello world</div>
      <style>{\`.div-caf6a574 {
display: flex;
foo: var(--bar);
}@media (max-width: env(--mobile)) { .div-caf6a574 {   display: block; } }.div-caf6a574:hover {
display: flex;
}.div-caf6a574 .nested-selector {
display: grid;
}\`}</style>
    </>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > onInit & onMount 1`] = `
"import * as React from \\"react\\";
import { useEffect } from \\"react\\";

export default function OnInit(props: any) {
  const _context = { ...props[\\"_context\\"] };

  useEffect(() => {
    console.log(\\"onInit\\");
  }, []);

  return <div />;
}
"
`;

exports[`RSC > jsx > Typescript Test > onInit 1`] = `
"import * as React from \\"react\\";
import { useEffect } from \\"react\\";

type Props = {
  name: string;
};

export const defaultValues = {
  name: \\"PatrickJS\\",
};

export default function OnInit(props: Props) {
  const _context = { ...props[\\"_context\\"] };

  const state = { name: \\"\\" };

  useEffect(() => {
    state.name = defaultValues.name || props.name;
    console.log(\\"set defaults with props\\");
  }, []);

  return (
    <div>
      Default name defined by parent
      {state.name}
    </div>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > onMount 1`] = `
"import * as React from \\"react\\";

export default function Comp(props: any) {
  const _context = { ...props[\\"_context\\"] };

  return <div />;
}
"
`;

exports[`RSC > jsx > Typescript Test > onUpdate 1`] = `
"import * as React from \\"react\\";

export default function OnUpdate(props: any) {
  const _context = { ...props[\\"_context\\"] };

  return <div />;
}
"
`;

exports[`RSC > jsx > Typescript Test > onUpdateWithDeps 1`] = `
"import * as React from \\"react\\";

type Props = {
  size: string;
};

export default function OnUpdateWithDeps(props: Props) {
  const _context = { ...props[\\"_context\\"] };

  const state = { a: \\"a\\", b: \\"b\\" };

  return <div />;
}
"
`;

exports[`RSC > jsx > Typescript Test > preserveExportOrLocalStatement 1`] = `
"import * as React from \\"react\\";

type Types = {
  s: any[];
};
interface IPost {
  len: number;
}
export interface MyBasicComponentProps {
  id: string;
}

const b = 3;
const foo = () => {};
export const a = 3;
export const bar = () => {};
export function run<T>(value: T) {}

export default function MyBasicComponent(props: MyBasicComponentProps) {
  const _context = { ...props[\\"_context\\"] };

  return <div />;
}
"
`;

exports[`RSC > jsx > Typescript Test > preserveTyping 1`] = `
"import * as React from \\"react\\";

export type A = \\"test\\";
export interface C {
  n: \\"test\\";
}
type B = \\"test2\\";
interface D {
  n: \\"test\\";
}
export interface MyBasicComponentProps {
  name: string;
  age?: number;
}

export default function MyBasicComponent(props: MyBasicComponentProps) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <div>
      Hello! I can run in React, Vue, Solid, or Liquid!
      {props.name}
    </div>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > propsDestructure 1`] = `
"import * as React from \\"react\\";

type Props = {
  children: any;
  type: string;
};

export default function MyBasicComponent(props: Props) {
  const _context = { ...props[\\"_context\\"] };

  const state = { name: \\"Decadef20\\" };

  return (
    <div>
      {props.children}
      {props.type}
      Hello! I can run in React, Vue, Solid, or Liquid!
    </div>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > propsInterface 1`] = `
"import * as React from \\"react\\";

interface Person {
  name: string;
  age?: number;
}

export default function MyBasicComponent(props: Person | never) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <div>
      Hello! I can run in React, Vue, Solid, or Liquid!
      {props.name}
    </div>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > propsType 1`] = `
"import * as React from \\"react\\";

type Person = {
  name: string;
  age?: number;
};

export default function MyBasicComponent(props: Person) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <div>
      Hello! I can run in React, Vue, Solid, or Liquid!
      {props.name}
    </div>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > referencingFunInsideHook 1`] = `
"import * as React from \\"react\\";

export default function OnUpdate(props: any) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    foo: function foo(params) {},
    bar: function bar() {},
    zoo: function zoo() {
      const params = {
        cb: state.bar,
      };
    },
  };

  return <div />;
}
"
`;

exports[`RSC > jsx > Typescript Test > renderBlock 1`] = `
"import * as React from \\"react\\";
import type {
  BuilderContextInterface,
  RegisteredComponent,
} from \\"../../context/types.js\\";
import type { BuilderBlock } from \\"../../types/builder-block.js\\";
import type { Nullable } from \\"../../types/typescript.js\\";
import type { RenderComponentProps } from \\"./render-component\\";
import type { RepeatData } from \\"./types.js\\";
export type RenderBlockProps = {
  block: BuilderBlock;
  context: BuilderContextInterface;
};
import { getBlockActions } from \\"../../functions/get-block-actions.js\\";
import { getBlockComponentOptions } from \\"../../functions/get-block-component-options.js\\";
import { getBlockProperties } from \\"../../functions/get-block-properties.js\\";
import { getBlockTag } from \\"../../functions/get-block-tag.js\\";
import { getProcessedBlock } from \\"../../functions/get-processed-block.js\\";
import { evaluate } from \\"../../functions/evaluate.js\\";
import BlockStyles from \\"./block-styles.lite\\";
import { isEmptyHtmlElement } from \\"./render-block.helpers.js\\";
import RenderRepeatedBlock from \\"./render-repeated-block.lite\\";
import { TARGET } from \\"../../constants/target.js\\";
import { extractTextStyles } from \\"../../functions/extract-text-styles.js\\";
import RenderComponentWithContext from \\"./render-component-with-context.lite\\";
import RenderComponent from \\"./render-component.lite\\";
import { getReactNativeBlockStyles } from \\"../../functions/get-react-native-block-styles.js\\";

export default function RenderBlock(props: RenderBlockProps) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    get component() {
      const componentName = getProcessedBlock({
        block: props.block,
        state: props.context.state,
        context: props.context.context,
        shouldEvaluateBindings: false,
      }).component?.name;

      if (!componentName) {
        return null;
      }

      const ref = props.context.registeredComponents[componentName];

      if (!ref) {
        // TODO: Public doc page with more info about this message
        console.warn(\`
        Could not find a registered component named \\"\${componentName}\\". 
        If you registered it, is the file that registered it imported by the file that needs to render it?\`);
        return undefined;
      } else {
        return ref;
      }
    },
    get tag() {
      return getBlockTag(state.useBlock);
    },
    get useBlock() {
      return state.repeatItemData
        ? props.block
        : getProcessedBlock({
            block: props.block,
            state: props.context.state,
            context: props.context.context,
            shouldEvaluateBindings: true,
          });
    },
    get actions() {
      return getBlockActions({
        block: state.useBlock,
        state: props.context.state,
        context: props.context.context,
      });
    },
    get attributes() {
      const blockProperties = getBlockProperties(state.useBlock);
      return {
        ...blockProperties,
        ...(TARGET === \\"reactNative\\"
          ? {
              style: getReactNativeBlockStyles({
                block: state.useBlock,
                context: props.context,
                blockStyles: blockProperties.style,
              }),
            }
          : {}),
      };
    },
    get shouldWrap() {
      return !state.component?.noWrap;
    },
    get renderComponentProps() {
      return {
        blockChildren: state.useChildren,
        componentRef: state.component?.component,
        componentOptions: {
          ...getBlockComponentOptions(state.useBlock),

          /**
           * These attributes are passed to the wrapper element when there is one. If \`noWrap\` is set to true, then
           * they are provided to the component itself directly.
           */
          ...(state.shouldWrap
            ? {}
            : {
                attributes: { ...state.attributes, ...state.actions },
              }),
          customBreakpoints: state.childrenContext?.content?.meta?.breakpoints,
        },
        context: state.childrenContext,
      };
    },
    get useChildren() {
      // TO-DO: When should \`canHaveChildren\` dictate rendering?
      // This is currently commented out because some Builder components (e.g. Box) do not have \`canHaveChildren: true\`,
      // but still receive and need to render children.
      // return state.componentInfo?.canHaveChildren ? state.useBlock.children : [];
      return state.useBlock.children ?? [];
    },
    get childrenWithoutParentComponent() {
      /**
       * When there is no \`componentRef\`, there might still be children that need to be rendered. In this case,
       * we render them outside of \`componentRef\`.
       * NOTE: We make sure not to render this if \`repeatItemData\` is non-null, because that means we are rendering an array of
       * blocks, and the children will be repeated within those blocks.
       */
      const shouldRenderChildrenOutsideRef =
        !state.component?.component && !state.repeatItemData;
      return shouldRenderChildrenOutsideRef ? state.useChildren : [];
    },
    get repeatItemData() {
      /**
       * we don't use \`state.useBlock\` here because the processing done within its logic includes evaluating the block's bindings,
       * which will not work if there is a repeat.
       */
      const { repeat, ...blockWithoutRepeat } = props.block;

      if (!repeat?.collection) {
        return undefined;
      }

      const itemsArray = evaluate({
        code: repeat.collection,
        state: props.context.state,
        context: props.context.context,
      });

      if (!Array.isArray(itemsArray)) {
        return undefined;
      }

      const collectionName = repeat.collection.split(\\".\\").pop();
      const itemNameToUse =
        repeat.itemName || (collectionName ? collectionName + \\"Item\\" : \\"item\\");
      const repeatArray = itemsArray.map((item, index) => ({
        context: {
          ...props.context,
          state: {
            ...props.context.state,
            $index: index,
            $item: item,
            [itemNameToUse]: item,
            [\`$\${itemNameToUse}Index\`]: index,
          },
        },
        block: blockWithoutRepeat,
      }));
      return repeatArray;
    },
    get inheritedTextStyles() {
      if (TARGET !== \\"reactNative\\") {
        return {};
      }

      const styles = getReactNativeBlockStyles({
        block: state.useBlock,
        context: props.context,
        blockStyles: state.attributes.style,
      });
      return extractTextStyles(styles);
    },
    get childrenContext() {
      return {
        apiKey: props.context.apiKey,
        state: props.context.state,
        content: props.context.content,
        context: props.context.context,
        registeredComponents: props.context.registeredComponents,
        inheritedStyles: state.inheritedTextStyles,
      };
    },
    get renderComponentTag() {
      if (TARGET === \\"reactNative\\") {
        return RenderComponentWithContext;
      } else if (TARGET === \\"vue3\\") {
        // vue3 expects a string for the component tag
        return \\"RenderComponent\\";
      } else {
        return RenderComponent;
      }
    },
    componentInfo: null,
  };

  const RenderComponentTagRef = state.renderComponentTag;
  const TagRef = state.tag;

  return (
    <>
      {state.shouldWrap ? (
        <>
          {isEmptyHtmlElement(state.tag) ? (
            <>
              <TagRef {...state.attributes} {...state.actions} />
            </>
          ) : null}
          {!isEmptyHtmlElement(state.tag) && state.repeatItemData ? (
            <>
              {state.repeatItemData?.map((data, index) => (
                <RenderRepeatedBlock
                  key={index}
                  repeatContext={data.context}
                  block={data.block}
                  _context={_context}
                />
              ))}
            </>
          ) : null}
          {!isEmptyHtmlElement(state.tag) && !state.repeatItemData ? (
            <>
              <TagRef {...state.attributes} {...state.actions}>
                <RenderComponentTagRef
                  {...state.renderComponentProps}
                  _context={_context}
                />

                {state.childrenWithoutParentComponent?.map((child) => (
                  <RenderBlock
                    key={\\"render-block-\\" + child.id}
                    block={child}
                    context={state.childrenContext}
                    _context={_context}
                  />
                ))}

                {state.childrenWithoutParentComponent?.map((child) => (
                  <BlockStyles
                    key={\\"block-style-\\" + child.id}
                    block={child}
                    context={state.childrenContext}
                    _context={_context}
                  />
                ))}
              </TagRef>
            </>
          ) : null}
        </>
      ) : (
        <RenderComponentTagRef
          {...state.renderComponentProps}
          _context={_context}
        />
      )}
    </>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > renderContentExample 1`] = `
"import * as React from \\"react\\";

type Props = {
  customComponents: string[];
  content: {
    blocks: any[];
    id: string;
  };
};
import {
  sendComponentsToVisualEditor,
  dispatchNewContentToVisualEditor,
  trackClick,
} from \\"@dummy/injection-js\\";
import BuilderContext from \\"@dummy/context.lite\\";
import RenderBlocks from \\"@dummy/RenderBlocks.lite.tsx\\";

export default function RenderContent(props: Props) {
  const _context = { ...props[\\"_context\\"] };

  _context.BuilderContext = {
    get content() {
      return 3;
    },
    get registeredComponents() {
      return 4;
    },
  };

  return (
    <>
      <div className=\\"div-a387715c\\">
        <RenderBlocks blocks={props.content.blocks} _context={_context} />
      </div>
      <style>{\`.div-a387715c {
display: flex;
flex-direction: columns;
}\`}</style>
    </>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > rootFragmentMultiNode 1`] = `
"import * as React from \\"react\\";

export interface ButtonProps {
  attributes?: any;
  text?: string;
  link?: string;
  openLinkInNewTab?: boolean;
}

export default function Button(props: ButtonProps) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <>
      {props.link ? (
        <>
          <a
            {...props.attributes}
            href={props.link}
            target={props.openLinkInNewTab ? \\"_blank\\" : undefined}
          >
            {props.text}
          </a>
        </>
      ) : null}

      {!props.link ? (
        <>
          <button type=\\"button\\" {...props.attributes}>
            {props.text}
          </button>
        </>
      ) : null}
    </>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > rootShow 1`] = `
"import * as React from \\"react\\";

export interface RenderStylesProps {
  foo: string;
}

export default function RenderStyles(props: RenderStylesProps) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <>
      {props.foo === \\"bar\\" ? (
        <>
          <div>Bar</div>
        </>
      ) : (
        <div>Foo</div>
      )}
    </>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > self-referencing component 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <div>
      {props.name}

      {props.name === \\"Batman\\" ? (
        <>
          <MyComponent name=\\"Bruce Wayne\\" _context={_context} />
        </>
      ) : null}
    </div>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > self-referencing component with children 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <div>
      {props.name}

      {props.children}

      {props.name === \\"Batman\\" ? (
        <>
          <MyComponent name=\\"Bruce\\" _context={_context}>
            <div>Wayne</div>
          </MyComponent>
        </>
      ) : null}
    </div>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > showWithFor 1`] = `
"import * as React from \\"react\\";

interface Props {
  conditionA: boolean;
  items: string[];
}

export default function NestedShow(props: Props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <>
      {props.conditionA ? (
        <>
          {props.items?.map((item, idx) => (
            <div key={idx}>{item}</div>
          ))}
        </>
      ) : (
        <div>else-condition-A</div>
      )}
    </>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > spreadAttrs 1`] = `
"import * as React from \\"react\\";

export default function MyBasicComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  return <input {...attrs} />;
}
"
`;

exports[`RSC > jsx > Typescript Test > spreadNestedProps 1`] = `
"import * as React from \\"react\\";

export default function MyBasicComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  return <input {...props.nested} />;
}
"
`;

exports[`RSC > jsx > Typescript Test > spreadProps 1`] = `
"import * as React from \\"react\\";

export default function MyBasicComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  return <input {...props} />;
}
"
`;

exports[`RSC > jsx > Typescript Test > subComponent 1`] = `
"import * as React from \\"react\\";
import Foo from \\"./foo-sub-component.lite\\";

export default function SubComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  return <Foo _context={_context} />;
}
"
`;

exports[`RSC > jsx > Typescript Test > svgComponent 1`] = `
"import * as React from \\"react\\";

export default function SvgComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <svg
      fill=\\"none\\"
      role=\\"img\\"
      viewBox={\\"0 0 \\" + 42 + \\" \\" + 42}
      width={42}
      height={42}
    >
      <defs>
        <filter id=\\"prefix__filter0_f\\" filterUnits=\\"userSpaceOnUse\\">
          <feFlood result=\\"BackgroundImageFix\\" _context={_context} />

          <feBlend
            in=\\"SourceGraphic\\"
            in2=\\"BackgroundImageFix\\"
            result=\\"shape\\"
            _context={_context}
          />

          <feGaussianBlur
            result=\\"effect1_foregroundBlur\\"
            stdDeviation={7}
            _context={_context}
          />
        </filter>
      </defs>
    </svg>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > typeDependency 1`] = `
"import * as React from \\"react\\";
import type { Foo } from \\"./foo-type\\";
import type { Foo as Foo2 } from \\"./type-export\\";
export type TypeDependencyProps = {
  foo: Foo;
  foo2: Foo2;
};

export default function TypeDependency(props: TypeDependencyProps) {
  const _context = { ...props[\\"_context\\"] };

  return <div>{props.foo}</div>;
}
"
`;

exports[`RSC > jsx > Typescript Test > use-style 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <>
      <button type=\\"button\\">Button</button>
      <style>{\`

      button {
          background: blue;
          color: white;
          font-size: 12px;
          outline: 1px solid black;
      }
  \`}</style>
    </>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > use-style-and-css 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <>
      <button type=\\"button\\" className=\\"button-4fd6647d\\">
        Button
      </button>
      <style>{\`.button-4fd6647d {
background: blue;
color: white;
}

      button {
          font-size: 12px;
          outline: 1px solid black;
      }
  \`}</style>
    </>
  );
}
"
`;

exports[`RSC > jsx > Typescript Test > use-style-outside-component 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <>
      <button type=\\"button\\">Button</button>
      <style>{\`

button {
    background: blue;
    color: white;
    font-size: 12px;
    outline: 1px solid black;
}
\`}</style>
    </>
  );
}
"
`;

exports[`RSC > svelte > Javascript Test > basic 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = { name: \\"Steve\\" };

  return (
    <div>
      <input value={state.name} />
      Hello! I can run in React, Vue, Solid, or Liquid!
    </div>
  );
}
"
`;

exports[`RSC > svelte > Javascript Test > bindGroup 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = { tortilla: \\"Plain\\", fillings: [] };

  return (
    <div>
      <input type=\\"radio\\" value=\\"Plain\\" checked={state.tortilla === \\"Plain\\"} />
      <input
        type=\\"radio\\"
        value=\\"Whole wheat\\"
        checked={state.tortilla === \\"Whole wheat\\"}
      />
      <input
        type=\\"radio\\"
        value=\\"Spinach\\"
        checked={state.tortilla === \\"Spinach\\"}
      />
      <br />
      <br />
      <input type=\\"checkbox\\" value=\\"Rice\\" checked={state.fillings === \\"Rice\\"} />
      <input
        type=\\"checkbox\\"
        value=\\"Beans\\"
        checked={state.fillings === \\"Beans\\"}
      />
      <input
        type=\\"checkbox\\"
        value=\\"Cheese\\"
        checked={state.fillings === \\"Cheese\\"}
      />
      <input
        type=\\"checkbox\\"
        value=\\"Guac (extra)\\"
        checked={state.fillings === \\"Guac (extra)\\"}
      />
      <p>
        Tortilla:
        {state.tortilla}
      </p>
      <p>
        Fillings:
        {state.fillings}
      </p>
    </div>
  );
}
"
`;

exports[`RSC > svelte > Javascript Test > bindProperty 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = { value: \\"hello\\" };

  return <input value={state.value} />;
}
"
`;

exports[`RSC > svelte > Javascript Test > classDirective 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = { focus: true };

  return (
    <input
      className={\`form-input \${props.disabled ? \\"disabled\\" : \\"\\"} \${
        state.focus ? \\"focus\\" : \\"\\"
      }\`}
    />
  );
}

MyComponent.defaultProps = {};
"
`;

exports[`RSC > svelte > Javascript Test > context 1`] = `
"']' expected. (18:35)
  16 |     
  17 |     
> 18 |       const disabled = _context[''disabled''];
     |                                   ^
  19 |     
  20 |     
  21 |     "
`;

exports[`RSC > svelte > Javascript Test > each 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = { numbers: [\\"one\\", \\"two\\", \\"three\\"] };

  return (
    <ul>
      {state.numbers?.map((num) => (
        <li>{num}</li>
      ))}
    </ul>
  );
}
"
`;

exports[`RSC > svelte > Javascript Test > eventHandlers 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    log: function log(msg = \\"hello\\") {
      console.log(msg);
    },
  };

  return (
    <div>
      <button>Log</button>
      <button>Log</button>
      <button>Log</button>
    </div>
  );
}
"
`;

exports[`RSC > svelte > Javascript Test > html 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = { html: \\"<b>bold</b>\\" };

  return <div dangerouslySetInnerHTML={{ __html: state.html }} />;
}
"
`;

exports[`RSC > svelte > Javascript Test > ifElse 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    show: true,
    toggle: function toggle() {
      state.show = !state.show;
    },
  };

  return <>{state.show ? <button> Hide </button> : <button> Show </button>}</>;
}
"
`;

exports[`RSC > svelte > Javascript Test > imports 1`] = `
"import * as React from \\"react\\";
import Button from \\"./Button.lite\\";

export default function MyComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = { disabled: false };

  return (
    <div>
      <Button
        type=\\"button\\"
        disabled={state.disabled}
        _context={_context}
        slotContext={_context}
      ></Button>
    </div>
  );
}
"
`;

exports[`RSC > svelte > Javascript Test > lifecycleHooks 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  return <div />;
}
"
`;

exports[`RSC > svelte > Javascript Test > reactive 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    name: \\"Steve\\",
    get lowercaseName() {
      return state.name.toLowerCase();
    },
  };

  return (
    <div>
      <input value={state.name} />
      Lowercase:
      {state.lowercaseName}
    </div>
  );
}
"
`;

exports[`RSC > svelte > Javascript Test > reactiveWithFn 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    a: 2,
    b: 5,
    result: null,
    calculateResult: function calculateResult(a_, b_) {
      state.result = a_ * b_;
    },
  };

  return (
    <div>
      <input type=\\"number\\" value={state.a} />
      <input type=\\"number\\" value={state.b} />
      Result:
      {state.result}
    </div>
  );
}
"
`;

exports[`RSC > svelte > Javascript Test > slots 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  return <div slotContext={_context}>{props.slotTest}</div>;
}

MyComponent.defaultProps = { slotTest: <div>default</div> };
"
`;

exports[`RSC > svelte > Javascript Test > style 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <>
      <input className=\\"form-input\\" />
      <style>{\`

input {
  color: red;
  font-size: 12px;
}

.form-input:focus {
  outline: 1px solid blue;
}
\`}</style>
    </>
  );
}
"
`;

exports[`RSC > svelte > Javascript Test > textExpressions 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props) {
  const _context = { ...props[\\"_context\\"] };

  const state = { a: 5, b: 12 };

  return (
    <div>
      normal:
      {state.a + state.b}
      <br />
      conditional
      {state.a > 2 ? \\"hello\\" : \\"bye\\"}
    </div>
  );
}
"
`;

exports[`RSC > svelte > Typescript Test > basic 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  const state = { name: \\"Steve\\" };

  return (
    <div>
      <input value={state.name} />
      Hello! I can run in React, Vue, Solid, or Liquid!
    </div>
  );
}
"
`;

exports[`RSC > svelte > Typescript Test > bindGroup 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  const state = { tortilla: \\"Plain\\", fillings: [] };

  return (
    <div>
      <input type=\\"radio\\" value=\\"Plain\\" checked={state.tortilla === \\"Plain\\"} />
      <input
        type=\\"radio\\"
        value=\\"Whole wheat\\"
        checked={state.tortilla === \\"Whole wheat\\"}
      />
      <input
        type=\\"radio\\"
        value=\\"Spinach\\"
        checked={state.tortilla === \\"Spinach\\"}
      />
      <br />
      <br />
      <input type=\\"checkbox\\" value=\\"Rice\\" checked={state.fillings === \\"Rice\\"} />
      <input
        type=\\"checkbox\\"
        value=\\"Beans\\"
        checked={state.fillings === \\"Beans\\"}
      />
      <input
        type=\\"checkbox\\"
        value=\\"Cheese\\"
        checked={state.fillings === \\"Cheese\\"}
      />
      <input
        type=\\"checkbox\\"
        value=\\"Guac (extra)\\"
        checked={state.fillings === \\"Guac (extra)\\"}
      />
      <p>
        Tortilla:
        {state.tortilla}
      </p>
      <p>
        Fillings:
        {state.fillings}
      </p>
    </div>
  );
}
"
`;

exports[`RSC > svelte > Typescript Test > bindProperty 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  const state = { value: \\"hello\\" };

  return <input value={state.value} />;
}
"
`;

exports[`RSC > svelte > Typescript Test > classDirective 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  const state = { focus: true };

  return (
    <input
      className={\`form-input \${props.disabled ? \\"disabled\\" : \\"\\"} \${
        state.focus ? \\"focus\\" : \\"\\"
      }\`}
    />
  );
}

MyComponent.defaultProps = {};
"
`;

exports[`RSC > svelte > Typescript Test > context 1`] = `
"']' expected. (18:35)
  16 |     
  17 |     
> 18 |       const disabled = _context[''disabled''];
     |                                   ^
  19 |     
  20 |     
  21 |     "
`;

exports[`RSC > svelte > Typescript Test > each 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  const state = { numbers: [\\"one\\", \\"two\\", \\"three\\"] };

  return (
    <ul>
      {state.numbers?.map((num) => (
        <li>{num}</li>
      ))}
    </ul>
  );
}
"
`;

exports[`RSC > svelte > Typescript Test > eventHandlers 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    log: function log(msg = \\"hello\\") {
      console.log(msg);
    },
  };

  return (
    <div>
      <button>Log</button>
      <button>Log</button>
      <button>Log</button>
    </div>
  );
}
"
`;

exports[`RSC > svelte > Typescript Test > html 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  const state = { html: \\"<b>bold</b>\\" };

  return <div dangerouslySetInnerHTML={{ __html: state.html }} />;
}
"
`;

exports[`RSC > svelte > Typescript Test > ifElse 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    show: true,
    toggle: function toggle() {
      state.show = !state.show;
    },
  };

  return <>{state.show ? <button> Hide </button> : <button> Show </button>}</>;
}
"
`;

exports[`RSC > svelte > Typescript Test > imports 1`] = `
"import * as React from \\"react\\";
import Button from \\"./Button.lite\\";

export default function MyComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  const state = { disabled: false };

  return (
    <div>
      <Button
        type=\\"button\\"
        disabled={state.disabled}
        _context={_context}
        slotContext={_context}
      ></Button>
    </div>
  );
}
"
`;

exports[`RSC > svelte > Typescript Test > lifecycleHooks 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  return <div />;
}
"
`;

exports[`RSC > svelte > Typescript Test > reactive 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    name: \\"Steve\\",
    get lowercaseName() {
      return state.name.toLowerCase();
    },
  };

  return (
    <div>
      <input value={state.name} />
      Lowercase:
      {state.lowercaseName}
    </div>
  );
}
"
`;

exports[`RSC > svelte > Typescript Test > reactiveWithFn 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  const state = {
    a: 2,
    b: 5,
    result: null,
    calculateResult: function calculateResult(a_, b_) {
      state.result = a_ * b_;
    },
  };

  return (
    <div>
      <input type=\\"number\\" value={state.a} />
      <input type=\\"number\\" value={state.b} />
      Result:
      {state.result}
    </div>
  );
}
"
`;

exports[`RSC > svelte > Typescript Test > slots 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  return <div slotContext={_context}>{props.slotTest}</div>;
}

MyComponent.defaultProps = { slotTest: <div>default</div> };
"
`;

exports[`RSC > svelte > Typescript Test > style 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  return (
    <>
      <input className=\\"form-input\\" />
      <style>{\`

input {
  color: red;
  font-size: 12px;
}

.form-input:focus {
  outline: 1px solid blue;
}
\`}</style>
    </>
  );
}
"
`;

exports[`RSC > svelte > Typescript Test > textExpressions 1`] = `
"import * as React from \\"react\\";

export default function MyComponent(props: any) {
  const _context = { ...props[\\"_context\\"] };

  const state = { a: 5, b: 12 };

  return (
    <div>
      normal:
      {state.a + state.b}
      <br />
      conditional
      {state.a > 2 ? \\"hello\\" : \\"bye\\"}
    </div>
  );
}
"
`;
