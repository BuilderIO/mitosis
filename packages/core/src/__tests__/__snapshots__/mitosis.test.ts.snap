// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > Advanced 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { For } from \\"@components\\";

export default function MyBasicForShowComponent(props) {
  const state = useStore({ name: \\"PatrickJS\\", names: [\\"Steve\\", \\"PatrickJS\\"] });

  return [
    <main>
      {state.names.map((person, i) => (
        <div>
          {i}:{person}
        </div>
      ))}
      {state.names.map((person, index) => (
        <span>{person}</span>
      ))}
      {state.names.map((_, index) => (
        <br />
      ))}
      {Array.from({
        length: 10,
      }).map((_, ee) => (
        <pre>{ee}</pre>
      ))}
      {Array.from({
        length: 10,
      }).map((_, index) => (
        <p>{index}</p>
      ))}
      {state.names.map((person, index) => (
        <span>
          {person}
          {index}
        </span>
      ))}
      {Array.from({
        length: 10,
      }).map((person, count) => (
        <span>
          {person}
          {count}
        </span>
      ))}
      {state.names.map((person, i) => (
        <span>
          {person}
          {i}
        </span>
      ))}
      {Array.from({
        length: 10,
      }).map((person, index) => (
        <span>
          {person}
          {index}
        </span>
      ))}
    </main>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > AdvancedRef 1`] = `
"import { useStore, useRef } from \\"@builder.io/mitosis\\";
import { Show, Fragment } from \\"@components\\";

export default function MyBasicRefComponent(props) {
  const state = useStore({
    name: \\"PatrickJS\\",
    onBlur: function onBlur() {
      // Maintain focus
      inputRef.current.focus();
    },
    lowerCaseName: function lowerCaseName() {
      return state.name.toLowerCase();
    },
  });

  const inputRef = useRef(null);
  const inputNoArgRef = useRef(null);
  const inputRef = useRef(null);
  const inputNoArgRef = useRef(null);

  return [
    <div>
      {props.showInput ? (
        <Fragment>
          <input
            ref={inputRef}
            css={{
              color: \\"red\\",
            }}
            value={state.name}
            onBlur={(event) => state.onBlur()}
            onChange={(event) => (state.name = event.target.value)}
          />
          <label for=\\"cars\\" ref={inputNoArgRef}>
            Choose a car:
          </label>
          <select name=\\"cars\\" id=\\"cars\\">
            <option value=\\"supra\\">GR Supra</option>
            <option value=\\"86\\">GR 86</option>
          </select>
        </Fragment>
      ) : null}
      Hello
      {state.lowerCaseName()}! I can run in React, Qwik, Vue, Solid, or Web
      Component!
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > Basic 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export const DEFAULT_VALUES = {
  name: \\"Steve\\",
};

export default function MyBasicComponent(props) {
  const state = useStore({
    name: \\"Steve\\",
    underscore_fn_name() {
      return \\"bar\\";
    },
    age: 1,
    sports: [\\"\\"],
  });

  return [
    <div
      class=\\"test\\"
      css={{
        padding: \\"10px\\",
      }}
    >
      <input
        value={DEFAULT_VALUES.name || state.name}
        onChange={(event) => (state.name = myEvent.target.value)}
      />
      Hello! I can run in React, Vue, Solid, or Liquid! &gt;
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > Basic 2`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { For, Show } from \\"@components\\";

export default function MyBasicForShowComponent(props) {
  const state = useStore({ name: \\"PatrickJS\\", names: [\\"Steve\\", \\"PatrickJS\\"] });

  return [
    <div>
      {state.names.map((person, index) =>
        person === state.name ? (
          <>
            <input
              value={state.name}
              onChange={(event) => {
                state.name = event.target.value + \\" and \\" + person;
              }}
            />
            Hello
            {person}! I can run in Qwik, Web Component, React, Vue, Solid, or
            Liquid!
          </>
        ) : null
      )}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > Basic Context 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

import { Injector, MyService, createInjector } from \\"@dummy/injection-js\\";

export default function MyBasicComponent(props) {
  const state = useStore({
    name: \\"PatrickJS\\",
    onChange: function onChange() {
      const change = myService.method(\\"change\\");
      console.log(change);
    },
  });

  onMount(() => {
    const bye = myService.method(\\"hi\\");
    console.log(bye);
  });

  return [
    <div>
      {myService.method(\\"hello\\") + state.name}
      Hello! I can run in React, Vue, Solid, or Liquid!
      <input onChange={(event) => state.onChange} />
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > Basic OnMount Update 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyBasicOnMountUpdateComponent(props) {
  const state = useStore({ name: \\"PatrickJS\\", names: [\\"Steve\\", \\"PatrickJS\\"] });

  onMount(() => {
    state.name = \\"PatrickJS onMount\\" + props.bye;
  });

  return [
    <div>
      Hello
      {state.name}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > Basic Outputs 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyBasicOutputsComponent(props) {
  const state = useStore({ name: \\"PatrickJS\\" });

  onMount(() => {
    props.onMessage(state.name);
    props.onEvent(props.message);
  });

  return [<div />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > Basic Outputs Meta 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

useMetadata({
  outputs: [\\"onMessage\\", \\"onEvent\\"],
  baz: \\"metadata inside component\\",
});

export default function MyBasicOutputsComponent(props) {
  const state = useStore({ name: \\"PatrickJS\\" });

  onMount(() => {
    props.onMessage(state.name);
    props.onEvent(props.message);
  });

  return [<div />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > BasicAttribute 1`] = `
"export default function MyComponent(props) {
  return [<input autocapitalize=\\"on\\" autocomplete=\\"on\\" spellcheck={true} />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > BasicBooleanAttribute 1`] = `
"import { Show, MyBooleanAttributeComponent } from \\"@components\\";

import MyBooleanAttributeComponent from \\"./basic-boolean-attribute-component.raw\\";

export default function MyBooleanAttribute(props) {
  return [
    <div>
      {props.children ? (
        <>
          {props.children}
          {props.type}
        </>
      ) : null}
      <MyBooleanAttributeComponent toggle={true} />
      <MyBooleanAttributeComponent toggle={true} />
      <MyBooleanAttributeComponent list={null} />
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > BasicChildComponent 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { MyBasicComponent, MyBasicOnMountUpdateComponent } from \\"@components\\";

import MyBasicOnMountUpdateComponent from \\"./basic-onMount-update.raw\\";
import MyBasicComponent from \\"./basic.raw\\";

export default function MyBasicChildComponent(props) {
  const state = useStore({ name: \\"Steve\\", dev: \\"PatrickJS\\" });

  return [
    <div>
      <MyBasicComponent id={state.dev} />
      <div>
        <MyBasicOnMountUpdateComponent hi={state.name} bye={state.dev} />
      </div>
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > BasicFor 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { For, Fragment } from \\"@components\\";

export default function MyBasicForComponent(props) {
  const state = useStore({ name: \\"PatrickJS\\", names: [\\"Steve\\", \\"PatrickJS\\"] });

  onMount(() => {
    console.log(\\"onMount code\\");
  });

  return [
    <div>
      {state.names.map((person, index) => (
        <Fragment>
          <input
            value={state.name}
            onChange={(event) => {
              state.name = event.target.value + \\" and \\" + person;
            }}
          />
          Hello
          {person}! I can run in Qwik, Web Component, React, Vue, Solid, or
          Liquid!
        </Fragment>
      ))}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > BasicRef 1`] = `
"import { useStore, useRef } from \\"@builder.io/mitosis\\";
import { Show, Fragment } from \\"@components\\";

export default function MyBasicRefComponent(props) {
  const state = useStore({
    name: \\"PatrickJS\\",
    onBlur: function onBlur() {
      // Maintain focus
      inputRef.current.focus();
    },
    lowerCaseName: function lowerCaseName() {
      return state.name.toLowerCase();
    },
  });

  const inputRef = useRef(null);
  const inputNoArgRef = useRef(null);
  const inputRef = useRef(null);
  const inputNoArgRef = useRef(null);

  return [
    <div>
      {props.showInput ? (
        <Fragment>
          <input
            ref={inputRef}
            css={{
              color: \\"red\\",
            }}
            value={state.name}
            onBlur={(event) => state.onBlur()}
            onChange={(event) => (state.name = event.target.value)}
          />
          <label for=\\"cars\\" ref={inputNoArgRef}>
            Choose a car:
          </label>
          <select name=\\"cars\\" id=\\"cars\\">
            <option value=\\"supra\\">GR Supra</option>
            <option value=\\"86\\">GR 86</option>
          </select>
        </Fragment>
      ) : null}
      Hello
      {state.lowerCaseName()}! I can run in React, Qwik, Vue, Solid, or Web
      Component!
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > BasicRefAssignment 1`] = `"unknown: Maximum call stack size exceeded"`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > BasicRefPrevious 1`] = `"unknown: Maximum call stack size exceeded"`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > Button 1`] = `
"import { Show } from \\"@components\\";

export default function Button(props) {
  return [
    <div>
      {props.link ? (
        <a
          {...props.attributes}
          href={props.link}
          target={props.openLinkInNewTab ? \\"_blank\\" : undefined}
        >
          {props.text}
        </a>
      ) : null}
      {!props.link ? (
        <button type=\\"button\\" {...props.attributes}>
          {props.text}
        </button>
      ) : null}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > Columns 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { For } from \\"@components\\";

export default function Column(props) {
  const state = useStore({
    getColumns() {
      return props.columns || [];
    },
    getGutterSize() {
      return typeof props.space === \\"number\\" ? props.space || 0 : 20;
    },
    getWidth(index) {
      const columns = state.getColumns();
      return (columns[index] && columns[index].width) || 100 / columns.length;
    },
    getColumnCssWidth(index) {
      const columns = state.getColumns();
      const gutterSize = state.getGutterSize();
      const subtractWidth =
        (gutterSize * (columns.length - 1)) / columns.length;
      return \`calc(\${state.getWidth(index)}% - \${subtractWidth}px)\`;
    },
  });

  return [
    <div
      class=\\"builder-columns\\"
      css={{
        display: \\"flex\\",
        flexDirection: \\"column\\",
        alignItems: \\"stretch\\",
        lineHeight: \\"normal\\",
        \\"@media (max-width: 999px)\\": {
          flexDirection: \\"row\\",
        },
        \\"@media (max-width: 639px)\\": {
          flexDirection: \\"row-reverse\\",
        },
      }}
    >
      {props.columns.map((column, index) => (
        <div
          class=\\"builder-column\\"
          css={{
            flexGrow: \\"1\\",
          }}
        >
          {column.content}
          {index}
        </div>
      ))}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > ContentSlotHtml 1`] = `
"import { Slot } from \\"@components\\";

export default function ContentSlotCode(props) {
  return [
    <div>
      <Slot name={props.slotTesting} />
      <div>
        <hr />
      </div>
      <div>
        <Slot />
      </div>
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > ContentSlotJSX 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { Show, Slot } from \\"@components\\";

export default function ContentSlotJsxCode(props) {
  const state = useStore({
    name: \\"king\\",
    showContent: false,
    get cls() {
      return props.slotContent && props.children ? \`\${state.name}-content\` : \\"\\";
    },
    show() {
      props.slotContent ? 1 : \\"\\";
    },
  });

  return [
    props.slotReference ? (
      <div
        name={props.slotContent ? \\"name1\\" : \\"name2\\"}
        title={props.slotContent ? \\"title1\\" : \\"title2\\"}
        {...props.attributes}
        onClick={(event) => state.show()}
        class={state.cls}
      >
        {state.showContent && props.slotContent ? (
          <Slot name=\\"content\\">{props.content}</Slot>
        ) : null}
        <div>
          <hr />
        </div>
        <div>{props.children}</div>
      </div>
    ) : null,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > CustomCode 1`] = `
"import { useStore, useRef } from \\"@builder.io/mitosis\\";

export default function CustomCode(props) {
  const state = useStore({
    scriptsInserted: [],
    scriptsRun: [],
    findAndRunScripts() {
      // TODO: Move this function to standalone one in '@builder.io/utils'
      if (elem.current && typeof window !== \\"undefined\\") {
        /** @type {HTMLScriptElement[]} */
        const scripts = elem.current.getElementsByTagName(\\"script\\");

        for (let i = 0; i < scripts.length; i++) {
          const script = scripts[i];

          if (script.src) {
            if (state.scriptsInserted.includes(script.src)) {
              continue;
            }

            state.scriptsInserted.push(script.src);
            const newScript = document.createElement(\\"script\\");
            newScript.async = true;
            newScript.src = script.src;
            document.head.appendChild(newScript);
          } else if (
            !script.type ||
            [
              \\"text/javascript\\",
              \\"application/javascript\\",
              \\"application/ecmascript\\",
            ].includes(script.type)
          ) {
            if (state.scriptsRun.includes(script.innerText)) {
              continue;
            }

            try {
              state.scriptsRun.push(script.innerText);
              new Function(script.innerText)();
            } catch (error) {
              console.warn(\\"\`CustomCode\`: Error running script:\\", error);
            }
          }
        }
      }
    },
  });

  const elem = useRef(null);
  const elem = useRef(null);

  onMount(() => {
    state.findAndRunScripts();
  });

  return [
    <div
      ref={elem}
      class={
        \\"builder-custom-code\\" + (props.replaceNodes ? \\" replace-nodes\\" : \\"\\")
      }
      innerHTML={props.code}
    />,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > Embed 1`] = `
"import { useStore, useRef } from \\"@builder.io/mitosis\\";

export default function CustomCode(props) {
  const state = useStore({
    scriptsInserted: [],
    scriptsRun: [],
    findAndRunScripts() {
      // TODO: Move this function to standalone one in '@builder.io/utils'
      if (elem.current && typeof window !== \\"undefined\\") {
        /** @type {HTMLScriptElement[]} */
        const scripts = elem.current.getElementsByTagName(\\"script\\");

        for (let i = 0; i < scripts.length; i++) {
          const script = scripts[i];

          if (script.src) {
            if (state.scriptsInserted.includes(script.src)) {
              continue;
            }

            state.scriptsInserted.push(script.src);
            const newScript = document.createElement(\\"script\\");
            newScript.async = true;
            newScript.src = script.src;
            document.head.appendChild(newScript);
          } else if (
            !script.type ||
            [
              \\"text/javascript\\",
              \\"application/javascript\\",
              \\"application/ecmascript\\",
            ].includes(script.type)
          ) {
            if (state.scriptsRun.includes(script.innerText)) {
              continue;
            }

            try {
              state.scriptsRun.push(script.innerText);
              new Function(script.innerText)();
            } catch (error) {
              console.warn(\\"\`CustomCode\`: Error running script:\\", error);
            }
          }
        }
      }
    },
  });

  const elem = useRef(null);
  const elem = useRef(null);

  onMount(() => {
    state.findAndRunScripts();
  });

  return [
    <div
      ref={elem}
      class={
        \\"builder-custom-code\\" + (props.replaceNodes ? \\" replace-nodes\\" : \\"\\")
      }
      innerHTML={props.code}
    />,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > Form 1`] = `
"import { useStore, useRef } from \\"@builder.io/mitosis\\";
import { Show, For, BuilderBlockComponent, BuilderBlocks } from \\"@components\\";

import { Builder, builder } from \\"@builder.io/sdk\\";
import {
  BuilderBlock as BuilderBlockComponent,
  BuilderBlocks,
  get,
  set,
} from \\"@fake\\";

export default function FormComponent(props) {
  const state = useStore({
    formState: \\"unsubmitted\\",
    responseData: null,
    formErrorMessage: \\"\\",
    get submissionState() {
      return (Builder.isEditing && props.previewState) || state.formState;
    },
    onSubmit(event) {
      const sendWithJs =
        props.sendWithJs || props.sendSubmissionsTo === \\"email\\";

      if (props.sendSubmissionsTo === \\"zapier\\") {
        event.preventDefault();
      } else if (sendWithJs) {
        if (!(props.action || props.sendSubmissionsTo === \\"email\\")) {
          event.preventDefault();
          return;
        }

        event.preventDefault();
        const el = event.currentTarget;
        const headers = props.customHeaders || {};
        let body;
        const formData = new FormData(el); // TODO: maybe support null

        const formPairs = Array.from(
          event.currentTarget.querySelectorAll(\\"input,select,textarea\\")
        )
          .filter((el) => !!el.name)
          .map((el) => {
            let value;
            const key = el.name;

            if (el instanceof HTMLInputElement) {
              if (el.type === \\"radio\\") {
                if (el.checked) {
                  value = el.name;
                  return {
                    key,
                    value,
                  };
                }
              } else if (el.type === \\"checkbox\\") {
                value = el.checked;
              } else if (el.type === \\"number\\" || el.type === \\"range\\") {
                const num = el.valueAsNumber;

                if (!isNaN(num)) {
                  value = num;
                }
              } else if (el.type === \\"file\\") {
                // TODO: one vs multiple files
                value = el.files;
              } else {
                value = el.value;
              }
            } else {
              value = el.value;
            }

            return {
              key,
              value,
            };
          });
        let contentType = props.contentType;

        if (props.sendSubmissionsTo === \\"email\\") {
          contentType = \\"multipart/form-data\\";
        }

        Array.from(formPairs).forEach(({ value }) => {
          if (
            value instanceof File ||
            (Array.isArray(value) && value[0] instanceof File) ||
            value instanceof FileList
          ) {
            contentType = \\"multipart/form-data\\";
          }
        }); // TODO: send as urlEncoded or multipart by default
        // because of ease of use and reliability in browser API
        // for encoding the form?

        if (contentType !== \\"application/json\\") {
          body = formData;
        } else {
          // Json
          const json = {};
          Array.from(formPairs).forEach(({ value, key }) => {
            set(json, key, value);
          });
          body = JSON.stringify(json);
        }

        if (contentType && contentType !== \\"multipart/form-data\\") {
          if (
            /* Zapier doesn't allow content-type header to be sent from browsers */
            !(sendWithJs && props.action?.includes(\\"zapier.com\\"))
          ) {
            headers[\\"content-type\\"] = contentType;
          }
        }

        const presubmitEvent = new CustomEvent(\\"presubmit\\", {
          detail: {
            body,
          },
        });

        if (formRef.current) {
          formRef.current.dispatchEvent(presubmitEvent);

          if (presubmitEvent.defaultPrevented) {
            return;
          }
        }

        state.formState = \\"sending\\";
        const formUrl = \`\${
          builder.env === \\"dev\\" ? \\"http://localhost:5000\\" : \\"https://builder.io\\"
        }/api/v1/form-submit?apiKey=\${builder.apiKey}&to=\${btoa(
          props.sendSubmissionsToEmail || \\"\\"
        )}&name=\${encodeURIComponent(props.name || \\"\\")}\`;
        fetch(
          props.sendSubmissionsTo === \\"email\\" ? formUrl : props.action,
          /* TODO: throw error if no action URL */
          {
            body,
            headers,
            method: props.method || \\"post\\",
          }
        ).then(
          async (res) => {
            let body;
            const contentType = res.headers.get(\\"content-type\\");

            if (contentType && contentType.indexOf(\\"application/json\\") !== -1) {
              body = await res.json();
            } else {
              body = await res.text();
            }

            if (!res.ok && props.errorMessagePath) {
              /* TODO: allow supplying an error formatter function */
              let message = get(body, props.errorMessagePath);

              if (message) {
                if (typeof message !== \\"string\\") {
                  /* TODO: ideally convert json to yaml so it woul dbe like
           error: - email has been taken */
                  message = JSON.stringify(message);
                }

                state.formErrorMessage = message;
              }
            }

            state.responseData = body;
            state.formState = res.ok ? \\"success\\" : \\"error\\";

            if (res.ok) {
              const submitSuccessEvent = new CustomEvent(\\"submit:success\\", {
                detail: {
                  res,
                  body,
                },
              });

              if (formRef.current) {
                formRef.current.dispatchEvent(submitSuccessEvent);

                if (submitSuccessEvent.defaultPrevented) {
                  return;
                }
                /* TODO: option to turn this on/off? */

                if (props.resetFormOnSubmit !== false) {
                  formRef.current.reset();
                }
              }
              /* TODO: client side route event first that can be preventDefaulted */

              if (props.successUrl) {
                if (formRef.current) {
                  const event = new CustomEvent(\\"route\\", {
                    detail: {
                      url: props.successUrl,
                    },
                  });
                  formRef.current.dispatchEvent(event);

                  if (!event.defaultPrevented) {
                    location.href = props.successUrl;
                  }
                } else {
                  location.href = props.successUrl;
                }
              }
            }
          },
          (err) => {
            const submitErrorEvent = new CustomEvent(\\"submit:error\\", {
              detail: {
                error: err,
              },
            });

            if (formRef.current) {
              formRef.current.dispatchEvent(submitErrorEvent);

              if (submitErrorEvent.defaultPrevented) {
                return;
              }
            }

            state.responseData = err;
            state.formState = \\"error\\";
          }
        );
      }
    },
  });

  const formRef = useRef(null);
  const formRef = useRef(null);

  return [
    <form
      validate={props.validate}
      ref={formRef}
      action={!props.sendWithJs && props.action}
      method={props.method}
      name={props.name}
      onSubmit={(event) => state.onSubmit(event)}
      {...props.attributes}
    >
      {props.builderBlock && props.builderBlock.children
        ? (props.builderBlock?.children).map((block, index) => (
            <BuilderBlockComponent key={block.id} block={block} index={index} />
          ))
        : null}
      {state.submissionState === \\"error\\" ? (
        <BuilderBlocks dataPath=\\"errorMessage\\" blocks={props.errorMessage} />
      ) : null}
      {state.submissionState === \\"sending\\" ? (
        <BuilderBlocks
          dataPath=\\"sendingMessage\\"
          blocks={props.sendingMessage}
        />
      ) : null}
      {state.submissionState === \\"error\\" && state.responseData ? (
        <pre
          class=\\"builder-form-error-text\\"
          css={{
            padding: \\"10px\\",
            color: \\"red\\",
            textAlign: \\"center\\",
          }}
        >
          {JSON.stringify(state.responseData, null, 2)}
        </pre>
      ) : null}
      {state.submissionState === \\"success\\" ? (
        <BuilderBlocks
          dataPath=\\"successMessage\\"
          blocks={props.successMessage}
        />
      ) : null}
    </form>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > Image 1`] = `
"import { useStore, useRef } from \\"@builder.io/mitosis\\";
import { Show } from \\"@components\\";

export default function Image(props) {
  const state = useStore({
    scrollListener: null,
    imageLoaded: false,
    setLoaded() {
      state.imageLoaded = true;
    },
    useLazyLoading() {
      // TODO: Add more checks here, like testing for real web browsers
      return !!props.lazy && state.isBrowser();
    },
    isBrowser: function isBrowser() {
      return (
        typeof window !== \\"undefined\\" &&
        window.navigator.product != \\"ReactNative\\"
      );
    },
    load: false,
  });

  const pictureRef = useRef();
  const pictureRef = useRef();

  onMount(() => {
    if (state.useLazyLoading()) {
      // throttled scroll capture listener
      const listener = () => {
        if (pictureRef.current) {
          const rect = pictureRef.current.getBoundingClientRect();
          const buffer = window.innerHeight / 2;

          if (rect.top < window.innerHeight + buffer) {
            state.load = true;
            state.scrollListener = null;
            window.removeEventListener(\\"scroll\\", listener);
          }
        }
      };

      state.scrollListener = listener;
      window.addEventListener(\\"scroll\\", listener, {
        capture: true,
        passive: true,
      });
      listener();
    }
  });

  onUnMount(() => {
    if (state.scrollListener) {
      window.removeEventListener(\\"scroll\\", state.scrollListener);
    }
  });

  return [
    <div>
      <picture ref={pictureRef}>
        {!state.useLazyLoading() || state.load ? (
          <img
            alt={props.altText}
            aria-role={props.altText ? \\"presentation\\" : undefined}
            css={{
              opacity: \\"1\\",
              transition: \\"opacity 0.2s ease-in-out\\",
              objectFit: \\"cover\\",
              objectPosition: \\"center\\",
            }}
            class={\\"builder-image\\" + (props._class ? \\" \\" + props._class : \\"\\")}
            src={props.image}
            onLoad={(event) => state.setLoaded()}
            srcset={props.srcset}
            sizes={props.sizes}
          />
        ) : null}
        <source srcset={props.srcset} />
      </picture>
      {props.children}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > Image State 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { For, Fragment } from \\"@components\\";

export default function ImgStateComponent(props) {
  const state = useStore({
    canShow: true,
    images: [\\"http://example.com/qwik.png\\"],
  });

  return [
    <div>
      {state.images.map((item, itemIndex) => (
        <Fragment>
          <img class=\\"custom-class\\" src={item} key={itemIndex} />
        </Fragment>
      ))}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > Img 1`] = `
"import { Builder } from \\"@builder.io/sdk\\";

export default function ImgComponent(props) {
  return [
    <img
      style={{
        objectFit: props.backgroundSize || \\"cover\\",
        objectPosition: props.backgroundPosition || \\"center\\",
      }}
      {...props.attributes}
      key={(Builder.isEditing && props.imgSrc) || \\"default-key\\"}
      alt={props.altText}
      src={props.imgSrc}
    />,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > Input 1`] = `
"import { Builder } from \\"@builder.io/sdk\\";

export default function FormInputComponent(props) {
  return [
    <input
      {...props.attributes}
      key={
        Builder.isEditing && props.defaultValue
          ? props.defaultValue
          : \\"default-key\\"
      }
      placeholder={props.placeholder}
      type={props.type}
      name={props.name}
      value={props.value}
      defaultValue={props.defaultValue}
      required={props.required}
      onChange={(event) => props.onChange?.(event.target.value)}
    />,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > InputParent 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { FormInputComponent } from \\"@components\\";

import FormInputComponent from \\"./input.raw\\";

export default function Stepper(props) {
  const state = useStore({
    handleChange(value) {
      console.log(value);
    },
  });

  return [
    <FormInputComponent
      name=\\"kingzez\\"
      type=\\"text\\"
      onChange={(event) => state.handleChange(value)}
    />,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > RawText 1`] = `
"export default function RawText(props) {
  return [
    <span
      class={props.attributes?.class || props.attributes?.className}
      innerHTML={props.text || \\"\\"}
    />,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > Section 1`] = `
"export default function SectionComponent(props) {
  return [
    <section
      {...props.attributes}
      style={
        props.maxWidth && typeof props.maxWidth === \\"number\\"
          ? {
              maxWidth: props.maxWidth,
            }
          : undefined
      }
    >
      {props.children}
    </section>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > Section 2`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { Show, For } from \\"@components\\";

export default function SectionStateComponent(props) {
  const state = useStore({ max: 42, items: [42] });

  return [
    state.max
      ? state.items.map((item, index) => (
          <section
            {...props.attributes}
            style={{
              maxWidth: item + state.max,
            }}
          >
            {props.children}
          </section>
        ))
      : null,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > Select 1`] = `
"import { For } from \\"@components\\";

import { Builder } from \\"@builder.io/sdk\\";

export default function SelectComponent(props) {
  return [
    <select
      {...props.attributes}
      value={props.value}
      key={
        Builder.isEditing && props.defaultValue
          ? props.defaultValue
          : \\"default-key\\"
      }
      defaultValue={props.defaultValue}
      name={props.name}
    >
      {props.options.map((option, index) => (
        <option value={option.value} data-index={index}>
          {option.name || option.value}
        </option>
      ))}
    </select>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > SlotDefault 1`] = `
"import { Slot } from \\"@components\\";

export default function SlotCode(props) {
  return [
    <div>
      <Slot>
        <div class=\\"default-slot\\">Default content</div>
      </Slot>
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > SlotHtml 1`] = `
"import { ContentSlotCode, Slot } from \\"@components\\";

import ContentSlotCode from \\"./content-slot-jsx.raw\\";

export default function SlotCode(props) {
  return [
    <div>
      <ContentSlotCode>
        <Slot testing={<div>Hello</div>} />
      </ContentSlotCode>
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > SlotJsx 1`] = `
"import { ContentSlotCode } from \\"@components\\";

import ContentSlotCode from \\"./content-slot-jsx.raw\\";

export default function SlotCode(props) {
  return [
    <div>
      <ContentSlotCode slotTesting={<div>Hello</div>} />
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > SlotNamed 1`] = `
"import { Slot } from \\"@components\\";

export default function SlotCode(props) {
  return [
    <div>
      <Slot name=\\"myAwesomeSlot\\" />
      <Slot name=\\"top\\" />
      <Slot name=\\"left\\">Default left</Slot>
      <Slot>Default Child</Slot>
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > Stamped.io 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { Show, For } from \\"@components\\";

import { kebabCase, snakeCase } from \\"lodash\\";

export default function SmileReviews(props) {
  const state = useStore({
    reviews: [],
    name: \\"test\\",
    showReviewPrompt: false,
    kebabCaseValue() {
      return kebabCase(\\"testThat\\");
    },
    snakeCaseValue() {
      return snakeCase(\\"testThis\\");
    },
  });

  onMount(() => {
    fetch(
      \`https://stamped.io/api/widget/reviews?storeUrl=builder-io.myshopify.com&apiKey=\${
        props.apiKey || \\"pubkey-8bbDq7W6w4sB3OWeM1HUy2s47702hM\\"
      }&productId=\${props.productId || \\"2410511106127\\"}\`
    )
      .then((res) => res.json())
      .then((data) => {
        state.reviews = data.data;
      });
  });

  return [
    <div data-user={state.name}>
      <button onClick={(event) => (state.showReviewPrompt = true)}>
        Write a review
      </button>
      {state.showReviewPrompt || \\"asdf\\" ? (
        <>
          <input placeholder=\\"Email\\" />
          <input
            placeholder=\\"Title\\"
            css={{
              display: \\"block\\",
            }}
          />
          <textarea
            placeholder=\\"How was your experience?\\"
            css={{
              display: \\"block\\",
            }}
          />
          <button
            css={{
              display: \\"block\\",
            }}
            onClick={(event) => {
              ev.preventDefault();
              state.showReviewPrompt = false;
            }}
          >
            Submit
          </button>
        </>
      ) : null}
      {state.reviews.map((review, index) => (
        <div
          $name=\\"Review\\"
          key={review.id}
          css={{
            margin: \\"10px\\",
            padding: \\"10px\\",
            background: \\"white\\",
            display: \\"flex\\",
            borderRadius: \\"5px\\",
            boxShadow: \\"0 2px 5px rgba(0, 0, 0, 0.1)\\",
            WebkitFontSmoothing: \\"antialiased\\",
          }}
        >
          <img
            css={{
              height: \\"30px\\",
              width: \\"30px\\",
              marginRight: \\"10px\\",
            }}
            src={review.avatar}
          />
          <div class={state.showReviewPrompt ? \\"bg-primary\\" : \\"bg-secondary\\"}>
            <div>
              N:
              {index}
            </div>
            <div>{review.author}</div>
            <div>{review.reviewMessage}</div>
          </div>
        </div>
      ))}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > Submit 1`] = `
"export default function SubmitButton(props) {
  return [
    <button type=\\"submit\\" {...props.attributes}>
      {props.text}
    </button>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > Text 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

import { Builder } from \\"@builder.io/sdk\\";

export default function Text(props) {
  const state = useStore({ name: \\"Decadef20\\" });

  return [
    <div
      contentEditable={allowEditingText || undefined}
      data-name={{
        test: state.name || \\"any name\\",
      }}
      innerHTML={
        props.text ||
        props.content ||
        state.name ||
        '<p class=\\"text-lg\\">my name</p>'
      }
    />,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > Textarea 1`] = `
"export default function Textarea(props) {
  return [
    <textarea
      {...props.attributes}
      placeholder={props.placeholder}
      name={props.name}
      value={props.value}
      defaultValue={props.defaultValue}
    />,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > Video 1`] = `
"export default function Video(props) {
  return [
    <video
      preload=\\"none\\"
      {...props.attributes}
      style={{
        width: \\"100%\\",
        height: \\"100%\\",
        ...props.attributes?.style,
        objectFit: props.fit,
        objectPosition: props.position,
        // Hack to get object fit to work as expected and
        // not have the video overflow
        borderRadius: 1,
      }}
      key={props.video || \\"no-src\\"}
      poster={props.posterImage}
      autoplay={props.autoPlay}
      muted={props.muted}
      controls={props.controls}
      loop={props.loop}
    />,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > arrowFunctionInUseStore 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({
    name: \\"steve\\",
    setName(value) {
      state.name = value;
    },
    updateNameWithArrowFn(value) {
      state.name = value;
    },
  });

  return [
    <div>
      Hello
      {state.name}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > basicForNoTagReference 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { For } from \\"@components\\";

export default function MyBasicForNoTagRefComponent(props) {
  const state = useStore({
    name: \\"VincentW\\",
    TagName: \\"div\\",
    tag: \\"span\\",
    get TagNameGetter() {
      return \\"span\\";
    },
  });

  return [
    <state.TagNameGetter>
      Hello
      <state.tag>{state.name}</state.tag>
      {props.actions.map((action, index) => (
        <state.TagName>
          <action.icon />
          <span>{action.text}</span>
        </state.TagName>
      ))}
    </state.TagNameGetter>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > basicForwardRef 1`] = `
"',' expected. (16:12)
  14 |     const state = useStore({ name: 'PatrickJS',});
  15 |
> 16 | const props.inputRef = useRef();
     |            ^
  17 |
  18 |
  19 |"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > basicForwardRefMetadata 1`] = `
"',' expected. (16:12)
  14 |     const state = useStore({ name: 'PatrickJS',});
  15 |
> 16 | const props.inputRef = useRef();
     |            ^
  17 |
  18 |
  19 |"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > basicOnUpdateReturn 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyBasicOnUpdateReturnComponent(props) {
  const state = useStore({ name: \\"PatrickJS\\" });

  return [
    <div>
      Hello!
      {state.name}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > class + ClassName + css 1`] = `
"import { MyComp } from \\"@components\\";

import MyComp from \\"./my-component.js\\";

export default function MyBasicComponent(props) {
  return [
    <div>
      <MyComp class=\\"test\\" className=\\"test2\\">
        Hello! I can run in React, Vue, Solid, or Liquid!
      </MyComp>
      <div
        class=\\"test2 test\\"
        css={{
          padding: \\"10px\\",
        }}
      >
        Hello! I can run in React, Vue, Solid, or Liquid!
      </div>
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > class + css 1`] = `
"export default function MyBasicComponent(props) {
  return [
    <div
      class=\\"test\\"
      css={{
        padding: \\"10px\\",
      }}
    >
      Hello! I can run in React, Vue, Solid, or Liquid!
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > className + css 1`] = `
"export default function MyBasicComponent(props) {
  return [
    <div
      class=\\"test\\"
      css={{
        padding: \\"10px\\",
      }}
    >
      Hello! I can run in React, Vue, Solid, or Liquid!
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > className 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function ClassNameCode(props) {
  const state = useStore({ bindings: \\"a binding\\" });

  return [
    <div>
      <div class=\\"no binding\\">Without Binding</div>
      <div class={state.bindings}>With binding</div>
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > classState 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyBasicComponent(props) {
  const state = useStore({
    classState: \\"testClassName\\",
    styleState: {
      color: \\"red\\",
    },
  });

  return [
    <div
      class={state.classState}
      css={{
        padding: \\"10px\\",
      }}
      style={state.styleState}
    >
      Hello! I can run in React, Vue, Solid, or Liquid!
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > componentWithContext 1`] = `
"import { Fragment } from \\"@components\\";

import Context1 from \\"@dummy/1\\";
import Context2 from \\"@dummy/2\\";

export default function ComponentWithContext(props) {
  return [
    <Fragment>
      <Fragment>{foo.value}</Fragment>
    </Fragment>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > componentWithContextMultiRoot 1`] = `
"import { Fragment } from \\"@components\\";

import Context1 from \\"@dummy/1\\";
import Context2 from \\"@dummy/2\\";

export default function ComponentWithContext(props) {
  return [
    <Fragment>
      <Fragment>{foo.value}</Fragment>
      <div>other</div>
    </Fragment>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > contentState 1`] = `
"import BuilderContext from \\"@dummy/context.js\\";

export default function RenderContent(props) {
  return [<div>setting context</div>];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > defaultProps 1`] = `
"import { Show } from \\"@components\\";

export default function Button(props) {
  return [
    <div>
      {props.link ? (
        <a
          {...props.attributes}
          href={props.link}
          target={props.openLinkInNewTab ? \\"_blank\\" : undefined}
        >
          {props.text}
        </a>
      ) : null}
      {!props.link ? (
        <button
          type=\\"button\\"
          {...props.attributes}
          onClick={(event) => props.onClick()}
        >
          {props.buttonText}
        </button>
      ) : null}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > defaultPropsOutsideComponent 1`] = `
"import { Show } from \\"@components\\";

export default function Button(props) {
  return [
    <div>
      {props.link ? (
        <a
          {...props.attributes}
          href={props.link}
          target={props.openLinkInNewTab ? \\"_blank\\" : undefined}
        >
          {props.text}
        </a>
      ) : null}
      {!props.link ? (
        <button
          type=\\"button\\"
          {...props.attributes}
          onClick={(event) => props.onClick(event)}
        >
          {props.text}
        </button>
      ) : null}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > defaultValsWithTypes 1`] = `
"const DEFAULT_VALUES = {
  name: \\"Sami\\",
};

export default function ComponentWithTypes(props) {
  return [
    <div>
      {\\" \\"}
      Hello
      {props.name || DEFAULT_VALUES.name}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > expressionState 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({
    refToUse: !(props.componentRef instanceof Function)
      ? props.componentRef
      : null,
  });

  return [<div>{state.refToUse}</div>];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > getterState 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function Button(props) {
  const state = useStore({
    get foo2() {
      return props.foo + \\"foo\\";
    },
    get bar() {
      return \\"bar\\";
    },
    baz(i) {
      return i + state.foo2.length;
    },
  });

  return [
    <div>
      <p>{state.foo2}</p>
      <p>{state.bar}</p>
      <p>{state.baz(1)}</p>
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > import types 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { RenderBlock } from \\"@components\\";

import RenderBlock from \\"./builder-render-block.raw\\";

export default function RenderContent(props) {
  const state = useStore({
    getRenderContentProps(block, index) {
      return {
        block: block,
        index: index,
      };
    },
  });

  return [
    <RenderBlock
      {...state.getRenderContentProps(props.renderContentProps.block, 0)}
    />,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > multipleOnUpdate 1`] = `
"export default function MultipleOnUpdate(props) {
  return [<div />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > multipleOnUpdateWithDeps 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MultipleOnUpdateWithDeps(props) {
  const state = useStore({ a: \\"a\\", b: \\"b\\", c: \\"c\\", d: \\"d\\" });

  return [<div />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > multipleSpreads 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyBasicComponent(props) {
  const state = useStore({
    attrs: {
      hello: \\"world\\",
    },
  });

  return [<input {...state.attrs} {...props} />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > nestedShow 1`] = `
"import { Show } from \\"@components\\";

export default function NestedShow(props) {
  return [
    props.conditionA ? (
      !props.conditionB ? (
        <div>if condition A and condition B</div>
      ) : (
        <div>else-condition-B</div>
      )
    ) : (
      <div>else-condition-A</div>
    ),
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > nestedStyles 1`] = `
"export default function NestedStyles(props) {
  return [
    <div
      css={{
        display: \\"flex\\",
        \\"--bar\\": \\"red\\",
        color: \\"var(--bar)\\",
        \\"@media (max-width: env(--mobile))\\": {
          display: \\"block\\",
        },
        \\"&:hover\\": {
          display: \\"flex\\",
        },
        \\":active\\": {
          display: \\"inline\\",
        },
        \\".nested-selector\\": {
          display: \\"grid\\",
        },
        \\".nested-selector:hover\\": {
          display: \\"block\\",
        },
        \\"&.nested-selector:active\\": {
          display: \\"inline-block\\",
        },
      }}
    >
      Hello world
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > onEvent 1`] = `
"import { useStore, useRef } from \\"@builder.io/mitosis\\";

export default function Embed(props) {
  const state = useStore({
    foo(event) {
      console.log(\\"test2\\");
    },
  });

  const elem = useRef(null);
  const elem = useRef(null);

  onMount(() => {
    elem.current.dispatchEvent(new CustomEvent(\\"initEditingBldr\\"));
  });

  return [
    <div class=\\"builder-embed\\" ref={elem}>
      <div>Test</div>
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > onInit & onMount 1`] = `
"export default function OnInit(props) {
  onMount(() => {
    console.log(\\"onMount\\");
  });

  return [<div />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > onInit 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export const defaultValues = {
  name: \\"PatrickJS\\",
};

export default function OnInit(props) {
  const state = useStore({ name: \\"\\" });

  return [
    <div>
      Default name defined by parent
      {state.name}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > onInitPlain 1`] = `
"export default function OnInitPlain(props) {
  return [<div />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > onMount 1`] = `
"export default function Comp(props) {
  onMount(() => {
    console.log(\\"Runs on mount\\");
  });

  onUnMount(() => {
    console.log(\\"Runs on unMount\\");
  });

  return [<div />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > onMountMultiple 1`] = `
"export default function Comp(props) {
  onMount(() => {
    console.log(\\"Runs on mount\\");
  }),
    onMount(() => {
      console.log(\\"Another one runs on Mount\\");
    }),
    onMount(() => {
      console.log(\\"SSR runs on Mount\\");
    });

  return [<div />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > onUpdate 1`] = `
"export default function OnUpdate(props) {
  return [<div />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > onUpdateWithDeps 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function OnUpdateWithDeps(props) {
  const state = useStore({ a: \\"a\\", b: \\"b\\" });

  return [<div />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > preserveExportOrLocalStatement 1`] = `
"const b = 3;
const foo = () => {};
export const a = 3;
export const bar = () => {};
export function run(value) {}

export default function MyBasicComponent(props) {
  return [<div />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > preserveTyping 1`] = `
"export default function MyBasicComponent(props) {
  return [
    <div>
      Hello! I can run in React, Vue, Solid, or Liquid!
      {props.name}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > propsDestructure 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyBasicComponent(props) {
  const state = useStore({ name: \\"Decadef20\\" });

  return [
    <div>
      {props.children}
      {props.type}
      Hello! I can run in React, Vue, Solid, or Liquid!
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > propsInterface 1`] = `
"export default function MyBasicComponent(props) {
  return [
    <div>
      Hello! I can run in React, Vue, Solid, or Liquid!
      {props.name}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > propsType 1`] = `
"export default function MyBasicComponent(props) {
  return [
    <div>
      Hello! I can run in React, Vue, Solid, or Liquid!
      {props.name}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > referencingFunInsideHook 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function OnUpdate(props) {
  const state = useStore({
    foo: function foo(params) {},
    bar: function bar() {},
    zoo: function zoo() {
      const params = {
        cb: state.bar,
      };
    },
  });

  return [<div />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > renderBlock 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import {
  Show,
  For,
  RenderRepeatedBlock,
  RenderBlock,
  BlockStyles,
} from \\"@components\\";

import { TARGET } from \\"../../constants/target.js\\";
import { evaluate } from \\"../../functions/evaluate.js\\";
import { extractTextStyles } from \\"../../functions/extract-text-styles.js\\";
import { getBlockActions } from \\"../../functions/get-block-actions.js\\";
import { getBlockComponentOptions } from \\"../../functions/get-block-component-options.js\\";
import { getBlockProperties } from \\"../../functions/get-block-properties.js\\";
import { getBlockTag } from \\"../../functions/get-block-tag.js\\";
import { getProcessedBlock } from \\"../../functions/get-processed-block.js\\";
import { getReactNativeBlockStyles } from \\"../../functions/get-react-native-block-styles.js\\";
import BlockStyles from \\"./block-styles.js\\";
import { isEmptyHtmlElement } from \\"./render-block.helpers.js\\";
import RenderComponentWithContext from \\"./render-component-with-context.js\\";
import RenderComponent from \\"./render-component.js\\";
import RenderRepeatedBlock from \\"./render-repeated-block.js\\";

export default function RenderBlock(props) {
  const state = useStore({
    get component() {
      const componentName = getProcessedBlock({
        block: props.block,
        state: props.context.state,
        context: props.context.context,
        shouldEvaluateBindings: false,
      }).component?.name;

      if (!componentName) {
        return null;
      }

      const ref = props.context.registeredComponents[componentName];

      if (!ref) {
        // TODO: Public doc page with more info about this message
        console.warn(\`
          Could not find a registered component named \\"\${componentName}\\".
          If you registered it, is the file that registered it imported by the file that needs to render it?\`);
        return undefined;
      } else {
        return ref;
      }
    },
    get tag() {
      return getBlockTag(state.useBlock);
    },
    get useBlock() {
      return state.repeatItemData
        ? props.block
        : getProcessedBlock({
            block: props.block,
            state: props.context.state,
            context: props.context.context,
            shouldEvaluateBindings: true,
          });
    },
    get actions() {
      return getBlockActions({
        block: state.useBlock,
        state: props.context.state,
        context: props.context.context,
      });
    },
    get attributes() {
      const blockProperties = getBlockProperties(state.useBlock);
      return {
        ...blockProperties,
        ...(TARGET === \\"reactNative\\"
          ? {
              style: getReactNativeBlockStyles({
                block: state.useBlock,
                context: props.context,
                blockStyles: blockProperties.style,
              }),
            }
          : {}),
      };
    },
    get shouldWrap() {
      return !state.component?.noWrap;
    },
    get renderComponentProps() {
      return {
        blockChildren: state.useChildren,
        componentRef: state.component?.component,
        componentOptions: {
          ...getBlockComponentOptions(state.useBlock),

          /**
           * These attributes are passed to the wrapper element when there is one. If \`noWrap\` is set to true, then
           * they are provided to the component itself directly.
           */
          ...(state.shouldWrap
            ? {}
            : {
                attributes: { ...state.attributes, ...state.actions },
              }),
          customBreakpoints: state.childrenContext?.content?.meta?.breakpoints,
        },
        context: state.childrenContext,
      };
    },
    get useChildren() {
      // TO-DO: When should \`canHaveChildren\` dictate rendering?
      // This is currently commented out because some Builder components (e.g. Box) do not have \`canHaveChildren: true\`,
      // but still receive and need to render children.
      // return state.componentInfo?.canHaveChildren ? state.useBlock.children : [];
      return state.useBlock.children ?? [];
    },
    get childrenWithoutParentComponent() {
      /**
       * When there is no \`componentRef\`, there might still be children that need to be rendered. In this case,
       * we render them outside of \`componentRef\`.
       * NOTE: We make sure not to render this if \`repeatItemData\` is non-null, because that means we are rendering an array of
       * blocks, and the children will be repeated within those blocks.
       */
      const shouldRenderChildrenOutsideRef =
        !state.component?.component && !state.repeatItemData;
      return shouldRenderChildrenOutsideRef ? state.useChildren : [];
    },
    get repeatItemData() {
      /**
       * we don't use \`state.useBlock\` here because the processing done within its logic includes evaluating the block's bindings,
       * which will not work if there is a repeat.
       */
      const { repeat, ...blockWithoutRepeat } = props.block;

      if (!repeat?.collection) {
        return undefined;
      }

      const itemsArray = evaluate({
        code: repeat.collection,
        state: props.context.state,
        context: props.context.context,
      });

      if (!Array.isArray(itemsArray)) {
        return undefined;
      }

      const collectionName = repeat.collection.split(\\".\\").pop();
      const itemNameToUse =
        repeat.itemName || (collectionName ? collectionName + \\"Item\\" : \\"item\\");
      const repeatArray = itemsArray.map((item, index) => ({
        context: {
          ...props.context,
          state: {
            ...props.context.state,
            $index: index,
            $item: item,
            [itemNameToUse]: item,
            [\`$\${itemNameToUse}Index\`]: index,
          },
        },
        block: blockWithoutRepeat,
      }));
      return repeatArray;
    },
    get inheritedTextStyles() {
      if (TARGET !== \\"reactNative\\") {
        return {};
      }

      const styles = getReactNativeBlockStyles({
        block: state.useBlock,
        context: props.context,
        blockStyles: state.attributes.style,
      });
      return extractTextStyles(styles);
    },
    get childrenContext() {
      return {
        apiKey: props.context.apiKey,
        state: props.context.state,
        content: props.context.content,
        context: props.context.context,
        registeredComponents: props.context.registeredComponents,
        inheritedStyles: state.inheritedTextStyles,
      };
    },
    get renderComponentTag() {
      if (TARGET === \\"reactNative\\") {
        return RenderComponentWithContext;
      } else if (TARGET === \\"vue3\\") {
        // vue3 expects a string for the component tag
        return \\"RenderComponent\\";
      } else {
        return RenderComponent;
      }
    },
  });

  return [
    state.shouldWrap ? (
      <>
        {isEmptyHtmlElement(state.tag) ? (
          <state.tag {...state.attributes} {...state.actions} />
        ) : null}
        {!isEmptyHtmlElement(state.tag) && state.repeatItemData
          ? state.repeatItemData.map((data, index) => (
              <RenderRepeatedBlock
                key={index}
                repeatContext={data.context}
                block={data.block}
              />
            ))
          : null}
        {!isEmptyHtmlElement(state.tag) && !state.repeatItemData ? (
          <state.tag {...state.attributes} {...state.actions}>
            <state.renderComponentTag {...state.renderComponentProps} />
            {state.childrenWithoutParentComponent.map((child, index) => (
              <RenderBlock
                key={\\"render-block-\\" + child.id}
                block={child}
                context={state.childrenContext}
              />
            ))}
            {state.childrenWithoutParentComponent.map((child, index) => (
              <BlockStyles
                key={\\"block-style-\\" + child.id}
                block={child}
                context={state.childrenContext}
              />
            ))}
          </state.tag>
        ) : null}
      </>
    ) : (
      <state.renderComponentTag {...state.renderComponentProps} />
    ),
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > renderContentExample 1`] = `
"import { RenderBlocks } from \\"@components\\";

import BuilderContext from \\"@dummy/context.js\\";
import {
  dispatchNewContentToVisualEditor,
  sendComponentsToVisualEditor,
  trackClick,
} from \\"@dummy/injection-js\\";
import RenderBlocks from \\"@dummy/RenderBlocks.js\\";

export default function RenderContent(props) {
  onMount(() => {
    sendComponentsToVisualEditor(props.customComponents);
  });

  return [
    <div
      css={{
        display: \\"flex\\",
        flexDirection: \\"columns\\",
      }}
      onClick={(event) => trackClick(props.content.id)}
    >
      <RenderBlocks blocks={props.content.blocks} />
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > rootFragmentMultiNode 1`] = `
"import { Fragment, Show } from \\"@components\\";

export default function Button(props) {
  return [
    <Fragment>
      {props.link ? (
        <a
          {...props.attributes}
          href={props.link}
          target={props.openLinkInNewTab ? \\"_blank\\" : undefined}
        >
          {props.text}
        </a>
      ) : null}
      {!props.link ? (
        <button type=\\"button\\" {...props.attributes}>
          {props.text}
        </button>
      ) : null}
    </Fragment>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > rootShow 1`] = `
"import { Show } from \\"@components\\";

export default function RenderStyles(props) {
  return [props.foo === \\"bar\\" ? <div>Bar</div> : <div>Foo</div>];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > self-referencing component 1`] = `
"import { Show, MyComponent } from \\"@components\\";

export default function MyComponent(props) {
  return [
    <div>
      {props.name}
      {props.name === \\"Batman\\" ? <MyComponent name=\\"Bruce Wayne\\" /> : null}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > self-referencing component with children 1`] = `
"import { Show, MyComponent } from \\"@components\\";

export default function MyComponent(props) {
  return [
    <div>
      {props.name}
      {props.children}
      {props.name === \\"Batman\\" ? (
        <MyComponent name=\\"Bruce\\">
          <div>Wayne</div>
        </MyComponent>
      ) : null}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > showExpressions 1`] = `
"import { Show } from \\"@components\\";

export default function ShowWithOtherValues(props) {
  return [
    <div>
      {props.conditionA ? <>Content0</> : <>ContentA</>}
      {props.conditionA ? <>ContentA</> : null}
      {props.conditionA ? <></> : <>ContentA</>}
      {props.conditionA ? <>ContentB</> : undefined}
      {props.conditionA ? undefined : <>ContentB</>}
      {props.conditionA ? <>ContentC</> : null}
      {props.conditionA ? <></> : <>ContentC</>}
      {props.conditionA ? <>ContentD</> : null}
      {props.conditionA ? <></> : <>ContentD</>}
      {props.conditionA ? <>ContentE</> : <>hello</>}
      {props.conditionA ? <>hello</> : <>ContentE</>}
      {props.conditionA ? <>ContentF</> : <>123</>}
      {props.conditionA ? <>123</> : <>ContentF</>}
      {props.conditionA === \\"Default\\" ? (
        <>4mb</>
      ) : props.conditionB === \\"Complete\\" ? (
        <>20mb</>
      ) : (
        <>9mb</>
      )}
      {props.conditionA === \\"Default\\" ? (
        props.conditionB === \\"Complete\\" ? (
          <>20mb</>
        ) : (
          <>9mb</>
        )
      ) : (
        <>4mb</>
      )}
      {props.conditionA === \\"Default\\" ? (
        props.conditionB === \\"Complete\\" ? (
          <div>complete</div>
        ) : (
          <>9mb</>
        )
      ) : props.conditionC === \\"Complete\\" ? (
        <>dff</>
      ) : (
        <div>complete else</div>
      )}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > showWithFor 1`] = `
"import { Show, For } from \\"@components\\";

export default function NestedShow(props) {
  return [
    props.conditionA ? (
      props.items.map((item, idx) => <div key={idx}>{item}</div>)
    ) : (
      <div>else-condition-A</div>
    ),
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > showWithOtherValues 1`] = `
"import { Show } from \\"@components\\";

export default function ShowWithOtherValues(props) {
  return [
    <div>
      {props.conditionA ? <>ContentA</> : null}
      {props.conditionA ? <>ContentB</> : undefined}
      {props.conditionA ? <>ContentC</> : null}
      {props.conditionA ? <>ContentD</> : null}
      {props.conditionA ? <>ContentE</> : <>hello</>}
      {props.conditionA ? <>ContentF</> : <>123</>}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > showWithRootText 1`] = `
"import { Show } from \\"@components\\";

export default function ShowRootText(props) {
  return [props.conditionA ? <>ContentA</> : <div>else-condition-A</div>];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > signalsOnUpdate 1`] = `
"export default function MyBasicComponent(props) {
  return [
    <div
      class=\\"test\\"
      css={{
        padding: \\"10px\\",
      }}
    >
      {props.id}
      {props.foo.value.bar.baz}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > spreadAttrs 1`] = `
"export default function MyBasicComponent(props) {
  return [<input {...attrs} />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > spreadNestedProps 1`] = `
"export default function MyBasicComponent(props) {
  return [<input {...props.nested} />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > spreadProps 1`] = `
"export default function MyBasicComponent(props) {
  return [<input {...props} />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > store-async-function 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function StringLiteralStore(props) {
  const state = useStore({
    arrowFunction: async function arrowFunction() {
      return Promise.resolve();
    },
    namedFunction: async function namedFunction() {
      return Promise.resolve();
    },
    fetchUsers: async function fetchUsers() {
      return Promise.resolve();
    },
  });

  return [<div />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > string-literal-store 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function StringLiteralStore(props) {
  const state = useStore({ foo: 123 });

  return [<div>{state.foo}</div>];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > styleClassAndCss 1`] = `
"export default function MyComponent(props) {
  return [
    <div
      class=\\"builder-column\\"
      style={{
        width: \\"100%\\",
      }}
      css={{
        display: \\"flex\\",
        flexDirection: \\"column\\",
        alignItems: \\"stretch\\",
      }}
    />,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > stylePropClassAndCss 1`] = `
"export default function StylePropClassAndCss(props) {
  return [
    <div
      class=\\"USE_TARGET_BLOCK_1\\"
      style={props.attributes.style}
      css={{
        display: \\"flex\\",
        flexDirection: \\"column\\",
        alignItems: \\"stretch\\",
      }}
    />,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > subComponent 1`] = `
"import { Foo } from \\"@components\\";

import Foo from \\"./foo-sub-component.js\\";

export default function SubComponent(props) {
  return [<Foo />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > svgComponent 1`] = `
"export default function SvgComponent(props) {
  return [
    <svg
      fill=\\"none\\"
      role=\\"img\\"
      viewBox={\\"0 0 \\" + 42 + \\" \\" + 42}
      width={42}
      height={42}
    >
      <defs>
        <filter id=\\"prefix__filter0_f\\" filterUnits=\\"userSpaceOnUse\\">
          <feFlood result=\\"BackgroundImageFix\\" />
          <feBlend in=\\"SourceGraphic\\" in2=\\"BackgroundImageFix\\" result=\\"shape\\" />
          <feGaussianBlur result=\\"effect1_foregroundBlur\\" stdDeviation={7} />
        </filter>
      </defs>
    </svg>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > typeDependency 1`] = `
"export default function TypeDependency(props) {
  return [<div>{props.foo}</div>];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > typeExternalStore 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function TypeExternalStore(props) {
  const state = useStore({ _name: \\"test\\" });

  return [
    <div>
      Hello
      {state._name}!{\\" \\"}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > typeGetterStore 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function TypeGetterStore(props) {
  const state = useStore({
    name: \\"test\\",
    getName() {
      if (state.name === \\"a\\") {
        return \\"b\\";
      }

      return state.name;
    },
    get test() {
      return \\"test\\";
    },
  });

  return [
    <div>
      Hello
      {state.name}!{\\" \\"}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > use-style 1`] = `
"export default function MyComponent(props) {
  useStyle(\`
        button {
            background: blue;
            color: white;
            font-size: 12px;
            outline: 1px solid black;
        }
    \`);

  return [<button type=\\"button\\">Button</button>];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > use-style-and-css 1`] = `
"export default function MyComponent(props) {
  useStyle(\`
        button {
            font-size: 12px;
            outline: 1px solid black;
        }
    \`);

  return [
    <button
      type=\\"button\\"
      css={{
        background: \\"blue\\",
        color: \\"white\\",
      }}
    >
      Button
    </button>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > use-style-outside-component 1`] = `
"export default function MyComponent(props) {
  useStyle(\`
  button {
      background: blue;
      color: white;
      font-size: 12px;
      outline: 1px solid black;
  }
\`);

  return [<button type=\\"button\\">Button</button>];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > useTarget 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function UseTargetComponent(props) {
  const state = useStore({
    get name() {
      const prefix = \\"USE_TARGET_BLOCK_1\\";
      return prefix + \\"foo\\";
    },
    lastName: \\"bar\\",
    foo: \\"bar\\",
  });

  onMount(() => {
    console.log(state.foo);
    state.foo = \\"bar\\";
    (\\"USE_TARGET_BLOCK_2\\");
  });

  return [<div>{state.name}</div>];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Javascript Test > webComponent 1`] = `
"import { register } from \\"swiper/element/bundle\\";

export default function MyBasicWebComponent(props) {
  return [
    <swiper-container slides-per-view=\\"3\\" navigation=\\"true\\" pagination=\\"true\\">
      <swiper-slide>Slide 1</swiper-slide>
      <swiper-slide>Slide 2</swiper-slide>
      <swiper-slide>Slide 3</swiper-slide>
    </swiper-container>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Remove Internal mitosis package 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyBasicComponent(props) {
  const state = useStore({ name: \\"PatrickJS\\" });

  return [
    <div>
      Hello
      {state.name}! I can run in React, Qwik, Vue, Solid, or Liquid!
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > Advanced 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { For } from \\"@components\\";

export default function MyBasicForShowComponent(props) {
  const state = useStore({ name: \\"PatrickJS\\", names: [\\"Steve\\", \\"PatrickJS\\"] });

  return [
    <main>
      {state.names.map((person, i) => (
        <div>
          {i}:{person}
        </div>
      ))}
      {state.names.map((person, index) => (
        <span>{person}</span>
      ))}
      {state.names.map((_, index) => (
        <br />
      ))}
      {Array.from({
        length: 10,
      }).map((_, ee) => (
        <pre>{ee}</pre>
      ))}
      {Array.from({
        length: 10,
      }).map((_, index) => (
        <p>{index}</p>
      ))}
      {state.names.map((person, index) => (
        <span>
          {person}
          {index}
        </span>
      ))}
      {Array.from({
        length: 10,
      }).map((person, count) => (
        <span>
          {person}
          {count}
        </span>
      ))}
      {state.names.map((person, i) => (
        <span>
          {person}
          {i}
        </span>
      ))}
      {Array.from({
        length: 10,
      }).map((person, index) => (
        <span>
          {person}
          {index}
        </span>
      ))}
    </main>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > AdvancedRef 1`] = `
"import { useStore, useRef } from \\"@builder.io/mitosis\\";
import { Show, Fragment } from \\"@components\\";
export interface Props {
  showInput: boolean;
}

export default function MyBasicRefComponent(props) {
  const state = useStore({
    name: \\"PatrickJS\\",
    onBlur: function onBlur() {
      // Maintain focus
      inputRef.current.focus();
    },
    lowerCaseName: function lowerCaseName() {
      return state.name.toLowerCase();
    },
  });

  const inputRef = useRef<HTMLInputElement>(null);
  const inputNoArgRef = useRef<HTMLLabelElement>(null);
  const inputRef = useRef<HTMLInputElement>(null);
  const inputNoArgRef = useRef<HTMLLabelElement>(null);

  return [
    <div>
      {props.showInput ? (
        <Fragment>
          <input
            ref={inputRef}
            css={{
              color: \\"red\\",
            }}
            value={state.name}
            onBlur={(event) => state.onBlur()}
            onChange={(event) => (state.name = event.target.value)}
          />
          <label for=\\"cars\\" ref={inputNoArgRef}>
            Choose a car:
          </label>
          <select name=\\"cars\\" id=\\"cars\\">
            <option value=\\"supra\\">GR Supra</option>
            <option value=\\"86\\">GR 86</option>
          </select>
        </Fragment>
      ) : null}
      Hello
      {state.lowerCaseName()}! I can run in React, Qwik, Vue, Solid, or Web
      Component!
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > Basic 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export interface MyBasicComponentProps {
  id: string;
}

export const DEFAULT_VALUES = {
  name: \\"Steve\\",
};

export default function MyBasicComponent(props) {
  const state = useStore({
    name: \\"Steve\\",
    underscore_fn_name() {
      return \\"bar\\";
    },
    age: 1,
    sports: [\\"\\"],
  });

  return [
    <div
      class=\\"test\\"
      css={{
        padding: \\"10px\\",
      }}
    >
      <input
        value={DEFAULT_VALUES.name || state.name}
        onChange={(event) => (state.name = myEvent.target.value)}
      />
      Hello! I can run in React, Vue, Solid, or Liquid! &gt;
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > Basic 2`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { For, Show } from \\"@components\\";

export default function MyBasicForShowComponent(props) {
  const state = useStore({ name: \\"PatrickJS\\", names: [\\"Steve\\", \\"PatrickJS\\"] });

  return [
    <div>
      {state.names.map((person, index) =>
        person === state.name ? (
          <>
            <input
              value={state.name}
              onChange={(event) => {
                state.name = event.target.value + \\" and \\" + person;
              }}
            />
            Hello
            {person}! I can run in Qwik, Web Component, React, Vue, Solid, or
            Liquid!
          </>
        ) : null
      )}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > Basic Context 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

import { Injector, MyService, createInjector } from \\"@dummy/injection-js\\";

export default function MyBasicComponent(props) {
  const state = useStore({
    name: \\"PatrickJS\\",
    onChange: function onChange() {
      const change = myService.method(\\"change\\");
      console.log(change);
    },
  });

  onMount(() => {
    const bye = myService.method(\\"hi\\");
    console.log(bye);
  });

  return [
    <div>
      {myService.method(\\"hello\\") + state.name}
      Hello! I can run in React, Vue, Solid, or Liquid!
      <input onChange={(event) => state.onChange} />
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > Basic OnMount Update 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export interface Props {
  hi: string;
  bye: string;
}

export default function MyBasicOnMountUpdateComponent(props) {
  const state = useStore({ name: \\"PatrickJS\\", names: [\\"Steve\\", \\"PatrickJS\\"] });

  onMount(() => {
    state.name = \\"PatrickJS onMount\\" + props.bye;
  });

  return [
    <div>
      Hello
      {state.name}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > Basic Outputs 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyBasicOutputsComponent(props) {
  const state = useStore({ name: \\"PatrickJS\\" });

  onMount(() => {
    props.onMessage(state.name);
    props.onEvent(props.message);
  });

  return [<div />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > Basic Outputs Meta 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

useMetadata({
  outputs: [\\"onMessage\\", \\"onEvent\\"],
  baz: \\"metadata inside component\\",
});

export default function MyBasicOutputsComponent(props) {
  const state = useStore({ name: \\"PatrickJS\\" });

  onMount(() => {
    props.onMessage(state.name);
    props.onEvent(props.message);
  });

  return [<div />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > BasicAttribute 1`] = `
"export default function MyComponent(props) {
  return [<input autocapitalize=\\"on\\" autocomplete=\\"on\\" spellcheck={true} />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > BasicBooleanAttribute 1`] = `
"import { Show, MyBooleanAttributeComponent } from \\"@components\\";
type Props = {
  children: any;
  type: string;
};

import MyBooleanAttributeComponent from \\"./basic-boolean-attribute-component.raw\\";

export default function MyBooleanAttribute(props) {
  return [
    <div>
      {props.children ? (
        <>
          {props.children}
          {props.type}
        </>
      ) : null}
      <MyBooleanAttributeComponent toggle={true} />
      <MyBooleanAttributeComponent toggle={true} />
      <MyBooleanAttributeComponent list={null} />
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > BasicChildComponent 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { MyBasicComponent, MyBasicOnMountUpdateComponent } from \\"@components\\";

import MyBasicOnMountUpdateComponent from \\"./basic-onMount-update.raw\\";
import MyBasicComponent from \\"./basic.raw\\";

export default function MyBasicChildComponent(props) {
  const state = useStore({ name: \\"Steve\\", dev: \\"PatrickJS\\" });

  return [
    <div>
      <MyBasicComponent id={state.dev} />
      <div>
        <MyBasicOnMountUpdateComponent hi={state.name} bye={state.dev} />
      </div>
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > BasicFor 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { For, Fragment } from \\"@components\\";

export default function MyBasicForComponent(props) {
  const state = useStore({ name: \\"PatrickJS\\", names: [\\"Steve\\", \\"PatrickJS\\"] });

  onMount(() => {
    console.log(\\"onMount code\\");
  });

  return [
    <div>
      {state.names.map((person, index) => (
        <Fragment>
          <input
            value={state.name}
            onChange={(event) => {
              state.name = event.target.value + \\" and \\" + person;
            }}
          />
          Hello
          {person}! I can run in Qwik, Web Component, React, Vue, Solid, or
          Liquid!
        </Fragment>
      ))}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > BasicRef 1`] = `
"import { useStore, useRef } from \\"@builder.io/mitosis\\";
import { Show, Fragment } from \\"@components\\";
export interface Props {
  showInput: boolean;
}

export default function MyBasicRefComponent(props) {
  const state = useStore({
    name: \\"PatrickJS\\",
    onBlur: function onBlur() {
      // Maintain focus
      inputRef.current.focus();
    },
    lowerCaseName: function lowerCaseName() {
      return state.name.toLowerCase();
    },
  });

  const inputRef = useRef<HTMLInputElement>(null);
  const inputNoArgRef = useRef<HTMLLabelElement>(null);
  const inputRef = useRef<HTMLInputElement>(null);
  const inputNoArgRef = useRef<HTMLLabelElement>(null);

  return [
    <div>
      {props.showInput ? (
        <Fragment>
          <input
            ref={inputRef}
            css={{
              color: \\"red\\",
            }}
            value={state.name}
            onBlur={(event) => state.onBlur()}
            onChange={(event) => (state.name = event.target.value)}
          />
          <label for=\\"cars\\" ref={inputNoArgRef}>
            Choose a car:
          </label>
          <select name=\\"cars\\" id=\\"cars\\">
            <option value=\\"supra\\">GR Supra</option>
            <option value=\\"86\\">GR 86</option>
          </select>
        </Fragment>
      ) : null}
      Hello
      {state.lowerCaseName()}! I can run in React, Qwik, Vue, Solid, or Web
      Component!
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > BasicRefAssignment 1`] = `"unknown: Maximum call stack size exceeded"`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > BasicRefPrevious 1`] = `"unknown: Maximum call stack size exceeded"`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > Button 1`] = `
"import { Show } from \\"@components\\";
export interface ButtonProps {
  attributes?: any;
  text?: string;
  link?: string;
  openLinkInNewTab?: boolean;
}

export default function Button(props) {
  return [
    <div>
      {props.link ? (
        <a
          {...props.attributes}
          href={props.link}
          target={props.openLinkInNewTab ? \\"_blank\\" : undefined}
        >
          {props.text}
        </a>
      ) : null}
      {!props.link ? (
        <button type=\\"button\\" {...props.attributes}>
          {props.text}
        </button>
      ) : null}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > Columns 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { For } from \\"@components\\";
type Column = {
  content: any; // TODO: Implement this when support for dynamic CSS lands

  width?: number;
};
export interface ColumnProps {
  columns?: Column[]; // TODO: Implement this when support for dynamic CSS lands

  space?: number; // TODO: Implement this when support for dynamic CSS lands

  stackColumnsAt?: \\"tablet\\" | \\"mobile\\" | \\"never\\"; // TODO: Implement this when support for dynamic CSS lands

  reverseColumnsWhenStacked?: boolean;
}

export default function Column(props) {
  const state = useStore({
    getColumns() {
      return props.columns || [];
    },
    getGutterSize() {
      return typeof props.space === \\"number\\" ? props.space || 0 : 20;
    },
    getWidth(index: number) {
      const columns = state.getColumns();
      return (columns[index] && columns[index].width) || 100 / columns.length;
    },
    getColumnCssWidth(index: number) {
      const columns = state.getColumns();
      const gutterSize = state.getGutterSize();
      const subtractWidth =
        (gutterSize * (columns.length - 1)) / columns.length;
      return \`calc(\${state.getWidth(index)}% - \${subtractWidth}px)\`;
    },
  });

  return [
    <div
      class=\\"builder-columns\\"
      css={{
        display: \\"flex\\",
        flexDirection: \\"column\\",
        alignItems: \\"stretch\\",
        lineHeight: \\"normal\\",
        \\"@media (max-width: 999px)\\": {
          flexDirection: \\"row\\",
        },
        \\"@media (max-width: 639px)\\": {
          flexDirection: \\"row-reverse\\",
        },
      }}
    >
      {props.columns.map((column, index) => (
        <div
          class=\\"builder-column\\"
          css={{
            flexGrow: \\"1\\",
          }}
        >
          {column.content}
          {index}
        </div>
      ))}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > ContentSlotHtml 1`] = `
"import { Slot } from \\"@components\\";
type Props = {
  [key: string]: string | JSX.Element;
  slotTesting: JSX.Element;
};

import type { JSX } from \\"../../../../jsx-runtime\\";

export default function ContentSlotCode(props) {
  return [
    <div>
      <Slot name={props.slotTesting} />
      <div>
        <hr />
      </div>
      <div>
        <Slot />
      </div>
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > ContentSlotJSX 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { Show, Slot } from \\"@components\\";
type Props = {
  [key: string]: string | JSX.Element;
};

import type { JSX } from \\"../../../../jsx-runtime\\";

export default function ContentSlotJsxCode(props) {
  const state = useStore({
    name: \\"king\\",
    showContent: false,
    get cls() {
      return props.slotContent && props.children ? \`\${state.name}-content\` : \\"\\";
    },
    show() {
      props.slotContent ? 1 : \\"\\";
    },
  });

  return [
    props.slotReference ? (
      <div
        name={props.slotContent ? \\"name1\\" : \\"name2\\"}
        title={props.slotContent ? \\"title1\\" : \\"title2\\"}
        {...props.attributes}
        onClick={(event) => state.show()}
        class={state.cls}
      >
        {state.showContent && props.slotContent ? (
          <Slot name=\\"content\\">{props.content}</Slot>
        ) : null}
        <div>
          <hr />
        </div>
        <div>{props.children}</div>
      </div>
    ) : null,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > CustomCode 1`] = `
"import { useStore, useRef } from \\"@builder.io/mitosis\\";

export interface CustomCodeProps {
  code: string;
  replaceNodes?: boolean;
}

export default function CustomCode(props) {
  const state = useStore({
    scriptsInserted: [],
    scriptsRun: [],
    findAndRunScripts() {
      // TODO: Move this function to standalone one in '@builder.io/utils'
      if (elem.current && typeof window !== \\"undefined\\") {
        /** @type {HTMLScriptElement[]} */
        const scripts = elem.current.getElementsByTagName(\\"script\\");

        for (let i = 0; i < scripts.length; i++) {
          const script = scripts[i];

          if (script.src) {
            if (state.scriptsInserted.includes(script.src)) {
              continue;
            }

            state.scriptsInserted.push(script.src);
            const newScript = document.createElement(\\"script\\");
            newScript.async = true;
            newScript.src = script.src;
            document.head.appendChild(newScript);
          } else if (
            !script.type ||
            [
              \\"text/javascript\\",
              \\"application/javascript\\",
              \\"application/ecmascript\\",
            ].includes(script.type)
          ) {
            if (state.scriptsRun.includes(script.innerText)) {
              continue;
            }

            try {
              state.scriptsRun.push(script.innerText);
              new Function(script.innerText)();
            } catch (error) {
              console.warn(\\"\`CustomCode\`: Error running script:\\", error);
            }
          }
        }
      }
    },
  });

  const elem = useRef<HTMLDivElement>(null);
  const elem = useRef<HTMLDivElement>(null);

  onMount(() => {
    state.findAndRunScripts();
  });

  return [
    <div
      ref={elem}
      class={
        \\"builder-custom-code\\" + (props.replaceNodes ? \\" replace-nodes\\" : \\"\\")
      }
      innerHTML={props.code}
    />,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > Embed 1`] = `
"import { useStore, useRef } from \\"@builder.io/mitosis\\";

export interface CustomCodeProps {
  code: string;
  replaceNodes?: boolean;
}

export default function CustomCode(props) {
  const state = useStore({
    scriptsInserted: [],
    scriptsRun: [],
    findAndRunScripts() {
      // TODO: Move this function to standalone one in '@builder.io/utils'
      if (elem.current && typeof window !== \\"undefined\\") {
        /** @type {HTMLScriptElement[]} */
        const scripts = elem.current.getElementsByTagName(\\"script\\");

        for (let i = 0; i < scripts.length; i++) {
          const script = scripts[i];

          if (script.src) {
            if (state.scriptsInserted.includes(script.src)) {
              continue;
            }

            state.scriptsInserted.push(script.src);
            const newScript = document.createElement(\\"script\\");
            newScript.async = true;
            newScript.src = script.src;
            document.head.appendChild(newScript);
          } else if (
            !script.type ||
            [
              \\"text/javascript\\",
              \\"application/javascript\\",
              \\"application/ecmascript\\",
            ].includes(script.type)
          ) {
            if (state.scriptsRun.includes(script.innerText)) {
              continue;
            }

            try {
              state.scriptsRun.push(script.innerText);
              new Function(script.innerText)();
            } catch (error) {
              console.warn(\\"\`CustomCode\`: Error running script:\\", error);
            }
          }
        }
      }
    },
  });

  const elem = useRef<HTMLDivElement>(null);
  const elem = useRef<HTMLDivElement>(null);

  onMount(() => {
    state.findAndRunScripts();
  });

  return [
    <div
      ref={elem}
      class={
        \\"builder-custom-code\\" + (props.replaceNodes ? \\" replace-nodes\\" : \\"\\")
      }
      innerHTML={props.code}
    />,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > Form 1`] = `
"import { useStore, useRef } from \\"@builder.io/mitosis\\";
import { Show, For, BuilderBlockComponent, BuilderBlocks } from \\"@components\\";
export interface FormProps {
  attributes?: any;
  name?: string;
  action?: string;
  validate?: boolean;
  method?: string;
  builderBlock?: BuilderElement;
  sendSubmissionsTo?: string;
  sendSubmissionsToEmail?: string;
  sendWithJs?: boolean;
  contentType?: string;
  customHeaders?: {
    [key: string]: string;
  };
  successUrl?: string;
  previewState?: FormState;
  successMessage?: BuilderElement[];
  errorMessage?: BuilderElement[];
  sendingMessage?: BuilderElement[];
  resetFormOnSubmit?: boolean;
  errorMessagePath?: string;
}
export type FormState = \\"unsubmitted\\" | \\"sending\\" | \\"success\\" | \\"error\\";

import { Builder, BuilderElement, builder } from \\"@builder.io/sdk\\";
import {
  BuilderBlock as BuilderBlockComponent,
  BuilderBlocks,
  get,
  set,
} from \\"@fake\\";

export default function FormComponent(props) {
  const state = useStore({
    formState: \\"unsubmitted\\",
    responseData: null,
    formErrorMessage: \\"\\",
    get submissionState() {
      return (Builder.isEditing && props.previewState) || state.formState;
    },
    onSubmit(
      event: Event & {
        currentTarget: HTMLFormElement;
      }
    ) {
      const sendWithJs =
        props.sendWithJs || props.sendSubmissionsTo === \\"email\\";

      if (props.sendSubmissionsTo === \\"zapier\\") {
        event.preventDefault();
      } else if (sendWithJs) {
        if (!(props.action || props.sendSubmissionsTo === \\"email\\")) {
          event.preventDefault();
          return;
        }

        event.preventDefault();
        const el = event.currentTarget;
        const headers = props.customHeaders || {};
        let body: any;
        const formData = new FormData(el); // TODO: maybe support null

        const formPairs: {
          key: string;
          value: File | boolean | number | string | FileList;
        }[] = Array.from(
          event.currentTarget.querySelectorAll(\\"input,select,textarea\\")
        )
          .filter((el) => !!(el as HTMLInputElement).name)
          .map((el) => {
            let value: any;
            const key = (el as HTMLImageElement).name;

            if (el instanceof HTMLInputElement) {
              if (el.type === \\"radio\\") {
                if (el.checked) {
                  value = el.name;
                  return {
                    key,
                    value,
                  };
                }
              } else if (el.type === \\"checkbox\\") {
                value = el.checked;
              } else if (el.type === \\"number\\" || el.type === \\"range\\") {
                const num = el.valueAsNumber;

                if (!isNaN(num)) {
                  value = num;
                }
              } else if (el.type === \\"file\\") {
                // TODO: one vs multiple files
                value = el.files;
              } else {
                value = el.value;
              }
            } else {
              value = (el as HTMLInputElement).value;
            }

            return {
              key,
              value,
            };
          });
        let contentType = props.contentType;

        if (props.sendSubmissionsTo === \\"email\\") {
          contentType = \\"multipart/form-data\\";
        }

        Array.from(formPairs).forEach(({ value }) => {
          if (
            value instanceof File ||
            (Array.isArray(value) && value[0] instanceof File) ||
            value instanceof FileList
          ) {
            contentType = \\"multipart/form-data\\";
          }
        }); // TODO: send as urlEncoded or multipart by default
        // because of ease of use and reliability in browser API
        // for encoding the form?

        if (contentType !== \\"application/json\\") {
          body = formData;
        } else {
          // Json
          const json = {};
          Array.from(formPairs).forEach(({ value, key }) => {
            set(json, key, value);
          });
          body = JSON.stringify(json);
        }

        if (contentType && contentType !== \\"multipart/form-data\\") {
          if (
            /* Zapier doesn't allow content-type header to be sent from browsers */
            !(sendWithJs && props.action?.includes(\\"zapier.com\\"))
          ) {
            headers[\\"content-type\\"] = contentType;
          }
        }

        const presubmitEvent = new CustomEvent(\\"presubmit\\", {
          detail: {
            body,
          },
        });

        if (formRef.current) {
          formRef.current.dispatchEvent(presubmitEvent);

          if (presubmitEvent.defaultPrevented) {
            return;
          }
        }

        state.formState = \\"sending\\";
        const formUrl = \`\${
          builder.env === \\"dev\\" ? \\"http://localhost:5000\\" : \\"https://builder.io\\"
        }/api/v1/form-submit?apiKey=\${builder.apiKey}&to=\${btoa(
          props.sendSubmissionsToEmail || \\"\\"
        )}&name=\${encodeURIComponent(props.name || \\"\\")}\`;
        fetch(
          props.sendSubmissionsTo === \\"email\\" ? formUrl : props.action!,
          /* TODO: throw error if no action URL */
          {
            body,
            headers,
            method: props.method || \\"post\\",
          }
        ).then(
          async (res) => {
            let body;
            const contentType = res.headers.get(\\"content-type\\");

            if (contentType && contentType.indexOf(\\"application/json\\") !== -1) {
              body = await res.json();
            } else {
              body = await res.text();
            }

            if (!res.ok && props.errorMessagePath) {
              /* TODO: allow supplying an error formatter function */
              let message = get(body, props.errorMessagePath);

              if (message) {
                if (typeof message !== \\"string\\") {
                  /* TODO: ideally convert json to yaml so it woul dbe like
           error: - email has been taken */
                  message = JSON.stringify(message);
                }

                state.formErrorMessage = message;
              }
            }

            state.responseData = body;
            state.formState = res.ok ? \\"success\\" : \\"error\\";

            if (res.ok) {
              const submitSuccessEvent = new CustomEvent(\\"submit:success\\", {
                detail: {
                  res,
                  body,
                },
              });

              if (formRef.current) {
                formRef.current.dispatchEvent(submitSuccessEvent);

                if (submitSuccessEvent.defaultPrevented) {
                  return;
                }
                /* TODO: option to turn this on/off? */

                if (props.resetFormOnSubmit !== false) {
                  formRef.current.reset();
                }
              }
              /* TODO: client side route event first that can be preventDefaulted */

              if (props.successUrl) {
                if (formRef.current) {
                  const event = new CustomEvent(\\"route\\", {
                    detail: {
                      url: props.successUrl,
                    },
                  });
                  formRef.current.dispatchEvent(event);

                  if (!event.defaultPrevented) {
                    location.href = props.successUrl;
                  }
                } else {
                  location.href = props.successUrl;
                }
              }
            }
          },
          (err) => {
            const submitErrorEvent = new CustomEvent(\\"submit:error\\", {
              detail: {
                error: err,
              },
            });

            if (formRef.current) {
              formRef.current.dispatchEvent(submitErrorEvent);

              if (submitErrorEvent.defaultPrevented) {
                return;
              }
            }

            state.responseData = err;
            state.formState = \\"error\\";
          }
        );
      }
    },
  });

  const formRef = useRef<HTMLFormElement>(null);
  const formRef = useRef<HTMLFormElement>(null);

  return [
    <form
      validate={props.validate}
      ref={formRef}
      action={!props.sendWithJs && props.action}
      method={props.method}
      name={props.name}
      onSubmit={(event) => state.onSubmit(event)}
      {...props.attributes}
    >
      {props.builderBlock && props.builderBlock.children
        ? (props.builderBlock?.children).map((block, index) => (
            <BuilderBlockComponent key={block.id} block={block} index={index} />
          ))
        : null}
      {state.submissionState === \\"error\\" ? (
        <BuilderBlocks dataPath=\\"errorMessage\\" blocks={props.errorMessage!} />
      ) : null}
      {state.submissionState === \\"sending\\" ? (
        <BuilderBlocks
          dataPath=\\"sendingMessage\\"
          blocks={props.sendingMessage!}
        />
      ) : null}
      {state.submissionState === \\"error\\" && state.responseData ? (
        <pre
          class=\\"builder-form-error-text\\"
          css={{
            padding: \\"10px\\",
            color: \\"red\\",
            textAlign: \\"center\\",
          }}
        >
          {JSON.stringify(state.responseData, null, 2)}
        </pre>
      ) : null}
      {state.submissionState === \\"success\\" ? (
        <BuilderBlocks
          dataPath=\\"successMessage\\"
          blocks={props.successMessage!}
        />
      ) : null}
    </form>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > Image 1`] = `
"import { useStore, useRef } from \\"@builder.io/mitosis\\";
import { Show } from \\"@components\\";
// TODO: AMP Support?
export interface ImageProps {
  _class?: string;
  image: string;
  sizes?: string;
  lazy?: boolean;
  height?: number;
  width?: number;
  altText?: string;
  backgroundSize?: string;
  backgroundPosition?: string; // TODO: Support generating Builder.io and or Shopify \`srcset\`s when needed

  srcset?: string; // TODO: Implement support for custom aspect ratios

  aspectRatio?: number; // TODO: This might not work as expected in terms of positioning

  children?: any;
}

export default function Image(props) {
  const state = useStore({
    scrollListener: null,
    imageLoaded: false,
    setLoaded() {
      state.imageLoaded = true;
    },
    useLazyLoading() {
      // TODO: Add more checks here, like testing for real web browsers
      return !!props.lazy && state.isBrowser();
    },
    isBrowser: function isBrowser() {
      return (
        typeof window !== \\"undefined\\" &&
        window.navigator.product != \\"ReactNative\\"
      );
    },
    load: false,
  });

  const pictureRef = useRef<HTMLElement>();
  const pictureRef = useRef<HTMLElement>();

  onMount(() => {
    if (state.useLazyLoading()) {
      // throttled scroll capture listener
      const listener = () => {
        if (pictureRef.current) {
          const rect = pictureRef.current.getBoundingClientRect();
          const buffer = window.innerHeight / 2;

          if (rect.top < window.innerHeight + buffer) {
            state.load = true;
            state.scrollListener = null;
            window.removeEventListener(\\"scroll\\", listener);
          }
        }
      };

      state.scrollListener = listener;
      window.addEventListener(\\"scroll\\", listener, {
        capture: true,
        passive: true,
      });
      listener();
    }
  });

  onUnMount(() => {
    if (state.scrollListener) {
      window.removeEventListener(\\"scroll\\", state.scrollListener);
    }
  });

  return [
    <div>
      <picture ref={pictureRef}>
        {!state.useLazyLoading() || state.load ? (
          <img
            alt={props.altText}
            aria-role={props.altText ? \\"presentation\\" : undefined}
            css={{
              opacity: \\"1\\",
              transition: \\"opacity 0.2s ease-in-out\\",
              objectFit: \\"cover\\",
              objectPosition: \\"center\\",
            }}
            class={\\"builder-image\\" + (props._class ? \\" \\" + props._class : \\"\\")}
            src={props.image}
            onLoad={(event) => state.setLoaded()}
            srcset={props.srcset}
            sizes={props.sizes}
          />
        ) : null}
        <source srcset={props.srcset} />
      </picture>
      {props.children}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > Image State 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { For, Fragment } from \\"@components\\";

export default function ImgStateComponent(props) {
  const state = useStore({
    canShow: true,
    images: [\\"http://example.com/qwik.png\\"],
  });

  return [
    <div>
      {state.images.map((item, itemIndex) => (
        <Fragment>
          <img class=\\"custom-class\\" src={item} key={itemIndex} />
        </Fragment>
      ))}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > Img 1`] = `
"export interface ImgProps {
  attributes?: any;
  imgSrc?: string;
  altText?: string;
  backgroundSize?: \\"cover\\" | \\"contain\\";
  backgroundPosition?:
    | \\"center\\"
    | \\"top\\"
    | \\"left\\"
    | \\"right\\"
    | \\"bottom\\"
    | \\"top left\\"
    | \\"top right\\"
    | \\"bottom left\\"
    | \\"bottom right\\";
}

import { Builder } from \\"@builder.io/sdk\\";

export default function ImgComponent(props) {
  return [
    <img
      style={{
        objectFit: props.backgroundSize || \\"cover\\",
        objectPosition: props.backgroundPosition || \\"center\\",
      }}
      {...props.attributes}
      key={(Builder.isEditing && props.imgSrc) || \\"default-key\\"}
      alt={props.altText}
      src={props.imgSrc}
    />,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > Input 1`] = `
"export interface FormInputProps {
  type?: string;
  attributes?: any;
  name?: string;
  value?: string;
  placeholder?: string;
  defaultValue?: string;
  required?: boolean;
  onChange?: (value: string) => void;
}

import { Builder } from \\"@builder.io/sdk\\";

export default function FormInputComponent(props) {
  return [
    <input
      {...props.attributes}
      key={
        Builder.isEditing && props.defaultValue
          ? props.defaultValue
          : \\"default-key\\"
      }
      placeholder={props.placeholder}
      type={props.type}
      name={props.name}
      value={props.value}
      defaultValue={props.defaultValue}
      required={props.required}
      onChange={(event) => props.onChange?.(event.target.value)}
    />,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > InputParent 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { FormInputComponent } from \\"@components\\";

import FormInputComponent from \\"./input.raw\\";

export default function Stepper(props) {
  const state = useStore({
    handleChange(value: string) {
      console.log(value);
    },
  });

  return [
    <FormInputComponent
      name=\\"kingzez\\"
      type=\\"text\\"
      onChange={(event) => state.handleChange(value)}
    />,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > RawText 1`] = `
"export interface RawTextProps {
  attributes?: any;
  text?: string; // builderBlock?: any;
}

export default function RawText(props) {
  return [
    <span
      class={props.attributes?.class || props.attributes?.className}
      innerHTML={props.text || \\"\\"}
    />,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > Section 1`] = `
"export interface SectionProps {
  maxWidth?: number;
  attributes?: any;
  children?: any;
}

export default function SectionComponent(props) {
  return [
    <section
      {...props.attributes}
      style={
        props.maxWidth && typeof props.maxWidth === \\"number\\"
          ? {
              maxWidth: props.maxWidth,
            }
          : undefined
      }
    >
      {props.children}
    </section>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > Section 2`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { Show, For } from \\"@components\\";
export interface SectionProps {
  maxWidth?: number;
  attributes?: any;
  children?: any;
}

export default function SectionStateComponent(props) {
  const state = useStore({ max: 42, items: [42] });

  return [
    state.max
      ? state.items.map((item, index) => (
          <section
            {...props.attributes}
            style={{
              maxWidth: item + state.max,
            }}
          >
            {props.children}
          </section>
        ))
      : null,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > Select 1`] = `
"import { For } from \\"@components\\";
export interface FormSelectProps {
  options?: {
    name?: string;
    value: string;
  }[];
  attributes?: any;
  name?: string;
  value?: string;
  defaultValue?: string;
}

import { Builder } from \\"@builder.io/sdk\\";

export default function SelectComponent(props) {
  return [
    <select
      {...props.attributes}
      value={props.value}
      key={
        Builder.isEditing && props.defaultValue
          ? props.defaultValue
          : \\"default-key\\"
      }
      defaultValue={props.defaultValue}
      name={props.name}
    >
      {props.options.map((option, index) => (
        <option value={option.value} data-index={index}>
          {option.name || option.value}
        </option>
      ))}
    </select>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > SlotDefault 1`] = `
"import { Slot } from \\"@components\\";
type Props = {
  [key: string]: string;
};

export default function SlotCode(props) {
  return [
    <div>
      <Slot>
        <div class=\\"default-slot\\">Default content</div>
      </Slot>
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > SlotHtml 1`] = `
"import { ContentSlotCode, Slot } from \\"@components\\";
type Props = {
  [key: string]: string;
};

import ContentSlotCode from \\"./content-slot-jsx.raw\\";

export default function SlotCode(props) {
  return [
    <div>
      <ContentSlotCode>
        <Slot testing={<div>Hello</div>} />
      </ContentSlotCode>
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > SlotJsx 1`] = `
"import { ContentSlotCode } from \\"@components\\";
type Props = {
  [key: string]: string;
};

import ContentSlotCode from \\"./content-slot-jsx.raw\\";

export default function SlotCode(props) {
  return [
    <div>
      <ContentSlotCode slotTesting={<div>Hello</div>} />
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > SlotNamed 1`] = `
"import { Slot } from \\"@components\\";
type Props = {
  [key: string]: string;
};

export default function SlotCode(props) {
  return [
    <div>
      <Slot name=\\"myAwesomeSlot\\" />
      <Slot name=\\"top\\" />
      <Slot name=\\"left\\">Default left</Slot>
      <Slot>Default Child</Slot>
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > Stamped.io 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { Show, For } from \\"@components\\";
type SmileReviewsProps = {
  productId: string;
  apiKey: string;
};

import { kebabCase, snakeCase } from \\"lodash\\";

export default function SmileReviews(props) {
  const state = useStore({
    reviews: [],
    name: \\"test\\",
    showReviewPrompt: false,
    kebabCaseValue() {
      return kebabCase(\\"testThat\\");
    },
    snakeCaseValue() {
      return snakeCase(\\"testThis\\");
    },
  });

  onMount(() => {
    fetch(
      \`https://stamped.io/api/widget/reviews?storeUrl=builder-io.myshopify.com&apiKey=\${
        props.apiKey || \\"pubkey-8bbDq7W6w4sB3OWeM1HUy2s47702hM\\"
      }&productId=\${props.productId || \\"2410511106127\\"}\`
    )
      .then((res) => res.json())
      .then((data) => {
        state.reviews = data.data;
      });
  });

  return [
    <div data-user={state.name}>
      <button onClick={(event) => (state.showReviewPrompt = true)}>
        Write a review
      </button>
      {state.showReviewPrompt || \\"asdf\\" ? (
        <>
          <input placeholder=\\"Email\\" />
          <input
            placeholder=\\"Title\\"
            css={{
              display: \\"block\\",
            }}
          />
          <textarea
            placeholder=\\"How was your experience?\\"
            css={{
              display: \\"block\\",
            }}
          />
          <button
            css={{
              display: \\"block\\",
            }}
            onClick={(event) => {
              ev.preventDefault();
              state.showReviewPrompt = false;
            }}
          >
            Submit
          </button>
        </>
      ) : null}
      {state.reviews.map((review, index) => (
        <div
          $name=\\"Review\\"
          key={review.id}
          css={{
            margin: \\"10px\\",
            padding: \\"10px\\",
            background: \\"white\\",
            display: \\"flex\\",
            borderRadius: \\"5px\\",
            boxShadow: \\"0 2px 5px rgba(0, 0, 0, 0.1)\\",
            WebkitFontSmoothing: \\"antialiased\\",
          }}
        >
          <img
            css={{
              height: \\"30px\\",
              width: \\"30px\\",
              marginRight: \\"10px\\",
            }}
            src={review.avatar}
          />
          <div class={state.showReviewPrompt ? \\"bg-primary\\" : \\"bg-secondary\\"}>
            <div>
              N:
              {index}
            </div>
            <div>{review.author}</div>
            <div>{review.reviewMessage}</div>
          </div>
        </div>
      ))}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > Submit 1`] = `
"export interface ButtonProps {
  attributes?: any;
  text?: string;
}

export default function SubmitButton(props) {
  return [
    <button type=\\"submit\\" {...props.attributes}>
      {props.text}
    </button>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > Text 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export interface TextProps {
  attributes?: any;
  rtlMode: boolean;
  text?: string;
  content?: string;
  builderBlock?: any;
}

import { Builder } from \\"@builder.io/sdk\\";

export default function Text(props) {
  const state = useStore({ name: \\"Decadef20\\" });

  return [
    <div
      contentEditable={allowEditingText || undefined}
      data-name={{
        test: state.name || \\"any name\\",
      }}
      innerHTML={
        props.text ||
        props.content ||
        state.name ||
        '<p class=\\"text-lg\\">my name</p>'
      }
    />,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > Textarea 1`] = `
"export interface TextareaProps {
  attributes?: any;
  name?: string;
  value?: string;
  defaultValue?: string;
  placeholder?: string;
}

export default function Textarea(props) {
  return [
    <textarea
      {...props.attributes}
      placeholder={props.placeholder}
      name={props.name}
      value={props.value}
      defaultValue={props.defaultValue}
    />,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > Video 1`] = `
"export interface VideoProps {
  attributes?: any;
  video?: string;
  autoPlay?: boolean;
  controls?: boolean;
  muted?: boolean;
  loop?: boolean;
  playsInline?: boolean;
  aspectRatio?: number;
  width?: number;
  height?: number;
  fit?: \\"contain\\" | \\"cover\\" | \\"fill\\";
  position?:
    | \\"center\\"
    | \\"top\\"
    | \\"left\\"
    | \\"right\\"
    | \\"bottom\\"
    | \\"top left\\"
    | \\"top right\\"
    | \\"bottom left\\"
    | \\"bottom right\\";
  posterImage?: string;
  lazyLoad?: boolean;
}

export default function Video(props) {
  return [
    <video
      preload=\\"none\\"
      {...props.attributes}
      style={{
        width: \\"100%\\",
        height: \\"100%\\",
        ...props.attributes?.style,
        objectFit: props.fit,
        objectPosition: props.position,
        // Hack to get object fit to work as expected and
        // not have the video overflow
        borderRadius: 1,
      }}
      key={props.video || \\"no-src\\"}
      poster={props.posterImage}
      autoplay={props.autoPlay}
      muted={props.muted}
      controls={props.controls}
      loop={props.loop}
    />,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > arrowFunctionInUseStore 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({
    name: \\"steve\\",
    setName(value) {
      state.name = value;
    },
    updateNameWithArrowFn(value) {
      state.name = value;
    },
  });

  return [
    <div>
      Hello
      {state.name}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > basicForNoTagReference 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { For } from \\"@components\\";

export default function MyBasicForNoTagRefComponent(props) {
  const state = useStore({
    name: \\"VincentW\\",
    TagName: \\"div\\",
    tag: \\"span\\",
    get TagNameGetter() {
      return \\"span\\";
    },
  });

  return [
    <state.TagNameGetter>
      Hello
      <state.tag>{state.name}</state.tag>
      {props.actions.map((action, index) => (
        <state.TagName>
          <action.icon />
          <span>{action.text}</span>
        </state.TagName>
      ))}
    </state.TagNameGetter>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > basicForwardRef 1`] = `
"',' expected. (19:12)
  17 |     const state = useStore({ name: 'PatrickJS',});
  18 |
> 19 | const props.inputRef = useRef();
     |            ^
  20 |
  21 |
  22 |"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > basicForwardRefMetadata 1`] = `
"',' expected. (19:12)
  17 |     const state = useStore({ name: 'PatrickJS',});
  18 |
> 19 | const props.inputRef = useRef();
     |            ^
  20 |
  21 |
  22 |"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > basicOnUpdateReturn 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyBasicOnUpdateReturnComponent(props) {
  const state = useStore({ name: \\"PatrickJS\\" });

  return [
    <div>
      Hello!
      {state.name}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > class + ClassName + css 1`] = `
"import { MyComp } from \\"@components\\";

import MyComp from \\"./my-component.js\\";

export default function MyBasicComponent(props) {
  return [
    <div>
      <MyComp class=\\"test\\" className=\\"test2\\">
        Hello! I can run in React, Vue, Solid, or Liquid!
      </MyComp>
      <div
        class=\\"test2 test\\"
        css={{
          padding: \\"10px\\",
        }}
      >
        Hello! I can run in React, Vue, Solid, or Liquid!
      </div>
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > class + css 1`] = `
"export default function MyBasicComponent(props) {
  return [
    <div
      class=\\"test\\"
      css={{
        padding: \\"10px\\",
      }}
    >
      Hello! I can run in React, Vue, Solid, or Liquid!
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > className + css 1`] = `
"export default function MyBasicComponent(props) {
  return [
    <div
      class=\\"test\\"
      css={{
        padding: \\"10px\\",
      }}
    >
      Hello! I can run in React, Vue, Solid, or Liquid!
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > className 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

type Props = {
  [key: string]: string | JSX.Element;
  slotTesting: JSX.Element;
};

import type { JSX } from \\"../../../../jsx-runtime\\";

export default function ClassNameCode(props) {
  const state = useStore({ bindings: \\"a binding\\" });

  return [
    <div>
      <div class=\\"no binding\\">Without Binding</div>
      <div class={state.bindings}>With binding</div>
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > classState 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyBasicComponent(props) {
  const state = useStore({
    classState: \\"testClassName\\",
    styleState: {
      color: \\"red\\",
    },
  });

  return [
    <div
      class={state.classState}
      css={{
        padding: \\"10px\\",
      }}
      style={state.styleState}
    >
      Hello! I can run in React, Vue, Solid, or Liquid!
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > componentWithContext 1`] = `
"import { Fragment } from \\"@components\\";
export interface ComponentWithContextProps {
  content: string;
}

import Context1 from \\"@dummy/1\\";
import Context2 from \\"@dummy/2\\";

export default function ComponentWithContext(props) {
  return [
    <Fragment>
      <Fragment>{foo.value}</Fragment>
    </Fragment>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > componentWithContextMultiRoot 1`] = `
"import { Fragment } from \\"@components\\";
export interface ComponentWithContextProps {
  content: string;
}

import Context1 from \\"@dummy/1\\";
import Context2 from \\"@dummy/2\\";

export default function ComponentWithContext(props) {
  return [
    <Fragment>
      <Fragment>{foo.value}</Fragment>
      <div>other</div>
    </Fragment>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > contentState 1`] = `
"import BuilderContext from \\"@dummy/context.js\\";

export default function RenderContent(props) {
  return [<div>setting context</div>];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > defaultProps 1`] = `
"import { Show } from \\"@components\\";
export interface ButtonProps {
  attributes?: any;
  text?: string;
  buttonText?: string; // no default value

  link?: string;
  openLinkInNewTab?: boolean;
  onClick?: () => void;
}

export default function Button(props) {
  return [
    <div>
      {props.link ? (
        <a
          {...props.attributes}
          href={props.link}
          target={props.openLinkInNewTab ? \\"_blank\\" : undefined}
        >
          {props.text}
        </a>
      ) : null}
      {!props.link ? (
        <button
          type=\\"button\\"
          {...props.attributes}
          onClick={(event) => props.onClick()}
        >
          {props.buttonText}
        </button>
      ) : null}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > defaultPropsOutsideComponent 1`] = `
"import { Show } from \\"@components\\";
export interface ButtonProps {
  attributes?: any;
  text?: string;
  link?: string;
  openLinkInNewTab?: boolean;
  onClick: () => void;
}

export default function Button(props) {
  return [
    <div>
      {props.link ? (
        <a
          {...props.attributes}
          href={props.link}
          target={props.openLinkInNewTab ? \\"_blank\\" : undefined}
        >
          {props.text}
        </a>
      ) : null}
      {!props.link ? (
        <button
          type=\\"button\\"
          {...props.attributes}
          onClick={(event) => props.onClick(event)}
        >
          {props.text}
        </button>
      ) : null}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > defaultValsWithTypes 1`] = `
"type Props = {
  name: string;
};

const DEFAULT_VALUES: Props = {
  name: \\"Sami\\",
};

export default function ComponentWithTypes(props) {
  return [
    <div>
      {\\" \\"}
      Hello
      {props.name || DEFAULT_VALUES.name}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > expressionState 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({
    refToUse: !(props.componentRef instanceof Function)
      ? props.componentRef
      : null,
  });

  return [<div>{state.refToUse}</div>];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > getterState 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export interface ButtonProps {
  foo: string;
}

export default function Button(props) {
  const state = useStore({
    get foo2() {
      return props.foo + \\"foo\\";
    },
    get bar() {
      return \\"bar\\";
    },
    baz(i: number) {
      return i + state.foo2.length;
    },
  });

  return [
    <div>
      <p>{state.foo2}</p>
      <p>{state.bar}</p>
      <p>{state.baz(1)}</p>
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > import types 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { RenderBlock } from \\"@components\\";
type RenderContentProps = {
  options?: GetContentOptions;
  content: BuilderContent;
  renderContentProps: RenderBlockProps;
};

import { BuilderContent, GetContentOptions } from \\"@builder.io/sdk\\";
import RenderBlock, { RenderBlockProps } from \\"./builder-render-block.raw\\";

export default function RenderContent(props) {
  const state = useStore({
    getRenderContentProps(block, index) {
      return {
        block: block,
        index: index,
      };
    },
  });

  return [
    <RenderBlock
      {...state.getRenderContentProps(props.renderContentProps.block, 0)}
    />,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > multipleOnUpdate 1`] = `
"export default function MultipleOnUpdate(props) {
  return [<div />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > multipleOnUpdateWithDeps 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MultipleOnUpdateWithDeps(props) {
  const state = useStore({ a: \\"a\\", b: \\"b\\", c: \\"c\\", d: \\"d\\" });

  return [<div />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > multipleSpreads 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyBasicComponent(props) {
  const state = useStore({
    attrs: {
      hello: \\"world\\",
    },
  });

  return [<input {...state.attrs} {...props} />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > nestedShow 1`] = `
"import { Show } from \\"@components\\";
interface Props {
  conditionA: boolean;
  conditionB: boolean;
}

export default function NestedShow(props) {
  return [
    props.conditionA ? (
      !props.conditionB ? (
        <div>if condition A and condition B</div>
      ) : (
        <div>else-condition-B</div>
      )
    ) : (
      <div>else-condition-A</div>
    ),
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > nestedStyles 1`] = `
"export default function NestedStyles(props) {
  return [
    <div
      css={{
        display: \\"flex\\",
        \\"--bar\\": \\"red\\",
        color: \\"var(--bar)\\",
        \\"@media (max-width: env(--mobile))\\": {
          display: \\"block\\",
        },
        \\"&:hover\\": {
          display: \\"flex\\",
        },
        \\":active\\": {
          display: \\"inline\\",
        },
        \\".nested-selector\\": {
          display: \\"grid\\",
        },
        \\".nested-selector:hover\\": {
          display: \\"block\\",
        },
        \\"&.nested-selector:active\\": {
          display: \\"inline-block\\",
        },
      }}
    >
      Hello world
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > onEvent 1`] = `
"import { useStore, useRef } from \\"@builder.io/mitosis\\";

export default function Embed(props) {
  const state = useStore({
    foo(event) {
      console.log(\\"test2\\");
    },
  });

  const elem = useRef<HTMLDivElement>(null);
  const elem = useRef<HTMLDivElement>(null);

  onMount(() => {
    elem.current.dispatchEvent(new CustomEvent(\\"initEditingBldr\\"));
  });

  return [
    <div class=\\"builder-embed\\" ref={elem}>
      <div>Test</div>
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > onInit & onMount 1`] = `
"export default function OnInit(props) {
  onMount(() => {
    console.log(\\"onMount\\");
  });

  return [<div />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > onInit 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

type Props = {
  name: string;
};

export const defaultValues = {
  name: \\"PatrickJS\\",
};

export default function OnInit(props) {
  const state = useStore({ name: \\"\\" });

  return [
    <div>
      Default name defined by parent
      {state.name}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > onInitPlain 1`] = `
"export default function OnInitPlain(props) {
  return [<div />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > onMount 1`] = `
"export default function Comp(props) {
  onMount(() => {
    console.log(\\"Runs on mount\\");
  });

  onUnMount(() => {
    console.log(\\"Runs on unMount\\");
  });

  return [<div />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > onMountMultiple 1`] = `
"export default function Comp(props) {
  onMount(() => {
    console.log(\\"Runs on mount\\");
  }),
    onMount(() => {
      console.log(\\"Another one runs on Mount\\");
    }),
    onMount(() => {
      console.log(\\"SSR runs on Mount\\");
    });

  return [<div />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > onUpdate 1`] = `
"export default function OnUpdate(props) {
  return [<div />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > onUpdateWithDeps 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

type Props = {
  size: string;
};

export default function OnUpdateWithDeps(props) {
  const state = useStore({ a: \\"a\\", b: \\"b\\" });

  return [<div />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > preserveExportOrLocalStatement 1`] = `
"type Types = {
  s: any[];
};
interface IPost {
  len: number;
}
export interface MyBasicComponentProps {
  id: string;
}

const b = 3;
const foo = () => {};
export const a = 3;
export const bar = () => {};
export function run<T>(value: T) {}

export default function MyBasicComponent(props) {
  return [<div />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > preserveTyping 1`] = `
"export type A = \\"test\\";
export interface C {
  n: \\"test\\";
}
type B = \\"test2\\";
interface D {
  n: \\"test\\";
}
export interface MyBasicComponentProps {
  name: string;
  age?: number;
}

export default function MyBasicComponent(props) {
  return [
    <div>
      Hello! I can run in React, Vue, Solid, or Liquid!
      {props.name}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > propsDestructure 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

type Props = {
  children: any;
  type: string;
};

export default function MyBasicComponent(props) {
  const state = useStore({ name: \\"Decadef20\\" });

  return [
    <div>
      {props.children}
      {props.type}
      Hello! I can run in React, Vue, Solid, or Liquid!
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > propsInterface 1`] = `
"interface Person {
  name: string;
  age?: number;
}

export default function MyBasicComponent(props) {
  return [
    <div>
      Hello! I can run in React, Vue, Solid, or Liquid!
      {props.name}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > propsType 1`] = `
"type Person = {
  name: string;
  age?: number;
};

export default function MyBasicComponent(props) {
  return [
    <div>
      Hello! I can run in React, Vue, Solid, or Liquid!
      {props.name}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > referencingFunInsideHook 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function OnUpdate(props) {
  const state = useStore({
    foo: function foo(params) {},
    bar: function bar() {},
    zoo: function zoo() {
      const params = {
        cb: state.bar,
      };
    },
  });

  return [<div />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > renderBlock 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import {
  Show,
  For,
  RenderRepeatedBlock,
  RenderBlock,
  BlockStyles,
} from \\"@components\\";
export type RenderBlockProps = {
  block: BuilderBlock;
  context: BuilderContextInterface;
};

import { TARGET } from \\"../../constants/target.js\\";
import type {
  BuilderContextInterface,
  RegisteredComponent,
} from \\"../../context/types.js\\";
import { evaluate } from \\"../../functions/evaluate.js\\";
import { extractTextStyles } from \\"../../functions/extract-text-styles.js\\";
import { getBlockActions } from \\"../../functions/get-block-actions.js\\";
import { getBlockComponentOptions } from \\"../../functions/get-block-component-options.js\\";
import { getBlockProperties } from \\"../../functions/get-block-properties.js\\";
import { getBlockTag } from \\"../../functions/get-block-tag.js\\";
import { getProcessedBlock } from \\"../../functions/get-processed-block.js\\";
import { getReactNativeBlockStyles } from \\"../../functions/get-react-native-block-styles.js\\";
import type { BuilderBlock } from \\"../../types/builder-block.js\\";
import type { Nullable } from \\"../../types/typescript.js\\";
import BlockStyles from \\"./block-styles.js\\";
import { isEmptyHtmlElement } from \\"./render-block.helpers.js\\";
import RenderComponentWithContext from \\"./render-component-with-context.js\\";
import type { RenderComponentProps } from \\"./render-component.js\\";
import RenderComponent from \\"./render-component.js\\";
import RenderRepeatedBlock from \\"./render-repeated-block.js\\";
import type { RepeatData } from \\"./types.js\\";

export default function RenderBlock(props) {
  const state = useStore({
    get component() {
      const componentName = getProcessedBlock({
        block: props.block,
        state: props.context.state,
        context: props.context.context,
        shouldEvaluateBindings: false,
      }).component?.name;

      if (!componentName) {
        return null;
      }

      const ref = props.context.registeredComponents[componentName];

      if (!ref) {
        // TODO: Public doc page with more info about this message
        console.warn(\`
          Could not find a registered component named \\"\${componentName}\\".
          If you registered it, is the file that registered it imported by the file that needs to render it?\`);
        return undefined;
      } else {
        return ref;
      }
    },
    get tag() {
      return getBlockTag(state.useBlock);
    },
    get useBlock() {
      return state.repeatItemData
        ? props.block
        : getProcessedBlock({
            block: props.block,
            state: props.context.state,
            context: props.context.context,
            shouldEvaluateBindings: true,
          });
    },
    get actions() {
      return getBlockActions({
        block: state.useBlock,
        state: props.context.state,
        context: props.context.context,
      });
    },
    get attributes() {
      const blockProperties = getBlockProperties(state.useBlock);
      return {
        ...blockProperties,
        ...(TARGET === \\"reactNative\\"
          ? {
              style: getReactNativeBlockStyles({
                block: state.useBlock,
                context: props.context,
                blockStyles: blockProperties.style,
              }),
            }
          : {}),
      };
    },
    get shouldWrap() {
      return !state.component?.noWrap;
    },
    get renderComponentProps() {
      return {
        blockChildren: state.useChildren,
        componentRef: state.component?.component,
        componentOptions: {
          ...getBlockComponentOptions(state.useBlock),

          /**
           * These attributes are passed to the wrapper element when there is one. If \`noWrap\` is set to true, then
           * they are provided to the component itself directly.
           */
          ...(state.shouldWrap
            ? {}
            : {
                attributes: { ...state.attributes, ...state.actions },
              }),
          customBreakpoints: state.childrenContext?.content?.meta?.breakpoints,
        },
        context: state.childrenContext,
      };
    },
    get useChildren() {
      // TO-DO: When should \`canHaveChildren\` dictate rendering?
      // This is currently commented out because some Builder components (e.g. Box) do not have \`canHaveChildren: true\`,
      // but still receive and need to render children.
      // return state.componentInfo?.canHaveChildren ? state.useBlock.children : [];
      return state.useBlock.children ?? [];
    },
    get childrenWithoutParentComponent() {
      /**
       * When there is no \`componentRef\`, there might still be children that need to be rendered. In this case,
       * we render them outside of \`componentRef\`.
       * NOTE: We make sure not to render this if \`repeatItemData\` is non-null, because that means we are rendering an array of
       * blocks, and the children will be repeated within those blocks.
       */
      const shouldRenderChildrenOutsideRef =
        !state.component?.component && !state.repeatItemData;
      return shouldRenderChildrenOutsideRef ? state.useChildren : [];
    },
    get repeatItemData() {
      /**
       * we don't use \`state.useBlock\` here because the processing done within its logic includes evaluating the block's bindings,
       * which will not work if there is a repeat.
       */
      const { repeat, ...blockWithoutRepeat } = props.block;

      if (!repeat?.collection) {
        return undefined;
      }

      const itemsArray = evaluate({
        code: repeat.collection,
        state: props.context.state,
        context: props.context.context,
      });

      if (!Array.isArray(itemsArray)) {
        return undefined;
      }

      const collectionName = repeat.collection.split(\\".\\").pop();
      const itemNameToUse =
        repeat.itemName || (collectionName ? collectionName + \\"Item\\" : \\"item\\");
      const repeatArray = itemsArray.map<RepeatData>((item, index) => ({
        context: {
          ...props.context,
          state: {
            ...props.context.state,
            $index: index,
            $item: item,
            [itemNameToUse]: item,
            [\`$\${itemNameToUse}Index\`]: index,
          },
        },
        block: blockWithoutRepeat,
      }));
      return repeatArray;
    },
    get inheritedTextStyles() {
      if (TARGET !== \\"reactNative\\") {
        return {};
      }

      const styles = getReactNativeBlockStyles({
        block: state.useBlock,
        context: props.context,
        blockStyles: state.attributes.style,
      });
      return extractTextStyles(styles);
    },
    get childrenContext() {
      return {
        apiKey: props.context.apiKey,
        state: props.context.state,
        content: props.context.content,
        context: props.context.context,
        registeredComponents: props.context.registeredComponents,
        inheritedStyles: state.inheritedTextStyles,
      };
    },
    get renderComponentTag() {
      if (TARGET === \\"reactNative\\") {
        return RenderComponentWithContext;
      } else if (TARGET === \\"vue3\\") {
        // vue3 expects a string for the component tag
        return \\"RenderComponent\\";
      } else {
        return RenderComponent;
      }
    },
  });

  return [
    state.shouldWrap ? (
      <>
        {isEmptyHtmlElement(state.tag) ? (
          <state.tag {...state.attributes} {...state.actions} />
        ) : null}
        {!isEmptyHtmlElement(state.tag) && state.repeatItemData
          ? state.repeatItemData.map((data, index) => (
              <RenderRepeatedBlock
                key={index}
                repeatContext={data.context}
                block={data.block}
              />
            ))
          : null}
        {!isEmptyHtmlElement(state.tag) && !state.repeatItemData ? (
          <state.tag {...state.attributes} {...state.actions}>
            <state.renderComponentTag {...state.renderComponentProps} />
            {state.childrenWithoutParentComponent.map((child, index) => (
              <RenderBlock
                key={\\"render-block-\\" + child.id}
                block={child}
                context={state.childrenContext}
              />
            ))}
            {state.childrenWithoutParentComponent.map((child, index) => (
              <BlockStyles
                key={\\"block-style-\\" + child.id}
                block={child}
                context={state.childrenContext}
              />
            ))}
          </state.tag>
        ) : null}
      </>
    ) : (
      <state.renderComponentTag {...state.renderComponentProps} />
    ),
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > renderContentExample 1`] = `
"import { RenderBlocks } from \\"@components\\";
type Props = {
  customComponents: string[];
  content: {
    blocks: any[];
    id: string;
  };
};

import BuilderContext from \\"@dummy/context.js\\";
import {
  dispatchNewContentToVisualEditor,
  sendComponentsToVisualEditor,
  trackClick,
} from \\"@dummy/injection-js\\";
import RenderBlocks from \\"@dummy/RenderBlocks.js\\";

export default function RenderContent(props) {
  onMount(() => {
    sendComponentsToVisualEditor(props.customComponents);
  });

  return [
    <div
      css={{
        display: \\"flex\\",
        flexDirection: \\"columns\\",
      }}
      onClick={(event) => trackClick(props.content.id)}
    >
      <RenderBlocks blocks={props.content.blocks} />
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > rootFragmentMultiNode 1`] = `
"import { Fragment, Show } from \\"@components\\";
export interface ButtonProps {
  attributes?: any;
  text?: string;
  link?: string;
  openLinkInNewTab?: boolean;
}

export default function Button(props) {
  return [
    <Fragment>
      {props.link ? (
        <a
          {...props.attributes}
          href={props.link}
          target={props.openLinkInNewTab ? \\"_blank\\" : undefined}
        >
          {props.text}
        </a>
      ) : null}
      {!props.link ? (
        <button type=\\"button\\" {...props.attributes}>
          {props.text}
        </button>
      ) : null}
    </Fragment>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > rootShow 1`] = `
"import { Show } from \\"@components\\";
export interface RenderStylesProps {
  foo: string;
}

export default function RenderStyles(props) {
  return [props.foo === \\"bar\\" ? <div>Bar</div> : <div>Foo</div>];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > self-referencing component 1`] = `
"import { Show, MyComponent } from \\"@components\\";

export default function MyComponent(props) {
  return [
    <div>
      {props.name}
      {props.name === \\"Batman\\" ? <MyComponent name=\\"Bruce Wayne\\" /> : null}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > self-referencing component with children 1`] = `
"import { Show, MyComponent } from \\"@components\\";

export default function MyComponent(props) {
  return [
    <div>
      {props.name}
      {props.children}
      {props.name === \\"Batman\\" ? (
        <MyComponent name=\\"Bruce\\">
          <div>Wayne</div>
        </MyComponent>
      ) : null}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > showExpressions 1`] = `
"import { Show } from \\"@components\\";
interface Props {
  conditionA: boolean;
  conditionB: boolean;
}

export default function ShowWithOtherValues(props) {
  return [
    <div>
      {props.conditionA ? <>Content0</> : <>ContentA</>}
      {props.conditionA ? <>ContentA</> : null}
      {props.conditionA ? <></> : <>ContentA</>}
      {props.conditionA ? <>ContentB</> : undefined}
      {props.conditionA ? undefined : <>ContentB</>}
      {props.conditionA ? <>ContentC</> : null}
      {props.conditionA ? <></> : <>ContentC</>}
      {props.conditionA ? <>ContentD</> : null}
      {props.conditionA ? <></> : <>ContentD</>}
      {props.conditionA ? <>ContentE</> : <>hello</>}
      {props.conditionA ? <>hello</> : <>ContentE</>}
      {props.conditionA ? <>ContentF</> : <>123</>}
      {props.conditionA ? <>123</> : <>ContentF</>}
      {props.conditionA === \\"Default\\" ? (
        <>4mb</>
      ) : props.conditionB === \\"Complete\\" ? (
        <>20mb</>
      ) : (
        <>9mb</>
      )}
      {props.conditionA === \\"Default\\" ? (
        props.conditionB === \\"Complete\\" ? (
          <>20mb</>
        ) : (
          <>9mb</>
        )
      ) : (
        <>4mb</>
      )}
      {props.conditionA === \\"Default\\" ? (
        props.conditionB === \\"Complete\\" ? (
          <div>complete</div>
        ) : (
          <>9mb</>
        )
      ) : props.conditionC === \\"Complete\\" ? (
        <>dff</>
      ) : (
        <div>complete else</div>
      )}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > showWithFor 1`] = `
"import { Show, For } from \\"@components\\";
interface Props {
  conditionA: boolean;
  items: string[];
}

export default function NestedShow(props) {
  return [
    props.conditionA ? (
      props.items.map((item, idx) => <div key={idx}>{item}</div>)
    ) : (
      <div>else-condition-A</div>
    ),
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > showWithOtherValues 1`] = `
"import { Show } from \\"@components\\";
interface Props {
  conditionA: boolean;
}

export default function ShowWithOtherValues(props) {
  return [
    <div>
      {props.conditionA ? <>ContentA</> : null}
      {props.conditionA ? <>ContentB</> : undefined}
      {props.conditionA ? <>ContentC</> : null}
      {props.conditionA ? <>ContentD</> : null}
      {props.conditionA ? <>ContentE</> : <>hello</>}
      {props.conditionA ? <>ContentF</> : <>123</>}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > showWithRootText 1`] = `
"import { Show } from \\"@components\\";
interface Props {
  conditionA: boolean;
}

export default function ShowRootText(props) {
  return [props.conditionA ? <>ContentA</> : <div>else-condition-A</div>];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > signalsOnUpdate 1`] = `
"type Props = {
  id: Signal<string>;
  foo: Signal<{
    bar: {
      baz: number;
    };
  }>;
};

export default function MyBasicComponent(props) {
  return [
    <div
      class=\\"test\\"
      css={{
        padding: \\"10px\\",
      }}
    >
      {props.id}
      {props.foo.value.bar.baz}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > spreadAttrs 1`] = `
"export default function MyBasicComponent(props) {
  return [<input {...attrs} />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > spreadNestedProps 1`] = `
"export default function MyBasicComponent(props) {
  return [<input {...props.nested} />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > spreadProps 1`] = `
"export default function MyBasicComponent(props) {
  return [<input {...props} />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > store-async-function 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function StringLiteralStore(props) {
  const state = useStore({
    arrowFunction: async function arrowFunction() {
      return Promise.resolve();
    },
    namedFunction: async function namedFunction() {
      return Promise.resolve();
    },
    fetchUsers: async function fetchUsers() {
      return Promise.resolve();
    },
  });

  return [<div />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > string-literal-store 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function StringLiteralStore(props) {
  const state = useStore({ foo: 123 });

  return [<div>{state.foo}</div>];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > styleClassAndCss 1`] = `
"export default function MyComponent(props) {
  return [
    <div
      class=\\"builder-column\\"
      style={{
        width: \\"100%\\",
      }}
      css={{
        display: \\"flex\\",
        flexDirection: \\"column\\",
        alignItems: \\"stretch\\",
      }}
    />,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > stylePropClassAndCss 1`] = `
"export default function StylePropClassAndCss(props) {
  return [
    <div
      class=\\"USE_TARGET_BLOCK_1\\"
      style={props.attributes.style}
      css={{
        display: \\"flex\\",
        flexDirection: \\"column\\",
        alignItems: \\"stretch\\",
      }}
    />,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > subComponent 1`] = `
"import { Foo } from \\"@components\\";

import Foo from \\"./foo-sub-component.js\\";

export default function SubComponent(props) {
  return [<Foo />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > svgComponent 1`] = `
"export default function SvgComponent(props) {
  return [
    <svg
      fill=\\"none\\"
      role=\\"img\\"
      viewBox={\\"0 0 \\" + 42 + \\" \\" + 42}
      width={42}
      height={42}
    >
      <defs>
        <filter id=\\"prefix__filter0_f\\" filterUnits=\\"userSpaceOnUse\\">
          <feFlood result=\\"BackgroundImageFix\\" />
          <feBlend in=\\"SourceGraphic\\" in2=\\"BackgroundImageFix\\" result=\\"shape\\" />
          <feGaussianBlur result=\\"effect1_foregroundBlur\\" stdDeviation={7} />
        </filter>
      </defs>
    </svg>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > typeDependency 1`] = `
"export type TypeDependencyProps = {
  foo: Foo;
  foo2: Foo2;
};

import type { Foo } from \\"./foo-type\\";
import type { Foo as Foo2 } from \\"./type-export.js\\";

export default function TypeDependency(props) {
  return [<div>{props.foo}</div>];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > typeExternalStore 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

import { FooStore } from \\"./foo-store\\";

export default function TypeExternalStore(props) {
  const state = useStore({ _name: \\"test\\" });

  return [
    <div>
      Hello
      {state._name}!{\\" \\"}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > typeGetterStore 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

type GetterStore = {
  getName: () => string;
  name: string;
  get test(): string;
};

export default function TypeGetterStore(props) {
  const state = useStore({
    name: \\"test\\",
    getName() {
      if (state.name === \\"a\\") {
        return \\"b\\";
      }

      return state.name;
    },
    get test() {
      return \\"test\\";
    },
  });

  return [
    <div>
      Hello
      {state.name}!{\\" \\"}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > use-style 1`] = `
"export default function MyComponent(props) {
  useStyle(\`
        button {
            background: blue;
            color: white;
            font-size: 12px;
            outline: 1px solid black;
        }
    \`);

  return [<button type=\\"button\\">Button</button>];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > use-style-and-css 1`] = `
"export default function MyComponent(props) {
  useStyle(\`
        button {
            font-size: 12px;
            outline: 1px solid black;
        }
    \`);

  return [
    <button
      type=\\"button\\"
      css={{
        background: \\"blue\\",
        color: \\"white\\",
      }}
    >
      Button
    </button>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > use-style-outside-component 1`] = `
"export default function MyComponent(props) {
  useStyle(\`
  button {
      background: blue;
      color: white;
      font-size: 12px;
      outline: 1px solid black;
  }
\`);

  return [<button type=\\"button\\">Button</button>];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > useTarget 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function UseTargetComponent(props) {
  const state = useStore({
    get name() {
      const prefix = \\"USE_TARGET_BLOCK_1\\";
      return prefix + \\"foo\\";
    },
    lastName: \\"bar\\",
    foo: \\"bar\\",
  });

  onMount(() => {
    console.log(state.foo);
    state.foo = \\"bar\\";
    (\\"USE_TARGET_BLOCK_2\\");
  });

  return [<div>{state.name}</div>];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > jsx > Typescript Test > webComponent 1`] = `
"import { register } from \\"swiper/element/bundle\\";

export default function MyBasicWebComponent(props) {
  return [
    <swiper-container slides-per-view=\\"3\\" navigation=\\"true\\" pagination=\\"true\\">
      <swiper-slide>Slide 1</swiper-slide>
      <swiper-slide>Slide 2</swiper-slide>
      <swiper-slide>Slide 3</swiper-slide>
    </swiper-container>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > svelte > Javascript Test > basic 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({ name: \\"Steve\\" });

  return [
    <div>
      <input
        onChange={(event) => (state.name = event.target.value)}
        value={state.name}
      />
      Hello! I can run in React, Vue, Solid, or Liquid!
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > svelte > Javascript Test > bindGroup 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({ tortilla: \\"Plain\\", fillings: [] });

  return [
    <div>
      <input
        type=\\"radio\\"
        value=\\"Plain\\"
        checked={state.tortilla === \\"Plain\\"}
        onChange={(event) => (state.tortilla = event.target.value)}
      />
      <input
        type=\\"radio\\"
        value=\\"Whole wheat\\"
        checked={state.tortilla === \\"Whole wheat\\"}
        onChange={(event) => (state.tortilla = event.target.value)}
      />
      <input
        type=\\"radio\\"
        value=\\"Spinach\\"
        checked={state.tortilla === \\"Spinach\\"}
        onChange={(event) => (state.tortilla = event.target.value)}
      />
      <br />
      <br />
      <input
        type=\\"checkbox\\"
        value=\\"Rice\\"
        checked={state.fillings === \\"Rice\\"}
        onChange={(event) => (state.fillings = event.target.value)}
      />
      <input
        type=\\"checkbox\\"
        value=\\"Beans\\"
        checked={state.fillings === \\"Beans\\"}
        onChange={(event) => (state.fillings = event.target.value)}
      />
      <input
        type=\\"checkbox\\"
        value=\\"Cheese\\"
        checked={state.fillings === \\"Cheese\\"}
        onChange={(event) => (state.fillings = event.target.value)}
      />
      <input
        type=\\"checkbox\\"
        value=\\"Guac (extra)\\"
        checked={state.fillings === \\"Guac (extra)\\"}
        onChange={(event) => (state.fillings = event.target.value)}
      />
      <p>
        Tortilla:
        {state.tortilla}
      </p>
      <p>
        Fillings:
        {state.fillings}
      </p>
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > svelte > Javascript Test > bindProperty 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({ value: \\"hello\\" });

  return [<input value={state.value} />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > svelte > Javascript Test > classDirective 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({ focus: true });

  return [
    <input
      class={\`form-input \${props.disabled ? \\"disabled\\" : \\"\\"} \${
        state.focus ? \\"focus\\" : \\"\\"
      }\`}
    />,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > svelte > Javascript Test > context 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({ activeTab: 0 });

  return [<div>{state.activeTab}</div>];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > svelte > Javascript Test > each 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { For } from \\"@components\\";

export default function MyComponent(props) {
  const state = useStore({ numbers: [\\"one\\", \\"two\\", \\"three\\"] });

  return [
    <ul>
      {state.numbers.map((num, index) => (
        <li>{num}</li>
      ))}
    </ul>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > svelte > Javascript Test > eventHandlers 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({
    log: function log(msg = \\"hello\\") {
      console.log(msg);
    },
  });

  return [
    <div>
      <button onClick={(event) => state.log(\\"hi\\")}>Log</button>
      <button onClick={(event) => state.log(event)}>Log</button>
      <button onClick={(event) => state.log(event)}>Log</button>
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > svelte > Javascript Test > html 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({ html: \\"<b>bold</b>\\" });

  return [<div innerHTML={state.html} />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > svelte > Javascript Test > ifElse 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { Show } from \\"@components\\";

export default function MyComponent(props) {
  const state = useStore({
    show: true,
    toggle: function toggle() {
      state.show = !state.show;
    },
  });

  return [
    state.show ? (
      <button onClick={(event) => state.toggle(event)}> Hide </button>
    ) : (
      <button onClick={(event) => state.toggle(event)}> Show </button>
    ),
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > svelte > Javascript Test > imports 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { Button, Slot } from \\"@components\\";

import Button from \\"./Button.js\\";

export default function MyComponent(props) {
  const state = useStore({ disabled: false });

  return [
    <div>
      <Button type=\\"button\\" disabled={state.disabled}>
        <Slot />
      </Button>
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > svelte > Javascript Test > lifecycleHooks 1`] = `
"export default function MyComponent(props) {
  onMount(() => {
    console.log(\\"onMount\\");
  });

  onUnMount(() => {
    console.log(\\"onDestroy\\");
  });

  return [<div />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > svelte > Javascript Test > reactive 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({
    name: \\"Steve\\",
    get lowercaseName() {
      return state.name.toLowerCase();
    },
  });

  return [
    <div>
      <input value={state.name} />
      Lowercase:
      {state.lowercaseName}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > svelte > Javascript Test > reactiveWithFn 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({
    a: 2,
    b: 5,
    result: null,
    calculateResult: function calculateResult(a_, b_) {
      state.result = a_ * b_;
    },
  });

  return [
    <div>
      <input
        type=\\"number\\"
        onChange={(event) => (state.a = event.target.value)}
        value={state.a}
      />
      <input
        type=\\"number\\"
        onChange={(event) => (state.b = event.target.value)}
        value={state.b}
      />
      Result:
      {state.result}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > svelte > Javascript Test > slots 1`] = `
"import { Slot } from \\"@components\\";

export default function MyComponent(props) {
  return [
    <div>
      <Slot>default</Slot>
      <Slot name=\\"Test\\">
        <div>default</div>
      </Slot>
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > svelte > Javascript Test > style 1`] = `
"export default function MyComponent(props) {
  useStyle(\`
  input {
    color: red;
    font-size: 12px;
  }

  .form-input:focus {
    outline: 1px solid blue;
  }
\`);

  return [<input class=\\"form-input\\" />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > svelte > Javascript Test > textExpressions 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({ a: 5, b: 12 });

  return [
    <div>
      normal:
      {state.a + state.b}
      <br />
      conditional
      {state.a > 2 ? \\"hello\\" : \\"bye\\"}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > svelte > Typescript Test > basic 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({ name: \\"Steve\\" });

  return [
    <div>
      <input
        onChange={(event) => (state.name = event.target.value)}
        value={state.name}
      />
      Hello! I can run in React, Vue, Solid, or Liquid!
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > svelte > Typescript Test > bindGroup 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({ tortilla: \\"Plain\\", fillings: [] });

  return [
    <div>
      <input
        type=\\"radio\\"
        value=\\"Plain\\"
        checked={state.tortilla === \\"Plain\\"}
        onChange={(event) => (state.tortilla = event.target.value)}
      />
      <input
        type=\\"radio\\"
        value=\\"Whole wheat\\"
        checked={state.tortilla === \\"Whole wheat\\"}
        onChange={(event) => (state.tortilla = event.target.value)}
      />
      <input
        type=\\"radio\\"
        value=\\"Spinach\\"
        checked={state.tortilla === \\"Spinach\\"}
        onChange={(event) => (state.tortilla = event.target.value)}
      />
      <br />
      <br />
      <input
        type=\\"checkbox\\"
        value=\\"Rice\\"
        checked={state.fillings === \\"Rice\\"}
        onChange={(event) => (state.fillings = event.target.value)}
      />
      <input
        type=\\"checkbox\\"
        value=\\"Beans\\"
        checked={state.fillings === \\"Beans\\"}
        onChange={(event) => (state.fillings = event.target.value)}
      />
      <input
        type=\\"checkbox\\"
        value=\\"Cheese\\"
        checked={state.fillings === \\"Cheese\\"}
        onChange={(event) => (state.fillings = event.target.value)}
      />
      <input
        type=\\"checkbox\\"
        value=\\"Guac (extra)\\"
        checked={state.fillings === \\"Guac (extra)\\"}
        onChange={(event) => (state.fillings = event.target.value)}
      />
      <p>
        Tortilla:
        {state.tortilla}
      </p>
      <p>
        Fillings:
        {state.fillings}
      </p>
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > svelte > Typescript Test > bindProperty 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({ value: \\"hello\\" });

  return [<input value={state.value} />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > svelte > Typescript Test > classDirective 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({ focus: true });

  return [
    <input
      class={\`form-input \${props.disabled ? \\"disabled\\" : \\"\\"} \${
        state.focus ? \\"focus\\" : \\"\\"
      }\`}
    />,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > svelte > Typescript Test > context 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({ activeTab: 0 });

  return [<div>{state.activeTab}</div>];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > svelte > Typescript Test > each 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { For } from \\"@components\\";

export default function MyComponent(props) {
  const state = useStore({ numbers: [\\"one\\", \\"two\\", \\"three\\"] });

  return [
    <ul>
      {state.numbers.map((num, index) => (
        <li>{num}</li>
      ))}
    </ul>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > svelte > Typescript Test > eventHandlers 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({
    log: function log(msg = \\"hello\\") {
      console.log(msg);
    },
  });

  return [
    <div>
      <button onClick={(event) => state.log(\\"hi\\")}>Log</button>
      <button onClick={(event) => state.log(event)}>Log</button>
      <button onClick={(event) => state.log(event)}>Log</button>
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > svelte > Typescript Test > html 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({ html: \\"<b>bold</b>\\" });

  return [<div innerHTML={state.html} />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > svelte > Typescript Test > ifElse 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { Show } from \\"@components\\";

export default function MyComponent(props) {
  const state = useStore({
    show: true,
    toggle: function toggle() {
      state.show = !state.show;
    },
  });

  return [
    state.show ? (
      <button onClick={(event) => state.toggle(event)}> Hide </button>
    ) : (
      <button onClick={(event) => state.toggle(event)}> Show </button>
    ),
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > svelte > Typescript Test > imports 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { Button, Slot } from \\"@components\\";

import Button from \\"./Button.js\\";

export default function MyComponent(props) {
  const state = useStore({ disabled: false });

  return [
    <div>
      <Button type=\\"button\\" disabled={state.disabled}>
        <Slot />
      </Button>
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > svelte > Typescript Test > lifecycleHooks 1`] = `
"export default function MyComponent(props) {
  onMount(() => {
    console.log(\\"onMount\\");
  });

  onUnMount(() => {
    console.log(\\"onDestroy\\");
  });

  return [<div />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > svelte > Typescript Test > reactive 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({
    name: \\"Steve\\",
    get lowercaseName() {
      return state.name.toLowerCase();
    },
  });

  return [
    <div>
      <input value={state.name} />
      Lowercase:
      {state.lowercaseName}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > svelte > Typescript Test > reactiveWithFn 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({
    a: 2,
    b: 5,
    result: null,
    calculateResult: function calculateResult(a_, b_) {
      state.result = a_ * b_;
    },
  });

  return [
    <div>
      <input
        type=\\"number\\"
        onChange={(event) => (state.a = event.target.value)}
        value={state.a}
      />
      <input
        type=\\"number\\"
        onChange={(event) => (state.b = event.target.value)}
        value={state.b}
      />
      Result:
      {state.result}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > svelte > Typescript Test > slots 1`] = `
"import { Slot } from \\"@components\\";

export default function MyComponent(props) {
  return [
    <div>
      <Slot>default</Slot>
      <Slot name=\\"Test\\">
        <div>default</div>
      </Slot>
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > svelte > Typescript Test > style 1`] = `
"export default function MyComponent(props) {
  useStyle(\`
  input {
    color: red;
    font-size: 12px;
  }

  .form-input:focus {
    outline: 1px solid blue;
  }
\`);

  return [<input class=\\"form-input\\" />];
}
"
`;

exports[`Mitosis, format: legacy (native loops and conditionals) > svelte > Typescript Test > textExpressions 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({ a: 5, b: 12 });

  return [
    <div>
      normal:
      {state.a + state.b}
      <br />
      conditional
      {state.a > 2 ? \\"hello\\" : \\"bye\\"}
    </div>,
  ];
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > Advanced 1`] = `
"import { useStore, For } from \\"@builder.io/mitosis\\";

export default function MyBasicForShowComponent(props) {
  const state = useStore({ name: \\"PatrickJS\\", names: [\\"Steve\\", \\"PatrickJS\\"] });

  return (
    <main>
      <For each={state.names}>
        {(person, i) => (
          <div>
            {i}:{person}
          </div>
        )}
      </For>
      <For each={state.names}>{(person, index) => <span>{person}</span>}</For>
      <For each={state.names}>{(_, index) => <br />}</For>
      <For
        each={Array.from({
          length: 10,
        })}
      >
        {(_, ee) => <pre>{ee}</pre>}
      </For>
      <For
        each={Array.from({
          length: 10,
        })}
      >
        {(_, index) => <p>{index}</p>}
      </For>
      <For each={state.names}>
        {(person, index) => (
          <span>
            {person}
            {index}
          </span>
        )}
      </For>
      <For
        each={Array.from({
          length: 10,
        })}
      >
        {(person, count) => (
          <span>
            {person}
            {count}
          </span>
        )}
      </For>
      <For each={state.names}>
        {(person, i) => (
          <span>
            {person}
            {i}
          </span>
        )}
      </For>
      <For
        each={Array.from({
          length: 10,
        })}
      >
        {(person, index) => (
          <span>
            {person}
            {index}
          </span>
        )}
      </For>
    </main>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > AdvancedRef 1`] = `
"import { useStore, useRef, Show } from \\"@builder.io/mitosis\\";
import { Fragment } from \\"@components\\";

export default function MyBasicRefComponent(props) {
  const state = useStore({
    name: \\"PatrickJS\\",
    onBlur: function onBlur() {
      // Maintain focus
      inputRef.current.focus();
    },
    lowerCaseName: function lowerCaseName() {
      return state.name.toLowerCase();
    },
  });

  const inputRef = useRef(null);
  const inputNoArgRef = useRef(null);
  const inputRef = useRef(null);
  const inputNoArgRef = useRef(null);

  return (
    <div>
      <Show when={props.showInput}>
        <Fragment>
          <input
            ref={inputRef}
            css={{
              color: \\"red\\",
            }}
            value={state.name}
            onBlur={(event) => state.onBlur()}
            onChange={(event) => (state.name = event.target.value)}
          />
          <label for=\\"cars\\" ref={inputNoArgRef}>
            Choose a car:
          </label>
          <select name=\\"cars\\" id=\\"cars\\">
            <option value=\\"supra\\">GR Supra</option>
            <option value=\\"86\\">GR 86</option>
          </select>
        </Fragment>
      </Show>
      Hello
      {state.lowerCaseName()}! I can run in React, Qwik, Vue, Solid, or Web
      Component!
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > Basic 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export const DEFAULT_VALUES = {
  name: \\"Steve\\",
};

export default function MyBasicComponent(props) {
  const state = useStore({
    name: \\"Steve\\",
    underscore_fn_name() {
      return \\"bar\\";
    },
    age: 1,
    sports: [\\"\\"],
  });

  return (
    <div
      class=\\"test\\"
      css={{
        padding: \\"10px\\",
      }}
    >
      <input
        value={DEFAULT_VALUES.name || state.name}
        onChange={(event) => (state.name = myEvent.target.value)}
      />
      Hello! I can run in React, Vue, Solid, or Liquid! &gt;
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > Basic 2`] = `
"import { useStore, For, Show } from \\"@builder.io/mitosis\\";

export default function MyBasicForShowComponent(props) {
  const state = useStore({ name: \\"PatrickJS\\", names: [\\"Steve\\", \\"PatrickJS\\"] });

  return (
    <div>
      <For each={state.names}>
        {(person, index) => (
          <Show when={person === state.name}>
            <input
              value={state.name}
              onChange={(event) => {
                state.name = event.target.value + \\" and \\" + person;
              }}
            />
            Hello
            {person}! I can run in Qwik, Web Component, React, Vue, Solid, or
            Liquid!
          </Show>
        )}
      </For>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > Basic Context 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

import { Injector, MyService, createInjector } from \\"@dummy/injection-js\\";

export default function MyBasicComponent(props) {
  const state = useStore({
    name: \\"PatrickJS\\",
    onChange: function onChange() {
      const change = myService.method(\\"change\\");
      console.log(change);
    },
  });

  onMount(() => {
    const bye = myService.method(\\"hi\\");
    console.log(bye);
  });

  return (
    <div>
      {myService.method(\\"hello\\") + state.name}
      Hello! I can run in React, Vue, Solid, or Liquid!
      <input onChange={(event) => state.onChange} />
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > Basic OnMount Update 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyBasicOnMountUpdateComponent(props) {
  const state = useStore({ name: \\"PatrickJS\\", names: [\\"Steve\\", \\"PatrickJS\\"] });

  onMount(() => {
    state.name = \\"PatrickJS onMount\\" + props.bye;
  });

  return (
    <div>
      Hello
      {state.name}
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > Basic Outputs 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyBasicOutputsComponent(props) {
  const state = useStore({ name: \\"PatrickJS\\" });

  onMount(() => {
    props.onMessage(state.name);
    props.onEvent(props.message);
  });

  return <div />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > Basic Outputs Meta 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

useMetadata({
  outputs: [\\"onMessage\\", \\"onEvent\\"],
  baz: \\"metadata inside component\\",
});

export default function MyBasicOutputsComponent(props) {
  const state = useStore({ name: \\"PatrickJS\\" });

  onMount(() => {
    props.onMessage(state.name);
    props.onEvent(props.message);
  });

  return <div />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > BasicAttribute 1`] = `
"export default function MyComponent(props) {
  return <input autocapitalize=\\"on\\" autocomplete=\\"on\\" spellcheck={true} />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > BasicBooleanAttribute 1`] = `
"import { Show } from \\"@builder.io/mitosis\\";
import { MyBooleanAttributeComponent } from \\"@components\\";

import MyBooleanAttributeComponent from \\"./basic-boolean-attribute-component.raw\\";

export default function MyBooleanAttribute(props) {
  return (
    <div>
      <Show when={props.children}>
        {props.children}
        {props.type}
      </Show>
      <MyBooleanAttributeComponent toggle={true} />
      <MyBooleanAttributeComponent toggle={true} />
      <MyBooleanAttributeComponent list={null} />
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > BasicChildComponent 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { MyBasicComponent, MyBasicOnMountUpdateComponent } from \\"@components\\";

import MyBasicOnMountUpdateComponent from \\"./basic-onMount-update.raw\\";
import MyBasicComponent from \\"./basic.raw\\";

export default function MyBasicChildComponent(props) {
  const state = useStore({ name: \\"Steve\\", dev: \\"PatrickJS\\" });

  return (
    <div>
      <MyBasicComponent id={state.dev} />
      <div>
        <MyBasicOnMountUpdateComponent hi={state.name} bye={state.dev} />
      </div>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > BasicFor 1`] = `
"import { useStore, For } from \\"@builder.io/mitosis\\";
import { Fragment } from \\"@components\\";

export default function MyBasicForComponent(props) {
  const state = useStore({ name: \\"PatrickJS\\", names: [\\"Steve\\", \\"PatrickJS\\"] });

  onMount(() => {
    console.log(\\"onMount code\\");
  });

  return (
    <div>
      <For each={state.names}>
        {(person, index) => (
          <Fragment>
            <input
              value={state.name}
              onChange={(event) => {
                state.name = event.target.value + \\" and \\" + person;
              }}
            />
            Hello
            {person}! I can run in Qwik, Web Component, React, Vue, Solid, or
            Liquid!
          </Fragment>
        )}
      </For>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > BasicRef 1`] = `
"import { useStore, useRef, Show } from \\"@builder.io/mitosis\\";
import { Fragment } from \\"@components\\";

export default function MyBasicRefComponent(props) {
  const state = useStore({
    name: \\"PatrickJS\\",
    onBlur: function onBlur() {
      // Maintain focus
      inputRef.current.focus();
    },
    lowerCaseName: function lowerCaseName() {
      return state.name.toLowerCase();
    },
  });

  const inputRef = useRef(null);
  const inputNoArgRef = useRef(null);
  const inputRef = useRef(null);
  const inputNoArgRef = useRef(null);

  return (
    <div>
      <Show when={props.showInput}>
        <Fragment>
          <input
            ref={inputRef}
            css={{
              color: \\"red\\",
            }}
            value={state.name}
            onBlur={(event) => state.onBlur()}
            onChange={(event) => (state.name = event.target.value)}
          />
          <label for=\\"cars\\" ref={inputNoArgRef}>
            Choose a car:
          </label>
          <select name=\\"cars\\" id=\\"cars\\">
            <option value=\\"supra\\">GR Supra</option>
            <option value=\\"86\\">GR 86</option>
          </select>
        </Fragment>
      </Show>
      Hello
      {state.lowerCaseName()}! I can run in React, Qwik, Vue, Solid, or Web
      Component!
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > BasicRefAssignment 1`] = `"unknown: Maximum call stack size exceeded"`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > BasicRefPrevious 1`] = `"unknown: Maximum call stack size exceeded"`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > Button 1`] = `
"import { Show } from \\"@builder.io/mitosis\\";

export default function Button(props) {
  return (
    <div>
      <Show when={props.link}>
        <a
          {...props.attributes}
          href={props.link}
          target={props.openLinkInNewTab ? \\"_blank\\" : undefined}
        >
          {props.text}
        </a>
      </Show>
      <Show when={!props.link}>
        <button type=\\"button\\" {...props.attributes}>
          {props.text}
        </button>
      </Show>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > Columns 1`] = `
"import { useStore, For } from \\"@builder.io/mitosis\\";

export default function Column(props) {
  const state = useStore({
    getColumns() {
      return props.columns || [];
    },
    getGutterSize() {
      return typeof props.space === \\"number\\" ? props.space || 0 : 20;
    },
    getWidth(index) {
      const columns = state.getColumns();
      return (columns[index] && columns[index].width) || 100 / columns.length;
    },
    getColumnCssWidth(index) {
      const columns = state.getColumns();
      const gutterSize = state.getGutterSize();
      const subtractWidth =
        (gutterSize * (columns.length - 1)) / columns.length;
      return \`calc(\${state.getWidth(index)}% - \${subtractWidth}px)\`;
    },
  });

  return (
    <div
      class=\\"builder-columns\\"
      css={{
        display: \\"flex\\",
        flexDirection: \\"column\\",
        alignItems: \\"stretch\\",
        lineHeight: \\"normal\\",
        \\"@media (max-width: 999px)\\": {
          flexDirection: \\"row\\",
        },
        \\"@media (max-width: 639px)\\": {
          flexDirection: \\"row-reverse\\",
        },
      }}
    >
      <For each={props.columns}>
        {(column, index) => (
          <div
            class=\\"builder-column\\"
            css={{
              flexGrow: \\"1\\",
            }}
          >
            {column.content}
            {index}
          </div>
        )}
      </For>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > ContentSlotHtml 1`] = `
"import { Slot } from \\"@components\\";

export default function ContentSlotCode(props) {
  return (
    <div>
      <Slot name={props.slotTesting} />
      <div>
        <hr />
      </div>
      <div>
        <Slot />
      </div>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > ContentSlotJSX 1`] = `
"import { useStore, Show } from \\"@builder.io/mitosis\\";
import { Slot } from \\"@components\\";

export default function ContentSlotJsxCode(props) {
  const state = useStore({
    name: \\"king\\",
    showContent: false,
    get cls() {
      return props.slotContent && props.children ? \`\${state.name}-content\` : \\"\\";
    },
    show() {
      props.slotContent ? 1 : \\"\\";
    },
  });

  return (
    <Show when={props.slotReference}>
      <div
        name={props.slotContent ? \\"name1\\" : \\"name2\\"}
        title={props.slotContent ? \\"title1\\" : \\"title2\\"}
        {...props.attributes}
        onClick={(event) => state.show()}
        class={state.cls}
      >
        <Show when={state.showContent && props.slotContent}>
          <Slot name=\\"content\\">{props.content}</Slot>
        </Show>
        <div>
          <hr />
        </div>
        <div>{props.children}</div>
      </div>
    </Show>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > CustomCode 1`] = `
"import { useStore, useRef } from \\"@builder.io/mitosis\\";

export default function CustomCode(props) {
  const state = useStore({
    scriptsInserted: [],
    scriptsRun: [],
    findAndRunScripts() {
      // TODO: Move this function to standalone one in '@builder.io/utils'
      if (elem.current && typeof window !== \\"undefined\\") {
        /** @type {HTMLScriptElement[]} */
        const scripts = elem.current.getElementsByTagName(\\"script\\");

        for (let i = 0; i < scripts.length; i++) {
          const script = scripts[i];

          if (script.src) {
            if (state.scriptsInserted.includes(script.src)) {
              continue;
            }

            state.scriptsInserted.push(script.src);
            const newScript = document.createElement(\\"script\\");
            newScript.async = true;
            newScript.src = script.src;
            document.head.appendChild(newScript);
          } else if (
            !script.type ||
            [
              \\"text/javascript\\",
              \\"application/javascript\\",
              \\"application/ecmascript\\",
            ].includes(script.type)
          ) {
            if (state.scriptsRun.includes(script.innerText)) {
              continue;
            }

            try {
              state.scriptsRun.push(script.innerText);
              new Function(script.innerText)();
            } catch (error) {
              console.warn(\\"\`CustomCode\`: Error running script:\\", error);
            }
          }
        }
      }
    },
  });

  const elem = useRef(null);
  const elem = useRef(null);

  onMount(() => {
    state.findAndRunScripts();
  });

  return (
    <div
      ref={elem}
      class={
        \\"builder-custom-code\\" + (props.replaceNodes ? \\" replace-nodes\\" : \\"\\")
      }
      innerHTML={props.code}
    />
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > Embed 1`] = `
"import { useStore, useRef } from \\"@builder.io/mitosis\\";

export default function CustomCode(props) {
  const state = useStore({
    scriptsInserted: [],
    scriptsRun: [],
    findAndRunScripts() {
      // TODO: Move this function to standalone one in '@builder.io/utils'
      if (elem.current && typeof window !== \\"undefined\\") {
        /** @type {HTMLScriptElement[]} */
        const scripts = elem.current.getElementsByTagName(\\"script\\");

        for (let i = 0; i < scripts.length; i++) {
          const script = scripts[i];

          if (script.src) {
            if (state.scriptsInserted.includes(script.src)) {
              continue;
            }

            state.scriptsInserted.push(script.src);
            const newScript = document.createElement(\\"script\\");
            newScript.async = true;
            newScript.src = script.src;
            document.head.appendChild(newScript);
          } else if (
            !script.type ||
            [
              \\"text/javascript\\",
              \\"application/javascript\\",
              \\"application/ecmascript\\",
            ].includes(script.type)
          ) {
            if (state.scriptsRun.includes(script.innerText)) {
              continue;
            }

            try {
              state.scriptsRun.push(script.innerText);
              new Function(script.innerText)();
            } catch (error) {
              console.warn(\\"\`CustomCode\`: Error running script:\\", error);
            }
          }
        }
      }
    },
  });

  const elem = useRef(null);
  const elem = useRef(null);

  onMount(() => {
    state.findAndRunScripts();
  });

  return (
    <div
      ref={elem}
      class={
        \\"builder-custom-code\\" + (props.replaceNodes ? \\" replace-nodes\\" : \\"\\")
      }
      innerHTML={props.code}
    />
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > Form 1`] = `
"import { useStore, useRef, Show, For } from \\"@builder.io/mitosis\\";
import { BuilderBlockComponent, BuilderBlocks } from \\"@components\\";

import { Builder, builder } from \\"@builder.io/sdk\\";
import {
  BuilderBlock as BuilderBlockComponent,
  BuilderBlocks,
  get,
  set,
} from \\"@fake\\";

export default function FormComponent(props) {
  const state = useStore({
    formState: \\"unsubmitted\\",
    responseData: null,
    formErrorMessage: \\"\\",
    get submissionState() {
      return (Builder.isEditing && props.previewState) || state.formState;
    },
    onSubmit(event) {
      const sendWithJs =
        props.sendWithJs || props.sendSubmissionsTo === \\"email\\";

      if (props.sendSubmissionsTo === \\"zapier\\") {
        event.preventDefault();
      } else if (sendWithJs) {
        if (!(props.action || props.sendSubmissionsTo === \\"email\\")) {
          event.preventDefault();
          return;
        }

        event.preventDefault();
        const el = event.currentTarget;
        const headers = props.customHeaders || {};
        let body;
        const formData = new FormData(el); // TODO: maybe support null

        const formPairs = Array.from(
          event.currentTarget.querySelectorAll(\\"input,select,textarea\\")
        )
          .filter((el) => !!el.name)
          .map((el) => {
            let value;
            const key = el.name;

            if (el instanceof HTMLInputElement) {
              if (el.type === \\"radio\\") {
                if (el.checked) {
                  value = el.name;
                  return {
                    key,
                    value,
                  };
                }
              } else if (el.type === \\"checkbox\\") {
                value = el.checked;
              } else if (el.type === \\"number\\" || el.type === \\"range\\") {
                const num = el.valueAsNumber;

                if (!isNaN(num)) {
                  value = num;
                }
              } else if (el.type === \\"file\\") {
                // TODO: one vs multiple files
                value = el.files;
              } else {
                value = el.value;
              }
            } else {
              value = el.value;
            }

            return {
              key,
              value,
            };
          });
        let contentType = props.contentType;

        if (props.sendSubmissionsTo === \\"email\\") {
          contentType = \\"multipart/form-data\\";
        }

        Array.from(formPairs).forEach(({ value }) => {
          if (
            value instanceof File ||
            (Array.isArray(value) && value[0] instanceof File) ||
            value instanceof FileList
          ) {
            contentType = \\"multipart/form-data\\";
          }
        }); // TODO: send as urlEncoded or multipart by default
        // because of ease of use and reliability in browser API
        // for encoding the form?

        if (contentType !== \\"application/json\\") {
          body = formData;
        } else {
          // Json
          const json = {};
          Array.from(formPairs).forEach(({ value, key }) => {
            set(json, key, value);
          });
          body = JSON.stringify(json);
        }

        if (contentType && contentType !== \\"multipart/form-data\\") {
          if (
            /* Zapier doesn't allow content-type header to be sent from browsers */
            !(sendWithJs && props.action?.includes(\\"zapier.com\\"))
          ) {
            headers[\\"content-type\\"] = contentType;
          }
        }

        const presubmitEvent = new CustomEvent(\\"presubmit\\", {
          detail: {
            body,
          },
        });

        if (formRef.current) {
          formRef.current.dispatchEvent(presubmitEvent);

          if (presubmitEvent.defaultPrevented) {
            return;
          }
        }

        state.formState = \\"sending\\";
        const formUrl = \`\${
          builder.env === \\"dev\\" ? \\"http://localhost:5000\\" : \\"https://builder.io\\"
        }/api/v1/form-submit?apiKey=\${builder.apiKey}&to=\${btoa(
          props.sendSubmissionsToEmail || \\"\\"
        )}&name=\${encodeURIComponent(props.name || \\"\\")}\`;
        fetch(
          props.sendSubmissionsTo === \\"email\\" ? formUrl : props.action,
          /* TODO: throw error if no action URL */
          {
            body,
            headers,
            method: props.method || \\"post\\",
          }
        ).then(
          async (res) => {
            let body;
            const contentType = res.headers.get(\\"content-type\\");

            if (contentType && contentType.indexOf(\\"application/json\\") !== -1) {
              body = await res.json();
            } else {
              body = await res.text();
            }

            if (!res.ok && props.errorMessagePath) {
              /* TODO: allow supplying an error formatter function */
              let message = get(body, props.errorMessagePath);

              if (message) {
                if (typeof message !== \\"string\\") {
                  /* TODO: ideally convert json to yaml so it woul dbe like
           error: - email has been taken */
                  message = JSON.stringify(message);
                }

                state.formErrorMessage = message;
              }
            }

            state.responseData = body;
            state.formState = res.ok ? \\"success\\" : \\"error\\";

            if (res.ok) {
              const submitSuccessEvent = new CustomEvent(\\"submit:success\\", {
                detail: {
                  res,
                  body,
                },
              });

              if (formRef.current) {
                formRef.current.dispatchEvent(submitSuccessEvent);

                if (submitSuccessEvent.defaultPrevented) {
                  return;
                }
                /* TODO: option to turn this on/off? */

                if (props.resetFormOnSubmit !== false) {
                  formRef.current.reset();
                }
              }
              /* TODO: client side route event first that can be preventDefaulted */

              if (props.successUrl) {
                if (formRef.current) {
                  const event = new CustomEvent(\\"route\\", {
                    detail: {
                      url: props.successUrl,
                    },
                  });
                  formRef.current.dispatchEvent(event);

                  if (!event.defaultPrevented) {
                    location.href = props.successUrl;
                  }
                } else {
                  location.href = props.successUrl;
                }
              }
            }
          },
          (err) => {
            const submitErrorEvent = new CustomEvent(\\"submit:error\\", {
              detail: {
                error: err,
              },
            });

            if (formRef.current) {
              formRef.current.dispatchEvent(submitErrorEvent);

              if (submitErrorEvent.defaultPrevented) {
                return;
              }
            }

            state.responseData = err;
            state.formState = \\"error\\";
          }
        );
      }
    },
  });

  const formRef = useRef(null);
  const formRef = useRef(null);

  return (
    <form
      validate={props.validate}
      ref={formRef}
      action={!props.sendWithJs && props.action}
      method={props.method}
      name={props.name}
      onSubmit={(event) => state.onSubmit(event)}
      {...props.attributes}
    >
      <Show when={props.builderBlock && props.builderBlock.children}>
        <For each={props.builderBlock?.children}>
          {(block, index) => (
            <BuilderBlockComponent key={block.id} block={block} index={index} />
          )}
        </For>
      </Show>
      <Show when={state.submissionState === \\"error\\"}>
        <BuilderBlocks dataPath=\\"errorMessage\\" blocks={props.errorMessage} />
      </Show>
      <Show when={state.submissionState === \\"sending\\"}>
        <BuilderBlocks
          dataPath=\\"sendingMessage\\"
          blocks={props.sendingMessage}
        />
      </Show>
      <Show when={state.submissionState === \\"error\\" && state.responseData}>
        <pre
          class=\\"builder-form-error-text\\"
          css={{
            padding: \\"10px\\",
            color: \\"red\\",
            textAlign: \\"center\\",
          }}
        >
          {JSON.stringify(state.responseData, null, 2)}
        </pre>
      </Show>
      <Show when={state.submissionState === \\"success\\"}>
        <BuilderBlocks
          dataPath=\\"successMessage\\"
          blocks={props.successMessage}
        />
      </Show>
    </form>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > Image 1`] = `
"import { useStore, useRef, Show } from \\"@builder.io/mitosis\\";

export default function Image(props) {
  const state = useStore({
    scrollListener: null,
    imageLoaded: false,
    setLoaded() {
      state.imageLoaded = true;
    },
    useLazyLoading() {
      // TODO: Add more checks here, like testing for real web browsers
      return !!props.lazy && state.isBrowser();
    },
    isBrowser: function isBrowser() {
      return (
        typeof window !== \\"undefined\\" &&
        window.navigator.product != \\"ReactNative\\"
      );
    },
    load: false,
  });

  const pictureRef = useRef();
  const pictureRef = useRef();

  onMount(() => {
    if (state.useLazyLoading()) {
      // throttled scroll capture listener
      const listener = () => {
        if (pictureRef.current) {
          const rect = pictureRef.current.getBoundingClientRect();
          const buffer = window.innerHeight / 2;

          if (rect.top < window.innerHeight + buffer) {
            state.load = true;
            state.scrollListener = null;
            window.removeEventListener(\\"scroll\\", listener);
          }
        }
      };

      state.scrollListener = listener;
      window.addEventListener(\\"scroll\\", listener, {
        capture: true,
        passive: true,
      });
      listener();
    }
  });

  onUnMount(() => {
    if (state.scrollListener) {
      window.removeEventListener(\\"scroll\\", state.scrollListener);
    }
  });

  return (
    <div>
      <picture ref={pictureRef}>
        <Show when={!state.useLazyLoading() || state.load}>
          <img
            alt={props.altText}
            aria-role={props.altText ? \\"presentation\\" : undefined}
            css={{
              opacity: \\"1\\",
              transition: \\"opacity 0.2s ease-in-out\\",
              objectFit: \\"cover\\",
              objectPosition: \\"center\\",
            }}
            class={\\"builder-image\\" + (props._class ? \\" \\" + props._class : \\"\\")}
            src={props.image}
            onLoad={(event) => state.setLoaded()}
            srcset={props.srcset}
            sizes={props.sizes}
          />
        </Show>
        <source srcset={props.srcset} />
      </picture>
      {props.children}
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > Image State 1`] = `
"import { useStore, For } from \\"@builder.io/mitosis\\";
import { Fragment } from \\"@components\\";

export default function ImgStateComponent(props) {
  const state = useStore({
    canShow: true,
    images: [\\"http://example.com/qwik.png\\"],
  });

  return (
    <div>
      <For each={state.images}>
        {(item, itemIndex) => (
          <Fragment>
            <img class=\\"custom-class\\" src={item} key={itemIndex} />
          </Fragment>
        )}
      </For>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > Img 1`] = `
"import { Builder } from \\"@builder.io/sdk\\";

export default function ImgComponent(props) {
  return (
    <img
      style={{
        objectFit: props.backgroundSize || \\"cover\\",
        objectPosition: props.backgroundPosition || \\"center\\",
      }}
      {...props.attributes}
      key={(Builder.isEditing && props.imgSrc) || \\"default-key\\"}
      alt={props.altText}
      src={props.imgSrc}
    />
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > Input 1`] = `
"import { Builder } from \\"@builder.io/sdk\\";

export default function FormInputComponent(props) {
  return (
    <input
      {...props.attributes}
      key={
        Builder.isEditing && props.defaultValue
          ? props.defaultValue
          : \\"default-key\\"
      }
      placeholder={props.placeholder}
      type={props.type}
      name={props.name}
      value={props.value}
      defaultValue={props.defaultValue}
      required={props.required}
      onChange={(event) => props.onChange?.(event.target.value)}
    />
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > InputParent 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { FormInputComponent } from \\"@components\\";

import FormInputComponent from \\"./input.raw\\";

export default function Stepper(props) {
  const state = useStore({
    handleChange(value) {
      console.log(value);
    },
  });

  return (
    <FormInputComponent
      name=\\"kingzez\\"
      type=\\"text\\"
      onChange={(event) => state.handleChange(value)}
    />
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > RawText 1`] = `
"export default function RawText(props) {
  return (
    <span
      class={props.attributes?.class || props.attributes?.className}
      innerHTML={props.text || \\"\\"}
    />
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > Section 1`] = `
"export default function SectionComponent(props) {
  return (
    <section
      {...props.attributes}
      style={
        props.maxWidth && typeof props.maxWidth === \\"number\\"
          ? {
              maxWidth: props.maxWidth,
            }
          : undefined
      }
    >
      {props.children}
    </section>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > Section 2`] = `
"import { useStore, Show, For } from \\"@builder.io/mitosis\\";

export default function SectionStateComponent(props) {
  const state = useStore({ max: 42, items: [42] });

  return (
    <Show when={state.max}>
      <For each={state.items}>
        {(item, index) => (
          <section
            {...props.attributes}
            style={{
              maxWidth: item + state.max,
            }}
          >
            {props.children}
          </section>
        )}
      </For>
    </Show>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > Select 1`] = `
"import { For } from \\"@builder.io/mitosis\\";

import { Builder } from \\"@builder.io/sdk\\";

export default function SelectComponent(props) {
  return (
    <select
      {...props.attributes}
      value={props.value}
      key={
        Builder.isEditing && props.defaultValue
          ? props.defaultValue
          : \\"default-key\\"
      }
      defaultValue={props.defaultValue}
      name={props.name}
    >
      <For each={props.options}>
        {(option, index) => (
          <option value={option.value} data-index={index}>
            {option.name || option.value}
          </option>
        )}
      </For>
    </select>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > SlotDefault 1`] = `
"import { Slot } from \\"@components\\";

export default function SlotCode(props) {
  return (
    <div>
      <Slot>
        <div class=\\"default-slot\\">Default content</div>
      </Slot>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > SlotHtml 1`] = `
"import { ContentSlotCode, Slot } from \\"@components\\";

import ContentSlotCode from \\"./content-slot-jsx.raw\\";

export default function SlotCode(props) {
  return (
    <div>
      <ContentSlotCode>
        <Slot testing={<div>Hello</div>} />
      </ContentSlotCode>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > SlotJsx 1`] = `
"import { ContentSlotCode } from \\"@components\\";

import ContentSlotCode from \\"./content-slot-jsx.raw\\";

export default function SlotCode(props) {
  return (
    <div>
      <ContentSlotCode slotTesting={<div>Hello</div>} />
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > SlotNamed 1`] = `
"import { Slot } from \\"@components\\";

export default function SlotCode(props) {
  return (
    <div>
      <Slot name=\\"myAwesomeSlot\\" />
      <Slot name=\\"top\\" />
      <Slot name=\\"left\\">Default left</Slot>
      <Slot>Default Child</Slot>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > Stamped.io 1`] = `
"import { useStore, Show, For } from \\"@builder.io/mitosis\\";

import { kebabCase, snakeCase } from \\"lodash\\";

export default function SmileReviews(props) {
  const state = useStore({
    reviews: [],
    name: \\"test\\",
    showReviewPrompt: false,
    kebabCaseValue() {
      return kebabCase(\\"testThat\\");
    },
    snakeCaseValue() {
      return snakeCase(\\"testThis\\");
    },
  });

  onMount(() => {
    fetch(
      \`https://stamped.io/api/widget/reviews?storeUrl=builder-io.myshopify.com&apiKey=\${
        props.apiKey || \\"pubkey-8bbDq7W6w4sB3OWeM1HUy2s47702hM\\"
      }&productId=\${props.productId || \\"2410511106127\\"}\`
    )
      .then((res) => res.json())
      .then((data) => {
        state.reviews = data.data;
      });
  });

  return (
    <div data-user={state.name}>
      <button onClick={(event) => (state.showReviewPrompt = true)}>
        Write a review
      </button>
      <Show when={state.showReviewPrompt || \\"asdf\\"}>
        <input placeholder=\\"Email\\" />
        <input
          placeholder=\\"Title\\"
          css={{
            display: \\"block\\",
          }}
        />
        <textarea
          placeholder=\\"How was your experience?\\"
          css={{
            display: \\"block\\",
          }}
        />
        <button
          css={{
            display: \\"block\\",
          }}
          onClick={(event) => {
            ev.preventDefault();
            state.showReviewPrompt = false;
          }}
        >
          Submit
        </button>
      </Show>
      <For each={state.reviews}>
        {(review, index) => (
          <div
            $name=\\"Review\\"
            key={review.id}
            css={{
              margin: \\"10px\\",
              padding: \\"10px\\",
              background: \\"white\\",
              display: \\"flex\\",
              borderRadius: \\"5px\\",
              boxShadow: \\"0 2px 5px rgba(0, 0, 0, 0.1)\\",
              WebkitFontSmoothing: \\"antialiased\\",
            }}
          >
            <img
              css={{
                height: \\"30px\\",
                width: \\"30px\\",
                marginRight: \\"10px\\",
              }}
              src={review.avatar}
            />
            <div class={state.showReviewPrompt ? \\"bg-primary\\" : \\"bg-secondary\\"}>
              <div>
                N:
                {index}
              </div>
              <div>{review.author}</div>
              <div>{review.reviewMessage}</div>
            </div>
          </div>
        )}
      </For>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > Submit 1`] = `
"export default function SubmitButton(props) {
  return (
    <button type=\\"submit\\" {...props.attributes}>
      {props.text}
    </button>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > Text 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

import { Builder } from \\"@builder.io/sdk\\";

export default function Text(props) {
  const state = useStore({ name: \\"Decadef20\\" });

  return (
    <div
      contentEditable={allowEditingText || undefined}
      data-name={{
        test: state.name || \\"any name\\",
      }}
      innerHTML={
        props.text ||
        props.content ||
        state.name ||
        '<p class=\\"text-lg\\">my name</p>'
      }
    />
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > Textarea 1`] = `
"export default function Textarea(props) {
  return (
    <textarea
      {...props.attributes}
      placeholder={props.placeholder}
      name={props.name}
      value={props.value}
      defaultValue={props.defaultValue}
    />
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > Video 1`] = `
"export default function Video(props) {
  return (
    <video
      preload=\\"none\\"
      {...props.attributes}
      style={{
        width: \\"100%\\",
        height: \\"100%\\",
        ...props.attributes?.style,
        objectFit: props.fit,
        objectPosition: props.position,
        // Hack to get object fit to work as expected and
        // not have the video overflow
        borderRadius: 1,
      }}
      key={props.video || \\"no-src\\"}
      poster={props.posterImage}
      autoplay={props.autoPlay}
      muted={props.muted}
      controls={props.controls}
      loop={props.loop}
    />
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > arrowFunctionInUseStore 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({
    name: \\"steve\\",
    setName(value) {
      state.name = value;
    },
    updateNameWithArrowFn(value) {
      state.name = value;
    },
  });

  return (
    <div>
      Hello
      {state.name}
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > basicForNoTagReference 1`] = `
"import { useStore, For } from \\"@builder.io/mitosis\\";

export default function MyBasicForNoTagRefComponent(props) {
  const state = useStore({
    name: \\"VincentW\\",
    TagName: \\"div\\",
    tag: \\"span\\",
    get TagNameGetter() {
      return \\"span\\";
    },
  });

  return (
    <state.TagNameGetter>
      Hello
      <state.tag>{state.name}</state.tag>
      <For each={props.actions}>
        {(action, index) => (
          <state.TagName>
            <action.icon />
            <span>{action.text}</span>
          </state.TagName>
        )}
      </For>
    </state.TagNameGetter>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > basicForwardRef 1`] = `
"',' expected. (16:12)
  14 |     const state = useStore({ name: 'PatrickJS',});
  15 |
> 16 | const props.inputRef = useRef();
     |            ^
  17 |
  18 |
  19 |"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > basicForwardRefMetadata 1`] = `
"',' expected. (16:12)
  14 |     const state = useStore({ name: 'PatrickJS',});
  15 |
> 16 | const props.inputRef = useRef();
     |            ^
  17 |
  18 |
  19 |"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > basicOnUpdateReturn 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyBasicOnUpdateReturnComponent(props) {
  const state = useStore({ name: \\"PatrickJS\\" });

  return (
    <div>
      Hello!
      {state.name}
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > class + ClassName + css 1`] = `
"import { MyComp } from \\"@components\\";

import MyComp from \\"./my-component.js\\";

export default function MyBasicComponent(props) {
  return (
    <div>
      <MyComp class=\\"test\\" className=\\"test2\\">
        Hello! I can run in React, Vue, Solid, or Liquid!
      </MyComp>
      <div
        class=\\"test2 test\\"
        css={{
          padding: \\"10px\\",
        }}
      >
        Hello! I can run in React, Vue, Solid, or Liquid!
      </div>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > class + css 1`] = `
"export default function MyBasicComponent(props) {
  return (
    <div
      class=\\"test\\"
      css={{
        padding: \\"10px\\",
      }}
    >
      Hello! I can run in React, Vue, Solid, or Liquid!
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > className + css 1`] = `
"export default function MyBasicComponent(props) {
  return (
    <div
      class=\\"test\\"
      css={{
        padding: \\"10px\\",
      }}
    >
      Hello! I can run in React, Vue, Solid, or Liquid!
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > className 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function ClassNameCode(props) {
  const state = useStore({ bindings: \\"a binding\\" });

  return (
    <div>
      <div class=\\"no binding\\">Without Binding</div>
      <div class={state.bindings}>With binding</div>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > classState 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyBasicComponent(props) {
  const state = useStore({
    classState: \\"testClassName\\",
    styleState: {
      color: \\"red\\",
    },
  });

  return (
    <div
      class={state.classState}
      css={{
        padding: \\"10px\\",
      }}
      style={state.styleState}
    >
      Hello! I can run in React, Vue, Solid, or Liquid!
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > componentWithContext 1`] = `
"import { Fragment } from \\"@components\\";

import Context1 from \\"@dummy/1\\";
import Context2 from \\"@dummy/2\\";

export default function ComponentWithContext(props) {
  return (
    <Fragment>
      <Fragment>{foo.value}</Fragment>
    </Fragment>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > componentWithContextMultiRoot 1`] = `
"import { Fragment } from \\"@components\\";

import Context1 from \\"@dummy/1\\";
import Context2 from \\"@dummy/2\\";

export default function ComponentWithContext(props) {
  return (
    <Fragment>
      <Fragment>{foo.value}</Fragment>
      <div>other</div>
    </Fragment>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > contentState 1`] = `
"import BuilderContext from \\"@dummy/context.js\\";

export default function RenderContent(props) {
  return <div>setting context</div>;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > defaultProps 1`] = `
"import { Show } from \\"@builder.io/mitosis\\";

export default function Button(props) {
  return (
    <div>
      <Show when={props.link}>
        <a
          {...props.attributes}
          href={props.link}
          target={props.openLinkInNewTab ? \\"_blank\\" : undefined}
        >
          {props.text}
        </a>
      </Show>
      <Show when={!props.link}>
        <button
          type=\\"button\\"
          {...props.attributes}
          onClick={(event) => props.onClick()}
        >
          {props.buttonText}
        </button>
      </Show>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > defaultPropsOutsideComponent 1`] = `
"import { Show } from \\"@builder.io/mitosis\\";

export default function Button(props) {
  return (
    <div>
      <Show when={props.link}>
        <a
          {...props.attributes}
          href={props.link}
          target={props.openLinkInNewTab ? \\"_blank\\" : undefined}
        >
          {props.text}
        </a>
      </Show>
      <Show when={!props.link}>
        <button
          type=\\"button\\"
          {...props.attributes}
          onClick={(event) => props.onClick(event)}
        >
          {props.text}
        </button>
      </Show>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > defaultValsWithTypes 1`] = `
"const DEFAULT_VALUES = {
  name: \\"Sami\\",
};

export default function ComponentWithTypes(props) {
  return (
    <div>
      {\\" \\"}
      Hello
      {props.name || DEFAULT_VALUES.name}
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > expressionState 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({
    refToUse: !(props.componentRef instanceof Function)
      ? props.componentRef
      : null,
  });

  return <div>{state.refToUse}</div>;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > getterState 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function Button(props) {
  const state = useStore({
    get foo2() {
      return props.foo + \\"foo\\";
    },
    get bar() {
      return \\"bar\\";
    },
    baz(i) {
      return i + state.foo2.length;
    },
  });

  return (
    <div>
      <p>{state.foo2}</p>
      <p>{state.bar}</p>
      <p>{state.baz(1)}</p>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > import types 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { RenderBlock } from \\"@components\\";

import RenderBlock from \\"./builder-render-block.raw\\";

export default function RenderContent(props) {
  const state = useStore({
    getRenderContentProps(block, index) {
      return {
        block: block,
        index: index,
      };
    },
  });

  return (
    <RenderBlock
      {...state.getRenderContentProps(props.renderContentProps.block, 0)}
    />
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > multipleOnUpdate 1`] = `
"export default function MultipleOnUpdate(props) {
  return <div />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > multipleOnUpdateWithDeps 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MultipleOnUpdateWithDeps(props) {
  const state = useStore({ a: \\"a\\", b: \\"b\\", c: \\"c\\", d: \\"d\\" });

  return <div />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > multipleSpreads 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyBasicComponent(props) {
  const state = useStore({
    attrs: {
      hello: \\"world\\",
    },
  });

  return <input {...state.attrs} {...props} />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > nestedShow 1`] = `
"import { Show } from \\"@builder.io/mitosis\\";

export default function NestedShow(props) {
  return (
    <Show when={props.conditionA} else={<div>else-condition-A</div>}>
      <Show when={!props.conditionB} else={<div>else-condition-B</div>}>
        <div>if condition A and condition B</div>
      </Show>
    </Show>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > nestedStyles 1`] = `
"export default function NestedStyles(props) {
  return (
    <div
      css={{
        display: \\"flex\\",
        \\"--bar\\": \\"red\\",
        color: \\"var(--bar)\\",
        \\"@media (max-width: env(--mobile))\\": {
          display: \\"block\\",
        },
        \\"&:hover\\": {
          display: \\"flex\\",
        },
        \\":active\\": {
          display: \\"inline\\",
        },
        \\".nested-selector\\": {
          display: \\"grid\\",
        },
        \\".nested-selector:hover\\": {
          display: \\"block\\",
        },
        \\"&.nested-selector:active\\": {
          display: \\"inline-block\\",
        },
      }}
    >
      Hello world
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > onEvent 1`] = `
"import { useStore, useRef } from \\"@builder.io/mitosis\\";

export default function Embed(props) {
  const state = useStore({
    foo(event) {
      console.log(\\"test2\\");
    },
  });

  const elem = useRef(null);
  const elem = useRef(null);

  onMount(() => {
    elem.current.dispatchEvent(new CustomEvent(\\"initEditingBldr\\"));
  });

  return (
    <div class=\\"builder-embed\\" ref={elem}>
      <div>Test</div>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > onInit & onMount 1`] = `
"export default function OnInit(props) {
  onMount(() => {
    console.log(\\"onMount\\");
  });

  return <div />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > onInit 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export const defaultValues = {
  name: \\"PatrickJS\\",
};

export default function OnInit(props) {
  const state = useStore({ name: \\"\\" });

  return (
    <div>
      Default name defined by parent
      {state.name}
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > onInitPlain 1`] = `
"export default function OnInitPlain(props) {
  return <div />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > onMount 1`] = `
"export default function Comp(props) {
  onMount(() => {
    console.log(\\"Runs on mount\\");
  });

  onUnMount(() => {
    console.log(\\"Runs on unMount\\");
  });

  return <div />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > onMountMultiple 1`] = `
"export default function Comp(props) {
  onMount(() => {
    console.log(\\"Runs on mount\\");
  }),
    onMount(() => {
      console.log(\\"Another one runs on Mount\\");
    }),
    onMount(() => {
      console.log(\\"SSR runs on Mount\\");
    });

  return <div />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > onUpdate 1`] = `
"export default function OnUpdate(props) {
  return <div />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > onUpdateWithDeps 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function OnUpdateWithDeps(props) {
  const state = useStore({ a: \\"a\\", b: \\"b\\" });

  return <div />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > preserveExportOrLocalStatement 1`] = `
"const b = 3;
const foo = () => {};
export const a = 3;
export const bar = () => {};
export function run(value) {}

export default function MyBasicComponent(props) {
  return <div />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > preserveTyping 1`] = `
"export default function MyBasicComponent(props) {
  return (
    <div>
      Hello! I can run in React, Vue, Solid, or Liquid!
      {props.name}
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > propsDestructure 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyBasicComponent(props) {
  const state = useStore({ name: \\"Decadef20\\" });

  return (
    <div>
      {props.children}
      {props.type}
      Hello! I can run in React, Vue, Solid, or Liquid!
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > propsInterface 1`] = `
"export default function MyBasicComponent(props) {
  return (
    <div>
      Hello! I can run in React, Vue, Solid, or Liquid!
      {props.name}
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > propsType 1`] = `
"export default function MyBasicComponent(props) {
  return (
    <div>
      Hello! I can run in React, Vue, Solid, or Liquid!
      {props.name}
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > referencingFunInsideHook 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function OnUpdate(props) {
  const state = useStore({
    foo: function foo(params) {},
    bar: function bar() {},
    zoo: function zoo() {
      const params = {
        cb: state.bar,
      };
    },
  });

  return <div />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > renderBlock 1`] = `
"import { useStore, Show, For } from \\"@builder.io/mitosis\\";
import { RenderRepeatedBlock, RenderBlock, BlockStyles } from \\"@components\\";

import { TARGET } from \\"../../constants/target.js\\";
import { evaluate } from \\"../../functions/evaluate.js\\";
import { extractTextStyles } from \\"../../functions/extract-text-styles.js\\";
import { getBlockActions } from \\"../../functions/get-block-actions.js\\";
import { getBlockComponentOptions } from \\"../../functions/get-block-component-options.js\\";
import { getBlockProperties } from \\"../../functions/get-block-properties.js\\";
import { getBlockTag } from \\"../../functions/get-block-tag.js\\";
import { getProcessedBlock } from \\"../../functions/get-processed-block.js\\";
import { getReactNativeBlockStyles } from \\"../../functions/get-react-native-block-styles.js\\";
import BlockStyles from \\"./block-styles.js\\";
import { isEmptyHtmlElement } from \\"./render-block.helpers.js\\";
import RenderComponentWithContext from \\"./render-component-with-context.js\\";
import RenderComponent from \\"./render-component.js\\";
import RenderRepeatedBlock from \\"./render-repeated-block.js\\";

export default function RenderBlock(props) {
  const state = useStore({
    get component() {
      const componentName = getProcessedBlock({
        block: props.block,
        state: props.context.state,
        context: props.context.context,
        shouldEvaluateBindings: false,
      }).component?.name;

      if (!componentName) {
        return null;
      }

      const ref = props.context.registeredComponents[componentName];

      if (!ref) {
        // TODO: Public doc page with more info about this message
        console.warn(\`
          Could not find a registered component named \\"\${componentName}\\".
          If you registered it, is the file that registered it imported by the file that needs to render it?\`);
        return undefined;
      } else {
        return ref;
      }
    },
    get tag() {
      return getBlockTag(state.useBlock);
    },
    get useBlock() {
      return state.repeatItemData
        ? props.block
        : getProcessedBlock({
            block: props.block,
            state: props.context.state,
            context: props.context.context,
            shouldEvaluateBindings: true,
          });
    },
    get actions() {
      return getBlockActions({
        block: state.useBlock,
        state: props.context.state,
        context: props.context.context,
      });
    },
    get attributes() {
      const blockProperties = getBlockProperties(state.useBlock);
      return {
        ...blockProperties,
        ...(TARGET === \\"reactNative\\"
          ? {
              style: getReactNativeBlockStyles({
                block: state.useBlock,
                context: props.context,
                blockStyles: blockProperties.style,
              }),
            }
          : {}),
      };
    },
    get shouldWrap() {
      return !state.component?.noWrap;
    },
    get renderComponentProps() {
      return {
        blockChildren: state.useChildren,
        componentRef: state.component?.component,
        componentOptions: {
          ...getBlockComponentOptions(state.useBlock),

          /**
           * These attributes are passed to the wrapper element when there is one. If \`noWrap\` is set to true, then
           * they are provided to the component itself directly.
           */
          ...(state.shouldWrap
            ? {}
            : {
                attributes: { ...state.attributes, ...state.actions },
              }),
          customBreakpoints: state.childrenContext?.content?.meta?.breakpoints,
        },
        context: state.childrenContext,
      };
    },
    get useChildren() {
      // TO-DO: When should \`canHaveChildren\` dictate rendering?
      // This is currently commented out because some Builder components (e.g. Box) do not have \`canHaveChildren: true\`,
      // but still receive and need to render children.
      // return state.componentInfo?.canHaveChildren ? state.useBlock.children : [];
      return state.useBlock.children ?? [];
    },
    get childrenWithoutParentComponent() {
      /**
       * When there is no \`componentRef\`, there might still be children that need to be rendered. In this case,
       * we render them outside of \`componentRef\`.
       * NOTE: We make sure not to render this if \`repeatItemData\` is non-null, because that means we are rendering an array of
       * blocks, and the children will be repeated within those blocks.
       */
      const shouldRenderChildrenOutsideRef =
        !state.component?.component && !state.repeatItemData;
      return shouldRenderChildrenOutsideRef ? state.useChildren : [];
    },
    get repeatItemData() {
      /**
       * we don't use \`state.useBlock\` here because the processing done within its logic includes evaluating the block's bindings,
       * which will not work if there is a repeat.
       */
      const { repeat, ...blockWithoutRepeat } = props.block;

      if (!repeat?.collection) {
        return undefined;
      }

      const itemsArray = evaluate({
        code: repeat.collection,
        state: props.context.state,
        context: props.context.context,
      });

      if (!Array.isArray(itemsArray)) {
        return undefined;
      }

      const collectionName = repeat.collection.split(\\".\\").pop();
      const itemNameToUse =
        repeat.itemName || (collectionName ? collectionName + \\"Item\\" : \\"item\\");
      const repeatArray = itemsArray.map((item, index) => ({
        context: {
          ...props.context,
          state: {
            ...props.context.state,
            $index: index,
            $item: item,
            [itemNameToUse]: item,
            [\`$\${itemNameToUse}Index\`]: index,
          },
        },
        block: blockWithoutRepeat,
      }));
      return repeatArray;
    },
    get inheritedTextStyles() {
      if (TARGET !== \\"reactNative\\") {
        return {};
      }

      const styles = getReactNativeBlockStyles({
        block: state.useBlock,
        context: props.context,
        blockStyles: state.attributes.style,
      });
      return extractTextStyles(styles);
    },
    get childrenContext() {
      return {
        apiKey: props.context.apiKey,
        state: props.context.state,
        content: props.context.content,
        context: props.context.context,
        registeredComponents: props.context.registeredComponents,
        inheritedStyles: state.inheritedTextStyles,
      };
    },
    get renderComponentTag() {
      if (TARGET === \\"reactNative\\") {
        return RenderComponentWithContext;
      } else if (TARGET === \\"vue3\\") {
        // vue3 expects a string for the component tag
        return \\"RenderComponent\\";
      } else {
        return RenderComponent;
      }
    },
  });

  return (
    <Show
      when={state.shouldWrap}
      else={<state.renderComponentTag {...state.renderComponentProps} />}
    >
      <Show when={isEmptyHtmlElement(state.tag)}>
        <state.tag {...state.attributes} {...state.actions} />
      </Show>
      <Show when={!isEmptyHtmlElement(state.tag) && state.repeatItemData}>
        <For each={state.repeatItemData}>
          {(data, index) => (
            <RenderRepeatedBlock
              key={index}
              repeatContext={data.context}
              block={data.block}
            />
          )}
        </For>
      </Show>
      <Show when={!isEmptyHtmlElement(state.tag) && !state.repeatItemData}>
        <state.tag {...state.attributes} {...state.actions}>
          <state.renderComponentTag {...state.renderComponentProps} />
          <For each={state.childrenWithoutParentComponent}>
            {(child, index) => (
              <RenderBlock
                key={\\"render-block-\\" + child.id}
                block={child}
                context={state.childrenContext}
              />
            )}
          </For>
          <For each={state.childrenWithoutParentComponent}>
            {(child, index) => (
              <BlockStyles
                key={\\"block-style-\\" + child.id}
                block={child}
                context={state.childrenContext}
              />
            )}
          </For>
        </state.tag>
      </Show>
    </Show>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > renderContentExample 1`] = `
"import { RenderBlocks } from \\"@components\\";

import BuilderContext from \\"@dummy/context.js\\";
import {
  dispatchNewContentToVisualEditor,
  sendComponentsToVisualEditor,
  trackClick,
} from \\"@dummy/injection-js\\";
import RenderBlocks from \\"@dummy/RenderBlocks.js\\";

export default function RenderContent(props) {
  onMount(() => {
    sendComponentsToVisualEditor(props.customComponents);
  });

  return (
    <div
      css={{
        display: \\"flex\\",
        flexDirection: \\"columns\\",
      }}
      onClick={(event) => trackClick(props.content.id)}
    >
      <RenderBlocks blocks={props.content.blocks} />
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > rootFragmentMultiNode 1`] = `
"import { Show } from \\"@builder.io/mitosis\\";
import { Fragment } from \\"@components\\";

export default function Button(props) {
  return (
    <Fragment>
      <Show when={props.link}>
        <a
          {...props.attributes}
          href={props.link}
          target={props.openLinkInNewTab ? \\"_blank\\" : undefined}
        >
          {props.text}
        </a>
      </Show>
      <Show when={!props.link}>
        <button type=\\"button\\" {...props.attributes}>
          {props.text}
        </button>
      </Show>
    </Fragment>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > rootShow 1`] = `
"import { Show } from \\"@builder.io/mitosis\\";

export default function RenderStyles(props) {
  return (
    <Show when={props.foo === \\"bar\\"} else={<div>Foo</div>}>
      <div>Bar</div>
    </Show>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > self-referencing component 1`] = `
"import { Show } from \\"@builder.io/mitosis\\";
import { MyComponent } from \\"@components\\";

export default function MyComponent(props) {
  return (
    <div>
      {props.name}
      <Show when={props.name === \\"Batman\\"}>
        <MyComponent name=\\"Bruce Wayne\\" />
      </Show>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > self-referencing component with children 1`] = `
"import { Show } from \\"@builder.io/mitosis\\";
import { MyComponent } from \\"@components\\";

export default function MyComponent(props) {
  return (
    <div>
      {props.name}
      {props.children}
      <Show when={props.name === \\"Batman\\"}>
        <MyComponent name=\\"Bruce\\">
          <div>Wayne</div>
        </MyComponent>
      </Show>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > showExpressions 1`] = `
"import { Show } from \\"@builder.io/mitosis\\";

export default function ShowWithOtherValues(props) {
  return (
    <div>
      <Show when={props.conditionA} else={<>ContentA</>}>
        Content0
      </Show>
      <Show when={props.conditionA}>ContentA</Show>
      <Show when={props.conditionA} else={<>ContentA</>}></Show>
      <Show when={props.conditionA} else={undefined}>
        ContentB
      </Show>
      <Show when={props.conditionA} else={<>ContentB</>}>
        {undefined}
      </Show>
      <Show when={props.conditionA}>ContentC</Show>
      <Show when={props.conditionA} else={<>ContentC</>}></Show>
      <Show when={props.conditionA}>ContentD</Show>
      <Show when={props.conditionA} else={<>ContentD</>}></Show>
      <Show when={props.conditionA} else={<>hello</>}>
        ContentE
      </Show>
      <Show when={props.conditionA} else={<>ContentE</>}>
        hello
      </Show>
      <Show when={props.conditionA} else={<>123</>}>
        ContentF
      </Show>
      <Show when={props.conditionA} else={<>ContentF</>}>
        123
      </Show>
      <Show
        when={props.conditionA === \\"Default\\"}
        else={
          <Show when={props.conditionB === \\"Complete\\"} else={<>9mb</>}>
            20mb
          </Show>
        }
      >
        4mb
      </Show>
      <Show when={props.conditionA === \\"Default\\"} else={<>4mb</>}>
        <Show when={props.conditionB === \\"Complete\\"} else={<>9mb</>}>
          20mb
        </Show>
      </Show>
      <Show
        when={props.conditionA === \\"Default\\"}
        else={
          <Show
            when={props.conditionC === \\"Complete\\"}
            else={<div>complete else</div>}
          >
            dff
          </Show>
        }
      >
        <Show when={props.conditionB === \\"Complete\\"} else={<>9mb</>}>
          <div>complete</div>
        </Show>
      </Show>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > showWithFor 1`] = `
"import { Show, For } from \\"@builder.io/mitosis\\";

export default function NestedShow(props) {
  return (
    <Show when={props.conditionA} else={<div>else-condition-A</div>}>
      <For each={props.items}>{(item, idx) => <div key={idx}>{item}</div>}</For>
    </Show>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > showWithOtherValues 1`] = `
"import { Show } from \\"@builder.io/mitosis\\";

export default function ShowWithOtherValues(props) {
  return (
    <div>
      <Show when={props.conditionA}>ContentA</Show>
      <Show when={props.conditionA} else={undefined}>
        ContentB
      </Show>
      <Show when={props.conditionA}>ContentC</Show>
      <Show when={props.conditionA}>ContentD</Show>
      <Show when={props.conditionA} else={<>hello</>}>
        ContentE
      </Show>
      <Show when={props.conditionA} else={<>123</>}>
        ContentF
      </Show>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > showWithRootText 1`] = `
"import { Show } from \\"@builder.io/mitosis\\";

export default function ShowRootText(props) {
  return (
    <Show when={props.conditionA} else={<div>else-condition-A</div>}>
      ContentA
    </Show>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > signalsOnUpdate 1`] = `
"export default function MyBasicComponent(props) {
  return (
    <div
      class=\\"test\\"
      css={{
        padding: \\"10px\\",
      }}
    >
      {props.id}
      {props.foo.value.bar.baz}
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > spreadAttrs 1`] = `
"export default function MyBasicComponent(props) {
  return <input {...attrs} />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > spreadNestedProps 1`] = `
"export default function MyBasicComponent(props) {
  return <input {...props.nested} />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > spreadProps 1`] = `
"export default function MyBasicComponent(props) {
  return <input {...props} />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > store-async-function 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function StringLiteralStore(props) {
  const state = useStore({
    arrowFunction: async function arrowFunction() {
      return Promise.resolve();
    },
    namedFunction: async function namedFunction() {
      return Promise.resolve();
    },
    fetchUsers: async function fetchUsers() {
      return Promise.resolve();
    },
  });

  return <div />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > string-literal-store 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function StringLiteralStore(props) {
  const state = useStore({ foo: 123 });

  return <div>{state.foo}</div>;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > styleClassAndCss 1`] = `
"export default function MyComponent(props) {
  return (
    <div
      class=\\"builder-column\\"
      style={{
        width: \\"100%\\",
      }}
      css={{
        display: \\"flex\\",
        flexDirection: \\"column\\",
        alignItems: \\"stretch\\",
      }}
    />
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > stylePropClassAndCss 1`] = `
"export default function StylePropClassAndCss(props) {
  return (
    <div
      class=\\"USE_TARGET_BLOCK_1\\"
      style={props.attributes.style}
      css={{
        display: \\"flex\\",
        flexDirection: \\"column\\",
        alignItems: \\"stretch\\",
      }}
    />
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > subComponent 1`] = `
"import { Foo } from \\"@components\\";

import Foo from \\"./foo-sub-component.js\\";

export default function SubComponent(props) {
  return <Foo />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > svgComponent 1`] = `
"export default function SvgComponent(props) {
  return (
    <svg
      fill=\\"none\\"
      role=\\"img\\"
      viewBox={\\"0 0 \\" + 42 + \\" \\" + 42}
      width={42}
      height={42}
    >
      <defs>
        <filter id=\\"prefix__filter0_f\\" filterUnits=\\"userSpaceOnUse\\">
          <feFlood result=\\"BackgroundImageFix\\" />
          <feBlend in=\\"SourceGraphic\\" in2=\\"BackgroundImageFix\\" result=\\"shape\\" />
          <feGaussianBlur result=\\"effect1_foregroundBlur\\" stdDeviation={7} />
        </filter>
      </defs>
    </svg>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > typeDependency 1`] = `
"export default function TypeDependency(props) {
  return <div>{props.foo}</div>;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > typeExternalStore 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function TypeExternalStore(props) {
  const state = useStore({ _name: \\"test\\" });

  return (
    <div>
      Hello
      {state._name}!{\\" \\"}
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > typeGetterStore 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function TypeGetterStore(props) {
  const state = useStore({
    name: \\"test\\",
    getName() {
      if (state.name === \\"a\\") {
        return \\"b\\";
      }

      return state.name;
    },
    get test() {
      return \\"test\\";
    },
  });

  return (
    <div>
      Hello
      {state.name}!{\\" \\"}
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > use-style 1`] = `
"export default function MyComponent(props) {
  useStyle(\`
        button {
            background: blue;
            color: white;
            font-size: 12px;
            outline: 1px solid black;
        }
    \`);

  return <button type=\\"button\\">Button</button>;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > use-style-and-css 1`] = `
"export default function MyComponent(props) {
  useStyle(\`
        button {
            font-size: 12px;
            outline: 1px solid black;
        }
    \`);

  return (
    <button
      type=\\"button\\"
      css={{
        background: \\"blue\\",
        color: \\"white\\",
      }}
    >
      Button
    </button>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > use-style-outside-component 1`] = `
"export default function MyComponent(props) {
  useStyle(\`
  button {
      background: blue;
      color: white;
      font-size: 12px;
      outline: 1px solid black;
  }
\`);

  return <button type=\\"button\\">Button</button>;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > useTarget 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function UseTargetComponent(props) {
  const state = useStore({
    get name() {
      const prefix = \\"USE_TARGET_BLOCK_1\\";
      return prefix + \\"foo\\";
    },
    lastName: \\"bar\\",
    foo: \\"bar\\",
  });

  onMount(() => {
    console.log(state.foo);
    state.foo = \\"bar\\";
    (\\"USE_TARGET_BLOCK_2\\");
  });

  return <div>{state.name}</div>;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Javascript Test > webComponent 1`] = `
"import { register } from \\"swiper/element/bundle\\";

export default function MyBasicWebComponent(props) {
  return (
    <swiper-container slides-per-view=\\"3\\" navigation=\\"true\\" pagination=\\"true\\">
      <swiper-slide>Slide 1</swiper-slide>
      <swiper-slide>Slide 2</swiper-slide>
      <swiper-slide>Slide 3</swiper-slide>
    </swiper-container>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Remove Internal mitosis package 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyBasicComponent(props) {
  const state = useStore({ name: \\"PatrickJS\\" });

  return (
    <div>
      Hello
      {state.name}! I can run in React, Qwik, Vue, Solid, or Liquid!
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > Advanced 1`] = `
"import { useStore, For } from \\"@builder.io/mitosis\\";

export default function MyBasicForShowComponent(props) {
  const state = useStore({ name: \\"PatrickJS\\", names: [\\"Steve\\", \\"PatrickJS\\"] });

  return (
    <main>
      <For each={state.names}>
        {(person, i) => (
          <div>
            {i}:{person}
          </div>
        )}
      </For>
      <For each={state.names}>{(person, index) => <span>{person}</span>}</For>
      <For each={state.names}>{(_, index) => <br />}</For>
      <For
        each={Array.from({
          length: 10,
        })}
      >
        {(_, ee) => <pre>{ee}</pre>}
      </For>
      <For
        each={Array.from({
          length: 10,
        })}
      >
        {(_, index) => <p>{index}</p>}
      </For>
      <For each={state.names}>
        {(person, index) => (
          <span>
            {person}
            {index}
          </span>
        )}
      </For>
      <For
        each={Array.from({
          length: 10,
        })}
      >
        {(person, count) => (
          <span>
            {person}
            {count}
          </span>
        )}
      </For>
      <For each={state.names}>
        {(person, i) => (
          <span>
            {person}
            {i}
          </span>
        )}
      </For>
      <For
        each={Array.from({
          length: 10,
        })}
      >
        {(person, index) => (
          <span>
            {person}
            {index}
          </span>
        )}
      </For>
    </main>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > AdvancedRef 1`] = `
"import { useStore, useRef, Show } from \\"@builder.io/mitosis\\";
import { Fragment } from \\"@components\\";
export interface Props {
  showInput: boolean;
}

export default function MyBasicRefComponent(props) {
  const state = useStore({
    name: \\"PatrickJS\\",
    onBlur: function onBlur() {
      // Maintain focus
      inputRef.current.focus();
    },
    lowerCaseName: function lowerCaseName() {
      return state.name.toLowerCase();
    },
  });

  const inputRef = useRef<HTMLInputElement>(null);
  const inputNoArgRef = useRef<HTMLLabelElement>(null);
  const inputRef = useRef<HTMLInputElement>(null);
  const inputNoArgRef = useRef<HTMLLabelElement>(null);

  return (
    <div>
      <Show when={props.showInput}>
        <Fragment>
          <input
            ref={inputRef}
            css={{
              color: \\"red\\",
            }}
            value={state.name}
            onBlur={(event) => state.onBlur()}
            onChange={(event) => (state.name = event.target.value)}
          />
          <label for=\\"cars\\" ref={inputNoArgRef}>
            Choose a car:
          </label>
          <select name=\\"cars\\" id=\\"cars\\">
            <option value=\\"supra\\">GR Supra</option>
            <option value=\\"86\\">GR 86</option>
          </select>
        </Fragment>
      </Show>
      Hello
      {state.lowerCaseName()}! I can run in React, Qwik, Vue, Solid, or Web
      Component!
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > Basic 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export interface MyBasicComponentProps {
  id: string;
}

export const DEFAULT_VALUES = {
  name: \\"Steve\\",
};

export default function MyBasicComponent(props) {
  const state = useStore({
    name: \\"Steve\\",
    underscore_fn_name() {
      return \\"bar\\";
    },
    age: 1,
    sports: [\\"\\"],
  });

  return (
    <div
      class=\\"test\\"
      css={{
        padding: \\"10px\\",
      }}
    >
      <input
        value={DEFAULT_VALUES.name || state.name}
        onChange={(event) => (state.name = myEvent.target.value)}
      />
      Hello! I can run in React, Vue, Solid, or Liquid! &gt;
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > Basic 2`] = `
"import { useStore, For, Show } from \\"@builder.io/mitosis\\";

export default function MyBasicForShowComponent(props) {
  const state = useStore({ name: \\"PatrickJS\\", names: [\\"Steve\\", \\"PatrickJS\\"] });

  return (
    <div>
      <For each={state.names}>
        {(person, index) => (
          <Show when={person === state.name}>
            <input
              value={state.name}
              onChange={(event) => {
                state.name = event.target.value + \\" and \\" + person;
              }}
            />
            Hello
            {person}! I can run in Qwik, Web Component, React, Vue, Solid, or
            Liquid!
          </Show>
        )}
      </For>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > Basic Context 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

import { Injector, MyService, createInjector } from \\"@dummy/injection-js\\";

export default function MyBasicComponent(props) {
  const state = useStore({
    name: \\"PatrickJS\\",
    onChange: function onChange() {
      const change = myService.method(\\"change\\");
      console.log(change);
    },
  });

  onMount(() => {
    const bye = myService.method(\\"hi\\");
    console.log(bye);
  });

  return (
    <div>
      {myService.method(\\"hello\\") + state.name}
      Hello! I can run in React, Vue, Solid, or Liquid!
      <input onChange={(event) => state.onChange} />
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > Basic OnMount Update 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export interface Props {
  hi: string;
  bye: string;
}

export default function MyBasicOnMountUpdateComponent(props) {
  const state = useStore({ name: \\"PatrickJS\\", names: [\\"Steve\\", \\"PatrickJS\\"] });

  onMount(() => {
    state.name = \\"PatrickJS onMount\\" + props.bye;
  });

  return (
    <div>
      Hello
      {state.name}
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > Basic Outputs 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyBasicOutputsComponent(props) {
  const state = useStore({ name: \\"PatrickJS\\" });

  onMount(() => {
    props.onMessage(state.name);
    props.onEvent(props.message);
  });

  return <div />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > Basic Outputs Meta 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

useMetadata({
  outputs: [\\"onMessage\\", \\"onEvent\\"],
  baz: \\"metadata inside component\\",
});

export default function MyBasicOutputsComponent(props) {
  const state = useStore({ name: \\"PatrickJS\\" });

  onMount(() => {
    props.onMessage(state.name);
    props.onEvent(props.message);
  });

  return <div />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > BasicAttribute 1`] = `
"export default function MyComponent(props) {
  return <input autocapitalize=\\"on\\" autocomplete=\\"on\\" spellcheck={true} />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > BasicBooleanAttribute 1`] = `
"import { Show } from \\"@builder.io/mitosis\\";
import { MyBooleanAttributeComponent } from \\"@components\\";
type Props = {
  children: any;
  type: string;
};

import MyBooleanAttributeComponent from \\"./basic-boolean-attribute-component.raw\\";

export default function MyBooleanAttribute(props) {
  return (
    <div>
      <Show when={props.children}>
        {props.children}
        {props.type}
      </Show>
      <MyBooleanAttributeComponent toggle={true} />
      <MyBooleanAttributeComponent toggle={true} />
      <MyBooleanAttributeComponent list={null} />
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > BasicChildComponent 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { MyBasicComponent, MyBasicOnMountUpdateComponent } from \\"@components\\";

import MyBasicOnMountUpdateComponent from \\"./basic-onMount-update.raw\\";
import MyBasicComponent from \\"./basic.raw\\";

export default function MyBasicChildComponent(props) {
  const state = useStore({ name: \\"Steve\\", dev: \\"PatrickJS\\" });

  return (
    <div>
      <MyBasicComponent id={state.dev} />
      <div>
        <MyBasicOnMountUpdateComponent hi={state.name} bye={state.dev} />
      </div>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > BasicFor 1`] = `
"import { useStore, For } from \\"@builder.io/mitosis\\";
import { Fragment } from \\"@components\\";

export default function MyBasicForComponent(props) {
  const state = useStore({ name: \\"PatrickJS\\", names: [\\"Steve\\", \\"PatrickJS\\"] });

  onMount(() => {
    console.log(\\"onMount code\\");
  });

  return (
    <div>
      <For each={state.names}>
        {(person, index) => (
          <Fragment>
            <input
              value={state.name}
              onChange={(event) => {
                state.name = event.target.value + \\" and \\" + person;
              }}
            />
            Hello
            {person}! I can run in Qwik, Web Component, React, Vue, Solid, or
            Liquid!
          </Fragment>
        )}
      </For>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > BasicRef 1`] = `
"import { useStore, useRef, Show } from \\"@builder.io/mitosis\\";
import { Fragment } from \\"@components\\";
export interface Props {
  showInput: boolean;
}

export default function MyBasicRefComponent(props) {
  const state = useStore({
    name: \\"PatrickJS\\",
    onBlur: function onBlur() {
      // Maintain focus
      inputRef.current.focus();
    },
    lowerCaseName: function lowerCaseName() {
      return state.name.toLowerCase();
    },
  });

  const inputRef = useRef<HTMLInputElement>(null);
  const inputNoArgRef = useRef<HTMLLabelElement>(null);
  const inputRef = useRef<HTMLInputElement>(null);
  const inputNoArgRef = useRef<HTMLLabelElement>(null);

  return (
    <div>
      <Show when={props.showInput}>
        <Fragment>
          <input
            ref={inputRef}
            css={{
              color: \\"red\\",
            }}
            value={state.name}
            onBlur={(event) => state.onBlur()}
            onChange={(event) => (state.name = event.target.value)}
          />
          <label for=\\"cars\\" ref={inputNoArgRef}>
            Choose a car:
          </label>
          <select name=\\"cars\\" id=\\"cars\\">
            <option value=\\"supra\\">GR Supra</option>
            <option value=\\"86\\">GR 86</option>
          </select>
        </Fragment>
      </Show>
      Hello
      {state.lowerCaseName()}! I can run in React, Qwik, Vue, Solid, or Web
      Component!
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > BasicRefAssignment 1`] = `"unknown: Maximum call stack size exceeded"`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > BasicRefPrevious 1`] = `"unknown: Maximum call stack size exceeded"`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > Button 1`] = `
"import { Show } from \\"@builder.io/mitosis\\";

export interface ButtonProps {
  attributes?: any;
  text?: string;
  link?: string;
  openLinkInNewTab?: boolean;
}

export default function Button(props) {
  return (
    <div>
      <Show when={props.link}>
        <a
          {...props.attributes}
          href={props.link}
          target={props.openLinkInNewTab ? \\"_blank\\" : undefined}
        >
          {props.text}
        </a>
      </Show>
      <Show when={!props.link}>
        <button type=\\"button\\" {...props.attributes}>
          {props.text}
        </button>
      </Show>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > Columns 1`] = `
"import { useStore, For } from \\"@builder.io/mitosis\\";

type Column = {
  content: any; // TODO: Implement this when support for dynamic CSS lands

  width?: number;
};
export interface ColumnProps {
  columns?: Column[]; // TODO: Implement this when support for dynamic CSS lands

  space?: number; // TODO: Implement this when support for dynamic CSS lands

  stackColumnsAt?: \\"tablet\\" | \\"mobile\\" | \\"never\\"; // TODO: Implement this when support for dynamic CSS lands

  reverseColumnsWhenStacked?: boolean;
}

export default function Column(props) {
  const state = useStore({
    getColumns() {
      return props.columns || [];
    },
    getGutterSize() {
      return typeof props.space === \\"number\\" ? props.space || 0 : 20;
    },
    getWidth(index: number) {
      const columns = state.getColumns();
      return (columns[index] && columns[index].width) || 100 / columns.length;
    },
    getColumnCssWidth(index: number) {
      const columns = state.getColumns();
      const gutterSize = state.getGutterSize();
      const subtractWidth =
        (gutterSize * (columns.length - 1)) / columns.length;
      return \`calc(\${state.getWidth(index)}% - \${subtractWidth}px)\`;
    },
  });

  return (
    <div
      class=\\"builder-columns\\"
      css={{
        display: \\"flex\\",
        flexDirection: \\"column\\",
        alignItems: \\"stretch\\",
        lineHeight: \\"normal\\",
        \\"@media (max-width: 999px)\\": {
          flexDirection: \\"row\\",
        },
        \\"@media (max-width: 639px)\\": {
          flexDirection: \\"row-reverse\\",
        },
      }}
    >
      <For each={props.columns}>
        {(column, index) => (
          <div
            class=\\"builder-column\\"
            css={{
              flexGrow: \\"1\\",
            }}
          >
            {column.content}
            {index}
          </div>
        )}
      </For>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > ContentSlotHtml 1`] = `
"import { Slot } from \\"@components\\";
type Props = {
  [key: string]: string | JSX.Element;
  slotTesting: JSX.Element;
};

import type { JSX } from \\"../../../../jsx-runtime\\";

export default function ContentSlotCode(props) {
  return (
    <div>
      <Slot name={props.slotTesting} />
      <div>
        <hr />
      </div>
      <div>
        <Slot />
      </div>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > ContentSlotJSX 1`] = `
"import { useStore, Show } from \\"@builder.io/mitosis\\";
import { Slot } from \\"@components\\";
type Props = {
  [key: string]: string | JSX.Element;
};

import type { JSX } from \\"../../../../jsx-runtime\\";

export default function ContentSlotJsxCode(props) {
  const state = useStore({
    name: \\"king\\",
    showContent: false,
    get cls() {
      return props.slotContent && props.children ? \`\${state.name}-content\` : \\"\\";
    },
    show() {
      props.slotContent ? 1 : \\"\\";
    },
  });

  return (
    <Show when={props.slotReference}>
      <div
        name={props.slotContent ? \\"name1\\" : \\"name2\\"}
        title={props.slotContent ? \\"title1\\" : \\"title2\\"}
        {...props.attributes}
        onClick={(event) => state.show()}
        class={state.cls}
      >
        <Show when={state.showContent && props.slotContent}>
          <Slot name=\\"content\\">{props.content}</Slot>
        </Show>
        <div>
          <hr />
        </div>
        <div>{props.children}</div>
      </div>
    </Show>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > CustomCode 1`] = `
"import { useStore, useRef } from \\"@builder.io/mitosis\\";

export interface CustomCodeProps {
  code: string;
  replaceNodes?: boolean;
}

export default function CustomCode(props) {
  const state = useStore({
    scriptsInserted: [],
    scriptsRun: [],
    findAndRunScripts() {
      // TODO: Move this function to standalone one in '@builder.io/utils'
      if (elem.current && typeof window !== \\"undefined\\") {
        /** @type {HTMLScriptElement[]} */
        const scripts = elem.current.getElementsByTagName(\\"script\\");

        for (let i = 0; i < scripts.length; i++) {
          const script = scripts[i];

          if (script.src) {
            if (state.scriptsInserted.includes(script.src)) {
              continue;
            }

            state.scriptsInserted.push(script.src);
            const newScript = document.createElement(\\"script\\");
            newScript.async = true;
            newScript.src = script.src;
            document.head.appendChild(newScript);
          } else if (
            !script.type ||
            [
              \\"text/javascript\\",
              \\"application/javascript\\",
              \\"application/ecmascript\\",
            ].includes(script.type)
          ) {
            if (state.scriptsRun.includes(script.innerText)) {
              continue;
            }

            try {
              state.scriptsRun.push(script.innerText);
              new Function(script.innerText)();
            } catch (error) {
              console.warn(\\"\`CustomCode\`: Error running script:\\", error);
            }
          }
        }
      }
    },
  });

  const elem = useRef<HTMLDivElement>(null);
  const elem = useRef<HTMLDivElement>(null);

  onMount(() => {
    state.findAndRunScripts();
  });

  return (
    <div
      ref={elem}
      class={
        \\"builder-custom-code\\" + (props.replaceNodes ? \\" replace-nodes\\" : \\"\\")
      }
      innerHTML={props.code}
    />
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > Embed 1`] = `
"import { useStore, useRef } from \\"@builder.io/mitosis\\";

export interface CustomCodeProps {
  code: string;
  replaceNodes?: boolean;
}

export default function CustomCode(props) {
  const state = useStore({
    scriptsInserted: [],
    scriptsRun: [],
    findAndRunScripts() {
      // TODO: Move this function to standalone one in '@builder.io/utils'
      if (elem.current && typeof window !== \\"undefined\\") {
        /** @type {HTMLScriptElement[]} */
        const scripts = elem.current.getElementsByTagName(\\"script\\");

        for (let i = 0; i < scripts.length; i++) {
          const script = scripts[i];

          if (script.src) {
            if (state.scriptsInserted.includes(script.src)) {
              continue;
            }

            state.scriptsInserted.push(script.src);
            const newScript = document.createElement(\\"script\\");
            newScript.async = true;
            newScript.src = script.src;
            document.head.appendChild(newScript);
          } else if (
            !script.type ||
            [
              \\"text/javascript\\",
              \\"application/javascript\\",
              \\"application/ecmascript\\",
            ].includes(script.type)
          ) {
            if (state.scriptsRun.includes(script.innerText)) {
              continue;
            }

            try {
              state.scriptsRun.push(script.innerText);
              new Function(script.innerText)();
            } catch (error) {
              console.warn(\\"\`CustomCode\`: Error running script:\\", error);
            }
          }
        }
      }
    },
  });

  const elem = useRef<HTMLDivElement>(null);
  const elem = useRef<HTMLDivElement>(null);

  onMount(() => {
    state.findAndRunScripts();
  });

  return (
    <div
      ref={elem}
      class={
        \\"builder-custom-code\\" + (props.replaceNodes ? \\" replace-nodes\\" : \\"\\")
      }
      innerHTML={props.code}
    />
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > Form 1`] = `
"import { useStore, useRef, Show, For } from \\"@builder.io/mitosis\\";
import { BuilderBlockComponent, BuilderBlocks } from \\"@components\\";
export interface FormProps {
  attributes?: any;
  name?: string;
  action?: string;
  validate?: boolean;
  method?: string;
  builderBlock?: BuilderElement;
  sendSubmissionsTo?: string;
  sendSubmissionsToEmail?: string;
  sendWithJs?: boolean;
  contentType?: string;
  customHeaders?: {
    [key: string]: string;
  };
  successUrl?: string;
  previewState?: FormState;
  successMessage?: BuilderElement[];
  errorMessage?: BuilderElement[];
  sendingMessage?: BuilderElement[];
  resetFormOnSubmit?: boolean;
  errorMessagePath?: string;
}
export type FormState = \\"unsubmitted\\" | \\"sending\\" | \\"success\\" | \\"error\\";

import { Builder, BuilderElement, builder } from \\"@builder.io/sdk\\";
import {
  BuilderBlock as BuilderBlockComponent,
  BuilderBlocks,
  get,
  set,
} from \\"@fake\\";

export default function FormComponent(props) {
  const state = useStore({
    formState: \\"unsubmitted\\",
    responseData: null,
    formErrorMessage: \\"\\",
    get submissionState() {
      return (Builder.isEditing && props.previewState) || state.formState;
    },
    onSubmit(
      event: Event & {
        currentTarget: HTMLFormElement;
      }
    ) {
      const sendWithJs =
        props.sendWithJs || props.sendSubmissionsTo === \\"email\\";

      if (props.sendSubmissionsTo === \\"zapier\\") {
        event.preventDefault();
      } else if (sendWithJs) {
        if (!(props.action || props.sendSubmissionsTo === \\"email\\")) {
          event.preventDefault();
          return;
        }

        event.preventDefault();
        const el = event.currentTarget;
        const headers = props.customHeaders || {};
        let body: any;
        const formData = new FormData(el); // TODO: maybe support null

        const formPairs: {
          key: string;
          value: File | boolean | number | string | FileList;
        }[] = Array.from(
          event.currentTarget.querySelectorAll(\\"input,select,textarea\\")
        )
          .filter((el) => !!(el as HTMLInputElement).name)
          .map((el) => {
            let value: any;
            const key = (el as HTMLImageElement).name;

            if (el instanceof HTMLInputElement) {
              if (el.type === \\"radio\\") {
                if (el.checked) {
                  value = el.name;
                  return {
                    key,
                    value,
                  };
                }
              } else if (el.type === \\"checkbox\\") {
                value = el.checked;
              } else if (el.type === \\"number\\" || el.type === \\"range\\") {
                const num = el.valueAsNumber;

                if (!isNaN(num)) {
                  value = num;
                }
              } else if (el.type === \\"file\\") {
                // TODO: one vs multiple files
                value = el.files;
              } else {
                value = el.value;
              }
            } else {
              value = (el as HTMLInputElement).value;
            }

            return {
              key,
              value,
            };
          });
        let contentType = props.contentType;

        if (props.sendSubmissionsTo === \\"email\\") {
          contentType = \\"multipart/form-data\\";
        }

        Array.from(formPairs).forEach(({ value }) => {
          if (
            value instanceof File ||
            (Array.isArray(value) && value[0] instanceof File) ||
            value instanceof FileList
          ) {
            contentType = \\"multipart/form-data\\";
          }
        }); // TODO: send as urlEncoded or multipart by default
        // because of ease of use and reliability in browser API
        // for encoding the form?

        if (contentType !== \\"application/json\\") {
          body = formData;
        } else {
          // Json
          const json = {};
          Array.from(formPairs).forEach(({ value, key }) => {
            set(json, key, value);
          });
          body = JSON.stringify(json);
        }

        if (contentType && contentType !== \\"multipart/form-data\\") {
          if (
            /* Zapier doesn't allow content-type header to be sent from browsers */
            !(sendWithJs && props.action?.includes(\\"zapier.com\\"))
          ) {
            headers[\\"content-type\\"] = contentType;
          }
        }

        const presubmitEvent = new CustomEvent(\\"presubmit\\", {
          detail: {
            body,
          },
        });

        if (formRef.current) {
          formRef.current.dispatchEvent(presubmitEvent);

          if (presubmitEvent.defaultPrevented) {
            return;
          }
        }

        state.formState = \\"sending\\";
        const formUrl = \`\${
          builder.env === \\"dev\\" ? \\"http://localhost:5000\\" : \\"https://builder.io\\"
        }/api/v1/form-submit?apiKey=\${builder.apiKey}&to=\${btoa(
          props.sendSubmissionsToEmail || \\"\\"
        )}&name=\${encodeURIComponent(props.name || \\"\\")}\`;
        fetch(
          props.sendSubmissionsTo === \\"email\\" ? formUrl : props.action!,
          /* TODO: throw error if no action URL */
          {
            body,
            headers,
            method: props.method || \\"post\\",
          }
        ).then(
          async (res) => {
            let body;
            const contentType = res.headers.get(\\"content-type\\");

            if (contentType && contentType.indexOf(\\"application/json\\") !== -1) {
              body = await res.json();
            } else {
              body = await res.text();
            }

            if (!res.ok && props.errorMessagePath) {
              /* TODO: allow supplying an error formatter function */
              let message = get(body, props.errorMessagePath);

              if (message) {
                if (typeof message !== \\"string\\") {
                  /* TODO: ideally convert json to yaml so it woul dbe like
           error: - email has been taken */
                  message = JSON.stringify(message);
                }

                state.formErrorMessage = message;
              }
            }

            state.responseData = body;
            state.formState = res.ok ? \\"success\\" : \\"error\\";

            if (res.ok) {
              const submitSuccessEvent = new CustomEvent(\\"submit:success\\", {
                detail: {
                  res,
                  body,
                },
              });

              if (formRef.current) {
                formRef.current.dispatchEvent(submitSuccessEvent);

                if (submitSuccessEvent.defaultPrevented) {
                  return;
                }
                /* TODO: option to turn this on/off? */

                if (props.resetFormOnSubmit !== false) {
                  formRef.current.reset();
                }
              }
              /* TODO: client side route event first that can be preventDefaulted */

              if (props.successUrl) {
                if (formRef.current) {
                  const event = new CustomEvent(\\"route\\", {
                    detail: {
                      url: props.successUrl,
                    },
                  });
                  formRef.current.dispatchEvent(event);

                  if (!event.defaultPrevented) {
                    location.href = props.successUrl;
                  }
                } else {
                  location.href = props.successUrl;
                }
              }
            }
          },
          (err) => {
            const submitErrorEvent = new CustomEvent(\\"submit:error\\", {
              detail: {
                error: err,
              },
            });

            if (formRef.current) {
              formRef.current.dispatchEvent(submitErrorEvent);

              if (submitErrorEvent.defaultPrevented) {
                return;
              }
            }

            state.responseData = err;
            state.formState = \\"error\\";
          }
        );
      }
    },
  });

  const formRef = useRef<HTMLFormElement>(null);
  const formRef = useRef<HTMLFormElement>(null);

  return (
    <form
      validate={props.validate}
      ref={formRef}
      action={!props.sendWithJs && props.action}
      method={props.method}
      name={props.name}
      onSubmit={(event) => state.onSubmit(event)}
      {...props.attributes}
    >
      <Show when={props.builderBlock && props.builderBlock.children}>
        <For each={props.builderBlock?.children}>
          {(block, index) => (
            <BuilderBlockComponent key={block.id} block={block} index={index} />
          )}
        </For>
      </Show>
      <Show when={state.submissionState === \\"error\\"}>
        <BuilderBlocks dataPath=\\"errorMessage\\" blocks={props.errorMessage!} />
      </Show>
      <Show when={state.submissionState === \\"sending\\"}>
        <BuilderBlocks
          dataPath=\\"sendingMessage\\"
          blocks={props.sendingMessage!}
        />
      </Show>
      <Show when={state.submissionState === \\"error\\" && state.responseData}>
        <pre
          class=\\"builder-form-error-text\\"
          css={{
            padding: \\"10px\\",
            color: \\"red\\",
            textAlign: \\"center\\",
          }}
        >
          {JSON.stringify(state.responseData, null, 2)}
        </pre>
      </Show>
      <Show when={state.submissionState === \\"success\\"}>
        <BuilderBlocks
          dataPath=\\"successMessage\\"
          blocks={props.successMessage!}
        />
      </Show>
    </form>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > Image 1`] = `
"import { useStore, useRef, Show } from \\"@builder.io/mitosis\\";

// TODO: AMP Support?
export interface ImageProps {
  _class?: string;
  image: string;
  sizes?: string;
  lazy?: boolean;
  height?: number;
  width?: number;
  altText?: string;
  backgroundSize?: string;
  backgroundPosition?: string; // TODO: Support generating Builder.io and or Shopify \`srcset\`s when needed

  srcset?: string; // TODO: Implement support for custom aspect ratios

  aspectRatio?: number; // TODO: This might not work as expected in terms of positioning

  children?: any;
}

export default function Image(props) {
  const state = useStore({
    scrollListener: null,
    imageLoaded: false,
    setLoaded() {
      state.imageLoaded = true;
    },
    useLazyLoading() {
      // TODO: Add more checks here, like testing for real web browsers
      return !!props.lazy && state.isBrowser();
    },
    isBrowser: function isBrowser() {
      return (
        typeof window !== \\"undefined\\" &&
        window.navigator.product != \\"ReactNative\\"
      );
    },
    load: false,
  });

  const pictureRef = useRef<HTMLElement>();
  const pictureRef = useRef<HTMLElement>();

  onMount(() => {
    if (state.useLazyLoading()) {
      // throttled scroll capture listener
      const listener = () => {
        if (pictureRef.current) {
          const rect = pictureRef.current.getBoundingClientRect();
          const buffer = window.innerHeight / 2;

          if (rect.top < window.innerHeight + buffer) {
            state.load = true;
            state.scrollListener = null;
            window.removeEventListener(\\"scroll\\", listener);
          }
        }
      };

      state.scrollListener = listener;
      window.addEventListener(\\"scroll\\", listener, {
        capture: true,
        passive: true,
      });
      listener();
    }
  });

  onUnMount(() => {
    if (state.scrollListener) {
      window.removeEventListener(\\"scroll\\", state.scrollListener);
    }
  });

  return (
    <div>
      <picture ref={pictureRef}>
        <Show when={!state.useLazyLoading() || state.load}>
          <img
            alt={props.altText}
            aria-role={props.altText ? \\"presentation\\" : undefined}
            css={{
              opacity: \\"1\\",
              transition: \\"opacity 0.2s ease-in-out\\",
              objectFit: \\"cover\\",
              objectPosition: \\"center\\",
            }}
            class={\\"builder-image\\" + (props._class ? \\" \\" + props._class : \\"\\")}
            src={props.image}
            onLoad={(event) => state.setLoaded()}
            srcset={props.srcset}
            sizes={props.sizes}
          />
        </Show>
        <source srcset={props.srcset} />
      </picture>
      {props.children}
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > Image State 1`] = `
"import { useStore, For } from \\"@builder.io/mitosis\\";
import { Fragment } from \\"@components\\";

export default function ImgStateComponent(props) {
  const state = useStore({
    canShow: true,
    images: [\\"http://example.com/qwik.png\\"],
  });

  return (
    <div>
      <For each={state.images}>
        {(item, itemIndex) => (
          <Fragment>
            <img class=\\"custom-class\\" src={item} key={itemIndex} />
          </Fragment>
        )}
      </For>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > Img 1`] = `
"export interface ImgProps {
  attributes?: any;
  imgSrc?: string;
  altText?: string;
  backgroundSize?: \\"cover\\" | \\"contain\\";
  backgroundPosition?:
    | \\"center\\"
    | \\"top\\"
    | \\"left\\"
    | \\"right\\"
    | \\"bottom\\"
    | \\"top left\\"
    | \\"top right\\"
    | \\"bottom left\\"
    | \\"bottom right\\";
}

import { Builder } from \\"@builder.io/sdk\\";

export default function ImgComponent(props) {
  return (
    <img
      style={{
        objectFit: props.backgroundSize || \\"cover\\",
        objectPosition: props.backgroundPosition || \\"center\\",
      }}
      {...props.attributes}
      key={(Builder.isEditing && props.imgSrc) || \\"default-key\\"}
      alt={props.altText}
      src={props.imgSrc}
    />
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > Input 1`] = `
"export interface FormInputProps {
  type?: string;
  attributes?: any;
  name?: string;
  value?: string;
  placeholder?: string;
  defaultValue?: string;
  required?: boolean;
  onChange?: (value: string) => void;
}

import { Builder } from \\"@builder.io/sdk\\";

export default function FormInputComponent(props) {
  return (
    <input
      {...props.attributes}
      key={
        Builder.isEditing && props.defaultValue
          ? props.defaultValue
          : \\"default-key\\"
      }
      placeholder={props.placeholder}
      type={props.type}
      name={props.name}
      value={props.value}
      defaultValue={props.defaultValue}
      required={props.required}
      onChange={(event) => props.onChange?.(event.target.value)}
    />
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > InputParent 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { FormInputComponent } from \\"@components\\";

import FormInputComponent from \\"./input.raw\\";

export default function Stepper(props) {
  const state = useStore({
    handleChange(value: string) {
      console.log(value);
    },
  });

  return (
    <FormInputComponent
      name=\\"kingzez\\"
      type=\\"text\\"
      onChange={(event) => state.handleChange(value)}
    />
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > RawText 1`] = `
"export interface RawTextProps {
  attributes?: any;
  text?: string; // builderBlock?: any;
}

export default function RawText(props) {
  return (
    <span
      class={props.attributes?.class || props.attributes?.className}
      innerHTML={props.text || \\"\\"}
    />
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > Section 1`] = `
"export interface SectionProps {
  maxWidth?: number;
  attributes?: any;
  children?: any;
}

export default function SectionComponent(props) {
  return (
    <section
      {...props.attributes}
      style={
        props.maxWidth && typeof props.maxWidth === \\"number\\"
          ? {
              maxWidth: props.maxWidth,
            }
          : undefined
      }
    >
      {props.children}
    </section>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > Section 2`] = `
"import { useStore, Show, For } from \\"@builder.io/mitosis\\";

export interface SectionProps {
  maxWidth?: number;
  attributes?: any;
  children?: any;
}

export default function SectionStateComponent(props) {
  const state = useStore({ max: 42, items: [42] });

  return (
    <Show when={state.max}>
      <For each={state.items}>
        {(item, index) => (
          <section
            {...props.attributes}
            style={{
              maxWidth: item + state.max,
            }}
          >
            {props.children}
          </section>
        )}
      </For>
    </Show>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > Select 1`] = `
"import { For } from \\"@builder.io/mitosis\\";

export interface FormSelectProps {
  options?: {
    name?: string;
    value: string;
  }[];
  attributes?: any;
  name?: string;
  value?: string;
  defaultValue?: string;
}

import { Builder } from \\"@builder.io/sdk\\";

export default function SelectComponent(props) {
  return (
    <select
      {...props.attributes}
      value={props.value}
      key={
        Builder.isEditing && props.defaultValue
          ? props.defaultValue
          : \\"default-key\\"
      }
      defaultValue={props.defaultValue}
      name={props.name}
    >
      <For each={props.options}>
        {(option, index) => (
          <option value={option.value} data-index={index}>
            {option.name || option.value}
          </option>
        )}
      </For>
    </select>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > SlotDefault 1`] = `
"import { Slot } from \\"@components\\";
type Props = {
  [key: string]: string;
};

export default function SlotCode(props) {
  return (
    <div>
      <Slot>
        <div class=\\"default-slot\\">Default content</div>
      </Slot>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > SlotHtml 1`] = `
"import { ContentSlotCode, Slot } from \\"@components\\";
type Props = {
  [key: string]: string;
};

import ContentSlotCode from \\"./content-slot-jsx.raw\\";

export default function SlotCode(props) {
  return (
    <div>
      <ContentSlotCode>
        <Slot testing={<div>Hello</div>} />
      </ContentSlotCode>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > SlotJsx 1`] = `
"import { ContentSlotCode } from \\"@components\\";
type Props = {
  [key: string]: string;
};

import ContentSlotCode from \\"./content-slot-jsx.raw\\";

export default function SlotCode(props) {
  return (
    <div>
      <ContentSlotCode slotTesting={<div>Hello</div>} />
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > SlotNamed 1`] = `
"import { Slot } from \\"@components\\";
type Props = {
  [key: string]: string;
};

export default function SlotCode(props) {
  return (
    <div>
      <Slot name=\\"myAwesomeSlot\\" />
      <Slot name=\\"top\\" />
      <Slot name=\\"left\\">Default left</Slot>
      <Slot>Default Child</Slot>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > Stamped.io 1`] = `
"import { useStore, Show, For } from \\"@builder.io/mitosis\\";

type SmileReviewsProps = {
  productId: string;
  apiKey: string;
};

import { kebabCase, snakeCase } from \\"lodash\\";

export default function SmileReviews(props) {
  const state = useStore({
    reviews: [],
    name: \\"test\\",
    showReviewPrompt: false,
    kebabCaseValue() {
      return kebabCase(\\"testThat\\");
    },
    snakeCaseValue() {
      return snakeCase(\\"testThis\\");
    },
  });

  onMount(() => {
    fetch(
      \`https://stamped.io/api/widget/reviews?storeUrl=builder-io.myshopify.com&apiKey=\${
        props.apiKey || \\"pubkey-8bbDq7W6w4sB3OWeM1HUy2s47702hM\\"
      }&productId=\${props.productId || \\"2410511106127\\"}\`
    )
      .then((res) => res.json())
      .then((data) => {
        state.reviews = data.data;
      });
  });

  return (
    <div data-user={state.name}>
      <button onClick={(event) => (state.showReviewPrompt = true)}>
        Write a review
      </button>
      <Show when={state.showReviewPrompt || \\"asdf\\"}>
        <input placeholder=\\"Email\\" />
        <input
          placeholder=\\"Title\\"
          css={{
            display: \\"block\\",
          }}
        />
        <textarea
          placeholder=\\"How was your experience?\\"
          css={{
            display: \\"block\\",
          }}
        />
        <button
          css={{
            display: \\"block\\",
          }}
          onClick={(event) => {
            ev.preventDefault();
            state.showReviewPrompt = false;
          }}
        >
          Submit
        </button>
      </Show>
      <For each={state.reviews}>
        {(review, index) => (
          <div
            $name=\\"Review\\"
            key={review.id}
            css={{
              margin: \\"10px\\",
              padding: \\"10px\\",
              background: \\"white\\",
              display: \\"flex\\",
              borderRadius: \\"5px\\",
              boxShadow: \\"0 2px 5px rgba(0, 0, 0, 0.1)\\",
              WebkitFontSmoothing: \\"antialiased\\",
            }}
          >
            <img
              css={{
                height: \\"30px\\",
                width: \\"30px\\",
                marginRight: \\"10px\\",
              }}
              src={review.avatar}
            />
            <div class={state.showReviewPrompt ? \\"bg-primary\\" : \\"bg-secondary\\"}>
              <div>
                N:
                {index}
              </div>
              <div>{review.author}</div>
              <div>{review.reviewMessage}</div>
            </div>
          </div>
        )}
      </For>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > Submit 1`] = `
"export interface ButtonProps {
  attributes?: any;
  text?: string;
}

export default function SubmitButton(props) {
  return (
    <button type=\\"submit\\" {...props.attributes}>
      {props.text}
    </button>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > Text 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export interface TextProps {
  attributes?: any;
  rtlMode: boolean;
  text?: string;
  content?: string;
  builderBlock?: any;
}

import { Builder } from \\"@builder.io/sdk\\";

export default function Text(props) {
  const state = useStore({ name: \\"Decadef20\\" });

  return (
    <div
      contentEditable={allowEditingText || undefined}
      data-name={{
        test: state.name || \\"any name\\",
      }}
      innerHTML={
        props.text ||
        props.content ||
        state.name ||
        '<p class=\\"text-lg\\">my name</p>'
      }
    />
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > Textarea 1`] = `
"export interface TextareaProps {
  attributes?: any;
  name?: string;
  value?: string;
  defaultValue?: string;
  placeholder?: string;
}

export default function Textarea(props) {
  return (
    <textarea
      {...props.attributes}
      placeholder={props.placeholder}
      name={props.name}
      value={props.value}
      defaultValue={props.defaultValue}
    />
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > Video 1`] = `
"export interface VideoProps {
  attributes?: any;
  video?: string;
  autoPlay?: boolean;
  controls?: boolean;
  muted?: boolean;
  loop?: boolean;
  playsInline?: boolean;
  aspectRatio?: number;
  width?: number;
  height?: number;
  fit?: \\"contain\\" | \\"cover\\" | \\"fill\\";
  position?:
    | \\"center\\"
    | \\"top\\"
    | \\"left\\"
    | \\"right\\"
    | \\"bottom\\"
    | \\"top left\\"
    | \\"top right\\"
    | \\"bottom left\\"
    | \\"bottom right\\";
  posterImage?: string;
  lazyLoad?: boolean;
}

export default function Video(props) {
  return (
    <video
      preload=\\"none\\"
      {...props.attributes}
      style={{
        width: \\"100%\\",
        height: \\"100%\\",
        ...props.attributes?.style,
        objectFit: props.fit,
        objectPosition: props.position,
        // Hack to get object fit to work as expected and
        // not have the video overflow
        borderRadius: 1,
      }}
      key={props.video || \\"no-src\\"}
      poster={props.posterImage}
      autoplay={props.autoPlay}
      muted={props.muted}
      controls={props.controls}
      loop={props.loop}
    />
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > arrowFunctionInUseStore 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({
    name: \\"steve\\",
    setName(value) {
      state.name = value;
    },
    updateNameWithArrowFn(value) {
      state.name = value;
    },
  });

  return (
    <div>
      Hello
      {state.name}
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > basicForNoTagReference 1`] = `
"import { useStore, For } from \\"@builder.io/mitosis\\";

export default function MyBasicForNoTagRefComponent(props) {
  const state = useStore({
    name: \\"VincentW\\",
    TagName: \\"div\\",
    tag: \\"span\\",
    get TagNameGetter() {
      return \\"span\\";
    },
  });

  return (
    <state.TagNameGetter>
      Hello
      <state.tag>{state.name}</state.tag>
      <For each={props.actions}>
        {(action, index) => (
          <state.TagName>
            <action.icon />
            <span>{action.text}</span>
          </state.TagName>
        )}
      </For>
    </state.TagNameGetter>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > basicForwardRef 1`] = `
"',' expected. (19:12)
  17 |     const state = useStore({ name: 'PatrickJS',});
  18 |
> 19 | const props.inputRef = useRef();
     |            ^
  20 |
  21 |
  22 |"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > basicForwardRefMetadata 1`] = `
"',' expected. (19:12)
  17 |     const state = useStore({ name: 'PatrickJS',});
  18 |
> 19 | const props.inputRef = useRef();
     |            ^
  20 |
  21 |
  22 |"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > basicOnUpdateReturn 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyBasicOnUpdateReturnComponent(props) {
  const state = useStore({ name: \\"PatrickJS\\" });

  return (
    <div>
      Hello!
      {state.name}
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > class + ClassName + css 1`] = `
"import { MyComp } from \\"@components\\";

import MyComp from \\"./my-component.js\\";

export default function MyBasicComponent(props) {
  return (
    <div>
      <MyComp class=\\"test\\" className=\\"test2\\">
        Hello! I can run in React, Vue, Solid, or Liquid!
      </MyComp>
      <div
        class=\\"test2 test\\"
        css={{
          padding: \\"10px\\",
        }}
      >
        Hello! I can run in React, Vue, Solid, or Liquid!
      </div>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > class + css 1`] = `
"export default function MyBasicComponent(props) {
  return (
    <div
      class=\\"test\\"
      css={{
        padding: \\"10px\\",
      }}
    >
      Hello! I can run in React, Vue, Solid, or Liquid!
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > className + css 1`] = `
"export default function MyBasicComponent(props) {
  return (
    <div
      class=\\"test\\"
      css={{
        padding: \\"10px\\",
      }}
    >
      Hello! I can run in React, Vue, Solid, or Liquid!
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > className 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

type Props = {
  [key: string]: string | JSX.Element;
  slotTesting: JSX.Element;
};

import type { JSX } from \\"../../../../jsx-runtime\\";

export default function ClassNameCode(props) {
  const state = useStore({ bindings: \\"a binding\\" });

  return (
    <div>
      <div class=\\"no binding\\">Without Binding</div>
      <div class={state.bindings}>With binding</div>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > classState 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyBasicComponent(props) {
  const state = useStore({
    classState: \\"testClassName\\",
    styleState: {
      color: \\"red\\",
    },
  });

  return (
    <div
      class={state.classState}
      css={{
        padding: \\"10px\\",
      }}
      style={state.styleState}
    >
      Hello! I can run in React, Vue, Solid, or Liquid!
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > componentWithContext 1`] = `
"import { Fragment } from \\"@components\\";
export interface ComponentWithContextProps {
  content: string;
}

import Context1 from \\"@dummy/1\\";
import Context2 from \\"@dummy/2\\";

export default function ComponentWithContext(props) {
  return (
    <Fragment>
      <Fragment>{foo.value}</Fragment>
    </Fragment>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > componentWithContextMultiRoot 1`] = `
"import { Fragment } from \\"@components\\";
export interface ComponentWithContextProps {
  content: string;
}

import Context1 from \\"@dummy/1\\";
import Context2 from \\"@dummy/2\\";

export default function ComponentWithContext(props) {
  return (
    <Fragment>
      <Fragment>{foo.value}</Fragment>
      <div>other</div>
    </Fragment>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > contentState 1`] = `
"import BuilderContext from \\"@dummy/context.js\\";

export default function RenderContent(props) {
  return <div>setting context</div>;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > defaultProps 1`] = `
"import { Show } from \\"@builder.io/mitosis\\";

export interface ButtonProps {
  attributes?: any;
  text?: string;
  buttonText?: string; // no default value

  link?: string;
  openLinkInNewTab?: boolean;
  onClick?: () => void;
}

export default function Button(props) {
  return (
    <div>
      <Show when={props.link}>
        <a
          {...props.attributes}
          href={props.link}
          target={props.openLinkInNewTab ? \\"_blank\\" : undefined}
        >
          {props.text}
        </a>
      </Show>
      <Show when={!props.link}>
        <button
          type=\\"button\\"
          {...props.attributes}
          onClick={(event) => props.onClick()}
        >
          {props.buttonText}
        </button>
      </Show>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > defaultPropsOutsideComponent 1`] = `
"import { Show } from \\"@builder.io/mitosis\\";

export interface ButtonProps {
  attributes?: any;
  text?: string;
  link?: string;
  openLinkInNewTab?: boolean;
  onClick: () => void;
}

export default function Button(props) {
  return (
    <div>
      <Show when={props.link}>
        <a
          {...props.attributes}
          href={props.link}
          target={props.openLinkInNewTab ? \\"_blank\\" : undefined}
        >
          {props.text}
        </a>
      </Show>
      <Show when={!props.link}>
        <button
          type=\\"button\\"
          {...props.attributes}
          onClick={(event) => props.onClick(event)}
        >
          {props.text}
        </button>
      </Show>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > defaultValsWithTypes 1`] = `
"type Props = {
  name: string;
};

const DEFAULT_VALUES: Props = {
  name: \\"Sami\\",
};

export default function ComponentWithTypes(props) {
  return (
    <div>
      {\\" \\"}
      Hello
      {props.name || DEFAULT_VALUES.name}
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > expressionState 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({
    refToUse: !(props.componentRef instanceof Function)
      ? props.componentRef
      : null,
  });

  return <div>{state.refToUse}</div>;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > getterState 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export interface ButtonProps {
  foo: string;
}

export default function Button(props) {
  const state = useStore({
    get foo2() {
      return props.foo + \\"foo\\";
    },
    get bar() {
      return \\"bar\\";
    },
    baz(i: number) {
      return i + state.foo2.length;
    },
  });

  return (
    <div>
      <p>{state.foo2}</p>
      <p>{state.bar}</p>
      <p>{state.baz(1)}</p>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > import types 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { RenderBlock } from \\"@components\\";
type RenderContentProps = {
  options?: GetContentOptions;
  content: BuilderContent;
  renderContentProps: RenderBlockProps;
};

import { BuilderContent, GetContentOptions } from \\"@builder.io/sdk\\";
import RenderBlock, { RenderBlockProps } from \\"./builder-render-block.raw\\";

export default function RenderContent(props) {
  const state = useStore({
    getRenderContentProps(block, index) {
      return {
        block: block,
        index: index,
      };
    },
  });

  return (
    <RenderBlock
      {...state.getRenderContentProps(props.renderContentProps.block, 0)}
    />
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > multipleOnUpdate 1`] = `
"export default function MultipleOnUpdate(props) {
  return <div />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > multipleOnUpdateWithDeps 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MultipleOnUpdateWithDeps(props) {
  const state = useStore({ a: \\"a\\", b: \\"b\\", c: \\"c\\", d: \\"d\\" });

  return <div />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > multipleSpreads 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyBasicComponent(props) {
  const state = useStore({
    attrs: {
      hello: \\"world\\",
    },
  });

  return <input {...state.attrs} {...props} />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > nestedShow 1`] = `
"import { Show } from \\"@builder.io/mitosis\\";

interface Props {
  conditionA: boolean;
  conditionB: boolean;
}

export default function NestedShow(props) {
  return (
    <Show when={props.conditionA} else={<div>else-condition-A</div>}>
      <Show when={!props.conditionB} else={<div>else-condition-B</div>}>
        <div>if condition A and condition B</div>
      </Show>
    </Show>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > nestedStyles 1`] = `
"export default function NestedStyles(props) {
  return (
    <div
      css={{
        display: \\"flex\\",
        \\"--bar\\": \\"red\\",
        color: \\"var(--bar)\\",
        \\"@media (max-width: env(--mobile))\\": {
          display: \\"block\\",
        },
        \\"&:hover\\": {
          display: \\"flex\\",
        },
        \\":active\\": {
          display: \\"inline\\",
        },
        \\".nested-selector\\": {
          display: \\"grid\\",
        },
        \\".nested-selector:hover\\": {
          display: \\"block\\",
        },
        \\"&.nested-selector:active\\": {
          display: \\"inline-block\\",
        },
      }}
    >
      Hello world
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > onEvent 1`] = `
"import { useStore, useRef } from \\"@builder.io/mitosis\\";

export default function Embed(props) {
  const state = useStore({
    foo(event) {
      console.log(\\"test2\\");
    },
  });

  const elem = useRef<HTMLDivElement>(null);
  const elem = useRef<HTMLDivElement>(null);

  onMount(() => {
    elem.current.dispatchEvent(new CustomEvent(\\"initEditingBldr\\"));
  });

  return (
    <div class=\\"builder-embed\\" ref={elem}>
      <div>Test</div>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > onInit & onMount 1`] = `
"export default function OnInit(props) {
  onMount(() => {
    console.log(\\"onMount\\");
  });

  return <div />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > onInit 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

type Props = {
  name: string;
};

export const defaultValues = {
  name: \\"PatrickJS\\",
};

export default function OnInit(props) {
  const state = useStore({ name: \\"\\" });

  return (
    <div>
      Default name defined by parent
      {state.name}
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > onInitPlain 1`] = `
"export default function OnInitPlain(props) {
  return <div />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > onMount 1`] = `
"export default function Comp(props) {
  onMount(() => {
    console.log(\\"Runs on mount\\");
  });

  onUnMount(() => {
    console.log(\\"Runs on unMount\\");
  });

  return <div />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > onMountMultiple 1`] = `
"export default function Comp(props) {
  onMount(() => {
    console.log(\\"Runs on mount\\");
  }),
    onMount(() => {
      console.log(\\"Another one runs on Mount\\");
    }),
    onMount(() => {
      console.log(\\"SSR runs on Mount\\");
    });

  return <div />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > onUpdate 1`] = `
"export default function OnUpdate(props) {
  return <div />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > onUpdateWithDeps 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

type Props = {
  size: string;
};

export default function OnUpdateWithDeps(props) {
  const state = useStore({ a: \\"a\\", b: \\"b\\" });

  return <div />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > preserveExportOrLocalStatement 1`] = `
"type Types = {
  s: any[];
};
interface IPost {
  len: number;
}
export interface MyBasicComponentProps {
  id: string;
}

const b = 3;
const foo = () => {};
export const a = 3;
export const bar = () => {};
export function run<T>(value: T) {}

export default function MyBasicComponent(props) {
  return <div />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > preserveTyping 1`] = `
"export type A = \\"test\\";
export interface C {
  n: \\"test\\";
}
type B = \\"test2\\";
interface D {
  n: \\"test\\";
}
export interface MyBasicComponentProps {
  name: string;
  age?: number;
}

export default function MyBasicComponent(props) {
  return (
    <div>
      Hello! I can run in React, Vue, Solid, or Liquid!
      {props.name}
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > propsDestructure 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

type Props = {
  children: any;
  type: string;
};

export default function MyBasicComponent(props) {
  const state = useStore({ name: \\"Decadef20\\" });

  return (
    <div>
      {props.children}
      {props.type}
      Hello! I can run in React, Vue, Solid, or Liquid!
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > propsInterface 1`] = `
"interface Person {
  name: string;
  age?: number;
}

export default function MyBasicComponent(props) {
  return (
    <div>
      Hello! I can run in React, Vue, Solid, or Liquid!
      {props.name}
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > propsType 1`] = `
"type Person = {
  name: string;
  age?: number;
};

export default function MyBasicComponent(props) {
  return (
    <div>
      Hello! I can run in React, Vue, Solid, or Liquid!
      {props.name}
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > referencingFunInsideHook 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function OnUpdate(props) {
  const state = useStore({
    foo: function foo(params) {},
    bar: function bar() {},
    zoo: function zoo() {
      const params = {
        cb: state.bar,
      };
    },
  });

  return <div />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > renderBlock 1`] = `
"import { useStore, Show, For } from \\"@builder.io/mitosis\\";
import { RenderRepeatedBlock, RenderBlock, BlockStyles } from \\"@components\\";
export type RenderBlockProps = {
  block: BuilderBlock;
  context: BuilderContextInterface;
};

import { TARGET } from \\"../../constants/target.js\\";
import type {
  BuilderContextInterface,
  RegisteredComponent,
} from \\"../../context/types.js\\";
import { evaluate } from \\"../../functions/evaluate.js\\";
import { extractTextStyles } from \\"../../functions/extract-text-styles.js\\";
import { getBlockActions } from \\"../../functions/get-block-actions.js\\";
import { getBlockComponentOptions } from \\"../../functions/get-block-component-options.js\\";
import { getBlockProperties } from \\"../../functions/get-block-properties.js\\";
import { getBlockTag } from \\"../../functions/get-block-tag.js\\";
import { getProcessedBlock } from \\"../../functions/get-processed-block.js\\";
import { getReactNativeBlockStyles } from \\"../../functions/get-react-native-block-styles.js\\";
import type { BuilderBlock } from \\"../../types/builder-block.js\\";
import type { Nullable } from \\"../../types/typescript.js\\";
import BlockStyles from \\"./block-styles.js\\";
import { isEmptyHtmlElement } from \\"./render-block.helpers.js\\";
import RenderComponentWithContext from \\"./render-component-with-context.js\\";
import type { RenderComponentProps } from \\"./render-component.js\\";
import RenderComponent from \\"./render-component.js\\";
import RenderRepeatedBlock from \\"./render-repeated-block.js\\";
import type { RepeatData } from \\"./types.js\\";

export default function RenderBlock(props) {
  const state = useStore({
    get component() {
      const componentName = getProcessedBlock({
        block: props.block,
        state: props.context.state,
        context: props.context.context,
        shouldEvaluateBindings: false,
      }).component?.name;

      if (!componentName) {
        return null;
      }

      const ref = props.context.registeredComponents[componentName];

      if (!ref) {
        // TODO: Public doc page with more info about this message
        console.warn(\`
          Could not find a registered component named \\"\${componentName}\\".
          If you registered it, is the file that registered it imported by the file that needs to render it?\`);
        return undefined;
      } else {
        return ref;
      }
    },
    get tag() {
      return getBlockTag(state.useBlock);
    },
    get useBlock() {
      return state.repeatItemData
        ? props.block
        : getProcessedBlock({
            block: props.block,
            state: props.context.state,
            context: props.context.context,
            shouldEvaluateBindings: true,
          });
    },
    get actions() {
      return getBlockActions({
        block: state.useBlock,
        state: props.context.state,
        context: props.context.context,
      });
    },
    get attributes() {
      const blockProperties = getBlockProperties(state.useBlock);
      return {
        ...blockProperties,
        ...(TARGET === \\"reactNative\\"
          ? {
              style: getReactNativeBlockStyles({
                block: state.useBlock,
                context: props.context,
                blockStyles: blockProperties.style,
              }),
            }
          : {}),
      };
    },
    get shouldWrap() {
      return !state.component?.noWrap;
    },
    get renderComponentProps() {
      return {
        blockChildren: state.useChildren,
        componentRef: state.component?.component,
        componentOptions: {
          ...getBlockComponentOptions(state.useBlock),

          /**
           * These attributes are passed to the wrapper element when there is one. If \`noWrap\` is set to true, then
           * they are provided to the component itself directly.
           */
          ...(state.shouldWrap
            ? {}
            : {
                attributes: { ...state.attributes, ...state.actions },
              }),
          customBreakpoints: state.childrenContext?.content?.meta?.breakpoints,
        },
        context: state.childrenContext,
      };
    },
    get useChildren() {
      // TO-DO: When should \`canHaveChildren\` dictate rendering?
      // This is currently commented out because some Builder components (e.g. Box) do not have \`canHaveChildren: true\`,
      // but still receive and need to render children.
      // return state.componentInfo?.canHaveChildren ? state.useBlock.children : [];
      return state.useBlock.children ?? [];
    },
    get childrenWithoutParentComponent() {
      /**
       * When there is no \`componentRef\`, there might still be children that need to be rendered. In this case,
       * we render them outside of \`componentRef\`.
       * NOTE: We make sure not to render this if \`repeatItemData\` is non-null, because that means we are rendering an array of
       * blocks, and the children will be repeated within those blocks.
       */
      const shouldRenderChildrenOutsideRef =
        !state.component?.component && !state.repeatItemData;
      return shouldRenderChildrenOutsideRef ? state.useChildren : [];
    },
    get repeatItemData() {
      /**
       * we don't use \`state.useBlock\` here because the processing done within its logic includes evaluating the block's bindings,
       * which will not work if there is a repeat.
       */
      const { repeat, ...blockWithoutRepeat } = props.block;

      if (!repeat?.collection) {
        return undefined;
      }

      const itemsArray = evaluate({
        code: repeat.collection,
        state: props.context.state,
        context: props.context.context,
      });

      if (!Array.isArray(itemsArray)) {
        return undefined;
      }

      const collectionName = repeat.collection.split(\\".\\").pop();
      const itemNameToUse =
        repeat.itemName || (collectionName ? collectionName + \\"Item\\" : \\"item\\");
      const repeatArray = itemsArray.map<RepeatData>((item, index) => ({
        context: {
          ...props.context,
          state: {
            ...props.context.state,
            $index: index,
            $item: item,
            [itemNameToUse]: item,
            [\`$\${itemNameToUse}Index\`]: index,
          },
        },
        block: blockWithoutRepeat,
      }));
      return repeatArray;
    },
    get inheritedTextStyles() {
      if (TARGET !== \\"reactNative\\") {
        return {};
      }

      const styles = getReactNativeBlockStyles({
        block: state.useBlock,
        context: props.context,
        blockStyles: state.attributes.style,
      });
      return extractTextStyles(styles);
    },
    get childrenContext() {
      return {
        apiKey: props.context.apiKey,
        state: props.context.state,
        content: props.context.content,
        context: props.context.context,
        registeredComponents: props.context.registeredComponents,
        inheritedStyles: state.inheritedTextStyles,
      };
    },
    get renderComponentTag() {
      if (TARGET === \\"reactNative\\") {
        return RenderComponentWithContext;
      } else if (TARGET === \\"vue3\\") {
        // vue3 expects a string for the component tag
        return \\"RenderComponent\\";
      } else {
        return RenderComponent;
      }
    },
  });

  return (
    <Show
      when={state.shouldWrap}
      else={<state.renderComponentTag {...state.renderComponentProps} />}
    >
      <Show when={isEmptyHtmlElement(state.tag)}>
        <state.tag {...state.attributes} {...state.actions} />
      </Show>
      <Show when={!isEmptyHtmlElement(state.tag) && state.repeatItemData}>
        <For each={state.repeatItemData}>
          {(data, index) => (
            <RenderRepeatedBlock
              key={index}
              repeatContext={data.context}
              block={data.block}
            />
          )}
        </For>
      </Show>
      <Show when={!isEmptyHtmlElement(state.tag) && !state.repeatItemData}>
        <state.tag {...state.attributes} {...state.actions}>
          <state.renderComponentTag {...state.renderComponentProps} />
          <For each={state.childrenWithoutParentComponent}>
            {(child, index) => (
              <RenderBlock
                key={\\"render-block-\\" + child.id}
                block={child}
                context={state.childrenContext}
              />
            )}
          </For>
          <For each={state.childrenWithoutParentComponent}>
            {(child, index) => (
              <BlockStyles
                key={\\"block-style-\\" + child.id}
                block={child}
                context={state.childrenContext}
              />
            )}
          </For>
        </state.tag>
      </Show>
    </Show>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > renderContentExample 1`] = `
"import { RenderBlocks } from \\"@components\\";
type Props = {
  customComponents: string[];
  content: {
    blocks: any[];
    id: string;
  };
};

import BuilderContext from \\"@dummy/context.js\\";
import {
  dispatchNewContentToVisualEditor,
  sendComponentsToVisualEditor,
  trackClick,
} from \\"@dummy/injection-js\\";
import RenderBlocks from \\"@dummy/RenderBlocks.js\\";

export default function RenderContent(props) {
  onMount(() => {
    sendComponentsToVisualEditor(props.customComponents);
  });

  return (
    <div
      css={{
        display: \\"flex\\",
        flexDirection: \\"columns\\",
      }}
      onClick={(event) => trackClick(props.content.id)}
    >
      <RenderBlocks blocks={props.content.blocks} />
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > rootFragmentMultiNode 1`] = `
"import { Show } from \\"@builder.io/mitosis\\";
import { Fragment } from \\"@components\\";
export interface ButtonProps {
  attributes?: any;
  text?: string;
  link?: string;
  openLinkInNewTab?: boolean;
}

export default function Button(props) {
  return (
    <Fragment>
      <Show when={props.link}>
        <a
          {...props.attributes}
          href={props.link}
          target={props.openLinkInNewTab ? \\"_blank\\" : undefined}
        >
          {props.text}
        </a>
      </Show>
      <Show when={!props.link}>
        <button type=\\"button\\" {...props.attributes}>
          {props.text}
        </button>
      </Show>
    </Fragment>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > rootShow 1`] = `
"import { Show } from \\"@builder.io/mitosis\\";

export interface RenderStylesProps {
  foo: string;
}

export default function RenderStyles(props) {
  return (
    <Show when={props.foo === \\"bar\\"} else={<div>Foo</div>}>
      <div>Bar</div>
    </Show>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > self-referencing component 1`] = `
"import { Show } from \\"@builder.io/mitosis\\";
import { MyComponent } from \\"@components\\";

export default function MyComponent(props) {
  return (
    <div>
      {props.name}
      <Show when={props.name === \\"Batman\\"}>
        <MyComponent name=\\"Bruce Wayne\\" />
      </Show>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > self-referencing component with children 1`] = `
"import { Show } from \\"@builder.io/mitosis\\";
import { MyComponent } from \\"@components\\";

export default function MyComponent(props) {
  return (
    <div>
      {props.name}
      {props.children}
      <Show when={props.name === \\"Batman\\"}>
        <MyComponent name=\\"Bruce\\">
          <div>Wayne</div>
        </MyComponent>
      </Show>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > showExpressions 1`] = `
"import { Show } from \\"@builder.io/mitosis\\";

interface Props {
  conditionA: boolean;
  conditionB: boolean;
}

export default function ShowWithOtherValues(props) {
  return (
    <div>
      <Show when={props.conditionA} else={<>ContentA</>}>
        Content0
      </Show>
      <Show when={props.conditionA}>ContentA</Show>
      <Show when={props.conditionA} else={<>ContentA</>}></Show>
      <Show when={props.conditionA} else={undefined}>
        ContentB
      </Show>
      <Show when={props.conditionA} else={<>ContentB</>}>
        {undefined}
      </Show>
      <Show when={props.conditionA}>ContentC</Show>
      <Show when={props.conditionA} else={<>ContentC</>}></Show>
      <Show when={props.conditionA}>ContentD</Show>
      <Show when={props.conditionA} else={<>ContentD</>}></Show>
      <Show when={props.conditionA} else={<>hello</>}>
        ContentE
      </Show>
      <Show when={props.conditionA} else={<>ContentE</>}>
        hello
      </Show>
      <Show when={props.conditionA} else={<>123</>}>
        ContentF
      </Show>
      <Show when={props.conditionA} else={<>ContentF</>}>
        123
      </Show>
      <Show
        when={props.conditionA === \\"Default\\"}
        else={
          <Show when={props.conditionB === \\"Complete\\"} else={<>9mb</>}>
            20mb
          </Show>
        }
      >
        4mb
      </Show>
      <Show when={props.conditionA === \\"Default\\"} else={<>4mb</>}>
        <Show when={props.conditionB === \\"Complete\\"} else={<>9mb</>}>
          20mb
        </Show>
      </Show>
      <Show
        when={props.conditionA === \\"Default\\"}
        else={
          <Show
            when={props.conditionC === \\"Complete\\"}
            else={<div>complete else</div>}
          >
            dff
          </Show>
        }
      >
        <Show when={props.conditionB === \\"Complete\\"} else={<>9mb</>}>
          <div>complete</div>
        </Show>
      </Show>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > showWithFor 1`] = `
"import { Show, For } from \\"@builder.io/mitosis\\";

interface Props {
  conditionA: boolean;
  items: string[];
}

export default function NestedShow(props) {
  return (
    <Show when={props.conditionA} else={<div>else-condition-A</div>}>
      <For each={props.items}>{(item, idx) => <div key={idx}>{item}</div>}</For>
    </Show>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > showWithOtherValues 1`] = `
"import { Show } from \\"@builder.io/mitosis\\";

interface Props {
  conditionA: boolean;
}

export default function ShowWithOtherValues(props) {
  return (
    <div>
      <Show when={props.conditionA}>ContentA</Show>
      <Show when={props.conditionA} else={undefined}>
        ContentB
      </Show>
      <Show when={props.conditionA}>ContentC</Show>
      <Show when={props.conditionA}>ContentD</Show>
      <Show when={props.conditionA} else={<>hello</>}>
        ContentE
      </Show>
      <Show when={props.conditionA} else={<>123</>}>
        ContentF
      </Show>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > showWithRootText 1`] = `
"import { Show } from \\"@builder.io/mitosis\\";

interface Props {
  conditionA: boolean;
}

export default function ShowRootText(props) {
  return (
    <Show when={props.conditionA} else={<div>else-condition-A</div>}>
      ContentA
    </Show>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > signalsOnUpdate 1`] = `
"type Props = {
  id: Signal<string>;
  foo: Signal<{
    bar: {
      baz: number;
    };
  }>;
};

export default function MyBasicComponent(props) {
  return (
    <div
      class=\\"test\\"
      css={{
        padding: \\"10px\\",
      }}
    >
      {props.id}
      {props.foo.value.bar.baz}
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > spreadAttrs 1`] = `
"export default function MyBasicComponent(props) {
  return <input {...attrs} />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > spreadNestedProps 1`] = `
"export default function MyBasicComponent(props) {
  return <input {...props.nested} />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > spreadProps 1`] = `
"export default function MyBasicComponent(props) {
  return <input {...props} />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > store-async-function 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function StringLiteralStore(props) {
  const state = useStore({
    arrowFunction: async function arrowFunction() {
      return Promise.resolve();
    },
    namedFunction: async function namedFunction() {
      return Promise.resolve();
    },
    fetchUsers: async function fetchUsers() {
      return Promise.resolve();
    },
  });

  return <div />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > string-literal-store 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function StringLiteralStore(props) {
  const state = useStore({ foo: 123 });

  return <div>{state.foo}</div>;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > styleClassAndCss 1`] = `
"export default function MyComponent(props) {
  return (
    <div
      class=\\"builder-column\\"
      style={{
        width: \\"100%\\",
      }}
      css={{
        display: \\"flex\\",
        flexDirection: \\"column\\",
        alignItems: \\"stretch\\",
      }}
    />
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > stylePropClassAndCss 1`] = `
"export default function StylePropClassAndCss(props) {
  return (
    <div
      class=\\"USE_TARGET_BLOCK_1\\"
      style={props.attributes.style}
      css={{
        display: \\"flex\\",
        flexDirection: \\"column\\",
        alignItems: \\"stretch\\",
      }}
    />
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > subComponent 1`] = `
"import { Foo } from \\"@components\\";

import Foo from \\"./foo-sub-component.js\\";

export default function SubComponent(props) {
  return <Foo />;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > svgComponent 1`] = `
"export default function SvgComponent(props) {
  return (
    <svg
      fill=\\"none\\"
      role=\\"img\\"
      viewBox={\\"0 0 \\" + 42 + \\" \\" + 42}
      width={42}
      height={42}
    >
      <defs>
        <filter id=\\"prefix__filter0_f\\" filterUnits=\\"userSpaceOnUse\\">
          <feFlood result=\\"BackgroundImageFix\\" />
          <feBlend in=\\"SourceGraphic\\" in2=\\"BackgroundImageFix\\" result=\\"shape\\" />
          <feGaussianBlur result=\\"effect1_foregroundBlur\\" stdDeviation={7} />
        </filter>
      </defs>
    </svg>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > typeDependency 1`] = `
"export type TypeDependencyProps = {
  foo: Foo;
  foo2: Foo2;
};

import type { Foo } from \\"./foo-type\\";
import type { Foo as Foo2 } from \\"./type-export.js\\";

export default function TypeDependency(props) {
  return <div>{props.foo}</div>;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > typeExternalStore 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

import { FooStore } from \\"./foo-store\\";

export default function TypeExternalStore(props) {
  const state = useStore({ _name: \\"test\\" });

  return (
    <div>
      Hello
      {state._name}!{\\" \\"}
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > typeGetterStore 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

type GetterStore = {
  getName: () => string;
  name: string;
  get test(): string;
};

export default function TypeGetterStore(props) {
  const state = useStore({
    name: \\"test\\",
    getName() {
      if (state.name === \\"a\\") {
        return \\"b\\";
      }

      return state.name;
    },
    get test() {
      return \\"test\\";
    },
  });

  return (
    <div>
      Hello
      {state.name}!{\\" \\"}
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > use-style 1`] = `
"export default function MyComponent(props) {
  useStyle(\`
        button {
            background: blue;
            color: white;
            font-size: 12px;
            outline: 1px solid black;
        }
    \`);

  return <button type=\\"button\\">Button</button>;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > use-style-and-css 1`] = `
"export default function MyComponent(props) {
  useStyle(\`
        button {
            font-size: 12px;
            outline: 1px solid black;
        }
    \`);

  return (
    <button
      type=\\"button\\"
      css={{
        background: \\"blue\\",
        color: \\"white\\",
      }}
    >
      Button
    </button>
  );
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > use-style-outside-component 1`] = `
"export default function MyComponent(props) {
  useStyle(\`
  button {
      background: blue;
      color: white;
      font-size: 12px;
      outline: 1px solid black;
  }
\`);

  return <button type=\\"button\\">Button</button>;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > useTarget 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function UseTargetComponent(props) {
  const state = useStore({
    get name() {
      const prefix = \\"USE_TARGET_BLOCK_1\\";
      return prefix + \\"foo\\";
    },
    lastName: \\"bar\\",
    foo: \\"bar\\",
  });

  onMount(() => {
    console.log(state.foo);
    state.foo = \\"bar\\";
    (\\"USE_TARGET_BLOCK_2\\");
  });

  return <div>{state.name}</div>;
}
"
`;

exports[`Mitosis, format: legacy > jsx > Typescript Test > webComponent 1`] = `
"import { register } from \\"swiper/element/bundle\\";

export default function MyBasicWebComponent(props) {
  return (
    <swiper-container slides-per-view=\\"3\\" navigation=\\"true\\" pagination=\\"true\\">
      <swiper-slide>Slide 1</swiper-slide>
      <swiper-slide>Slide 2</swiper-slide>
      <swiper-slide>Slide 3</swiper-slide>
    </swiper-container>
  );
}
"
`;

exports[`Mitosis, format: legacy > svelte > Javascript Test > basic 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({ name: \\"Steve\\" });

  return (
    <div>
      <input
        onChange={(event) => (state.name = event.target.value)}
        value={state.name}
      />
      Hello! I can run in React, Vue, Solid, or Liquid!
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > svelte > Javascript Test > bindGroup 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({ tortilla: \\"Plain\\", fillings: [] });

  return (
    <div>
      <input
        type=\\"radio\\"
        value=\\"Plain\\"
        checked={state.tortilla === \\"Plain\\"}
        onChange={(event) => (state.tortilla = event.target.value)}
      />
      <input
        type=\\"radio\\"
        value=\\"Whole wheat\\"
        checked={state.tortilla === \\"Whole wheat\\"}
        onChange={(event) => (state.tortilla = event.target.value)}
      />
      <input
        type=\\"radio\\"
        value=\\"Spinach\\"
        checked={state.tortilla === \\"Spinach\\"}
        onChange={(event) => (state.tortilla = event.target.value)}
      />
      <br />
      <br />
      <input
        type=\\"checkbox\\"
        value=\\"Rice\\"
        checked={state.fillings === \\"Rice\\"}
        onChange={(event) => (state.fillings = event.target.value)}
      />
      <input
        type=\\"checkbox\\"
        value=\\"Beans\\"
        checked={state.fillings === \\"Beans\\"}
        onChange={(event) => (state.fillings = event.target.value)}
      />
      <input
        type=\\"checkbox\\"
        value=\\"Cheese\\"
        checked={state.fillings === \\"Cheese\\"}
        onChange={(event) => (state.fillings = event.target.value)}
      />
      <input
        type=\\"checkbox\\"
        value=\\"Guac (extra)\\"
        checked={state.fillings === \\"Guac (extra)\\"}
        onChange={(event) => (state.fillings = event.target.value)}
      />
      <p>
        Tortilla:
        {state.tortilla}
      </p>
      <p>
        Fillings:
        {state.fillings}
      </p>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > svelte > Javascript Test > bindProperty 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({ value: \\"hello\\" });

  return <input value={state.value} />;
}
"
`;

exports[`Mitosis, format: legacy > svelte > Javascript Test > classDirective 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({ focus: true });

  return (
    <input
      class={\`form-input \${props.disabled ? \\"disabled\\" : \\"\\"} \${
        state.focus ? \\"focus\\" : \\"\\"
      }\`}
    />
  );
}
"
`;

exports[`Mitosis, format: legacy > svelte > Javascript Test > context 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({ activeTab: 0 });

  return <div>{state.activeTab}</div>;
}
"
`;

exports[`Mitosis, format: legacy > svelte > Javascript Test > each 1`] = `
"import { useStore, For } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({ numbers: [\\"one\\", \\"two\\", \\"three\\"] });

  return (
    <ul>
      <For each={state.numbers}>{(num, index) => <li>{num}</li>}</For>
    </ul>
  );
}
"
`;

exports[`Mitosis, format: legacy > svelte > Javascript Test > eventHandlers 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({
    log: function log(msg = \\"hello\\") {
      console.log(msg);
    },
  });

  return (
    <div>
      <button onClick={(event) => state.log(\\"hi\\")}>Log</button>
      <button onClick={(event) => state.log(event)}>Log</button>
      <button onClick={(event) => state.log(event)}>Log</button>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > svelte > Javascript Test > html 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({ html: \\"<b>bold</b>\\" });

  return <div innerHTML={state.html} />;
}
"
`;

exports[`Mitosis, format: legacy > svelte > Javascript Test > ifElse 1`] = `
"import { useStore, Show } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({
    show: true,
    toggle: function toggle() {
      state.show = !state.show;
    },
  });

  return (
    <Show
      when={state.show}
      else={<button onClick={(event) => state.toggle(event)}> Show </button>}
    >
      <button onClick={(event) => state.toggle(event)}> Hide </button>
    </Show>
  );
}
"
`;

exports[`Mitosis, format: legacy > svelte > Javascript Test > imports 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { Button, Slot } from \\"@components\\";

import Button from \\"./Button.js\\";

export default function MyComponent(props) {
  const state = useStore({ disabled: false });

  return (
    <div>
      <Button type=\\"button\\" disabled={state.disabled}>
        <Slot />
      </Button>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > svelte > Javascript Test > lifecycleHooks 1`] = `
"export default function MyComponent(props) {
  onMount(() => {
    console.log(\\"onMount\\");
  });

  onUnMount(() => {
    console.log(\\"onDestroy\\");
  });

  return <div />;
}
"
`;

exports[`Mitosis, format: legacy > svelte > Javascript Test > reactive 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({
    name: \\"Steve\\",
    get lowercaseName() {
      return state.name.toLowerCase();
    },
  });

  return (
    <div>
      <input value={state.name} />
      Lowercase:
      {state.lowercaseName}
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > svelte > Javascript Test > reactiveWithFn 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({
    a: 2,
    b: 5,
    result: null,
    calculateResult: function calculateResult(a_, b_) {
      state.result = a_ * b_;
    },
  });

  return (
    <div>
      <input
        type=\\"number\\"
        onChange={(event) => (state.a = event.target.value)}
        value={state.a}
      />
      <input
        type=\\"number\\"
        onChange={(event) => (state.b = event.target.value)}
        value={state.b}
      />
      Result:
      {state.result}
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > svelte > Javascript Test > slots 1`] = `
"import { Slot } from \\"@components\\";

export default function MyComponent(props) {
  return (
    <div>
      <Slot>default</Slot>
      <Slot name=\\"Test\\">
        <div>default</div>
      </Slot>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > svelte > Javascript Test > style 1`] = `
"export default function MyComponent(props) {
  useStyle(\`
  input {
    color: red;
    font-size: 12px;
  }

  .form-input:focus {
    outline: 1px solid blue;
  }
\`);

  return <input class=\\"form-input\\" />;
}
"
`;

exports[`Mitosis, format: legacy > svelte > Javascript Test > textExpressions 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({ a: 5, b: 12 });

  return (
    <div>
      normal:
      {state.a + state.b}
      <br />
      conditional
      {state.a > 2 ? \\"hello\\" : \\"bye\\"}
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > svelte > Typescript Test > basic 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({ name: \\"Steve\\" });

  return (
    <div>
      <input
        onChange={(event) => (state.name = event.target.value)}
        value={state.name}
      />
      Hello! I can run in React, Vue, Solid, or Liquid!
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > svelte > Typescript Test > bindGroup 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({ tortilla: \\"Plain\\", fillings: [] });

  return (
    <div>
      <input
        type=\\"radio\\"
        value=\\"Plain\\"
        checked={state.tortilla === \\"Plain\\"}
        onChange={(event) => (state.tortilla = event.target.value)}
      />
      <input
        type=\\"radio\\"
        value=\\"Whole wheat\\"
        checked={state.tortilla === \\"Whole wheat\\"}
        onChange={(event) => (state.tortilla = event.target.value)}
      />
      <input
        type=\\"radio\\"
        value=\\"Spinach\\"
        checked={state.tortilla === \\"Spinach\\"}
        onChange={(event) => (state.tortilla = event.target.value)}
      />
      <br />
      <br />
      <input
        type=\\"checkbox\\"
        value=\\"Rice\\"
        checked={state.fillings === \\"Rice\\"}
        onChange={(event) => (state.fillings = event.target.value)}
      />
      <input
        type=\\"checkbox\\"
        value=\\"Beans\\"
        checked={state.fillings === \\"Beans\\"}
        onChange={(event) => (state.fillings = event.target.value)}
      />
      <input
        type=\\"checkbox\\"
        value=\\"Cheese\\"
        checked={state.fillings === \\"Cheese\\"}
        onChange={(event) => (state.fillings = event.target.value)}
      />
      <input
        type=\\"checkbox\\"
        value=\\"Guac (extra)\\"
        checked={state.fillings === \\"Guac (extra)\\"}
        onChange={(event) => (state.fillings = event.target.value)}
      />
      <p>
        Tortilla:
        {state.tortilla}
      </p>
      <p>
        Fillings:
        {state.fillings}
      </p>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > svelte > Typescript Test > bindProperty 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({ value: \\"hello\\" });

  return <input value={state.value} />;
}
"
`;

exports[`Mitosis, format: legacy > svelte > Typescript Test > classDirective 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({ focus: true });

  return (
    <input
      class={\`form-input \${props.disabled ? \\"disabled\\" : \\"\\"} \${
        state.focus ? \\"focus\\" : \\"\\"
      }\`}
    />
  );
}
"
`;

exports[`Mitosis, format: legacy > svelte > Typescript Test > context 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({ activeTab: 0 });

  return <div>{state.activeTab}</div>;
}
"
`;

exports[`Mitosis, format: legacy > svelte > Typescript Test > each 1`] = `
"import { useStore, For } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({ numbers: [\\"one\\", \\"two\\", \\"three\\"] });

  return (
    <ul>
      <For each={state.numbers}>{(num, index) => <li>{num}</li>}</For>
    </ul>
  );
}
"
`;

exports[`Mitosis, format: legacy > svelte > Typescript Test > eventHandlers 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({
    log: function log(msg = \\"hello\\") {
      console.log(msg);
    },
  });

  return (
    <div>
      <button onClick={(event) => state.log(\\"hi\\")}>Log</button>
      <button onClick={(event) => state.log(event)}>Log</button>
      <button onClick={(event) => state.log(event)}>Log</button>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > svelte > Typescript Test > html 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({ html: \\"<b>bold</b>\\" });

  return <div innerHTML={state.html} />;
}
"
`;

exports[`Mitosis, format: legacy > svelte > Typescript Test > ifElse 1`] = `
"import { useStore, Show } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({
    show: true,
    toggle: function toggle() {
      state.show = !state.show;
    },
  });

  return (
    <Show
      when={state.show}
      else={<button onClick={(event) => state.toggle(event)}> Show </button>}
    >
      <button onClick={(event) => state.toggle(event)}> Hide </button>
    </Show>
  );
}
"
`;

exports[`Mitosis, format: legacy > svelte > Typescript Test > imports 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";
import { Button, Slot } from \\"@components\\";

import Button from \\"./Button.js\\";

export default function MyComponent(props) {
  const state = useStore({ disabled: false });

  return (
    <div>
      <Button type=\\"button\\" disabled={state.disabled}>
        <Slot />
      </Button>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > svelte > Typescript Test > lifecycleHooks 1`] = `
"export default function MyComponent(props) {
  onMount(() => {
    console.log(\\"onMount\\");
  });

  onUnMount(() => {
    console.log(\\"onDestroy\\");
  });

  return <div />;
}
"
`;

exports[`Mitosis, format: legacy > svelte > Typescript Test > reactive 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({
    name: \\"Steve\\",
    get lowercaseName() {
      return state.name.toLowerCase();
    },
  });

  return (
    <div>
      <input value={state.name} />
      Lowercase:
      {state.lowercaseName}
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > svelte > Typescript Test > reactiveWithFn 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({
    a: 2,
    b: 5,
    result: null,
    calculateResult: function calculateResult(a_, b_) {
      state.result = a_ * b_;
    },
  });

  return (
    <div>
      <input
        type=\\"number\\"
        onChange={(event) => (state.a = event.target.value)}
        value={state.a}
      />
      <input
        type=\\"number\\"
        onChange={(event) => (state.b = event.target.value)}
        value={state.b}
      />
      Result:
      {state.result}
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > svelte > Typescript Test > slots 1`] = `
"import { Slot } from \\"@components\\";

export default function MyComponent(props) {
  return (
    <div>
      <Slot>default</Slot>
      <Slot name=\\"Test\\">
        <div>default</div>
      </Slot>
    </div>
  );
}
"
`;

exports[`Mitosis, format: legacy > svelte > Typescript Test > style 1`] = `
"export default function MyComponent(props) {
  useStyle(\`
  input {
    color: red;
    font-size: 12px;
  }

  .form-input:focus {
    outline: 1px solid blue;
  }
\`);

  return <input class=\\"form-input\\" />;
}
"
`;

exports[`Mitosis, format: legacy > svelte > Typescript Test > textExpressions 1`] = `
"import { useStore } from \\"@builder.io/mitosis\\";

export default function MyComponent(props) {
  const state = useStore({ a: 5, b: 12 });

  return (
    <div>
      normal:
      {state.a + state.b}
      <br />
      conditional
      {state.a > 2 ? \\"hello\\" : \\"bye\\"}
    </div>
  );
}
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > Advanced 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function MyBasicForShowComponent(props) {
  const [name, setName] = useState(() => \\"PatrickJS\\");

  const [names, setNames] = useState(() => [\\"Steve\\", \\"PatrickJS\\"]);

  return (
    <main>
      {names?.map((person, i) => (
        <div>
          {i}: {person}
        </div>
      ))}
      {names?.map((person) => (
        <span>{person}</span>
      ))}
      {names?.map((item) => (
        <br />
      ))}
      {Array.from({
        length: 10,
      })?.map((_, ee) => (
        <pre>{ee}</pre>
      ))}
      {Array.from({
        length: 10,
      })?.map((item) => (
        <p>{index}</p>
      ))}
      {names?.map((person, index) => (
        <span>
          {person}
          {index}
        </span>
      ))}
      {Array.from({
        length: 10,
      })?.map((person, count) => (
        <span>
          {person}
          {count}
        </span>
      ))}
      {names?.map((person, i) => (
        <span>
          {person}
          {i}
        </span>
      ))}
      {Array.from({
        length: 10,
      })?.map((person, index) => (
        <span>
          {person}
          {index}
        </span>
      ))}
    </main>
  );
}

export default MyBasicForShowComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > AdvancedRef 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useRef, useEffect } from \\"react\\";

function MyBasicRefComponent(props) {
  const inputRef = useRef(null);
  const inputNoArgRef = useRef(null);
  const [name, setName] = useState(() => \\"PatrickJS\\");

  function onBlur() {
    // Maintain focus
    inputRef.current.focus();
  }

  function lowerCaseName() {
    return name.toLowerCase();
  }

  useEffect(() => {
    console.log(\\"Received an update\\");
  }, [inputRef.current, inputNoArgRef.current]);

  return (
    <div>
      {props.showInput ? (
        <>
          <input
            ref={inputRef}
            css={{
              color: \\"red\\",
            }}
            value={name}
            onBlur={(event) => onBlur()}
            onChange={(event) => setName(event.target.value)}
          />
          <label htmlFor=\\"cars\\" ref={inputNoArgRef}>
            Choose a car:
          </label>
          <select name=\\"cars\\" id=\\"cars\\">
            <option value=\\"supra\\">GR Supra</option>
            <option value=\\"86\\">GR 86</option>
          </select>
        </>
      ) : null}
      Hello
      {lowerCaseName()}! I can run in React, Qwik, Vue, Solid, or Web Component!
    </div>
  );
}

export default MyBasicRefComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > Basic 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

export const DEFAULT_VALUES = {
  name: \\"Steve\\",
};

function MyBasicComponent(props) {
  const [name, setName] = useState(() => \\"Steve\\");

  function underscore_fn_name() {
    return \\"bar\\";
  }

  const [age, setAge] = useState(() => 1);

  const [sports, setSports] = useState(() => [\\"\\"]);

  return (
    <div
      className=\\"test\\"
      css={{
        padding: \\"10px\\",
      }}
    >
      <input
        value={DEFAULT_VALUES.name || name}
        onChange={(myEvent) => setName(myEvent.target.value)}
      />
      Hello! I can run in React, Vue, Solid, or Liquid! &gt;
    </div>
  );
}

export default MyBasicComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > Basic 2`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function MyBasicForShowComponent(props) {
  const [name, setName] = useState(() => \\"PatrickJS\\");

  const [names, setNames] = useState(() => [\\"Steve\\", \\"PatrickJS\\"]);

  return (
    <div>
      {names?.map((person) =>
        person === name ? (
          <>
            <input
              value={name}
              onChange={(event) => {
                setName(event.target.value + \\" and \\" + person);
              }}
            />
            Hello
            {person}! I can run in Qwik, Web Component, React, Vue, Solid, or
            Liquid!
          </>
        ) : null
      )}
    </div>
  );
}

export default MyBasicForShowComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > Basic Context 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useContext, useRef, useEffect } from \\"react\\";
import { Injector, MyService, createInjector } from \\"@dummy/injection-js\\";

function MyBasicComponent(props) {
  const [name, setName] = useState(() => \\"PatrickJS\\");

  function onChange() {
    const change = myService.method(\\"change\\");
    console.log(change);
  }

  const myService = useContext(MyService);

  const hasInitialized = useRef(false);
  if (!hasInitialized.current) {
    const hi = myService.method(\\"hi\\");
    console.log(hi);
    hasInitialized.current = true;
  }

  useEffect(() => {
    const bye = myService.method(\\"hi\\");
    console.log(bye);
  }, []);

  return (
    <Injector.Provider value={createInjector()}>
      <div>
        {myService.method(\\"hello\\") + name}
        Hello! I can run in React, Vue, Solid, or Liquid!
        <input onChange={(event) => onChange} />
      </div>
    </Injector.Provider>
  );
}

export default MyBasicComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > Basic OnMount Update 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useRef, useEffect } from \\"react\\";

function MyBasicOnMountUpdateComponent(props) {
  const [name, setName] = useState(() => \\"PatrickJS\\");

  const [names, setNames] = useState(() => [\\"Steve\\", \\"PatrickJS\\"]);

  const hasInitialized = useRef(false);
  if (!hasInitialized.current) {
    setName(\\"PatrickJS onInit\\" + props.hi);
    hasInitialized.current = true;
  }

  useEffect(() => {
    setName(\\"PatrickJS onMount\\" + props.bye);
  }, []);

  return <div>Hello {name}</div>;
}

export default MyBasicOnMountUpdateComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > Basic Outputs 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useEffect } from \\"react\\";

function MyBasicOutputsComponent(props) {
  const [name, setName] = useState(() => \\"PatrickJS\\");

  useEffect(() => {
    props.onMessage(name);
    props.onEvent(props.message);
  }, []);

  return <div />;
}

export default MyBasicOutputsComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > Basic Outputs Meta 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useEffect } from \\"react\\";

function MyBasicOutputsComponent(props) {
  const [name, setName] = useState(() => \\"PatrickJS\\");

  useEffect(() => {
    props.onMessage(name);
    props.onEvent(props.message);
  }, []);

  return <div />;
}

export default MyBasicOutputsComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > BasicAttribute 1`] = `
"import * as React from \\"react\\";

function MyComponent(props) {
  return <input autoCapitalize=\\"on\\" autoComplete=\\"on\\" spellCheck />;
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > BasicBooleanAttribute 1`] = `
"import * as React from \\"react\\";
import MyBooleanAttributeComponent from \\"./basic-boolean-attribute-component.raw\\";

function MyBooleanAttribute(props) {
  return (
    <div>
      {props.children ? (
        <>
          {props.children}
          {props.type}
        </>
      ) : null}
      <MyBooleanAttributeComponent toggle />
      <MyBooleanAttributeComponent toggle />
      <MyBooleanAttributeComponent list={null} />
    </div>
  );
}

export default MyBooleanAttribute;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > BasicChildComponent 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";
import MyBasicOnMountUpdateComponent from \\"./basic-onMount-update.raw\\";
import MyBasicComponent from \\"./basic.raw\\";

function MyBasicChildComponent(props) {
  const [name, setName] = useState(() => \\"Steve\\");

  const [dev, setDev] = useState(() => \\"PatrickJS\\");

  return (
    <div>
      <MyBasicComponent id={dev} />
      <div>
        <MyBasicOnMountUpdateComponent hi={name} bye={dev} />
      </div>
    </div>
  );
}

export default MyBasicChildComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > BasicFor 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useEffect } from \\"react\\";

function MyBasicForComponent(props) {
  const [name, setName] = useState(() => \\"PatrickJS\\");

  const [names, setNames] = useState(() => [\\"Steve\\", \\"PatrickJS\\"]);

  useEffect(() => {
    console.log(\\"onMount code\\");
  }, []);

  return (
    <div>
      {names?.map((person) => (
        <>
          <input
            value={name}
            onChange={(event) => {
              setName(event.target.value + \\" and \\" + person);
            }}
          />
          Hello
          {person}! I can run in Qwik, Web Component, React, Vue, Solid, or
          Liquid!
        </>
      ))}
    </div>
  );
}

export default MyBasicForComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > BasicRef 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useRef } from \\"react\\";

function MyBasicRefComponent(props) {
  const inputRef = useRef(null);
  const inputNoArgRef = useRef(null);
  const [name, setName] = useState(() => \\"PatrickJS\\");

  function onBlur() {
    // Maintain focus
    inputRef.current.focus();
  }

  function lowerCaseName() {
    return name.toLowerCase();
  }

  return (
    <div>
      {props.showInput ? (
        <>
          <input
            ref={inputRef}
            css={{
              color: \\"red\\",
            }}
            value={name}
            onBlur={(event) => onBlur()}
            onChange={(event) => setName(event.target.value)}
          />
          <label htmlFor=\\"cars\\" ref={inputNoArgRef}>
            Choose a car:
          </label>
          <select name=\\"cars\\" id=\\"cars\\">
            <option value=\\"supra\\">GR Supra</option>
            <option value=\\"86\\">GR 86</option>
          </select>
        </>
      ) : null}
      Hello
      {lowerCaseName()}! I can run in React, Qwik, Vue, Solid, or Web Component!
    </div>
  );
}

export default MyBasicRefComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > BasicRefAssignment 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useRef } from \\"react\\";

function MyBasicRefAssignmentComponent(props) {
  const holdValueRef = useRef(\\"Patrick\\");
  function handlerClick(event) {
    event.preventDefault();
    console.log(\\"current value\\", holdValueRef.current);
    holdValueRef.current = holdValueRef.current + \\"JS\\";
  }

  return (
    <div>
      <button onClick={async (evt) => await handlerClick(evt)}>Click</button>
    </div>
  );
}

export default MyBasicRefAssignmentComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > BasicRefPrevious 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useRef, useEffect } from \\"react\\";

export function usePrevious(value) {
  // The ref object is a generic container whose current property is mutable ...
  // ... and can hold any value, similar to an instance property on a class
  let ref = useRef(null); // Store current value in ref

  onUpdate(() => {
    ref = value;
  }, [value]); // Only re-run if value changes
  // Return previous value (happens before update in useEffect above)

  return ref;
}

function MyPreviousComponent(props) {
  const [count, setCount] = useState(() => 0);

  const prevCount = useRef(count);

  useEffect(() => {
    prevCount.current = count;
  }, [count]);

  return (
    <div>
      <h1>
        Now: {count}, before: {prevCount.current}
      </h1>
      <button onClick={(event) => setCount(1)}>Increment</button>
    </div>
  );
}

export default MyPreviousComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > Button 1`] = `
"import * as React from \\"react\\";

function Button(props) {
  return (
    <div>
      {props.link ? (
        <a
          {...props.attributes}
          href={props.link}
          target={props.openLinkInNewTab ? \\"_blank\\" : undefined}
        >
          {props.text}
        </a>
      ) : null}
      {!props.link ? (
        <button type=\\"button\\" {...props.attributes}>
          {props.text}
        </button>
      ) : null}
    </div>
  );
}

export default Button;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > Columns 1`] = `
"import * as React from \\"react\\";

function Column(props) {
  function getColumns() {
    return props.columns || [];
  }

  function getGutterSize() {
    return typeof props.space === \\"number\\" ? props.space || 0 : 20;
  }

  function getWidth(index) {
    const columns = getColumns();
    return (columns[index] && columns[index].width) || 100 / columns.length;
  }

  function getColumnCssWidth(index) {
    const columns = getColumns();
    const gutterSize = getGutterSize();
    const subtractWidth = (gutterSize * (columns.length - 1)) / columns.length;
    return \`calc(\${getWidth(index)}% - \${subtractWidth}px)\`;
  }

  return (
    <div
      className=\\"builder-columns\\"
      css={{
        display: \\"flex\\",
        flexDirection: \\"column\\",
        alignItems: \\"stretch\\",
        lineHeight: \\"normal\\",
        \\"@media (max-width: 999px)\\": {
          flexDirection: \\"row\\",
        },
        \\"@media (max-width: 639px)\\": {
          flexDirection: \\"row-reverse\\",
        },
      }}
    >
      {props.columns?.map((column, index) => (
        <div
          className=\\"builder-column\\"
          css={{
            flexGrow: \\"1\\",
          }}
        >
          {column.content}
          {index}
        </div>
      ))}
    </div>
  );
}

export default Column;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > ContentSlotHtml 1`] = `
"import * as React from \\"react\\";

function ContentSlotCode(props) {
  return (
    <div>
      <>{props.slotTesting}</>
      <div>
        <hr />
      </div>
      <div>
        <>{props.children}</>
      </div>
    </div>
  );
}

export default ContentSlotCode;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > ContentSlotJSX 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function ContentSlotJsxCode(props) {
  const [name, setName] = useState(() => \\"king\\");

  const [showContent, setShowContent] = useState(() => false);

  function cls() {
    return props.slotContent && props.children ? \`\${name}-content\` : \\"\\";
  }

  function show() {
    props.slotContent ? 1 : \\"\\";
  }

  return (
    <>
      {props.slotReference ? (
        <>
          <div
            name={props.slotContent ? \\"name1\\" : \\"name2\\"}
            title={props.slotContent ? \\"title1\\" : \\"title2\\"}
            {...props.attributes}
            onClick={(event) => show()}
            className={cls()}
          >
            {showContent && props.slotContent ? (
              <>{props.content || \\"{props.content}\\"}</>
            ) : null}
            <div>
              <hr />
            </div>
            <div>{props.children}</div>
          </div>
        </>
      ) : null}
    </>
  );
}

ContentSlotJsxCode.defaultProps = {
  content: \\"\\",
  slotReference: undefined,
  slotContent: undefined,
};

export default ContentSlotJsxCode;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > CustomCode 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useRef, useEffect } from \\"react\\";

function CustomCode(props) {
  const elem = useRef(null);
  const [scriptsInserted, setScriptsInserted] = useState(() => []);

  const [scriptsRun, setScriptsRun] = useState(() => []);

  function findAndRunScripts() {
    // TODO: Move this function to standalone one in '@builder.io/utils'
    if (elem.current && typeof window !== \\"undefined\\") {
      /** @type {HTMLScriptElement[]} */
      const scripts = elem.current.getElementsByTagName(\\"script\\");

      for (let i = 0; i < scripts.length; i++) {
        const script = scripts[i];

        if (script.src) {
          if (scriptsInserted.includes(script.src)) {
            continue;
          }

          scriptsInserted.push(script.src);
          const newScript = document.createElement(\\"script\\");
          newScript.async = true;
          newScript.src = script.src;
          document.head.appendChild(newScript);
        } else if (
          !script.type ||
          [
            \\"text/javascript\\",
            \\"application/javascript\\",
            \\"application/ecmascript\\",
          ].includes(script.type)
        ) {
          if (scriptsRun.includes(script.innerText)) {
            continue;
          }

          try {
            scriptsRun.push(script.innerText);
            new Function(script.innerText)();
          } catch (error) {
            console.warn(\\"\`CustomCode\`: Error running script:\\", error);
          }
        }
      }
    }
  }

  useEffect(() => {
    findAndRunScripts();
  }, []);

  return (
    <div
      ref={elem}
      className={
        \\"builder-custom-code\\" + (props.replaceNodes ? \\" replace-nodes\\" : \\"\\")
      }
      dangerouslySetInnerHTML={{ __html: props.code }}
    />
  );
}

export default CustomCode;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > Embed 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useRef, useEffect } from \\"react\\";

function CustomCode(props) {
  const elem = useRef(null);
  const [scriptsInserted, setScriptsInserted] = useState(() => []);

  const [scriptsRun, setScriptsRun] = useState(() => []);

  function findAndRunScripts() {
    // TODO: Move this function to standalone one in '@builder.io/utils'
    if (elem.current && typeof window !== \\"undefined\\") {
      /** @type {HTMLScriptElement[]} */
      const scripts = elem.current.getElementsByTagName(\\"script\\");

      for (let i = 0; i < scripts.length; i++) {
        const script = scripts[i];

        if (script.src) {
          if (scriptsInserted.includes(script.src)) {
            continue;
          }

          scriptsInserted.push(script.src);
          const newScript = document.createElement(\\"script\\");
          newScript.async = true;
          newScript.src = script.src;
          document.head.appendChild(newScript);
        } else if (
          !script.type ||
          [
            \\"text/javascript\\",
            \\"application/javascript\\",
            \\"application/ecmascript\\",
          ].includes(script.type)
        ) {
          if (scriptsRun.includes(script.innerText)) {
            continue;
          }

          try {
            scriptsRun.push(script.innerText);
            new Function(script.innerText)();
          } catch (error) {
            console.warn(\\"\`CustomCode\`: Error running script:\\", error);
          }
        }
      }
    }
  }

  useEffect(() => {
    findAndRunScripts();
  }, []);

  return (
    <div
      ref={elem}
      className={
        \\"builder-custom-code\\" + (props.replaceNodes ? \\" replace-nodes\\" : \\"\\")
      }
      dangerouslySetInnerHTML={{ __html: props.code }}
    />
  );
}

export default CustomCode;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > Form 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useRef } from \\"react\\";
import { Builder, builder } from \\"@builder.io/sdk\\";
import {
  BuilderBlock as BuilderBlockComponent,
  BuilderBlocks,
  get,
  set,
} from \\"@fake\\";

function FormComponent(props) {
  const formRef = useRef(null);
  const [formState, setFormState] = useState(() => \\"unsubmitted\\");

  const [responseData, setResponseData] = useState(() => null);

  const [formErrorMessage, setFormErrorMessage] = useState(() => \\"\\");

  function submissionState() {
    return (Builder.isEditing && props.previewState) || formState;
  }

  function onSubmit(event) {
    const sendWithJs = props.sendWithJs || props.sendSubmissionsTo === \\"email\\";

    if (props.sendSubmissionsTo === \\"zapier\\") {
      event.preventDefault();
    } else if (sendWithJs) {
      if (!(props.action || props.sendSubmissionsTo === \\"email\\")) {
        event.preventDefault();
        return;
      }

      event.preventDefault();
      const el = event.currentTarget;
      const headers = props.customHeaders || {};
      let body;
      const formData = new FormData(el); // TODO: maybe support null

      const formPairs = Array.from(
        event.currentTarget.querySelectorAll(\\"input,select,textarea\\")
      )
        .filter((el) => !!el.name)
        .map((el) => {
          let value;
          const key = el.name;

          if (el instanceof HTMLInputElement) {
            if (el.type === \\"radio\\") {
              if (el.checked) {
                value = el.name;
                return {
                  key,
                  value,
                };
              }
            } else if (el.type === \\"checkbox\\") {
              value = el.checked;
            } else if (el.type === \\"number\\" || el.type === \\"range\\") {
              const num = el.valueAsNumber;

              if (!isNaN(num)) {
                value = num;
              }
            } else if (el.type === \\"file\\") {
              // TODO: one vs multiple files
              value = el.files;
            } else {
              value = el.value;
            }
          } else {
            value = el.value;
          }

          return {
            key,
            value,
          };
        });
      let contentType = props.contentType;

      if (props.sendSubmissionsTo === \\"email\\") {
        contentType = \\"multipart/form-data\\";
      }

      Array.from(formPairs).forEach(({ value }) => {
        if (
          value instanceof File ||
          (Array.isArray(value) && value[0] instanceof File) ||
          value instanceof FileList
        ) {
          contentType = \\"multipart/form-data\\";
        }
      }); // TODO: send as urlEncoded or multipart by default
      // because of ease of use and reliability in browser API
      // for encoding the form?

      if (contentType !== \\"application/json\\") {
        body = formData;
      } else {
        // Json
        const json = {};
        Array.from(formPairs).forEach(({ value, key }) => {
          set(json, key, value);
        });
        body = JSON.stringify(json);
      }

      if (contentType && contentType !== \\"multipart/form-data\\") {
        if (
          /* Zapier doesn't allow content-type header to be sent from browsers */ !(
            sendWithJs && props.action?.includes(\\"zapier.com\\")
          )
        ) {
          headers[\\"content-type\\"] = contentType;
        }
      }
      const presubmitEvent = new CustomEvent(\\"presubmit\\", { detail: { body } });
      if (formRef.current) {
        formRef.current.dispatchEvent(presubmitEvent);
        if (presubmitEvent.defaultPrevented) {
          return;
        }
      }
      setFormState(\\"sending\\");
      const formUrl = \`\${
        builder.env === \\"dev\\" ? \\"http://localhost:5000\\" : \\"https://builder.io\\"
      }/api/v1/form-submit?apiKey=\${builder.apiKey}&to=\${btoa(
        props.sendSubmissionsToEmail || \\"\\"
      )}&name=\${encodeURIComponent(props.name || \\"\\")}\`;
      fetch(
        props.sendSubmissionsTo === \\"email\\"
          ? formUrl
          : props.action /* TODO: throw error if no action URL */,
        { body, headers, method: props.method || \\"post\\" }
      ).then(
        async (res) => {
          let body;
          const contentType = res.headers.get(\\"content-type\\");
          if (contentType && contentType.indexOf(\\"application/json\\") !== -1) {
            body = await res.json();
          } else {
            body = await res.text();
          }
          if (!res.ok && props.errorMessagePath) {
            /* TODO: allow supplying an error formatter function */ let message =
              get(body, props.errorMessagePath);
            if (message) {
              if (typeof message !== \\"string\\") {
                /* TODO: ideally convert json to yaml so it woul dbe like          error: - email has been taken */ message =
                  JSON.stringify(message);
              }
              setFormErrorMessage(message);
            }
          }
          setResponseData(body);
          setFormState(res.ok ? \\"success\\" : \\"error\\");
          if (res.ok) {
            const submitSuccessEvent = new CustomEvent(\\"submit:success\\", {
              detail: { res, body },
            });
            if (formRef.current) {
              formRef.current.dispatchEvent(submitSuccessEvent);
              if (submitSuccessEvent.defaultPrevented) {
                return;
              }
              /* TODO: option to turn this on/off? */ if (
                props.resetFormOnSubmit !== false
              ) {
                formRef.current.reset();
              }
            }
            /* TODO: client side route event first that can be preventDefaulted */ if (
              props.successUrl
            ) {
              if (formRef.current) {
                const event = new CustomEvent(\\"route\\", {
                  detail: { url: props.successUrl },
                });
                formRef.current.dispatchEvent(event);
                if (!event.defaultPrevented) {
                  location.href = props.successUrl;
                }
              } else {
                location.href = props.successUrl;
              }
            }
          }
        },
        (err) => {
          const submitErrorEvent = new CustomEvent(\\"submit:error\\", {
            detail: { error: err },
          });
          if (formRef.current) {
            formRef.current.dispatchEvent(submitErrorEvent);
            if (submitErrorEvent.defaultPrevented) {
              return;
            }
          }
          setResponseData(err);
          setFormState(\\"error\\");
        }
      );
    }
  }
  return (
    <form
      validate={props.validate}
      ref={formRef}
      action={!props.sendWithJs && props.action}
      method={props.method}
      name={props.name}
      onSubmit={(event) => onSubmit(event)}
      {...props.attributes}
    >
      {props.builderBlock && props.builderBlock.children ? (
        <>
          {props.builderBlock?.children?.map((block, index) => (
            <BuilderBlockComponent key={block.id} block={block} index={index} />
          ))}
        </>
      ) : null}
      {submissionState() === \\"error\\" ? (
        <BuilderBlocks dataPath=\\"errorMessage\\" blocks={props.errorMessage} />
      ) : null}
      {submissionState() === \\"sending\\" ? (
        <BuilderBlocks
          dataPath=\\"sendingMessage\\"
          blocks={props.sendingMessage}
        />
      ) : null}
      {submissionState() === \\"error\\" && responseData ? (
        <pre
          className=\\"builder-form-error-text\\"
          css={{ padding: \\"10px\\", color: \\"red\\", textAlign: \\"center\\" }}
        >
          {JSON.stringify(responseData, null, 2)}
        </pre>
      ) : null}
      {submissionState() === \\"success\\" ? (
        <BuilderBlocks
          dataPath=\\"successMessage\\"
          blocks={props.successMessage}
        />
      ) : null}
    </form>
  );
}
export default FormComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > Image 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useRef, useEffect } from \\"react\\";

function Image(props) {
  const pictureRef = useRef(null);
  const [scrollListener, setScrollListener] = useState(() => null);

  const [imageLoaded, setImageLoaded] = useState(() => false);

  function setLoaded() {
    setImageLoaded(true);
  }

  function useLazyLoading() {
    // TODO: Add more checks here, like testing for real web browsers
    return !!props.lazy && isBrowser();
  }

  function isBrowser() {
    return (
      typeof window !== \\"undefined\\" && window.navigator.product != \\"ReactNative\\"
    );
  }

  const [load, setLoad] = useState(() => false);

  useEffect(() => {
    if (useLazyLoading()) {
      // throttled scroll capture listener
      const listener = () => {
        if (pictureRef.current) {
          const rect = pictureRef.current.getBoundingClientRect();
          const buffer = window.innerHeight / 2;

          if (rect.top < window.innerHeight + buffer) {
            setLoad(true);
            setScrollListener(null);
            window.removeEventListener(\\"scroll\\", listener);
          }
        }
      };

      setScrollListener(listener);
      window.addEventListener(\\"scroll\\", listener, {
        capture: true,
        passive: true,
      });
      listener();
    }
  }, []);

  useEffect(() => {
    return () => {
      if (scrollListener) {
        window.removeEventListener(\\"scroll\\", scrollListener);
      }
    };
  }, []);

  return (
    <div>
      <picture ref={pictureRef}>
        {!useLazyLoading() || load ? (
          <img
            alt={props.altText}
            aria-role={props.altText ? \\"presentation\\" : undefined}
            css={{
              opacity: \\"1\\",
              transition: \\"opacity 0.2s ease-in-out\\",
              objectFit: \\"cover\\",
              objectPosition: \\"center\\",
            }}
            className={
              \\"builder-image\\" + (props._class ? \\" \\" + props._class : \\"\\")
            }
            src={props.image}
            onLoad={(event) => setLoaded()}
            srcset={props.srcset}
            sizes={props.sizes}
          />
        ) : null}
        <source srcset={props.srcset} />
      </picture>
      {props.children}
    </div>
  );
}

export default Image;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > Image State 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function ImgStateComponent(props) {
  const [canShow, setCanShow] = useState(() => true);

  const [images, setImages] = useState(() => [\\"http://example.com/qwik.png\\"]);

  return (
    <div>
      {images?.map((item, itemIndex) => (
        <img className=\\"custom-class\\" src={item} key={itemIndex} />
      ))}
    </div>
  );
}

export default ImgStateComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > Img 1`] = `
"import * as React from \\"react\\";
import { Builder } from \\"@builder.io/sdk\\";

function ImgComponent(props) {
  return (
    <img
      style={{
        objectFit: props.backgroundSize || \\"cover\\",
        objectPosition: props.backgroundPosition || \\"center\\",
      }}
      {...props.attributes}
      key={(Builder.isEditing && props.imgSrc) || \\"default-key\\"}
      alt={props.altText}
      src={props.imgSrc}
    />
  );
}

export default ImgComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > Input 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { Builder } from \\"@builder.io/sdk\\";

function FormInputComponent(props) {
  return (
    <input
      {...props.attributes}
      key={
        Builder.isEditing && props.defaultValue
          ? props.defaultValue
          : \\"default-key\\"
      }
      placeholder={props.placeholder}
      type={props.type}
      name={props.name}
      value={props.value}
      defaultValue={props.defaultValue}
      required={props.required}
      onChange={(event) => props.onChange?.(event.target.value)}
    />
  );
}

export default FormInputComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > InputParent 1`] = `
"import * as React from \\"react\\";
import FormInputComponent from \\"./input.raw\\";

function Stepper(props) {
  function handleChange(value) {
    console.log(value);
  }

  return (
    <FormInputComponent
      name=\\"kingzez\\"
      type=\\"text\\"
      onChange={(value) => handleChange(value)}
    />
  );
}

export default Stepper;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > RawText 1`] = `
"import * as React from \\"react\\";

function RawText(props) {
  return (
    <span
      className={props.attributes?.class || props.attributes?.className}
      dangerouslySetInnerHTML={{ __html: props.text || \\"\\" }}
    />
  );
}

export default RawText;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > Section 1`] = `
"import * as React from \\"react\\";

function SectionComponent(props) {
  return (
    <section
      {...props.attributes}
      style={
        props.maxWidth && typeof props.maxWidth === \\"number\\"
          ? {
              maxWidth: props.maxWidth,
            }
          : undefined
      }
    >
      {props.children}
    </section>
  );
}

export default SectionComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > Section 2`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function SectionStateComponent(props) {
  const [max, setMax] = useState(() => 42);

  const [items, setItems] = useState(() => [42]);

  return (
    <>
      {max ? (
        <>
          {items?.map((item) => (
            <section
              {...props.attributes}
              style={{
                maxWidth: item + max,
              }}
            >
              {props.children}
            </section>
          ))}
        </>
      ) : null}
    </>
  );
}

export default SectionStateComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > Select 1`] = `
"import * as React from \\"react\\";
import { Builder } from \\"@builder.io/sdk\\";

function SelectComponent(props) {
  return (
    <select
      {...props.attributes}
      value={props.value}
      key={
        Builder.isEditing && props.defaultValue
          ? props.defaultValue
          : \\"default-key\\"
      }
      defaultValue={props.defaultValue}
      name={props.name}
    >
      {props.options?.map((option, index) => (
        <option value={option.value} data-index={index}>
          {option.name || option.value}
        </option>
      ))}
    </select>
  );
}

export default SelectComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > SlotDefault 1`] = `
"import * as React from \\"react\\";

function SlotCode(props) {
  return (
    <div>
      <>
        {props.children || <div className=\\"default-slot\\">Default content</div>}
      </>
    </div>
  );
}

export default SlotCode;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > SlotHtml 1`] = `
"import * as React from \\"react\\";
import ContentSlotCode from \\"./content-slot-jsx.raw\\";

function SlotCode(props) {
  return (
    <div>
      <ContentSlotCode testing={<div>Hello</div>}></ContentSlotCode>
    </div>
  );
}

export default SlotCode;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > SlotJsx 1`] = `
"import * as React from \\"react\\";
import ContentSlotCode from \\"./content-slot-jsx.raw\\";

function SlotCode(props) {
  return (
    <div>
      <ContentSlotCode slotTesting={<div>Hello</div>} />
    </div>
  );
}

export default SlotCode;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > SlotNamed 1`] = `
"import * as React from \\"react\\";

function SlotCode(props) {
  return (
    <div>
      <>{props.myAwesomeSlot}</>
      <>{props.top}</>
      <>{props.left || \\"Default left\\"}</>
      <>{props.children || \\"Default Child\\"}</>
    </div>
  );
}

export default SlotCode;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > Stamped.io 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useEffect } from \\"react\\";
import { kebabCase, snakeCase } from \\"lodash\\";

function SmileReviews(props) {
  const [reviews, setReviews] = useState(() => []);

  const [name, setName] = useState(() => \\"test\\");

  const [showReviewPrompt, setShowReviewPrompt] = useState(() => false);

  function kebabCaseValue() {
    return kebabCase(\\"testThat\\");
  }

  function snakeCaseValue() {
    return snakeCase(\\"testThis\\");
  }

  useEffect(() => {
    fetch(
      \`https://stamped.io/api/widget/reviews?storeUrl=builder-io.myshopify.com&apiKey=\${
        props.apiKey || \\"pubkey-8bbDq7W6w4sB3OWeM1HUy2s47702hM\\"
      }&productId=\${props.productId || \\"2410511106127\\"}\`
    )
      .then((res) => res.json())
      .then((data) => {
        setReviews(data.data);
      });
  }, []);

  return (
    <div data-user={name}>
      <button onClick={(event) => setShowReviewPrompt(true)}>
        Write a review
      </button>
      {showReviewPrompt || \\"asdf\\" ? (
        <>
          <input placeholder=\\"Email\\" />
          <input
            placeholder=\\"Title\\"
            css={{
              display: \\"block\\",
            }}
          />
          <textarea
            placeholder=\\"How was your experience?\\"
            css={{
              display: \\"block\\",
            }}
          />
          <button
            css={{
              display: \\"block\\",
            }}
            onClick={(ev) => {
              ev.preventDefault();
              setShowReviewPrompt(false);
            }}
          >
            Submit
          </button>
        </>
      ) : null}
      {reviews?.map((review, index) => (
        <div
          key={review.id}
          css={{
            margin: \\"10px\\",
            padding: \\"10px\\",
            background: \\"white\\",
            display: \\"flex\\",
            borderRadius: \\"5px\\",
            boxShadow: \\"0 2px 5px rgba(0, 0, 0, 0.1)\\",
            WebkitFontSmoothing: \\"antialiased\\",
          }}
        >
          <img
            css={{
              height: \\"30px\\",
              width: \\"30px\\",
              marginRight: \\"10px\\",
            }}
            src={review.avatar}
          />
          <div className={showReviewPrompt ? \\"bg-primary\\" : \\"bg-secondary\\"}>
            <div>N: {index}</div>
            <div>{review.author}</div>
            <div>{review.reviewMessage}</div>
          </div>
        </div>
      ))}
    </div>
  );
}

export default SmileReviews;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > Submit 1`] = `
"import * as React from \\"react\\";

function SubmitButton(props) {
  return (
    <button type=\\"submit\\" {...props.attributes}>
      {props.text}
    </button>
  );
}

export default SubmitButton;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > Text 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";
import { Builder } from \\"@builder.io/sdk\\";

function Text(props) {
  const [name, setName] = useState(() => \\"Decadef20\\");

  return (
    <div
      contentEditable={allowEditingText || undefined}
      data-name={{
        test: name || \\"any name\\",
      }}
      dangerouslySetInnerHTML={{
        __html:
          props.text ||
          props.content ||
          name ||
          '<p class=\\"text-lg\\">my name</p>',
      }}
    />
  );
}

export default Text;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > Textarea 1`] = `
"import * as React from \\"react\\";

function Textarea(props) {
  return (
    <textarea
      {...props.attributes}
      placeholder={props.placeholder}
      name={props.name}
      value={props.value}
      defaultValue={props.defaultValue}
    />
  );
}

export default Textarea;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > Video 1`] = `
"import * as React from \\"react\\";

function Video(props) {
  return (
    <video
      preload=\\"none\\"
      {...props.attributes}
      style={{
        width: \\"100%\\",
        height: \\"100%\\",
        ...props.attributes?.style,
        objectFit: props.fit,
        objectPosition: props.position,
        // Hack to get object fit to work as expected and
        // not have the video overflow
        borderRadius: 1,
      }}
      key={props.video || \\"no-src\\"}
      poster={props.posterImage}
      autoplay={props.autoPlay}
      muted={props.muted}
      controls={props.controls}
      loop={props.loop}
    />
  );
}

export default Video;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > arrowFunctionInUseStore 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function MyComponent(props) {
  const [name, setName] = useState(() => \\"steve\\");

  function setName(value) {
    setName(value);
  }

  function updateNameWithArrowFn(value) {
    setName(value);
  }

  return <div>Hello {name}</div>;
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > basicForNoTagReference 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function MyBasicForNoTagRefComponent(props) {
  const [name, setName] = useState(() => \\"VincentW\\");

  const [TagName, setTagName] = useState(() => \\"div\\");

  function TagNameGetter() {
    return \\"span\\";
  }

  const [Tag, setTag] = useState(() => \\"span\\");

  const TagNameGetterRef = TagNameGetter();

  return (
    <TagNameGetterRef>
      Hello <Tag>{name}</Tag>
      {props.actions?.map((action) => (
        <TagName>
          <action.icon />
          <span>{action.text}</span>
        </TagName>
      ))}
    </TagNameGetterRef>
  );
}

export default MyBasicForNoTagRefComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > basicForwardRef 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, forwardRef } from \\"react\\";

const MyBasicForwardRefComponent = forwardRef(
  function MyBasicForwardRefComponent(props, inputRef) {
    const [name, setName] = useState(() => \\"PatrickJS\\");

    return (
      <div>
        <input
          ref={inputRef}
          css={{
            color: \\"red\\",
          }}
          value={name}
          onChange={(event) => setName(event.target.value)}
        />
      </div>
    );
  }
);

export default MyBasicForwardRefComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > basicForwardRefMetadata 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, forwardRef } from \\"react\\";

const MyBasicForwardRefComponent = forwardRef(
  function MyBasicForwardRefComponent(props, inputRef) {
    const [name, setName] = useState(() => \\"PatrickJS\\");

    return (
      <div>
        <input
          ref={inputRef}
          css={{
            color: \\"red\\",
          }}
          value={name}
          onChange={(event) => setName(event.target.value)}
        />
      </div>
    );
  }
);

export default MyBasicForwardRefComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > basicOnUpdateReturn 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useEffect } from \\"react\\";

function MyBasicOnUpdateReturnComponent(props) {
  const [name, setName] = useState(() => \\"PatrickJS\\");

  useEffect(() => {
    const controller = new AbortController();
    const signal = controller.signal;
    fetch(\\"https://patrickjs.com/api/resource.json\\", {
      signal,
    })
      .then((response) => response.json())
      .then((data) => {
        setName(data.name);
      });
    return () => {
      if (!signal.aborted) {
        controller.abort();
      }
    };
  }, [name]);

  return <div>Hello! {name}</div>;
}

export default MyBasicOnUpdateReturnComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > class + ClassName + css 1`] = `
"import * as React from \\"react\\";
import MyComp from \\"./my-component\\";

function MyBasicComponent(props) {
  return (
    <div>
      <MyComp className=\\"test\\" className=\\"test2\\">
        Hello! I can run in React, Vue, Solid, or Liquid!
      </MyComp>
      <div
        className=\\"test2 test\\"
        css={{
          padding: \\"10px\\",
        }}
      >
        Hello! I can run in React, Vue, Solid, or Liquid!
      </div>
    </div>
  );
}

export default MyBasicComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > class + css 1`] = `
"import * as React from \\"react\\";

function MyBasicComponent(props) {
  return (
    <div
      className=\\"test\\"
      css={{
        padding: \\"10px\\",
      }}
    >
      Hello! I can run in React, Vue, Solid, or Liquid!
    </div>
  );
}

export default MyBasicComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > className + css 1`] = `
"import * as React from \\"react\\";

function MyBasicComponent(props) {
  return (
    <div
      className=\\"test\\"
      css={{
        padding: \\"10px\\",
      }}
    >
      Hello! I can run in React, Vue, Solid, or Liquid!
    </div>
  );
}

export default MyBasicComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > className 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function ClassNameCode(props) {
  const [bindings, setBindings] = useState(() => \\"a binding\\");

  return (
    <div>
      <div className=\\"no binding\\">Without Binding</div>
      <div className={bindings}>With binding</div>
    </div>
  );
}

export default ClassNameCode;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > classState 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function MyBasicComponent(props) {
  const [classState, setClassState] = useState(() => \\"testClassName\\");

  const [styleState, setStyleState] = useState(() => ({
    color: \\"red\\",
  }));

  return (
    <div
      className={classState}
      css={{
        padding: \\"10px\\",
      }}
      style={styleState}
    >
      Hello! I can run in React, Vue, Solid, or Liquid!
    </div>
  );
}

export default MyBasicComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > componentWithContext 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useContext } from \\"react\\";
import Context1 from \\"@dummy/1\\";
import Context2 from \\"@dummy/2\\";

function ComponentWithContext(props) {
  const foo = useContext(Context1);

  return (
    <Context2.Provider
      value={{
        bar: \\"baz\\",
      }}
    >
      <Context1.Provider
        value={{
          foo: \\"bar\\",

          content() {
            return props.content;
          },
        }}
      >
        <>{foo.value}</>
      </Context1.Provider>
    </Context2.Provider>
  );
}

export default ComponentWithContext;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > componentWithContextMultiRoot 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useContext } from \\"react\\";
import Context1 from \\"@dummy/1\\";
import Context2 from \\"@dummy/2\\";

function ComponentWithContext(props) {
  const foo = useContext(Context1);

  return (
    <Context2.Provider
      value={{
        bar: \\"baz\\",
      }}
    >
      <Context1.Provider
        value={{
          foo: \\"bar\\",

          content() {
            return props.content;
          },
        }}
      >
        <>
          <>{foo.value}</>
          <div>other</div>
        </>
      </Context1.Provider>
    </Context2.Provider>
  );
}

export default ComponentWithContext;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > contentState 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useContext } from \\"react\\";
import BuilderContext from \\"@dummy/context.js\\";

function RenderContent(props) {
  return (
    <BuilderContext.Provider
      value={{
        content: props.content,
        registeredComponents: props.customComponents,
      }}
    >
      <div>setting context</div>
    </BuilderContext.Provider>
  );
}

export default RenderContent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > defaultProps 1`] = `
"\\"use client\\";
import * as React from \\"react\\";

function Button(props) {
  return (
    <div>
      {props.link ? (
        <a
          {...props.attributes}
          href={props.link}
          target={props.openLinkInNewTab ? \\"_blank\\" : undefined}
        >
          {props.text}
        </a>
      ) : null}
      {!props.link ? (
        <button
          type=\\"button\\"
          {...props.attributes}
          onClick={(event) => props.onClick()}
        >
          {props.buttonText}
        </button>
      ) : null}
    </div>
  );
}

Button.defaultProps = {
  text: \\"default text\\",
  link: \\"https://builder.io/\\",
  openLinkInNewTab: false,
  onClick: () => {
    console.log(\\"hi\\");
  },
};

export default Button;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > defaultPropsOutsideComponent 1`] = `
"\\"use client\\";
import * as React from \\"react\\";

function Button(props) {
  return (
    <div>
      {props.link ? (
        <a
          {...props.attributes}
          href={props.link}
          target={props.openLinkInNewTab ? \\"_blank\\" : undefined}
        >
          {props.text}
        </a>
      ) : null}
      {!props.link ? (
        <button
          type=\\"button\\"
          {...props.attributes}
          onClick={(event) => props.onClick(event)}
        >
          {props.text}
        </button>
      ) : null}
    </div>
  );
}

Button.defaultProps = {
  text: \\"default text\\",
  link: \\"https://builder.io/\\",
  openLinkInNewTab: false,
  onClick: () => {},
};

export default Button;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > defaultValsWithTypes 1`] = `
"import * as React from \\"react\\";

const DEFAULT_VALUES = {
  name: \\"Sami\\",
};

function ComponentWithTypes(props) {
  return <div> Hello {props.name || DEFAULT_VALUES.name}</div>;
}

export default ComponentWithTypes;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > expressionState 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function MyComponent(props) {
  const [refToUse, setRefToUse] = useState(() =>
    !(props.componentRef instanceof Function) ? props.componentRef : null
  );

  return <div>{refToUse}</div>;
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > getterState 1`] = `
"import * as React from \\"react\\";

function Button(props) {
  function foo2() {
    return props.foo + \\"foo\\";
  }

  function bar() {
    return \\"bar\\";
  }

  function baz(i) {
    return i + foo2().length;
  }

  return (
    <div>
      <p>{foo2()}</p>
      <p>{bar()}</p>
      <p>{baz(1)}</p>
    </div>
  );
}

export default Button;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > import types 1`] = `
"import * as React from \\"react\\";
import RenderBlock from \\"./builder-render-block.raw\\";

function RenderContent(props) {
  function getRenderContentProps(block, index) {
    return {
      block: block,
      index: index,
    };
  }

  return (
    <RenderBlock
      {...state.getRenderContentProps(props.renderContentProps.block, 0)}
    />
  );
}

export default RenderContent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > multipleOnUpdate 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useEffect } from \\"react\\";

function MultipleOnUpdate(props) {
  useEffect(() => {
    console.log(\\"Runs on every update/rerender\\");
  });
  useEffect(() => {
    console.log(\\"Runs on every update/rerender as well\\");
  });

  return <div />;
}

export default MultipleOnUpdate;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > multipleOnUpdateWithDeps 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useEffect } from \\"react\\";

function MultipleOnUpdateWithDeps(props) {
  const [a, setA] = useState(() => \\"a\\");

  const [b, setB] = useState(() => \\"b\\");

  const [c, setC] = useState(() => \\"c\\");

  const [d, setD] = useState(() => \\"d\\");

  useEffect(() => {
    console.log(\\"Runs when a or b changes\\", a, b);

    if (a === \\"a\\") {
      setA(\\"b\\");
    }
  }, [a, b]);
  useEffect(() => {
    console.log(\\"Runs when c or d changes\\", c, d);

    if (a === \\"a\\") {
      setA(\\"b\\");
    }
  }, [c, d]);

  return <div />;
}

export default MultipleOnUpdateWithDeps;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > multipleSpreads 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function MyBasicComponent(props) {
  const [attrs, setAttrs] = useState(() => ({
    hello: \\"world\\",
  }));

  return <input {...state.attrs} {...props} />;
}

export default MyBasicComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > nestedShow 1`] = `
"import * as React from \\"react\\";

function NestedShow(props) {
  return (
    <>
      {props.conditionA ? (
        <>
          {!props.conditionB ? (
            <div>if condition A and condition B</div>
          ) : (
            <div>else-condition-B</div>
          )}
        </>
      ) : (
        <div>else-condition-A</div>
      )}
    </>
  );
}

export default NestedShow;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > nestedStyles 1`] = `
"import * as React from \\"react\\";

function NestedStyles(props) {
  return (
    <div
      css={{
        display: \\"flex\\",
        \\"--bar\\": \\"red\\",
        color: \\"var(--bar)\\",
        \\"@media (max-width: env(--mobile))\\": {
          display: \\"block\\",
        },
        \\"&:hover\\": {
          display: \\"flex\\",
        },
        \\":active\\": {
          display: \\"inline\\",
        },
        \\".nested-selector\\": {
          display: \\"grid\\",
        },
        \\".nested-selector:hover\\": {
          display: \\"block\\",
        },
        \\"&.nested-selector:active\\": {
          display: \\"inline-block\\",
        },
      }}
    >
      Hello world
    </div>
  );
}

export default NestedStyles;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > onEvent 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useRef, useEffect } from \\"react\\";

function Embed(props) {
  const elem = useRef(null);
  function foo(event) {
    console.log(\\"test2\\");
  }

  function elem_onInitEditingBldr(event) {
    console.log(\\"test\\");
    foo(event);
  }

  useEffect(() => {
    elem.current?.addEventListener(\\"initEditingBldr\\", elem_onInitEditingBldr);
    return () =>
      elem.current?.removeEventListener(
        \\"initEditingBldr\\",
        elem_onInitEditingBldr
      );
  }, []);

  useEffect(() => {
    elem.current.dispatchEvent(new CustomEvent(\\"initEditingBldr\\"));
  }, []);

  return (
    <div className=\\"builder-embed\\" ref={elem}>
      <div>Test</div>
    </div>
  );
}

export default Embed;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > onInit & onMount 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useRef, useEffect } from \\"react\\";

function OnInit(props) {
  const hasInitialized = useRef(false);
  if (!hasInitialized.current) {
    console.log(\\"onInit\\");
    hasInitialized.current = true;
  }

  useEffect(() => {
    console.log(\\"onMount\\");
  }, []);

  return <div />;
}

export default OnInit;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > onInit 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useRef } from \\"react\\";

export const defaultValues = {
  name: \\"PatrickJS\\",
};

function OnInit(props) {
  const [name, setName] = useState(() => \\"\\");

  const hasInitialized = useRef(false);
  if (!hasInitialized.current) {
    setName(defaultValues.name || props.name);
    console.log(\\"set defaults with props\\");
    hasInitialized.current = true;
  }

  return <div>Default name defined by parent {name}</div>;
}

export default OnInit;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > onInitPlain 1`] = `
"import * as React from \\"react\\";
import { useRef } from \\"react\\";

function OnInitPlain(props) {
  const hasInitialized = useRef(false);
  if (!hasInitialized.current) {
    console.log(\\"onInit\\");
    hasInitialized.current = true;
  }

  return <div />;
}

export default OnInitPlain;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > onMount 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useEffect } from \\"react\\";

function Comp(props) {
  useEffect(() => {
    console.log(\\"Runs on mount\\");
  }, []);

  useEffect(() => {
    return () => {
      console.log(\\"Runs on unMount\\");
    };
  }, []);

  return <div />;
}

export default Comp;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > onMountMultiple 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useEffect } from \\"react\\";

function Comp(props) {
  useEffect(() => {
    console.log(\\"Runs on mount\\");
  }, []);
  useEffect(() => {
    console.log(\\"Another one runs on Mount\\");
  }, []);
  useEffect(() => {
    console.log(\\"SSR runs on Mount\\");
  }, []);

  return <div />;
}

export default Comp;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > onUpdate 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useEffect } from \\"react\\";

function OnUpdate(props) {
  useEffect(() => {
    console.log(\\"Runs on every update/rerender\\");
  });

  return <div />;
}

export default OnUpdate;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > onUpdateWithDeps 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useEffect } from \\"react\\";

function OnUpdateWithDeps(props) {
  const [a, setA] = useState(() => \\"a\\");

  const [b, setB] = useState(() => \\"b\\");

  useEffect(() => {
    console.log(\\"Runs when a, b or size changes\\", a, b, props.size);
  }, [a, b, props.size]);

  return <div />;
}

export default OnUpdateWithDeps;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > preserveExportOrLocalStatement 1`] = `
"import * as React from \\"react\\";

const b = 3;
const foo = () => {};
export const a = 3;
export const bar = () => {};
export function run(value) {}

function MyBasicComponent(props) {
  return <div />;
}

export default MyBasicComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > preserveTyping 1`] = `
"import * as React from \\"react\\";

function MyBasicComponent(props) {
  return (
    <div>Hello! I can run in React, Vue, Solid, or Liquid! {props.name}</div>
  );
}

export default MyBasicComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > propsDestructure 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function MyBasicComponent(props) {
  const [name, setName] = useState(() => \\"Decadef20\\");

  return (
    <div>
      {props.children}
      {props.type}
      Hello! I can run in React, Vue, Solid, or Liquid!
    </div>
  );
}

export default MyBasicComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > propsInterface 1`] = `
"import * as React from \\"react\\";

function MyBasicComponent(props) {
  return (
    <div>Hello! I can run in React, Vue, Solid, or Liquid! {props.name}</div>
  );
}

export default MyBasicComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > propsType 1`] = `
"import * as React from \\"react\\";

function MyBasicComponent(props) {
  return (
    <div>Hello! I can run in React, Vue, Solid, or Liquid! {props.name}</div>
  );
}

export default MyBasicComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > referencingFunInsideHook 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useEffect } from \\"react\\";

function OnUpdate(props) {
  function foo(params) {}

  function bar() {}

  function zoo() {
    const params = {
      cb: bar,
    };
  }

  useEffect(() => {
    foo({
      someOption: bar,
    });
  });

  return <div />;
}

export default OnUpdate;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > renderBlock 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";
import { TARGET } from \\"../../constants/target.js\\";
import { evaluate } from \\"../../functions/evaluate.js\\";
import { extractTextStyles } from \\"../../functions/extract-text-styles.js\\";
import { getBlockActions } from \\"../../functions/get-block-actions.js\\";
import { getBlockComponentOptions } from \\"../../functions/get-block-component-options.js\\";
import { getBlockProperties } from \\"../../functions/get-block-properties.js\\";
import { getBlockTag } from \\"../../functions/get-block-tag.js\\";
import { getProcessedBlock } from \\"../../functions/get-processed-block.js\\";
import { getReactNativeBlockStyles } from \\"../../functions/get-react-native-block-styles.js\\";
import BlockStyles from \\"./block-styles\\";
import { isEmptyHtmlElement } from \\"./render-block.helpers.js\\";
import RenderComponentWithContext from \\"./render-component-with-context.js\\";
import RenderComponent from \\"./render-component\\";
import RenderRepeatedBlock from \\"./render-repeated-block\\";

function RenderBlock(props) {
  function component() {
    const componentName = getProcessedBlock({
      block: props.block,
      state: props.context.state,
      context: props.context.context,
      shouldEvaluateBindings: false,
    }).component?.name;

    if (!componentName) {
      return null;
    }

    const ref = props.context.registeredComponents[componentName];

    if (!ref) {
      // TODO: Public doc page with more info about this message
      console.warn(\`
          Could not find a registered component named \\"\${componentName}\\".
          If you registered it, is the file that registered it imported by the file that needs to render it?\`);
      return undefined;
    } else {
      return ref;
    }
  }

  function tag() {
    return getBlockTag(useBlock());
  }

  function useBlock() {
    return repeatItemData()
      ? props.block
      : getProcessedBlock({
          block: props.block,
          state: props.context.state,
          context: props.context.context,
          shouldEvaluateBindings: true,
        });
  }

  function actions() {
    return getBlockActions({
      block: useBlock(),
      state: props.context.state,
      context: props.context.context,
    });
  }

  function attributes() {
    const blockProperties = getBlockProperties(useBlock());
    return {
      ...blockProperties,
      ...(TARGET === \\"reactNative\\"
        ? {
            style: getReactNativeBlockStyles({
              block: useBlock(),
              context: props.context,
              blockStyles: blockProperties.style,
            }),
          }
        : {}),
    };
  }

  function shouldWrap() {
    return !component?.()?.noWrap;
  }

  function renderComponentProps() {
    return {
      blockChildren: useChildren(),
      componentRef: component?.()?.component,
      componentOptions: {
        ...getBlockComponentOptions(useBlock()),

        /**
         * These attributes are passed to the wrapper element when there is one. If \`noWrap\` is set to true, then
         * they are provided to the component itself directly.
         */
        ...(shouldWrap()
          ? {}
          : {
              attributes: { ...attributes(), ...actions() },
            }),
        customBreakpoints: childrenContext?.()?.content?.meta?.breakpoints,
      },
      context: childrenContext(),
    };
  }

  function useChildren() {
    // TO-DO: When should \`canHaveChildren\` dictate rendering?
    // This is currently commented out because some Builder components (e.g. Box) do not have \`canHaveChildren: true\`,
    // but still receive and need to render children.
    // return state.componentInfo?.canHaveChildren ? useBlock().children : [];
    return useBlock().children ?? [];
  }

  function childrenWithoutParentComponent() {
    /**
     * When there is no \`componentRef\`, there might still be children that need to be rendered. In this case,
     * we render them outside of \`componentRef\`.
     * NOTE: We make sure not to render this if \`repeatItemData\` is non-null, because that means we are rendering an array of
     * blocks, and the children will be repeated within those blocks.
     */
    const shouldRenderChildrenOutsideRef =
      !component?.()?.component && !repeatItemData();
    return shouldRenderChildrenOutsideRef ? useChildren() : [];
  }

  function repeatItemData() {
    /**
     * we don't use \`useBlock()\` here because the processing done within its logic includes evaluating the block's bindings,
     * which will not work if there is a repeat.
     */
    const { repeat, ...blockWithoutRepeat } = props.block;

    if (!repeat?.collection) {
      return undefined;
    }

    const itemsArray = evaluate({
      code: repeat.collection,
      state: props.context.state,
      context: props.context.context,
    });

    if (!Array.isArray(itemsArray)) {
      return undefined;
    }

    const collectionName = repeat.collection.split(\\".\\").pop();
    const itemNameToUse =
      repeat.itemName || (collectionName ? collectionName + \\"Item\\" : \\"item\\");
    const repeatArray = itemsArray.map((item, index) => ({
      context: {
        ...props.context,
        state: {
          ...props.context.state,
          $index: index,
          $item: item,
          [itemNameToUse]: item,
          [\`$\${itemNameToUse}Index\`]: index,
        },
      },
      block: blockWithoutRepeat,
    }));
    return repeatArray;
  }

  function inheritedTextStyles() {
    if (TARGET !== \\"reactNative\\") {
      return {};
    }

    const styles = getReactNativeBlockStyles({
      block: useBlock(),
      context: props.context,
      blockStyles: attributes().style,
    });
    return extractTextStyles(styles);
  }

  function childrenContext() {
    return {
      apiKey: props.context.apiKey,
      state: props.context.state,
      content: props.context.content,
      context: props.context.context,
      registeredComponents: props.context.registeredComponents,
      inheritedStyles: inheritedTextStyles(),
    };
  }

  function renderComponentTag() {
    if (TARGET === \\"reactNative\\") {
      return RenderComponentWithContext;
    } else if (TARGET === \\"vue3\\") {
      // vue3 expects a string for the component tag
      return \\"RenderComponent\\";
    } else {
      return RenderComponent;
    }
  }

  const [componentInfo, setComponentInfo] = useState(() => null);

  const RenderComponentTagRef = renderComponentTag();
  const TagRef = tag();

  return (
    <>
      {shouldWrap() ? (
        <>
          {isEmptyHtmlElement(tag()) ? (
            <TagRef {...attributes()} {...actions()} />
          ) : null}
          {!isEmptyHtmlElement(tag()) && repeatItemData() ? (
            <>
              {repeatItemData()?.map((data, index) => (
                <RenderRepeatedBlock
                  key={index}
                  repeatContext={data.context}
                  block={data.block}
                />
              ))}
            </>
          ) : null}
          {!isEmptyHtmlElement(tag()) && !repeatItemData() ? (
            <TagRef {...attributes()} {...actions()}>
              <RenderComponentTagRef {...renderComponentProps()} />
              {childrenWithoutParentComponent()?.map((child) => (
                <RenderBlock
                  key={\\"render-block-\\" + child.id}
                  block={child}
                  context={childrenContext()}
                />
              ))}
              {childrenWithoutParentComponent()?.map((child) => (
                <BlockStyles
                  key={\\"block-style-\\" + child.id}
                  block={child}
                  context={childrenContext()}
                />
              ))}
            </TagRef>
          ) : null}
        </>
      ) : (
        <>
          <RenderComponentTagRef {...renderComponentProps()} />
        </>
      )}
    </>
  );
}

export default RenderBlock;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > renderContentExample 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useContext, useEffect } from \\"react\\";
import BuilderContext from \\"@dummy/context.js\\";
import {
  dispatchNewContentToVisualEditor,
  sendComponentsToVisualEditor,
  trackClick,
} from \\"@dummy/injection-js\\";
import RenderBlocks from \\"@dummy/RenderBlocks\\";

function RenderContent(props) {
  useEffect(() => {
    sendComponentsToVisualEditor(props.customComponents);
  }, []);

  useEffect(() => {
    dispatchNewContentToVisualEditor(props.content);
  }, [props.content]);

  return (
    <BuilderContext.Provider
      value={{
        get content() {
          return 3;
        },

        get registeredComponents() {
          return 4;
        },
      }}
    >
      <div
        css={{
          display: \\"flex\\",
          flexDirection: \\"columns\\",
        }}
        onClick={(event) => trackClick(props.content.id)}
      >
        <RenderBlocks blocks={props.content.blocks} />
      </div>
    </BuilderContext.Provider>
  );
}

export default RenderContent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > rootFragmentMultiNode 1`] = `
"import * as React from \\"react\\";

function Button(props) {
  return (
    <>
      {props.link ? (
        <a
          {...props.attributes}
          href={props.link}
          target={props.openLinkInNewTab ? \\"_blank\\" : undefined}
        >
          {props.text}
        </a>
      ) : null}
      {!props.link ? (
        <button type=\\"button\\" {...props.attributes}>
          {props.text}
        </button>
      ) : null}
    </>
  );
}

export default Button;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > rootShow 1`] = `
"import * as React from \\"react\\";

function RenderStyles(props) {
  return (
    <>
      {props.foo === \\"bar\\" ? (
        <>
          <div>Bar</div>
        </>
      ) : (
        <div>Foo</div>
      )}
    </>
  );
}

export default RenderStyles;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > self-referencing component 1`] = `
"import * as React from \\"react\\";

function MyComponent(props) {
  return (
    <div>
      {props.name}
      {props.name === \\"Batman\\" ? <MyComponent name=\\"Bruce Wayne\\" /> : null}
    </div>
  );
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > self-referencing component with children 1`] = `
"import * as React from \\"react\\";

function MyComponent(props) {
  return (
    <div>
      {props.name}
      {props.children}
      {props.name === \\"Batman\\" ? (
        <MyComponent name=\\"Bruce\\">
          <div>Wayne</div>
        </MyComponent>
      ) : null}
    </div>
  );
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > showExpressions 1`] = `
"import * as React from \\"react\\";

function ShowWithOtherValues(props) {
  return (
    <div>
      {props.conditionA ? <>Content0</> : <>ContentA</>}
      {props.conditionA ? <>ContentA</> : null}
      {props.conditionA ? <></> : <>ContentA</>}
      {props.conditionA ? <>ContentB</> : <>{undefined}</>}
      {props.conditionA ? <>{undefined}</> : <>ContentB</>}
      {props.conditionA ? <>ContentC</> : null}
      {props.conditionA ? <></> : <>ContentC</>}
      {props.conditionA ? <>ContentD</> : null}
      {props.conditionA ? <></> : <>ContentD</>}
      {props.conditionA ? <>ContentE</> : <>hello</>}
      {props.conditionA ? <>hello</> : <>ContentE</>}
      {props.conditionA ? <>ContentF</> : <>123</>}
      {props.conditionA ? <>123</> : <>ContentF</>}
      {props.conditionA === \\"Default\\" ? (
        <>4mb</>
      ) : props.conditionB === \\"Complete\\" ? (
        <>20mb</>
      ) : (
        <>9mb</>
      )}
      {props.conditionA === \\"Default\\" ? (
        <>{props.conditionB === \\"Complete\\" ? <>20mb</> : <>9mb</>}</>
      ) : (
        <>4mb</>
      )}
      {props.conditionA === \\"Default\\" ? (
        <>{props.conditionB === \\"Complete\\" ? <div>complete</div> : <>9mb</>}</>
      ) : props.conditionC === \\"Complete\\" ? (
        <>dff</>
      ) : (
        <div>complete else</div>
      )}
    </div>
  );
}

export default ShowWithOtherValues;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > showWithFor 1`] = `
"import * as React from \\"react\\";

function NestedShow(props) {
  return (
    <>
      {props.conditionA ? (
        <>
          {props.items?.map((item, idx) => (
            <div key={idx}>{item}</div>
          ))}
        </>
      ) : (
        <div>else-condition-A</div>
      )}
    </>
  );
}

export default NestedShow;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > showWithOtherValues 1`] = `
"import * as React from \\"react\\";

function ShowWithOtherValues(props) {
  return (
    <div>
      {props.conditionA ? <>ContentA</> : null}
      {props.conditionA ? <>ContentB</> : <>{undefined}</>}
      {props.conditionA ? <>ContentC</> : null}
      {props.conditionA ? <>ContentD</> : null}
      {props.conditionA ? <>ContentE</> : <>hello</>}
      {props.conditionA ? <>ContentF</> : <>123</>}
    </div>
  );
}

export default ShowWithOtherValues;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > showWithRootText 1`] = `
"import * as React from \\"react\\";

function ShowRootText(props) {
  return <>{props.conditionA ? <>ContentA</> : <div>else-condition-A</div>}</>;
}

export default ShowRootText;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > signalsOnUpdate 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useEffect } from \\"react\\";

function MyBasicComponent(props) {
  useEffect(() => {
    console.log(\\"props.id changed\\", props.id);
    console.log(\\"props.foo.value.bar.baz changed\\", props.foo.value.bar.baz);
  }, [props.id, props.foo.value.bar.baz]);

  return (
    <div
      className=\\"test\\"
      css={{
        padding: \\"10px\\",
      }}
    >
      {props.id}
      {props.foo.value.bar.baz}
    </div>
  );
}

export default MyBasicComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > spreadAttrs 1`] = `
"import * as React from \\"react\\";

function MyBasicComponent(props) {
  return <input {...attrs} />;
}

export default MyBasicComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > spreadNestedProps 1`] = `
"import * as React from \\"react\\";

function MyBasicComponent(props) {
  return <input {...props.nested} />;
}

export default MyBasicComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > spreadProps 1`] = `
"import * as React from \\"react\\";

function MyBasicComponent(props) {
  return <input {...props} />;
}

export default MyBasicComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > store-async-function 1`] = `
"import * as React from \\"react\\";

function StringLiteralStore(props) {
  async function arrowFunction() {
    return Promise.resolve();
  }

  async function namedFunction() {
    return Promise.resolve();
  }

  async function fetchUsers() {
    return Promise.resolve();
  }

  return <div />;
}

export default StringLiteralStore;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > string-literal-store 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function StringLiteralStore(props) {
  const [foo, setFoo] = useState(() => 123);

  return <div>{foo}</div>;
}

export default StringLiteralStore;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > styleClassAndCss 1`] = `
"import * as React from \\"react\\";

function MyComponent(props) {
  return (
    <div
      className=\\"builder-column\\"
      style={{
        width: \\"100%\\",
      }}
      css={{
        display: \\"flex\\",
        flexDirection: \\"column\\",
        alignItems: \\"stretch\\",
      }}
    />
  );
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > stylePropClassAndCss 1`] = `
"import * as React from \\"react\\";

function StylePropClassAndCss(props) {
  return (
    <div
      style={props.attributes.style}
      css={{
        display: \\"flex\\",
        flexDirection: \\"column\\",
        alignItems: \\"stretch\\",
      }}
      className={props.attributes.class}
    />
  );
}

export default StylePropClassAndCss;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > subComponent 1`] = `
"import * as React from \\"react\\";
import Foo from \\"./foo-sub-component\\";

function SubComponent(props) {
  return <Foo />;
}

export default SubComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > svgComponent 1`] = `
"import * as React from \\"react\\";

function SvgComponent(props) {
  return (
    <svg
      fill=\\"none\\"
      role=\\"img\\"
      viewBox={\\"0 0 \\" + 42 + \\" \\" + 42}
      width={42}
      height={42}
    >
      <defs>
        <filter id=\\"prefix__filter0_f\\" filterUnits=\\"userSpaceOnUse\\">
          <feFlood result=\\"BackgroundImageFix\\" />
          <feBlend in=\\"SourceGraphic\\" in2=\\"BackgroundImageFix\\" result=\\"shape\\" />
          <feGaussianBlur result=\\"effect1_foregroundBlur\\" stdDeviation={7} />
        </filter>
      </defs>
    </svg>
  );
}

export default SvgComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > typeDependency 1`] = `
"import * as React from \\"react\\";

function TypeDependency(props) {
  return <div>{props.foo}</div>;
}

export default TypeDependency;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > typeExternalStore 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function TypeExternalStore(props) {
  const [_name, set_name] = useState(() => \\"test\\");

  return <div>Hello {_name}! </div>;
}

export default TypeExternalStore;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > typeGetterStore 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function TypeGetterStore(props) {
  const [name, setName] = useState(() => \\"test\\");

  function getName() {
    if (name === \\"a\\") {
      return \\"b\\";
    }

    return name;
  }

  function test() {
    return \\"test\\";
  }

  return <div>Hello {name}! </div>;
}

export default TypeGetterStore;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > use-style 1`] = `
"import * as React from \\"react\\";

function MyComponent(props) {
  return (
    <>
      <button type=\\"button\\">Button</button>

      <style>{\`
        button {
            background: blue;
            color: white;
            font-size: 12px;
            outline: 1px solid black;
        }
    \`}</style>
    </>
  );
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > use-style-and-css 1`] = `
"import * as React from \\"react\\";

function MyComponent(props) {
  return (
    <>
      <button
        type=\\"button\\"
        css={{
          background: \\"blue\\",
          color: \\"white\\",
        }}
      >
        Button
      </button>

      <style>{\`
        button {
            font-size: 12px;
            outline: 1px solid black;
        }
    \`}</style>
    </>
  );
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > use-style-outside-component 1`] = `
"import * as React from \\"react\\";

function MyComponent(props) {
  return (
    <>
      <button type=\\"button\\">Button</button>

      <style>{\`
  button {
      background: blue;
      color: white;
      font-size: 12px;
      outline: 1px solid black;
  }
\`}</style>
    </>
  );
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > useTarget 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useEffect } from \\"react\\";

function UseTargetComponent(props) {
  function name() {
    const prefix = 123;
    return prefix + \\"foo\\";
  }

  const [lastName, setLastName] = useState(() => \\"bar\\");

  const [foo, setFoo] = useState(() => \\"bar\\");

  useEffect(() => {
    console.log(foo);
    setFoo(\\"bar\\");
    console.log(\\"react\\");
    setLastName(\\"baz\\");
    console.log(foo);
    setFoo(\\"baz\\");
  }, []);

  return <div>{name()}</div>;
}

export default UseTargetComponent;
"
`;

exports[`Mitosis, format: react > jsx > Javascript Test > webComponent 1`] = `
"import * as React from \\"react\\";
import { useRef } from \\"react\\";
import { register } from \\"swiper/element/bundle\\";

function MyBasicWebComponent(props) {
  const hasInitialized = useRef(false);
  if (!hasInitialized.current) {
    register();
    hasInitialized.current = true;
  }

  return (
    <swiper-container slides-per-view=\\"3\\" navigation=\\"true\\" pagination=\\"true\\">
      <swiper-slide>Slide 1</swiper-slide>
      <swiper-slide>Slide 2</swiper-slide>
      <swiper-slide>Slide 3</swiper-slide>
    </swiper-container>
  );
}

export default MyBasicWebComponent;
"
`;

exports[`Mitosis, format: react > jsx > Remove Internal mitosis package 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function MyBasicComponent(props) {
  const [name, setName] = useState(() => \\"PatrickJS\\");

  return (
    <div>Hello {name}! I can run in React, Qwik, Vue, Solid, or Liquid!</div>
  );
}

export default MyBasicComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > Advanced 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function MyBasicForShowComponent(props) {
  const [name, setName] = useState(() => \\"PatrickJS\\");

  const [names, setNames] = useState(() => [\\"Steve\\", \\"PatrickJS\\"]);

  return (
    <main>
      {names?.map((person, i) => (
        <div>
          {i}: {person}
        </div>
      ))}
      {names?.map((person) => (
        <span>{person}</span>
      ))}
      {names?.map((item) => (
        <br />
      ))}
      {Array.from({
        length: 10,
      })?.map((_, ee) => (
        <pre>{ee}</pre>
      ))}
      {Array.from({
        length: 10,
      })?.map((item) => (
        <p>{index}</p>
      ))}
      {names?.map((person, index) => (
        <span>
          {person}
          {index}
        </span>
      ))}
      {Array.from({
        length: 10,
      })?.map((person, count) => (
        <span>
          {person}
          {count}
        </span>
      ))}
      {names?.map((person, i) => (
        <span>
          {person}
          {i}
        </span>
      ))}
      {Array.from({
        length: 10,
      })?.map((person, index) => (
        <span>
          {person}
          {index}
        </span>
      ))}
    </main>
  );
}

export default MyBasicForShowComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > AdvancedRef 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useRef, useEffect } from \\"react\\";

function MyBasicRefComponent(props) {
  const inputRef = useRef(null);
  const inputNoArgRef = useRef(null);
  const [name, setName] = useState(() => \\"PatrickJS\\");

  function onBlur() {
    // Maintain focus
    inputRef.current.focus();
  }

  function lowerCaseName() {
    return name.toLowerCase();
  }

  useEffect(() => {
    console.log(\\"Received an update\\");
  }, [inputRef.current, inputNoArgRef.current]);

  return (
    <div>
      {props.showInput ? (
        <>
          <input
            ref={inputRef}
            css={{
              color: \\"red\\",
            }}
            value={name}
            onBlur={(event) => onBlur()}
            onChange={(event) => setName(event.target.value)}
          />
          <label htmlFor=\\"cars\\" ref={inputNoArgRef}>
            Choose a car:
          </label>
          <select name=\\"cars\\" id=\\"cars\\">
            <option value=\\"supra\\">GR Supra</option>
            <option value=\\"86\\">GR 86</option>
          </select>
        </>
      ) : null}
      Hello
      {lowerCaseName()}! I can run in React, Qwik, Vue, Solid, or Web Component!
    </div>
  );
}

export default MyBasicRefComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > Basic 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

export const DEFAULT_VALUES = {
  name: \\"Steve\\",
};

function MyBasicComponent(props) {
  const [name, setName] = useState(() => \\"Steve\\");

  function underscore_fn_name() {
    return \\"bar\\";
  }

  const [age, setAge] = useState(() => 1);

  const [sports, setSports] = useState(() => [\\"\\"]);

  return (
    <div
      className=\\"test\\"
      css={{
        padding: \\"10px\\",
      }}
    >
      <input
        value={DEFAULT_VALUES.name || name}
        onChange={(myEvent) => setName(myEvent.target.value)}
      />
      Hello! I can run in React, Vue, Solid, or Liquid! &gt;
    </div>
  );
}

export default MyBasicComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > Basic 2`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function MyBasicForShowComponent(props) {
  const [name, setName] = useState(() => \\"PatrickJS\\");

  const [names, setNames] = useState(() => [\\"Steve\\", \\"PatrickJS\\"]);

  return (
    <div>
      {names?.map((person) =>
        person === name ? (
          <>
            <input
              value={name}
              onChange={(event) => {
                setName(event.target.value + \\" and \\" + person);
              }}
            />
            Hello
            {person}! I can run in Qwik, Web Component, React, Vue, Solid, or
            Liquid!
          </>
        ) : null
      )}
    </div>
  );
}

export default MyBasicForShowComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > Basic Context 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useContext, useRef, useEffect } from \\"react\\";
import { Injector, MyService, createInjector } from \\"@dummy/injection-js\\";

function MyBasicComponent(props) {
  const [name, setName] = useState(() => \\"PatrickJS\\");

  function onChange() {
    const change = myService.method(\\"change\\");
    console.log(change);
  }

  const myService = useContext(MyService);

  const hasInitialized = useRef(false);
  if (!hasInitialized.current) {
    const hi = myService.method(\\"hi\\");
    console.log(hi);
    hasInitialized.current = true;
  }

  useEffect(() => {
    const bye = myService.method(\\"hi\\");
    console.log(bye);
  }, []);

  return (
    <Injector.Provider value={createInjector()}>
      <div>
        {myService.method(\\"hello\\") + name}
        Hello! I can run in React, Vue, Solid, or Liquid!
        <input onChange={(event) => onChange} />
      </div>
    </Injector.Provider>
  );
}

export default MyBasicComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > Basic OnMount Update 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useRef, useEffect } from \\"react\\";

function MyBasicOnMountUpdateComponent(props) {
  const [name, setName] = useState(() => \\"PatrickJS\\");

  const [names, setNames] = useState(() => [\\"Steve\\", \\"PatrickJS\\"]);

  const hasInitialized = useRef(false);
  if (!hasInitialized.current) {
    setName(\\"PatrickJS onInit\\" + props.hi);
    hasInitialized.current = true;
  }

  useEffect(() => {
    setName(\\"PatrickJS onMount\\" + props.bye);
  }, []);

  return <div>Hello {name}</div>;
}

export default MyBasicOnMountUpdateComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > Basic Outputs 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useEffect } from \\"react\\";

function MyBasicOutputsComponent(props) {
  const [name, setName] = useState(() => \\"PatrickJS\\");

  useEffect(() => {
    props.onMessage(name);
    props.onEvent(props.message);
  }, []);

  return <div />;
}

export default MyBasicOutputsComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > Basic Outputs Meta 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useEffect } from \\"react\\";

function MyBasicOutputsComponent(props) {
  const [name, setName] = useState(() => \\"PatrickJS\\");

  useEffect(() => {
    props.onMessage(name);
    props.onEvent(props.message);
  }, []);

  return <div />;
}

export default MyBasicOutputsComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > BasicAttribute 1`] = `
"import * as React from \\"react\\";

function MyComponent(props) {
  return <input autoCapitalize=\\"on\\" autoComplete=\\"on\\" spellCheck />;
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > BasicBooleanAttribute 1`] = `
"import * as React from \\"react\\";
import MyBooleanAttributeComponent from \\"./basic-boolean-attribute-component.raw\\";

function MyBooleanAttribute(props) {
  return (
    <div>
      {props.children ? (
        <>
          {props.children}
          {props.type}
        </>
      ) : null}
      <MyBooleanAttributeComponent toggle />
      <MyBooleanAttributeComponent toggle />
      <MyBooleanAttributeComponent list={null} />
    </div>
  );
}

export default MyBooleanAttribute;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > BasicChildComponent 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";
import MyBasicOnMountUpdateComponent from \\"./basic-onMount-update.raw\\";
import MyBasicComponent from \\"./basic.raw\\";

function MyBasicChildComponent(props) {
  const [name, setName] = useState(() => \\"Steve\\");

  const [dev, setDev] = useState(() => \\"PatrickJS\\");

  return (
    <div>
      <MyBasicComponent id={dev} />
      <div>
        <MyBasicOnMountUpdateComponent hi={name} bye={dev} />
      </div>
    </div>
  );
}

export default MyBasicChildComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > BasicFor 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useEffect } from \\"react\\";

function MyBasicForComponent(props) {
  const [name, setName] = useState(() => \\"PatrickJS\\");

  const [names, setNames] = useState(() => [\\"Steve\\", \\"PatrickJS\\"]);

  useEffect(() => {
    console.log(\\"onMount code\\");
  }, []);

  return (
    <div>
      {names?.map((person) => (
        <>
          <input
            value={name}
            onChange={(event) => {
              setName(event.target.value + \\" and \\" + person);
            }}
          />
          Hello
          {person}! I can run in Qwik, Web Component, React, Vue, Solid, or
          Liquid!
        </>
      ))}
    </div>
  );
}

export default MyBasicForComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > BasicRef 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useRef } from \\"react\\";

function MyBasicRefComponent(props) {
  const inputRef = useRef(null);
  const inputNoArgRef = useRef(null);
  const [name, setName] = useState(() => \\"PatrickJS\\");

  function onBlur() {
    // Maintain focus
    inputRef.current.focus();
  }

  function lowerCaseName() {
    return name.toLowerCase();
  }

  return (
    <div>
      {props.showInput ? (
        <>
          <input
            ref={inputRef}
            css={{
              color: \\"red\\",
            }}
            value={name}
            onBlur={(event) => onBlur()}
            onChange={(event) => setName(event.target.value)}
          />
          <label htmlFor=\\"cars\\" ref={inputNoArgRef}>
            Choose a car:
          </label>
          <select name=\\"cars\\" id=\\"cars\\">
            <option value=\\"supra\\">GR Supra</option>
            <option value=\\"86\\">GR 86</option>
          </select>
        </>
      ) : null}
      Hello
      {lowerCaseName()}! I can run in React, Qwik, Vue, Solid, or Web Component!
    </div>
  );
}

export default MyBasicRefComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > BasicRefAssignment 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useRef } from \\"react\\";

function MyBasicRefAssignmentComponent(props) {
  const holdValueRef = useRef(\\"Patrick\\");
  function handlerClick(event: Event) {
    event.preventDefault();
    console.log(\\"current value\\", holdValueRef.current);
    holdValueRef.current = holdValueRef.current + \\"JS\\";
  }

  return (
    <div>
      <button onClick={async (evt) => await handlerClick(evt)}>Click</button>
    </div>
  );
}

export default MyBasicRefAssignmentComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > BasicRefPrevious 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useRef, useEffect } from \\"react\\";

export function usePrevious<T>(value: T) {
  // The ref object is a generic container whose current property is mutable ...
  // ... and can hold any value, similar to an instance property on a class
  let ref = useRef<T>(null); // Store current value in ref

  onUpdate(() => {
    ref = value;
  }, [value]); // Only re-run if value changes
  // Return previous value (happens before update in useEffect above)

  return ref;
}

function MyPreviousComponent(props) {
  const [count, setCount] = useState(() => 0);

  const prevCount = useRef(count);

  useEffect(() => {
    prevCount.current = count;
  }, [count]);

  return (
    <div>
      <h1>
        Now: {count}, before: {prevCount.current}
      </h1>
      <button onClick={(event) => setCount(1)}>Increment</button>
    </div>
  );
}

export default MyPreviousComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > Button 1`] = `
"import * as React from \\"react\\";

function Button(props) {
  return (
    <div>
      {props.link ? (
        <a
          {...props.attributes}
          href={props.link}
          target={props.openLinkInNewTab ? \\"_blank\\" : undefined}
        >
          {props.text}
        </a>
      ) : null}
      {!props.link ? (
        <button type=\\"button\\" {...props.attributes}>
          {props.text}
        </button>
      ) : null}
    </div>
  );
}

export default Button;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > Columns 1`] = `
"import * as React from \\"react\\";

function Column(props) {
  function getColumns() {
    return props.columns || [];
  }

  function getGutterSize() {
    return typeof props.space === \\"number\\" ? props.space || 0 : 20;
  }

  function getWidth(index: number) {
    const columns = getColumns();
    return (columns[index] && columns[index].width) || 100 / columns.length;
  }

  function getColumnCssWidth(index: number) {
    const columns = getColumns();
    const gutterSize = getGutterSize();
    const subtractWidth = (gutterSize * (columns.length - 1)) / columns.length;
    return \`calc(\${getWidth(index)}% - \${subtractWidth}px)\`;
  }

  return (
    <div
      className=\\"builder-columns\\"
      css={{
        display: \\"flex\\",
        flexDirection: \\"column\\",
        alignItems: \\"stretch\\",
        lineHeight: \\"normal\\",
        \\"@media (max-width: 999px)\\": {
          flexDirection: \\"row\\",
        },
        \\"@media (max-width: 639px)\\": {
          flexDirection: \\"row-reverse\\",
        },
      }}
    >
      {props.columns?.map((column, index) => (
        <div
          className=\\"builder-column\\"
          css={{
            flexGrow: \\"1\\",
          }}
        >
          {column.content}
          {index}
        </div>
      ))}
    </div>
  );
}

export default Column;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > ContentSlotHtml 1`] = `
"import * as React from \\"react\\";
import type { JSX } from \\"../../../../jsx-runtime\\";

function ContentSlotCode(props) {
  return (
    <div>
      <>{props.slotTesting}</>
      <div>
        <hr />
      </div>
      <div>
        <>{props.children}</>
      </div>
    </div>
  );
}

export default ContentSlotCode;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > ContentSlotJSX 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";
import type { JSX } from \\"../../../../jsx-runtime\\";

function ContentSlotJsxCode(props) {
  const [name, setName] = useState(() => \\"king\\");

  const [showContent, setShowContent] = useState(() => false);

  function cls() {
    return props.slotContent && props.children ? \`\${name}-content\` : \\"\\";
  }

  function show() {
    props.slotContent ? 1 : \\"\\";
  }

  return (
    <>
      {props.slotReference ? (
        <>
          <div
            name={props.slotContent ? \\"name1\\" : \\"name2\\"}
            title={props.slotContent ? \\"title1\\" : \\"title2\\"}
            {...props.attributes}
            onClick={(event) => show()}
            className={cls()}
          >
            {showContent && props.slotContent ? (
              <>{props.content || \\"{props.content}\\"}</>
            ) : null}
            <div>
              <hr />
            </div>
            <div>{props.children}</div>
          </div>
        </>
      ) : null}
    </>
  );
}

ContentSlotJsxCode.defaultProps = {
  content: \\"\\",
  slotReference: undefined,
  slotContent: undefined,
};

export default ContentSlotJsxCode;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > CustomCode 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useRef, useEffect } from \\"react\\";

function CustomCode(props) {
  const elem = useRef(null);
  const [scriptsInserted, setScriptsInserted] = useState(() => []);

  const [scriptsRun, setScriptsRun] = useState(() => []);

  function findAndRunScripts() {
    // TODO: Move this function to standalone one in '@builder.io/utils'
    if (elem.current && typeof window !== \\"undefined\\") {
      /** @type {HTMLScriptElement[]} */
      const scripts = elem.current.getElementsByTagName(\\"script\\");

      for (let i = 0; i < scripts.length; i++) {
        const script = scripts[i];

        if (script.src) {
          if (scriptsInserted.includes(script.src)) {
            continue;
          }

          scriptsInserted.push(script.src);
          const newScript = document.createElement(\\"script\\");
          newScript.async = true;
          newScript.src = script.src;
          document.head.appendChild(newScript);
        } else if (
          !script.type ||
          [
            \\"text/javascript\\",
            \\"application/javascript\\",
            \\"application/ecmascript\\",
          ].includes(script.type)
        ) {
          if (scriptsRun.includes(script.innerText)) {
            continue;
          }

          try {
            scriptsRun.push(script.innerText);
            new Function(script.innerText)();
          } catch (error) {
            console.warn(\\"\`CustomCode\`: Error running script:\\", error);
          }
        }
      }
    }
  }

  useEffect(() => {
    findAndRunScripts();
  }, []);

  return (
    <div
      ref={elem}
      className={
        \\"builder-custom-code\\" + (props.replaceNodes ? \\" replace-nodes\\" : \\"\\")
      }
      dangerouslySetInnerHTML={{ __html: props.code }}
    />
  );
}

export default CustomCode;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > Embed 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useRef, useEffect } from \\"react\\";

function CustomCode(props) {
  const elem = useRef(null);
  const [scriptsInserted, setScriptsInserted] = useState(() => []);

  const [scriptsRun, setScriptsRun] = useState(() => []);

  function findAndRunScripts() {
    // TODO: Move this function to standalone one in '@builder.io/utils'
    if (elem.current && typeof window !== \\"undefined\\") {
      /** @type {HTMLScriptElement[]} */
      const scripts = elem.current.getElementsByTagName(\\"script\\");

      for (let i = 0; i < scripts.length; i++) {
        const script = scripts[i];

        if (script.src) {
          if (scriptsInserted.includes(script.src)) {
            continue;
          }

          scriptsInserted.push(script.src);
          const newScript = document.createElement(\\"script\\");
          newScript.async = true;
          newScript.src = script.src;
          document.head.appendChild(newScript);
        } else if (
          !script.type ||
          [
            \\"text/javascript\\",
            \\"application/javascript\\",
            \\"application/ecmascript\\",
          ].includes(script.type)
        ) {
          if (scriptsRun.includes(script.innerText)) {
            continue;
          }

          try {
            scriptsRun.push(script.innerText);
            new Function(script.innerText)();
          } catch (error) {
            console.warn(\\"\`CustomCode\`: Error running script:\\", error);
          }
        }
      }
    }
  }

  useEffect(() => {
    findAndRunScripts();
  }, []);

  return (
    <div
      ref={elem}
      className={
        \\"builder-custom-code\\" + (props.replaceNodes ? \\" replace-nodes\\" : \\"\\")
      }
      dangerouslySetInnerHTML={{ __html: props.code }}
    />
  );
}

export default CustomCode;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > Form 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useRef } from \\"react\\";
import { Builder, BuilderElement, builder } from \\"@builder.io/sdk\\";
import {
  BuilderBlock as BuilderBlockComponent,
  BuilderBlocks,
  get,
  set,
} from \\"@fake\\";

function FormComponent(props) {
  const formRef = useRef(null);
  const [formState, setFormState] = useState(() => \\"unsubmitted\\");

  const [responseData, setResponseData] = useState(() => null);

  const [formErrorMessage, setFormErrorMessage] = useState(() => \\"\\");

  function submissionState() {
    return (Builder.isEditing && props.previewState) || formState;
  }

  function onSubmit(
    event: Event & {
      currentTarget: HTMLFormElement;
    }
  ) {
    const sendWithJs = props.sendWithJs || props.sendSubmissionsTo === \\"email\\";

    if (props.sendSubmissionsTo === \\"zapier\\") {
      event.preventDefault();
    } else if (sendWithJs) {
      if (!(props.action || props.sendSubmissionsTo === \\"email\\")) {
        event.preventDefault();
        return;
      }

      event.preventDefault();
      const el = event.currentTarget;
      const headers = props.customHeaders || {};
      let body: any;
      const formData = new FormData(el); // TODO: maybe support null

      const formPairs: {
        key: string;
        value: File | boolean | number | string | FileList;
      }[] = Array.from(
        event.currentTarget.querySelectorAll(\\"input,select,textarea\\")
      )
        .filter((el) => !!(el as HTMLInputElement).name)
        .map((el) => {
          let value: any;
          const key = (el as HTMLImageElement).name;

          if (el instanceof HTMLInputElement) {
            if (el.type === \\"radio\\") {
              if (el.checked) {
                value = el.name;
                return {
                  key,
                  value,
                };
              }
            } else if (el.type === \\"checkbox\\") {
              value = el.checked;
            } else if (el.type === \\"number\\" || el.type === \\"range\\") {
              const num = el.valueAsNumber;

              if (!isNaN(num)) {
                value = num;
              }
            } else if (el.type === \\"file\\") {
              // TODO: one vs multiple files
              value = el.files;
            } else {
              value = el.value;
            }
          } else {
            value = (el as HTMLInputElement).value;
          }

          return {
            key,
            value,
          };
        });
      let contentType = props.contentType;

      if (props.sendSubmissionsTo === \\"email\\") {
        contentType = \\"multipart/form-data\\";
      }

      Array.from(formPairs).forEach(({ value }) => {
        if (
          value instanceof File ||
          (Array.isArray(value) && value[0] instanceof File) ||
          value instanceof FileList
        ) {
          contentType = \\"multipart/form-data\\";
        }
      }); // TODO: send as urlEncoded or multipart by default
      // because of ease of use and reliability in browser API
      // for encoding the form?

      if (contentType !== \\"application/json\\") {
        body = formData;
      } else {
        // Json
        const json = {};
        Array.from(formPairs).forEach(({ value, key }) => {
          set(json, key, value);
        });
        body = JSON.stringify(json);
      }

      if (contentType && contentType !== \\"multipart/form-data\\") {
        if (
          /* Zapier doesn't allow content-type header to be sent from browsers */ !(
            sendWithJs && props.action?.includes(\\"zapier.com\\")
          )
        ) {
          headers[\\"content-type\\"] = contentType;
        }
      }
      const presubmitEvent = new CustomEvent(\\"presubmit\\", { detail: { body } });
      if (formRef.current) {
        formRef.current.dispatchEvent(presubmitEvent);
        if (presubmitEvent.defaultPrevented) {
          return;
        }
      }
      setFormState(\\"sending\\");
      const formUrl = \`\${
        builder.env === \\"dev\\" ? \\"http://localhost:5000\\" : \\"https://builder.io\\"
      }/api/v1/form-submit?apiKey=\${builder.apiKey}&to=\${btoa(
        props.sendSubmissionsToEmail || \\"\\"
      )}&name=\${encodeURIComponent(props.name || \\"\\")}\`;
      fetch(
        props.sendSubmissionsTo === \\"email\\"
          ? formUrl
          : props.action! /* TODO: throw error if no action URL */,
        { body, headers, method: props.method || \\"post\\" }
      ).then(
        async (res) => {
          let body;
          const contentType = res.headers.get(\\"content-type\\");
          if (contentType && contentType.indexOf(\\"application/json\\") !== -1) {
            body = await res.json();
          } else {
            body = await res.text();
          }
          if (!res.ok && props.errorMessagePath) {
            /* TODO: allow supplying an error formatter function */ let message =
              get(body, props.errorMessagePath);
            if (message) {
              if (typeof message !== \\"string\\") {
                /* TODO: ideally convert json to yaml so it woul dbe like          error: - email has been taken */ message =
                  JSON.stringify(message);
              }
              setFormErrorMessage(message);
            }
          }
          setResponseData(body);
          setFormState(res.ok ? \\"success\\" : \\"error\\");
          if (res.ok) {
            const submitSuccessEvent = new CustomEvent(\\"submit:success\\", {
              detail: { res, body },
            });
            if (formRef.current) {
              formRef.current.dispatchEvent(submitSuccessEvent);
              if (submitSuccessEvent.defaultPrevented) {
                return;
              }
              /* TODO: option to turn this on/off? */ if (
                props.resetFormOnSubmit !== false
              ) {
                formRef.current.reset();
              }
            }
            /* TODO: client side route event first that can be preventDefaulted */ if (
              props.successUrl
            ) {
              if (formRef.current) {
                const event = new CustomEvent(\\"route\\", {
                  detail: { url: props.successUrl },
                });
                formRef.current.dispatchEvent(event);
                if (!event.defaultPrevented) {
                  location.href = props.successUrl;
                }
              } else {
                location.href = props.successUrl;
              }
            }
          }
        },
        (err) => {
          const submitErrorEvent = new CustomEvent(\\"submit:error\\", {
            detail: { error: err },
          });
          if (formRef.current) {
            formRef.current.dispatchEvent(submitErrorEvent);
            if (submitErrorEvent.defaultPrevented) {
              return;
            }
          }
          setResponseData(err);
          setFormState(\\"error\\");
        }
      );
    }
  }
  return (
    <form
      validate={props.validate}
      ref={formRef}
      action={!props.sendWithJs && props.action}
      method={props.method}
      name={props.name}
      onSubmit={(event) => onSubmit(event)}
      {...props.attributes}
    >
      {props.builderBlock && props.builderBlock.children ? (
        <>
          {props.builderBlock?.children?.map((block, index) => (
            <BuilderBlockComponent key={block.id} block={block} index={index} />
          ))}
        </>
      ) : null}
      {submissionState() === \\"error\\" ? (
        <BuilderBlocks dataPath=\\"errorMessage\\" blocks={props.errorMessage!} />
      ) : null}
      {submissionState() === \\"sending\\" ? (
        <BuilderBlocks
          dataPath=\\"sendingMessage\\"
          blocks={props.sendingMessage!}
        />
      ) : null}
      {submissionState() === \\"error\\" && responseData ? (
        <pre
          className=\\"builder-form-error-text\\"
          css={{ padding: \\"10px\\", color: \\"red\\", textAlign: \\"center\\" }}
        >
          {JSON.stringify(responseData, null, 2)}
        </pre>
      ) : null}
      {submissionState() === \\"success\\" ? (
        <BuilderBlocks
          dataPath=\\"successMessage\\"
          blocks={props.successMessage!}
        />
      ) : null}
    </form>
  );
}
export default FormComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > Image 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useRef, useEffect } from \\"react\\";

function Image(props) {
  const pictureRef = useRef(null);
  const [scrollListener, setScrollListener] = useState(() => null);

  const [imageLoaded, setImageLoaded] = useState(() => false);

  function setLoaded() {
    setImageLoaded(true);
  }

  function useLazyLoading() {
    // TODO: Add more checks here, like testing for real web browsers
    return !!props.lazy && isBrowser();
  }

  function isBrowser() {
    return (
      typeof window !== \\"undefined\\" && window.navigator.product != \\"ReactNative\\"
    );
  }

  const [load, setLoad] = useState(() => false);

  useEffect(() => {
    if (useLazyLoading()) {
      // throttled scroll capture listener
      const listener = () => {
        if (pictureRef.current) {
          const rect = pictureRef.current.getBoundingClientRect();
          const buffer = window.innerHeight / 2;

          if (rect.top < window.innerHeight + buffer) {
            setLoad(true);
            setScrollListener(null);
            window.removeEventListener(\\"scroll\\", listener);
          }
        }
      };

      setScrollListener(listener);
      window.addEventListener(\\"scroll\\", listener, {
        capture: true,
        passive: true,
      });
      listener();
    }
  }, []);

  useEffect(() => {
    return () => {
      if (scrollListener) {
        window.removeEventListener(\\"scroll\\", scrollListener);
      }
    };
  }, []);

  return (
    <div>
      <picture ref={pictureRef}>
        {!useLazyLoading() || load ? (
          <img
            alt={props.altText}
            aria-role={props.altText ? \\"presentation\\" : undefined}
            css={{
              opacity: \\"1\\",
              transition: \\"opacity 0.2s ease-in-out\\",
              objectFit: \\"cover\\",
              objectPosition: \\"center\\",
            }}
            className={
              \\"builder-image\\" + (props._class ? \\" \\" + props._class : \\"\\")
            }
            src={props.image}
            onLoad={(event) => setLoaded()}
            srcset={props.srcset}
            sizes={props.sizes}
          />
        ) : null}
        <source srcset={props.srcset} />
      </picture>
      {props.children}
    </div>
  );
}

export default Image;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > Image State 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function ImgStateComponent(props) {
  const [canShow, setCanShow] = useState(() => true);

  const [images, setImages] = useState(() => [\\"http://example.com/qwik.png\\"]);

  return (
    <div>
      {images?.map((item, itemIndex) => (
        <img className=\\"custom-class\\" src={item} key={itemIndex} />
      ))}
    </div>
  );
}

export default ImgStateComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > Img 1`] = `
"import * as React from \\"react\\";
import { Builder } from \\"@builder.io/sdk\\";

function ImgComponent(props) {
  return (
    <img
      style={{
        objectFit: props.backgroundSize || \\"cover\\",
        objectPosition: props.backgroundPosition || \\"center\\",
      }}
      {...props.attributes}
      key={(Builder.isEditing && props.imgSrc) || \\"default-key\\"}
      alt={props.altText}
      src={props.imgSrc}
    />
  );
}

export default ImgComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > Input 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { Builder } from \\"@builder.io/sdk\\";

function FormInputComponent(props) {
  return (
    <input
      {...props.attributes}
      key={
        Builder.isEditing && props.defaultValue
          ? props.defaultValue
          : \\"default-key\\"
      }
      placeholder={props.placeholder}
      type={props.type}
      name={props.name}
      value={props.value}
      defaultValue={props.defaultValue}
      required={props.required}
      onChange={(event) => props.onChange?.(event.target.value)}
    />
  );
}

export default FormInputComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > InputParent 1`] = `
"import * as React from \\"react\\";
import FormInputComponent from \\"./input.raw\\";

function Stepper(props) {
  function handleChange(value: string) {
    console.log(value);
  }

  return (
    <FormInputComponent
      name=\\"kingzez\\"
      type=\\"text\\"
      onChange={(value) => handleChange(value)}
    />
  );
}

export default Stepper;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > RawText 1`] = `
"import * as React from \\"react\\";

function RawText(props) {
  return (
    <span
      className={props.attributes?.class || props.attributes?.className}
      dangerouslySetInnerHTML={{ __html: props.text || \\"\\" }}
    />
  );
}

export default RawText;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > Section 1`] = `
"import * as React from \\"react\\";

function SectionComponent(props) {
  return (
    <section
      {...props.attributes}
      style={
        props.maxWidth && typeof props.maxWidth === \\"number\\"
          ? {
              maxWidth: props.maxWidth,
            }
          : undefined
      }
    >
      {props.children}
    </section>
  );
}

export default SectionComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > Section 2`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function SectionStateComponent(props) {
  const [max, setMax] = useState(() => 42);

  const [items, setItems] = useState(() => [42]);

  return (
    <>
      {max ? (
        <>
          {items?.map((item) => (
            <section
              {...props.attributes}
              style={{
                maxWidth: item + max,
              }}
            >
              {props.children}
            </section>
          ))}
        </>
      ) : null}
    </>
  );
}

export default SectionStateComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > Select 1`] = `
"import * as React from \\"react\\";
import { Builder } from \\"@builder.io/sdk\\";

function SelectComponent(props) {
  return (
    <select
      {...props.attributes}
      value={props.value}
      key={
        Builder.isEditing && props.defaultValue
          ? props.defaultValue
          : \\"default-key\\"
      }
      defaultValue={props.defaultValue}
      name={props.name}
    >
      {props.options?.map((option, index) => (
        <option value={option.value} data-index={index}>
          {option.name || option.value}
        </option>
      ))}
    </select>
  );
}

export default SelectComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > SlotDefault 1`] = `
"import * as React from \\"react\\";

function SlotCode(props) {
  return (
    <div>
      <>
        {props.children || <div className=\\"default-slot\\">Default content</div>}
      </>
    </div>
  );
}

export default SlotCode;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > SlotHtml 1`] = `
"import * as React from \\"react\\";
import ContentSlotCode from \\"./content-slot-jsx.raw\\";

function SlotCode(props) {
  return (
    <div>
      <ContentSlotCode testing={<div>Hello</div>}></ContentSlotCode>
    </div>
  );
}

export default SlotCode;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > SlotJsx 1`] = `
"import * as React from \\"react\\";
import ContentSlotCode from \\"./content-slot-jsx.raw\\";

function SlotCode(props) {
  return (
    <div>
      <ContentSlotCode slotTesting={<div>Hello</div>} />
    </div>
  );
}

export default SlotCode;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > SlotNamed 1`] = `
"import * as React from \\"react\\";

function SlotCode(props) {
  return (
    <div>
      <>{props.myAwesomeSlot}</>
      <>{props.top}</>
      <>{props.left || \\"Default left\\"}</>
      <>{props.children || \\"Default Child\\"}</>
    </div>
  );
}

export default SlotCode;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > Stamped.io 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useEffect } from \\"react\\";
import { kebabCase, snakeCase } from \\"lodash\\";

function SmileReviews(props) {
  const [reviews, setReviews] = useState(() => []);

  const [name, setName] = useState(() => \\"test\\");

  const [showReviewPrompt, setShowReviewPrompt] = useState(() => false);

  function kebabCaseValue() {
    return kebabCase(\\"testThat\\");
  }

  function snakeCaseValue() {
    return snakeCase(\\"testThis\\");
  }

  useEffect(() => {
    fetch(
      \`https://stamped.io/api/widget/reviews?storeUrl=builder-io.myshopify.com&apiKey=\${
        props.apiKey || \\"pubkey-8bbDq7W6w4sB3OWeM1HUy2s47702hM\\"
      }&productId=\${props.productId || \\"2410511106127\\"}\`
    )
      .then((res) => res.json())
      .then((data) => {
        setReviews(data.data);
      });
  }, []);

  return (
    <div data-user={name}>
      <button onClick={(event) => setShowReviewPrompt(true)}>
        Write a review
      </button>
      {showReviewPrompt || \\"asdf\\" ? (
        <>
          <input placeholder=\\"Email\\" />
          <input
            placeholder=\\"Title\\"
            css={{
              display: \\"block\\",
            }}
          />
          <textarea
            placeholder=\\"How was your experience?\\"
            css={{
              display: \\"block\\",
            }}
          />
          <button
            css={{
              display: \\"block\\",
            }}
            onClick={(ev) => {
              ev.preventDefault();
              setShowReviewPrompt(false);
            }}
          >
            Submit
          </button>
        </>
      ) : null}
      {reviews?.map((review, index) => (
        <div
          key={review.id}
          css={{
            margin: \\"10px\\",
            padding: \\"10px\\",
            background: \\"white\\",
            display: \\"flex\\",
            borderRadius: \\"5px\\",
            boxShadow: \\"0 2px 5px rgba(0, 0, 0, 0.1)\\",
            WebkitFontSmoothing: \\"antialiased\\",
          }}
        >
          <img
            css={{
              height: \\"30px\\",
              width: \\"30px\\",
              marginRight: \\"10px\\",
            }}
            src={review.avatar}
          />
          <div className={showReviewPrompt ? \\"bg-primary\\" : \\"bg-secondary\\"}>
            <div>N: {index}</div>
            <div>{review.author}</div>
            <div>{review.reviewMessage}</div>
          </div>
        </div>
      ))}
    </div>
  );
}

export default SmileReviews;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > Submit 1`] = `
"import * as React from \\"react\\";

function SubmitButton(props) {
  return (
    <button type=\\"submit\\" {...props.attributes}>
      {props.text}
    </button>
  );
}

export default SubmitButton;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > Text 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";
import { Builder } from \\"@builder.io/sdk\\";

function Text(props) {
  const [name, setName] = useState(() => \\"Decadef20\\");

  return (
    <div
      contentEditable={allowEditingText || undefined}
      data-name={{
        test: name || \\"any name\\",
      }}
      dangerouslySetInnerHTML={{
        __html:
          props.text ||
          props.content ||
          name ||
          '<p class=\\"text-lg\\">my name</p>',
      }}
    />
  );
}

export default Text;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > Textarea 1`] = `
"import * as React from \\"react\\";

function Textarea(props) {
  return (
    <textarea
      {...props.attributes}
      placeholder={props.placeholder}
      name={props.name}
      value={props.value}
      defaultValue={props.defaultValue}
    />
  );
}

export default Textarea;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > Video 1`] = `
"import * as React from \\"react\\";

function Video(props) {
  return (
    <video
      preload=\\"none\\"
      {...props.attributes}
      style={{
        width: \\"100%\\",
        height: \\"100%\\",
        ...props.attributes?.style,
        objectFit: props.fit,
        objectPosition: props.position,
        // Hack to get object fit to work as expected and
        // not have the video overflow
        borderRadius: 1,
      }}
      key={props.video || \\"no-src\\"}
      poster={props.posterImage}
      autoplay={props.autoPlay}
      muted={props.muted}
      controls={props.controls}
      loop={props.loop}
    />
  );
}

export default Video;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > arrowFunctionInUseStore 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function MyComponent(props) {
  const [name, setName] = useState(() => \\"steve\\");

  function setName(value) {
    setName(value);
  }

  function updateNameWithArrowFn(value) {
    setName(value);
  }

  return <div>Hello {name}</div>;
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > basicForNoTagReference 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function MyBasicForNoTagRefComponent(props) {
  const [name, setName] = useState(() => \\"VincentW\\");

  const [TagName, setTagName] = useState(() => \\"div\\");

  function TagNameGetter() {
    return \\"span\\";
  }

  const [Tag, setTag] = useState(() => \\"span\\");

  const TagNameGetterRef = TagNameGetter();

  return (
    <TagNameGetterRef>
      Hello <Tag>{name}</Tag>
      {props.actions?.map((action) => (
        <TagName>
          <action.icon />
          <span>{action.text}</span>
        </TagName>
      ))}
    </TagNameGetterRef>
  );
}

export default MyBasicForNoTagRefComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > basicForwardRef 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, forwardRef } from \\"react\\";

const MyBasicForwardRefComponent = forwardRef(
  function MyBasicForwardRefComponent(props, inputRef) {
    const [name, setName] = useState(() => \\"PatrickJS\\");

    return (
      <div>
        <input
          ref={inputRef}
          css={{
            color: \\"red\\",
          }}
          value={name}
          onChange={(event) => setName(event.target.value)}
        />
      </div>
    );
  }
);

export default MyBasicForwardRefComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > basicForwardRefMetadata 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, forwardRef } from \\"react\\";

const MyBasicForwardRefComponent = forwardRef(
  function MyBasicForwardRefComponent(props, inputRef) {
    const [name, setName] = useState(() => \\"PatrickJS\\");

    return (
      <div>
        <input
          ref={inputRef}
          css={{
            color: \\"red\\",
          }}
          value={name}
          onChange={(event) => setName(event.target.value)}
        />
      </div>
    );
  }
);

export default MyBasicForwardRefComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > basicOnUpdateReturn 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useEffect } from \\"react\\";

function MyBasicOnUpdateReturnComponent(props) {
  const [name, setName] = useState(() => \\"PatrickJS\\");

  useEffect(() => {
    const controller = new AbortController();
    const signal = controller.signal;
    fetch(\\"https://patrickjs.com/api/resource.json\\", {
      signal,
    })
      .then((response) => response.json())
      .then((data) => {
        setName(data.name);
      });
    return () => {
      if (!signal.aborted) {
        controller.abort();
      }
    };
  }, [name]);

  return <div>Hello! {name}</div>;
}

export default MyBasicOnUpdateReturnComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > class + ClassName + css 1`] = `
"import * as React from \\"react\\";
import MyComp from \\"./my-component\\";

function MyBasicComponent(props) {
  return (
    <div>
      <MyComp className=\\"test\\" className=\\"test2\\">
        Hello! I can run in React, Vue, Solid, or Liquid!
      </MyComp>
      <div
        className=\\"test2 test\\"
        css={{
          padding: \\"10px\\",
        }}
      >
        Hello! I can run in React, Vue, Solid, or Liquid!
      </div>
    </div>
  );
}

export default MyBasicComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > class + css 1`] = `
"import * as React from \\"react\\";

function MyBasicComponent(props) {
  return (
    <div
      className=\\"test\\"
      css={{
        padding: \\"10px\\",
      }}
    >
      Hello! I can run in React, Vue, Solid, or Liquid!
    </div>
  );
}

export default MyBasicComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > className + css 1`] = `
"import * as React from \\"react\\";

function MyBasicComponent(props) {
  return (
    <div
      className=\\"test\\"
      css={{
        padding: \\"10px\\",
      }}
    >
      Hello! I can run in React, Vue, Solid, or Liquid!
    </div>
  );
}

export default MyBasicComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > className 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";
import type { JSX } from \\"../../../../jsx-runtime\\";

function ClassNameCode(props) {
  const [bindings, setBindings] = useState(() => \\"a binding\\");

  return (
    <div>
      <div className=\\"no binding\\">Without Binding</div>
      <div className={bindings}>With binding</div>
    </div>
  );
}

export default ClassNameCode;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > classState 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function MyBasicComponent(props) {
  const [classState, setClassState] = useState(() => \\"testClassName\\");

  const [styleState, setStyleState] = useState(() => ({
    color: \\"red\\",
  }));

  return (
    <div
      className={classState}
      css={{
        padding: \\"10px\\",
      }}
      style={styleState}
    >
      Hello! I can run in React, Vue, Solid, or Liquid!
    </div>
  );
}

export default MyBasicComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > componentWithContext 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useContext } from \\"react\\";
import Context1 from \\"@dummy/1\\";
import Context2 from \\"@dummy/2\\";

function ComponentWithContext(props) {
  const foo = useContext(Context1);

  return (
    <Context2.Provider
      value={{
        bar: \\"baz\\",
      }}
    >
      <Context1.Provider
        value={{
          foo: \\"bar\\",

          content() {
            return props.content;
          },
        }}
      >
        <>{foo.value}</>
      </Context1.Provider>
    </Context2.Provider>
  );
}

export default ComponentWithContext;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > componentWithContextMultiRoot 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useContext } from \\"react\\";
import Context1 from \\"@dummy/1\\";
import Context2 from \\"@dummy/2\\";

function ComponentWithContext(props) {
  const foo = useContext(Context1);

  return (
    <Context2.Provider
      value={{
        bar: \\"baz\\",
      }}
    >
      <Context1.Provider
        value={{
          foo: \\"bar\\",

          content() {
            return props.content;
          },
        }}
      >
        <>
          <>{foo.value}</>
          <div>other</div>
        </>
      </Context1.Provider>
    </Context2.Provider>
  );
}

export default ComponentWithContext;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > contentState 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useContext } from \\"react\\";
import BuilderContext from \\"@dummy/context.js\\";

function RenderContent(props) {
  return (
    <BuilderContext.Provider
      value={{
        content: props.content,
        registeredComponents: props.customComponents,
      }}
    >
      <div>setting context</div>
    </BuilderContext.Provider>
  );
}

export default RenderContent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > defaultProps 1`] = `
"\\"use client\\";
import * as React from \\"react\\";

function Button(props) {
  return (
    <div>
      {props.link ? (
        <a
          {...props.attributes}
          href={props.link}
          target={props.openLinkInNewTab ? \\"_blank\\" : undefined}
        >
          {props.text}
        </a>
      ) : null}
      {!props.link ? (
        <button
          type=\\"button\\"
          {...props.attributes}
          onClick={(event) => props.onClick()}
        >
          {props.buttonText}
        </button>
      ) : null}
    </div>
  );
}

Button.defaultProps = {
  text: \\"default text\\",
  link: \\"https://builder.io/\\",
  openLinkInNewTab: false,
  onClick: () => {
    console.log(\\"hi\\");
  },
};

export default Button;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > defaultPropsOutsideComponent 1`] = `
"\\"use client\\";
import * as React from \\"react\\";

function Button(props) {
  return (
    <div>
      {props.link ? (
        <a
          {...props.attributes}
          href={props.link}
          target={props.openLinkInNewTab ? \\"_blank\\" : undefined}
        >
          {props.text}
        </a>
      ) : null}
      {!props.link ? (
        <button
          type=\\"button\\"
          {...props.attributes}
          onClick={(event) => props.onClick(event)}
        >
          {props.text}
        </button>
      ) : null}
    </div>
  );
}

Button.defaultProps = {
  text: \\"default text\\",
  link: \\"https://builder.io/\\",
  openLinkInNewTab: false,
  onClick: () => {},
};

export default Button;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > defaultValsWithTypes 1`] = `
"import * as React from \\"react\\";

const DEFAULT_VALUES: Props = {
  name: \\"Sami\\",
};

function ComponentWithTypes(props) {
  return <div> Hello {props.name || DEFAULT_VALUES.name}</div>;
}

export default ComponentWithTypes;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > expressionState 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function MyComponent(props) {
  const [refToUse, setRefToUse] = useState(() =>
    !(props.componentRef instanceof Function) ? props.componentRef : null
  );

  return <div>{refToUse}</div>;
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > getterState 1`] = `
"import * as React from \\"react\\";

function Button(props) {
  function foo2() {
    return props.foo + \\"foo\\";
  }

  function bar() {
    return \\"bar\\";
  }

  function baz(i: number) {
    return i + foo2().length;
  }

  return (
    <div>
      <p>{foo2()}</p>
      <p>{bar()}</p>
      <p>{baz(1)}</p>
    </div>
  );
}

export default Button;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > import types 1`] = `
"import * as React from \\"react\\";
import { BuilderContent, GetContentOptions } from \\"@builder.io/sdk\\";
import RenderBlock, { RenderBlockProps } from \\"./builder-render-block.raw\\";

function RenderContent(props) {
  function getRenderContentProps(block, index) {
    return {
      block: block,
      index: index,
    };
  }

  return (
    <RenderBlock
      {...state.getRenderContentProps(props.renderContentProps.block, 0)}
    />
  );
}

export default RenderContent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > multipleOnUpdate 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useEffect } from \\"react\\";

function MultipleOnUpdate(props) {
  useEffect(() => {
    console.log(\\"Runs on every update/rerender\\");
  });
  useEffect(() => {
    console.log(\\"Runs on every update/rerender as well\\");
  });

  return <div />;
}

export default MultipleOnUpdate;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > multipleOnUpdateWithDeps 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useEffect } from \\"react\\";

function MultipleOnUpdateWithDeps(props) {
  const [a, setA] = useState(() => \\"a\\");

  const [b, setB] = useState(() => \\"b\\");

  const [c, setC] = useState(() => \\"c\\");

  const [d, setD] = useState(() => \\"d\\");

  useEffect(() => {
    console.log(\\"Runs when a or b changes\\", a, b);

    if (a === \\"a\\") {
      setA(\\"b\\");
    }
  }, [a, b]);
  useEffect(() => {
    console.log(\\"Runs when c or d changes\\", c, d);

    if (a === \\"a\\") {
      setA(\\"b\\");
    }
  }, [c, d]);

  return <div />;
}

export default MultipleOnUpdateWithDeps;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > multipleSpreads 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function MyBasicComponent(props) {
  const [attrs, setAttrs] = useState(() => ({
    hello: \\"world\\",
  }));

  return <input {...state.attrs} {...props} />;
}

export default MyBasicComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > nestedShow 1`] = `
"import * as React from \\"react\\";

function NestedShow(props) {
  return (
    <>
      {props.conditionA ? (
        <>
          {!props.conditionB ? (
            <div>if condition A and condition B</div>
          ) : (
            <div>else-condition-B</div>
          )}
        </>
      ) : (
        <div>else-condition-A</div>
      )}
    </>
  );
}

export default NestedShow;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > nestedStyles 1`] = `
"import * as React from \\"react\\";

function NestedStyles(props) {
  return (
    <div
      css={{
        display: \\"flex\\",
        \\"--bar\\": \\"red\\",
        color: \\"var(--bar)\\",
        \\"@media (max-width: env(--mobile))\\": {
          display: \\"block\\",
        },
        \\"&:hover\\": {
          display: \\"flex\\",
        },
        \\":active\\": {
          display: \\"inline\\",
        },
        \\".nested-selector\\": {
          display: \\"grid\\",
        },
        \\".nested-selector:hover\\": {
          display: \\"block\\",
        },
        \\"&.nested-selector:active\\": {
          display: \\"inline-block\\",
        },
      }}
    >
      Hello world
    </div>
  );
}

export default NestedStyles;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > onEvent 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useRef, useEffect } from \\"react\\";

function Embed(props) {
  const elem = useRef(null);
  function foo(event) {
    console.log(\\"test2\\");
  }

  function elem_onInitEditingBldr(event) {
    console.log(\\"test\\");
    foo(event);
  }

  useEffect(() => {
    elem.current?.addEventListener(\\"initEditingBldr\\", elem_onInitEditingBldr);
    return () =>
      elem.current?.removeEventListener(
        \\"initEditingBldr\\",
        elem_onInitEditingBldr
      );
  }, []);

  useEffect(() => {
    elem.current.dispatchEvent(new CustomEvent(\\"initEditingBldr\\"));
  }, []);

  return (
    <div className=\\"builder-embed\\" ref={elem}>
      <div>Test</div>
    </div>
  );
}

export default Embed;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > onInit & onMount 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useRef, useEffect } from \\"react\\";

function OnInit(props) {
  const hasInitialized = useRef(false);
  if (!hasInitialized.current) {
    console.log(\\"onInit\\");
    hasInitialized.current = true;
  }

  useEffect(() => {
    console.log(\\"onMount\\");
  }, []);

  return <div />;
}

export default OnInit;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > onInit 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useRef } from \\"react\\";

export const defaultValues = {
  name: \\"PatrickJS\\",
};

function OnInit(props) {
  const [name, setName] = useState(() => \\"\\");

  const hasInitialized = useRef(false);
  if (!hasInitialized.current) {
    setName(defaultValues.name || props.name);
    console.log(\\"set defaults with props\\");
    hasInitialized.current = true;
  }

  return <div>Default name defined by parent {name}</div>;
}

export default OnInit;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > onInitPlain 1`] = `
"import * as React from \\"react\\";
import { useRef } from \\"react\\";

function OnInitPlain(props) {
  const hasInitialized = useRef(false);
  if (!hasInitialized.current) {
    console.log(\\"onInit\\");
    hasInitialized.current = true;
  }

  return <div />;
}

export default OnInitPlain;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > onMount 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useEffect } from \\"react\\";

function Comp(props) {
  useEffect(() => {
    console.log(\\"Runs on mount\\");
  }, []);

  useEffect(() => {
    return () => {
      console.log(\\"Runs on unMount\\");
    };
  }, []);

  return <div />;
}

export default Comp;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > onMountMultiple 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useEffect } from \\"react\\";

function Comp(props) {
  useEffect(() => {
    console.log(\\"Runs on mount\\");
  }, []);
  useEffect(() => {
    console.log(\\"Another one runs on Mount\\");
  }, []);
  useEffect(() => {
    console.log(\\"SSR runs on Mount\\");
  }, []);

  return <div />;
}

export default Comp;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > onUpdate 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useEffect } from \\"react\\";

function OnUpdate(props) {
  useEffect(() => {
    console.log(\\"Runs on every update/rerender\\");
  });

  return <div />;
}

export default OnUpdate;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > onUpdateWithDeps 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useEffect } from \\"react\\";

function OnUpdateWithDeps(props) {
  const [a, setA] = useState(() => \\"a\\");

  const [b, setB] = useState(() => \\"b\\");

  useEffect(() => {
    console.log(\\"Runs when a, b or size changes\\", a, b, props.size);
  }, [a, b, props.size]);

  return <div />;
}

export default OnUpdateWithDeps;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > preserveExportOrLocalStatement 1`] = `
"import * as React from \\"react\\";

const b = 3;
const foo = () => {};
export const a = 3;
export const bar = () => {};
export function run<T>(value: T) {}

function MyBasicComponent(props) {
  return <div />;
}

export default MyBasicComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > preserveTyping 1`] = `
"import * as React from \\"react\\";

function MyBasicComponent(props) {
  return (
    <div>Hello! I can run in React, Vue, Solid, or Liquid! {props.name}</div>
  );
}

export default MyBasicComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > propsDestructure 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function MyBasicComponent(props) {
  const [name, setName] = useState(() => \\"Decadef20\\");

  return (
    <div>
      {props.children}
      {props.type}
      Hello! I can run in React, Vue, Solid, or Liquid!
    </div>
  );
}

export default MyBasicComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > propsInterface 1`] = `
"import * as React from \\"react\\";

function MyBasicComponent(props) {
  return (
    <div>Hello! I can run in React, Vue, Solid, or Liquid! {props.name}</div>
  );
}

export default MyBasicComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > propsType 1`] = `
"import * as React from \\"react\\";

function MyBasicComponent(props) {
  return (
    <div>Hello! I can run in React, Vue, Solid, or Liquid! {props.name}</div>
  );
}

export default MyBasicComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > referencingFunInsideHook 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useEffect } from \\"react\\";

function OnUpdate(props) {
  function foo(params) {}

  function bar() {}

  function zoo() {
    const params = {
      cb: bar,
    };
  }

  useEffect(() => {
    foo({
      someOption: bar,
    });
  });

  return <div />;
}

export default OnUpdate;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > renderBlock 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";
import { TARGET } from \\"../../constants/target.js\\";
import type {
  BuilderContextInterface,
  RegisteredComponent,
} from \\"../../context/types.js\\";
import { evaluate } from \\"../../functions/evaluate.js\\";
import { extractTextStyles } from \\"../../functions/extract-text-styles.js\\";
import { getBlockActions } from \\"../../functions/get-block-actions.js\\";
import { getBlockComponentOptions } from \\"../../functions/get-block-component-options.js\\";
import { getBlockProperties } from \\"../../functions/get-block-properties.js\\";
import { getBlockTag } from \\"../../functions/get-block-tag.js\\";
import { getProcessedBlock } from \\"../../functions/get-processed-block.js\\";
import { getReactNativeBlockStyles } from \\"../../functions/get-react-native-block-styles.js\\";
import type { BuilderBlock } from \\"../../types/builder-block.js\\";
import type { Nullable } from \\"../../types/typescript.js\\";
import BlockStyles from \\"./block-styles\\";
import { isEmptyHtmlElement } from \\"./render-block.helpers.js\\";
import RenderComponentWithContext from \\"./render-component-with-context.js\\";
import type { RenderComponentProps } from \\"./render-component\\";
import RenderComponent from \\"./render-component\\";
import RenderRepeatedBlock from \\"./render-repeated-block\\";
import type { RepeatData } from \\"./types.js\\";

function RenderBlock(props) {
  function component() {
    const componentName = getProcessedBlock({
      block: props.block,
      state: props.context.state,
      context: props.context.context,
      shouldEvaluateBindings: false,
    }).component?.name;

    if (!componentName) {
      return null;
    }

    const ref = props.context.registeredComponents[componentName];

    if (!ref) {
      // TODO: Public doc page with more info about this message
      console.warn(\`
          Could not find a registered component named \\"\${componentName}\\".
          If you registered it, is the file that registered it imported by the file that needs to render it?\`);
      return undefined;
    } else {
      return ref;
    }
  }

  function tag() {
    return getBlockTag(useBlock());
  }

  function useBlock() {
    return repeatItemData()
      ? props.block
      : getProcessedBlock({
          block: props.block,
          state: props.context.state,
          context: props.context.context,
          shouldEvaluateBindings: true,
        });
  }

  function actions() {
    return getBlockActions({
      block: useBlock(),
      state: props.context.state,
      context: props.context.context,
    });
  }

  function attributes() {
    const blockProperties = getBlockProperties(useBlock());
    return {
      ...blockProperties,
      ...(TARGET === \\"reactNative\\"
        ? {
            style: getReactNativeBlockStyles({
              block: useBlock(),
              context: props.context,
              blockStyles: blockProperties.style,
            }),
          }
        : {}),
    };
  }

  function shouldWrap() {
    return !component?.()?.noWrap;
  }

  function renderComponentProps() {
    return {
      blockChildren: useChildren(),
      componentRef: component?.()?.component,
      componentOptions: {
        ...getBlockComponentOptions(useBlock()),

        /**
         * These attributes are passed to the wrapper element when there is one. If \`noWrap\` is set to true, then
         * they are provided to the component itself directly.
         */
        ...(shouldWrap()
          ? {}
          : {
              attributes: { ...attributes(), ...actions() },
            }),
        customBreakpoints: childrenContext?.()?.content?.meta?.breakpoints,
      },
      context: childrenContext(),
    };
  }

  function useChildren() {
    // TO-DO: When should \`canHaveChildren\` dictate rendering?
    // This is currently commented out because some Builder components (e.g. Box) do not have \`canHaveChildren: true\`,
    // but still receive and need to render children.
    // return state.componentInfo?.canHaveChildren ? useBlock().children : [];
    return useBlock().children ?? [];
  }

  function childrenWithoutParentComponent() {
    /**
     * When there is no \`componentRef\`, there might still be children that need to be rendered. In this case,
     * we render them outside of \`componentRef\`.
     * NOTE: We make sure not to render this if \`repeatItemData\` is non-null, because that means we are rendering an array of
     * blocks, and the children will be repeated within those blocks.
     */
    const shouldRenderChildrenOutsideRef =
      !component?.()?.component && !repeatItemData();
    return shouldRenderChildrenOutsideRef ? useChildren() : [];
  }

  function repeatItemData() {
    /**
     * we don't use \`useBlock()\` here because the processing done within its logic includes evaluating the block's bindings,
     * which will not work if there is a repeat.
     */
    const { repeat, ...blockWithoutRepeat } = props.block;

    if (!repeat?.collection) {
      return undefined;
    }

    const itemsArray = evaluate({
      code: repeat.collection,
      state: props.context.state,
      context: props.context.context,
    });

    if (!Array.isArray(itemsArray)) {
      return undefined;
    }

    const collectionName = repeat.collection.split(\\".\\").pop();
    const itemNameToUse =
      repeat.itemName || (collectionName ? collectionName + \\"Item\\" : \\"item\\");
    const repeatArray = itemsArray.map<RepeatData>((item, index) => ({
      context: {
        ...props.context,
        state: {
          ...props.context.state,
          $index: index,
          $item: item,
          [itemNameToUse]: item,
          [\`$\${itemNameToUse}Index\`]: index,
        },
      },
      block: blockWithoutRepeat,
    }));
    return repeatArray;
  }

  function inheritedTextStyles() {
    if (TARGET !== \\"reactNative\\") {
      return {};
    }

    const styles = getReactNativeBlockStyles({
      block: useBlock(),
      context: props.context,
      blockStyles: attributes().style,
    });
    return extractTextStyles(styles);
  }

  function childrenContext() {
    return {
      apiKey: props.context.apiKey,
      state: props.context.state,
      content: props.context.content,
      context: props.context.context,
      registeredComponents: props.context.registeredComponents,
      inheritedStyles: inheritedTextStyles(),
    };
  }

  function renderComponentTag() {
    if (TARGET === \\"reactNative\\") {
      return RenderComponentWithContext;
    } else if (TARGET === \\"vue3\\") {
      // vue3 expects a string for the component tag
      return \\"RenderComponent\\";
    } else {
      return RenderComponent;
    }
  }

  const [componentInfo, setComponentInfo] = useState(() => null);

  const RenderComponentTagRef = renderComponentTag();
  const TagRef = tag();

  return (
    <>
      {shouldWrap() ? (
        <>
          {isEmptyHtmlElement(tag()) ? (
            <TagRef {...attributes()} {...actions()} />
          ) : null}
          {!isEmptyHtmlElement(tag()) && repeatItemData() ? (
            <>
              {repeatItemData()?.map((data, index) => (
                <RenderRepeatedBlock
                  key={index}
                  repeatContext={data.context}
                  block={data.block}
                />
              ))}
            </>
          ) : null}
          {!isEmptyHtmlElement(tag()) && !repeatItemData() ? (
            <TagRef {...attributes()} {...actions()}>
              <RenderComponentTagRef {...renderComponentProps()} />
              {childrenWithoutParentComponent()?.map((child) => (
                <RenderBlock
                  key={\\"render-block-\\" + child.id}
                  block={child}
                  context={childrenContext()}
                />
              ))}
              {childrenWithoutParentComponent()?.map((child) => (
                <BlockStyles
                  key={\\"block-style-\\" + child.id}
                  block={child}
                  context={childrenContext()}
                />
              ))}
            </TagRef>
          ) : null}
        </>
      ) : (
        <>
          <RenderComponentTagRef {...renderComponentProps()} />
        </>
      )}
    </>
  );
}

export default RenderBlock;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > renderContentExample 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useContext, useEffect } from \\"react\\";
import BuilderContext from \\"@dummy/context.js\\";
import {
  dispatchNewContentToVisualEditor,
  sendComponentsToVisualEditor,
  trackClick,
} from \\"@dummy/injection-js\\";
import RenderBlocks from \\"@dummy/RenderBlocks\\";

function RenderContent(props) {
  useEffect(() => {
    sendComponentsToVisualEditor(props.customComponents);
  }, []);

  useEffect(() => {
    dispatchNewContentToVisualEditor(props.content);
  }, [props.content]);

  return (
    <BuilderContext.Provider
      value={{
        get content() {
          return 3;
        },

        get registeredComponents() {
          return 4;
        },
      }}
    >
      <div
        css={{
          display: \\"flex\\",
          flexDirection: \\"columns\\",
        }}
        onClick={(event) => trackClick(props.content.id)}
      >
        <RenderBlocks blocks={props.content.blocks} />
      </div>
    </BuilderContext.Provider>
  );
}

export default RenderContent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > rootFragmentMultiNode 1`] = `
"import * as React from \\"react\\";

function Button(props) {
  return (
    <>
      {props.link ? (
        <a
          {...props.attributes}
          href={props.link}
          target={props.openLinkInNewTab ? \\"_blank\\" : undefined}
        >
          {props.text}
        </a>
      ) : null}
      {!props.link ? (
        <button type=\\"button\\" {...props.attributes}>
          {props.text}
        </button>
      ) : null}
    </>
  );
}

export default Button;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > rootShow 1`] = `
"import * as React from \\"react\\";

function RenderStyles(props) {
  return (
    <>
      {props.foo === \\"bar\\" ? (
        <>
          <div>Bar</div>
        </>
      ) : (
        <div>Foo</div>
      )}
    </>
  );
}

export default RenderStyles;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > self-referencing component 1`] = `
"import * as React from \\"react\\";

function MyComponent(props) {
  return (
    <div>
      {props.name}
      {props.name === \\"Batman\\" ? <MyComponent name=\\"Bruce Wayne\\" /> : null}
    </div>
  );
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > self-referencing component with children 1`] = `
"import * as React from \\"react\\";

function MyComponent(props) {
  return (
    <div>
      {props.name}
      {props.children}
      {props.name === \\"Batman\\" ? (
        <MyComponent name=\\"Bruce\\">
          <div>Wayne</div>
        </MyComponent>
      ) : null}
    </div>
  );
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > showExpressions 1`] = `
"import * as React from \\"react\\";

function ShowWithOtherValues(props) {
  return (
    <div>
      {props.conditionA ? <>Content0</> : <>ContentA</>}
      {props.conditionA ? <>ContentA</> : null}
      {props.conditionA ? <></> : <>ContentA</>}
      {props.conditionA ? <>ContentB</> : <>{undefined}</>}
      {props.conditionA ? <>{undefined}</> : <>ContentB</>}
      {props.conditionA ? <>ContentC</> : null}
      {props.conditionA ? <></> : <>ContentC</>}
      {props.conditionA ? <>ContentD</> : null}
      {props.conditionA ? <></> : <>ContentD</>}
      {props.conditionA ? <>ContentE</> : <>hello</>}
      {props.conditionA ? <>hello</> : <>ContentE</>}
      {props.conditionA ? <>ContentF</> : <>123</>}
      {props.conditionA ? <>123</> : <>ContentF</>}
      {props.conditionA === \\"Default\\" ? (
        <>4mb</>
      ) : props.conditionB === \\"Complete\\" ? (
        <>20mb</>
      ) : (
        <>9mb</>
      )}
      {props.conditionA === \\"Default\\" ? (
        <>{props.conditionB === \\"Complete\\" ? <>20mb</> : <>9mb</>}</>
      ) : (
        <>4mb</>
      )}
      {props.conditionA === \\"Default\\" ? (
        <>{props.conditionB === \\"Complete\\" ? <div>complete</div> : <>9mb</>}</>
      ) : props.conditionC === \\"Complete\\" ? (
        <>dff</>
      ) : (
        <div>complete else</div>
      )}
    </div>
  );
}

export default ShowWithOtherValues;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > showWithFor 1`] = `
"import * as React from \\"react\\";

function NestedShow(props) {
  return (
    <>
      {props.conditionA ? (
        <>
          {props.items?.map((item, idx) => (
            <div key={idx}>{item}</div>
          ))}
        </>
      ) : (
        <div>else-condition-A</div>
      )}
    </>
  );
}

export default NestedShow;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > showWithOtherValues 1`] = `
"import * as React from \\"react\\";

function ShowWithOtherValues(props) {
  return (
    <div>
      {props.conditionA ? <>ContentA</> : null}
      {props.conditionA ? <>ContentB</> : <>{undefined}</>}
      {props.conditionA ? <>ContentC</> : null}
      {props.conditionA ? <>ContentD</> : null}
      {props.conditionA ? <>ContentE</> : <>hello</>}
      {props.conditionA ? <>ContentF</> : <>123</>}
    </div>
  );
}

export default ShowWithOtherValues;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > showWithRootText 1`] = `
"import * as React from \\"react\\";

function ShowRootText(props) {
  return <>{props.conditionA ? <>ContentA</> : <div>else-condition-A</div>}</>;
}

export default ShowRootText;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > signalsOnUpdate 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useEffect } from \\"react\\";

function MyBasicComponent(props) {
  useEffect(() => {
    console.log(\\"props.id changed\\", props.id);
    console.log(\\"props.foo.value.bar.baz changed\\", props.foo.bar.baz);
  }, [props.id, props.foo.bar.baz]);

  return (
    <div
      className=\\"test\\"
      css={{
        padding: \\"10px\\",
      }}
    >
      {props.id}
      {props.foo.bar.baz}
    </div>
  );
}

export default MyBasicComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > spreadAttrs 1`] = `
"import * as React from \\"react\\";

function MyBasicComponent(props) {
  return <input {...attrs} />;
}

export default MyBasicComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > spreadNestedProps 1`] = `
"import * as React from \\"react\\";

function MyBasicComponent(props) {
  return <input {...props.nested} />;
}

export default MyBasicComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > spreadProps 1`] = `
"import * as React from \\"react\\";

function MyBasicComponent(props) {
  return <input {...props} />;
}

export default MyBasicComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > store-async-function 1`] = `
"import * as React from \\"react\\";

function StringLiteralStore(props) {
  async function arrowFunction() {
    return Promise.resolve();
  }

  async function namedFunction() {
    return Promise.resolve();
  }

  async function fetchUsers() {
    return Promise.resolve();
  }

  return <div />;
}

export default StringLiteralStore;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > string-literal-store 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function StringLiteralStore(props) {
  const [foo, setFoo] = useState(() => 123);

  return <div>{foo}</div>;
}

export default StringLiteralStore;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > styleClassAndCss 1`] = `
"import * as React from \\"react\\";

function MyComponent(props) {
  return (
    <div
      className=\\"builder-column\\"
      style={{
        width: \\"100%\\",
      }}
      css={{
        display: \\"flex\\",
        flexDirection: \\"column\\",
        alignItems: \\"stretch\\",
      }}
    />
  );
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > stylePropClassAndCss 1`] = `
"import * as React from \\"react\\";

function StylePropClassAndCss(props) {
  return (
    <div
      style={props.attributes.style}
      css={{
        display: \\"flex\\",
        flexDirection: \\"column\\",
        alignItems: \\"stretch\\",
      }}
      className={props.attributes.class}
    />
  );
}

export default StylePropClassAndCss;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > subComponent 1`] = `
"import * as React from \\"react\\";
import Foo from \\"./foo-sub-component\\";

function SubComponent(props) {
  return <Foo />;
}

export default SubComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > svgComponent 1`] = `
"import * as React from \\"react\\";

function SvgComponent(props) {
  return (
    <svg
      fill=\\"none\\"
      role=\\"img\\"
      viewBox={\\"0 0 \\" + 42 + \\" \\" + 42}
      width={42}
      height={42}
    >
      <defs>
        <filter id=\\"prefix__filter0_f\\" filterUnits=\\"userSpaceOnUse\\">
          <feFlood result=\\"BackgroundImageFix\\" />
          <feBlend in=\\"SourceGraphic\\" in2=\\"BackgroundImageFix\\" result=\\"shape\\" />
          <feGaussianBlur result=\\"effect1_foregroundBlur\\" stdDeviation={7} />
        </filter>
      </defs>
    </svg>
  );
}

export default SvgComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > typeDependency 1`] = `
"import * as React from \\"react\\";
import type { Foo } from \\"./foo-type\\";
import type { Foo as Foo2 } from \\"./type-export\\";

function TypeDependency(props) {
  return <div>{props.foo}</div>;
}

export default TypeDependency;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > typeExternalStore 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";
import { FooStore } from \\"./foo-store\\";

function TypeExternalStore(props) {
  const [_name, set_name] = useState(() => \\"test\\");

  return <div>Hello {_name}! </div>;
}

export default TypeExternalStore;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > typeGetterStore 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function TypeGetterStore(props) {
  const [name, setName] = useState(() => \\"test\\");

  function getName() {
    if (name === \\"a\\") {
      return \\"b\\";
    }

    return name;
  }

  function test() {
    return \\"test\\";
  }

  return <div>Hello {name}! </div>;
}

export default TypeGetterStore;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > use-style 1`] = `
"import * as React from \\"react\\";

function MyComponent(props) {
  return (
    <>
      <button type=\\"button\\">Button</button>

      <style>{\`
        button {
            background: blue;
            color: white;
            font-size: 12px;
            outline: 1px solid black;
        }
    \`}</style>
    </>
  );
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > use-style-and-css 1`] = `
"import * as React from \\"react\\";

function MyComponent(props) {
  return (
    <>
      <button
        type=\\"button\\"
        css={{
          background: \\"blue\\",
          color: \\"white\\",
        }}
      >
        Button
      </button>

      <style>{\`
        button {
            font-size: 12px;
            outline: 1px solid black;
        }
    \`}</style>
    </>
  );
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > use-style-outside-component 1`] = `
"import * as React from \\"react\\";

function MyComponent(props) {
  return (
    <>
      <button type=\\"button\\">Button</button>

      <style>{\`
  button {
      background: blue;
      color: white;
      font-size: 12px;
      outline: 1px solid black;
  }
\`}</style>
    </>
  );
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > useTarget 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useEffect } from \\"react\\";

function UseTargetComponent(props) {
  function name() {
    const prefix = 123;
    return prefix + \\"foo\\";
  }

  const [lastName, setLastName] = useState(() => \\"bar\\");

  const [foo, setFoo] = useState(() => \\"bar\\");

  useEffect(() => {
    console.log(foo);
    setFoo(\\"bar\\");
    console.log(\\"react\\");
    setLastName(\\"baz\\");
    console.log(foo);
    setFoo(\\"baz\\");
  }, []);

  return <div>{name()}</div>;
}

export default UseTargetComponent;
"
`;

exports[`Mitosis, format: react > jsx > Typescript Test > webComponent 1`] = `
"import * as React from \\"react\\";
import { useRef } from \\"react\\";
import { register } from \\"swiper/element/bundle\\";

function MyBasicWebComponent(props) {
  const hasInitialized = useRef(false);
  if (!hasInitialized.current) {
    register();
    hasInitialized.current = true;
  }

  return (
    <swiper-container slides-per-view=\\"3\\" navigation=\\"true\\" pagination=\\"true\\">
      <swiper-slide>Slide 1</swiper-slide>
      <swiper-slide>Slide 2</swiper-slide>
      <swiper-slide>Slide 3</swiper-slide>
    </swiper-container>
  );
}

export default MyBasicWebComponent;
"
`;

exports[`Mitosis, format: react > svelte > Javascript Test > basic 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function MyComponent(props) {
  const [name, setName] = useState(() => \\"Steve\\");

  return (
    <div>
      <input onChange={(event) => setName(event.target.value)} value={name} />
      Hello! I can run in React, Vue, Solid, or Liquid!
    </div>
  );
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > svelte > Javascript Test > bindGroup 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function MyComponent(props) {
  const [tortilla, setTortilla] = useState(() => \\"Plain\\");

  const [fillings, setFillings] = useState(() => []);

  return (
    <div>
      <input
        type=\\"radio\\"
        value=\\"Plain\\"
        checked={tortilla === \\"Plain\\"}
        onChange={(event) => setTortilla(event.target.value)}
      />
      <input
        type=\\"radio\\"
        value=\\"Whole wheat\\"
        checked={tortilla === \\"Whole wheat\\"}
        onChange={(event) => setTortilla(event.target.value)}
      />
      <input
        type=\\"radio\\"
        value=\\"Spinach\\"
        checked={tortilla === \\"Spinach\\"}
        onChange={(event) => setTortilla(event.target.value)}
      />
      <br />
      <br />
      <input
        type=\\"checkbox\\"
        value=\\"Rice\\"
        checked={fillings === \\"Rice\\"}
        onChange={(event) => setFillings(event.target.value)}
      />
      <input
        type=\\"checkbox\\"
        value=\\"Beans\\"
        checked={fillings === \\"Beans\\"}
        onChange={(event) => setFillings(event.target.value)}
      />
      <input
        type=\\"checkbox\\"
        value=\\"Cheese\\"
        checked={fillings === \\"Cheese\\"}
        onChange={(event) => setFillings(event.target.value)}
      />
      <input
        type=\\"checkbox\\"
        value=\\"Guac (extra)\\"
        checked={fillings === \\"Guac (extra)\\"}
        onChange={(event) => setFillings(event.target.value)}
      />
      <p>Tortilla: {tortilla}</p>
      <p>Fillings: {fillings}</p>
    </div>
  );
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > svelte > Javascript Test > bindProperty 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function MyComponent(props) {
  const [value, setValue] = useState(() => \\"hello\\");

  return <input value={value} />;
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > svelte > Javascript Test > classDirective 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function MyComponent(props) {
  const [focus, setFocus] = useState(() => true);

  return (
    <input
      className={\`form-input \${props.disabled ? \\"disabled\\" : \\"\\"} \${
        focus ? \\"focus\\" : \\"\\"
      }\`}
    />
  );
}

MyComponent.defaultProps = {};

export default MyComponent;
"
`;

exports[`Mitosis, format: react > svelte > Javascript Test > context 1`] = `
"'>' expected. (35:13)
  33 | return (
  34 |
> 35 | <'activeTab'.Provider  value={activeTab}><div>{activeTab}</div></'activeTab'.Provider>
     |             ^
  36 |
  37 |
  38 |"
`;

exports[`Mitosis, format: react > svelte > Javascript Test > each 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function MyComponent(props) {
  const [numbers, setNumbers] = useState(() => [\\"one\\", \\"two\\", \\"three\\"]);

  return (
    <ul>
      {numbers?.map((num) => (
        <li>{num}</li>
      ))}
    </ul>
  );
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > svelte > Javascript Test > eventHandlers 1`] = `
"\\"use client\\";
import * as React from \\"react\\";

function MyComponent(props) {
  function log(msg = \\"hello\\") {
    console.log(msg);
  }

  return (
    <div>
      <button onClick={(a) => log(\\"hi\\")}>Log</button>
      <button onClick={(event) => log(event)}>Log</button>
      <button onClick={(event) => log(event)}>Log</button>
    </div>
  );
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > svelte > Javascript Test > html 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function MyComponent(props) {
  const [html, setHtml] = useState(() => \\"<b>bold</b>\\");

  return <div dangerouslySetInnerHTML={{ __html: html }} />;
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > svelte > Javascript Test > ifElse 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function MyComponent(props) {
  const [show, setShow] = useState(() => true);

  function toggle() {
    setShow(!show);
  }

  return (
    <>
      {show ? (
        <>
          <button onClick={(event) => toggle(event)}> Hide </button>
        </>
      ) : (
        <button onClick={(event) => toggle(event)}> Show </button>
      )}
    </>
  );
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > svelte > Javascript Test > imports 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";
import Button from \\"./Button\\";

function MyComponent(props) {
  const [disabled, setDisabled] = useState(() => false);

  return (
    <div>
      <Button type=\\"button\\" disabled={disabled}>
        <>{props.children}</>
      </Button>
    </div>
  );
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > svelte > Javascript Test > lifecycleHooks 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useEffect } from \\"react\\";

function MyComponent(props) {
  useEffect(() => {
    console.log(\\"onMount\\");
  }, []);

  useEffect(() => {
    console.log(\\"onAfterUpdate\\");
  });

  useEffect(() => {
    return () => {
      console.log(\\"onDestroy\\");
    };
  }, []);

  return <div />;
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > svelte > Javascript Test > reactive 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function MyComponent(props) {
  const [name, setName] = useState(() => \\"Steve\\");

  function lowercaseName() {
    return name.toLowerCase();
  }

  return (
    <div>
      <input value={name} />
      Lowercase: {lowercaseName()}
    </div>
  );
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > svelte > Javascript Test > reactiveWithFn 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useEffect } from \\"react\\";

function MyComponent(props) {
  const [a, setA] = useState(() => 2);

  const [b, setB] = useState(() => 5);

  const [result, setResult] = useState(() => null);

  function calculateResult(a_, b_) {
    setResult(a_ * b_);
  }

  useEffect(() => {
    calculateResult(a, b);
  }, [a, b]);

  return (
    <div>
      <input
        type=\\"number\\"
        onChange={(event) => setA(event.target.value)}
        value={a}
      />
      <input
        type=\\"number\\"
        onChange={(event) => setB(event.target.value)}
        value={b}
      />
      Result: {result}
    </div>
  );
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > svelte > Javascript Test > slots 1`] = `
"import * as React from \\"react\\";

function MyComponent(props) {
  return (
    <div>
      <>{props.children || \\"default\\"}</>
      <>{props.Test || <div>default</div>}</>
    </div>
  );
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > svelte > Javascript Test > style 1`] = `
"import * as React from \\"react\\";

function MyComponent(props) {
  return (
    <>
      <input className=\\"form-input\\" />

      <style>{\`
  input {
    color: red;
    font-size: 12px;
  }

  .form-input:focus {
    outline: 1px solid blue;
  }
\`}</style>
    </>
  );
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > svelte > Javascript Test > textExpressions 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function MyComponent(props) {
  const [a, setA] = useState(() => 5);

  const [b, setB] = useState(() => 12);

  return (
    <div>
      normal:
      {a + b}
      <br />
      conditional
      {a > 2 ? \\"hello\\" : \\"bye\\"}
    </div>
  );
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > svelte > Typescript Test > basic 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function MyComponent(props) {
  const [name, setName] = useState(() => \\"Steve\\");

  return (
    <div>
      <input onChange={(event) => setName(event.target.value)} value={name} />
      Hello! I can run in React, Vue, Solid, or Liquid!
    </div>
  );
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > svelte > Typescript Test > bindGroup 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function MyComponent(props) {
  const [tortilla, setTortilla] = useState(() => \\"Plain\\");

  const [fillings, setFillings] = useState(() => []);

  return (
    <div>
      <input
        type=\\"radio\\"
        value=\\"Plain\\"
        checked={tortilla === \\"Plain\\"}
        onChange={(event) => setTortilla(event.target.value)}
      />
      <input
        type=\\"radio\\"
        value=\\"Whole wheat\\"
        checked={tortilla === \\"Whole wheat\\"}
        onChange={(event) => setTortilla(event.target.value)}
      />
      <input
        type=\\"radio\\"
        value=\\"Spinach\\"
        checked={tortilla === \\"Spinach\\"}
        onChange={(event) => setTortilla(event.target.value)}
      />
      <br />
      <br />
      <input
        type=\\"checkbox\\"
        value=\\"Rice\\"
        checked={fillings === \\"Rice\\"}
        onChange={(event) => setFillings(event.target.value)}
      />
      <input
        type=\\"checkbox\\"
        value=\\"Beans\\"
        checked={fillings === \\"Beans\\"}
        onChange={(event) => setFillings(event.target.value)}
      />
      <input
        type=\\"checkbox\\"
        value=\\"Cheese\\"
        checked={fillings === \\"Cheese\\"}
        onChange={(event) => setFillings(event.target.value)}
      />
      <input
        type=\\"checkbox\\"
        value=\\"Guac (extra)\\"
        checked={fillings === \\"Guac (extra)\\"}
        onChange={(event) => setFillings(event.target.value)}
      />
      <p>Tortilla: {tortilla}</p>
      <p>Fillings: {fillings}</p>
    </div>
  );
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > svelte > Typescript Test > bindProperty 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function MyComponent(props) {
  const [value, setValue] = useState(() => \\"hello\\");

  return <input value={value} />;
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > svelte > Typescript Test > classDirective 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function MyComponent(props) {
  const [focus, setFocus] = useState(() => true);

  return (
    <input
      className={\`form-input \${props.disabled ? \\"disabled\\" : \\"\\"} \${
        focus ? \\"focus\\" : \\"\\"
      }\`}
    />
  );
}

MyComponent.defaultProps = {};

export default MyComponent;
"
`;

exports[`Mitosis, format: react > svelte > Typescript Test > context 1`] = `
"'>' expected. (35:13)
  33 | return (
  34 |
> 35 | <'activeTab'.Provider  value={activeTab}><div>{activeTab}</div></'activeTab'.Provider>
     |             ^
  36 |
  37 |
  38 |"
`;

exports[`Mitosis, format: react > svelte > Typescript Test > each 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function MyComponent(props) {
  const [numbers, setNumbers] = useState(() => [\\"one\\", \\"two\\", \\"three\\"]);

  return (
    <ul>
      {numbers?.map((num) => (
        <li>{num}</li>
      ))}
    </ul>
  );
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > svelte > Typescript Test > eventHandlers 1`] = `
"\\"use client\\";
import * as React from \\"react\\";

function MyComponent(props) {
  function log(msg = \\"hello\\") {
    console.log(msg);
  }

  return (
    <div>
      <button onClick={(a) => log(\\"hi\\")}>Log</button>
      <button onClick={(event) => log(event)}>Log</button>
      <button onClick={(event) => log(event)}>Log</button>
    </div>
  );
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > svelte > Typescript Test > html 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function MyComponent(props) {
  const [html, setHtml] = useState(() => \\"<b>bold</b>\\");

  return <div dangerouslySetInnerHTML={{ __html: html }} />;
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > svelte > Typescript Test > ifElse 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function MyComponent(props) {
  const [show, setShow] = useState(() => true);

  function toggle() {
    setShow(!show);
  }

  return (
    <>
      {show ? (
        <>
          <button onClick={(event) => toggle(event)}> Hide </button>
        </>
      ) : (
        <button onClick={(event) => toggle(event)}> Show </button>
      )}
    </>
  );
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > svelte > Typescript Test > imports 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";
import Button from \\"./Button\\";

function MyComponent(props) {
  const [disabled, setDisabled] = useState(() => false);

  return (
    <div>
      <Button type=\\"button\\" disabled={disabled}>
        <>{props.children}</>
      </Button>
    </div>
  );
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > svelte > Typescript Test > lifecycleHooks 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useEffect } from \\"react\\";

function MyComponent(props) {
  useEffect(() => {
    console.log(\\"onMount\\");
  }, []);

  useEffect(() => {
    console.log(\\"onAfterUpdate\\");
  });

  useEffect(() => {
    return () => {
      console.log(\\"onDestroy\\");
    };
  }, []);

  return <div />;
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > svelte > Typescript Test > reactive 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function MyComponent(props) {
  const [name, setName] = useState(() => \\"Steve\\");

  function lowercaseName() {
    return name.toLowerCase();
  }

  return (
    <div>
      <input value={name} />
      Lowercase: {lowercaseName()}
    </div>
  );
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > svelte > Typescript Test > reactiveWithFn 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState, useEffect } from \\"react\\";

function MyComponent(props) {
  const [a, setA] = useState(() => 2);

  const [b, setB] = useState(() => 5);

  const [result, setResult] = useState(() => null);

  function calculateResult(a_, b_) {
    setResult(a_ * b_);
  }

  useEffect(() => {
    calculateResult(a, b);
  }, [a, b]);

  return (
    <div>
      <input
        type=\\"number\\"
        onChange={(event) => setA(event.target.value)}
        value={a}
      />
      <input
        type=\\"number\\"
        onChange={(event) => setB(event.target.value)}
        value={b}
      />
      Result: {result}
    </div>
  );
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > svelte > Typescript Test > slots 1`] = `
"import * as React from \\"react\\";

function MyComponent(props) {
  return (
    <div>
      <>{props.children || \\"default\\"}</>
      <>{props.Test || <div>default</div>}</>
    </div>
  );
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > svelte > Typescript Test > style 1`] = `
"import * as React from \\"react\\";

function MyComponent(props) {
  return (
    <>
      <input className=\\"form-input\\" />

      <style>{\`
  input {
    color: red;
    font-size: 12px;
  }

  .form-input:focus {
    outline: 1px solid blue;
  }
\`}</style>
    </>
  );
}

export default MyComponent;
"
`;

exports[`Mitosis, format: react > svelte > Typescript Test > textExpressions 1`] = `
"\\"use client\\";
import * as React from \\"react\\";
import { useState } from \\"react\\";

function MyComponent(props) {
  const [a, setA] = useState(() => 5);

  const [b, setB] = useState(() => 12);

  return (
    <div>
      normal:
      {a + b}
      <br />
      conditional
      {a > 2 ? \\"hello\\" : \\"bye\\"}
    </div>
  );
}

export default MyComponent;
"
`;
