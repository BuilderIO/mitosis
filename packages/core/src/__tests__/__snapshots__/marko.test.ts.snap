// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`Marko > formatting 1`] = `
"
      <div>
        <if _=\\"input.foo === 'bar'\\">
          Hello
        </if>
        <for |items| of=\\"(some.long ? expression : yo)\\">
          World
        </for>
        <input 
          placeholder=\\"Hello world...\\"
          value=\\"(this.state.name)\\" 
          on-click=\\"(event => {&#10;            console.log('hello', &quot;world&quot;)&#10;          })\\"
          on-input=\\"(event => this.state.name = event.target.value)\\" /> 
          
          Hello! I can run in React, Vue, Solid, or Liquid!
      </div>"
`;

exports[`Marko > formatting 2`] = `
"
      <div>
        <if(input.foo === 'bar')>
          Hello
        </if>
        <for|items| of=(some.long ? expression : yo)>
          World
        </for>
        <input 
          placeholder=\\"Hello world...\\"
          value=(this.state.name) 
          on-click=(event => {
            console.log('hello', \\"world\\")
          })
          on-input=(event => this.state.name = event.target.value) /> 
          
          Hello! I can run in React, Vue, Solid, or Liquid!
      </div>"
`;

exports[`Marko > formatting 3`] = `
"<div>
  <if(input.foo === 'bar')> Hello </if>
  <for|items| of=(some.long ? expression : yo)> World </for>
  <input
    placeholder=\\"Hello world...\\"
    value=(this.state.name)
    on-click=(event => {
            console.log('hello', \\"world\\")
          })
    on-input=(event => this.state.name = event.target.value)
  />

  Hello! I can run in React, Vue, Solid, or Liquid!
</div>
"
`;

exports[`Marko > jsx > Javascript Test > AdvancedRef 1`] = `
"class {
  onBlur = function onBlur() {
    // Maintain focus
    this.inputRef.focus();
  };
  lowerCaseName = function lowerCaseName() {
    return this.state.name.toLowerCase();
  };

  onCreate(input) {
    this.state = { name: \\"PatrickJS\\" };
  }

  get inputRef() {
    return this.getEl(\\"inputRef\\");
  }
  get inputNoArgRef() {
    return this.getEl(\\"inputNoArgRef\\");
  }

  onRender() {
    console.log(\\"Received an update\\");
  }
}

style { 
  .input-8aea05e4 {
    color: red;
  }
}
<div>
  <if(input.showInput)>
    <input
      class=\\"input-8aea05e4\\"
      key=\\"inputRef\\"
      value=(state.name)
      on-blur(event => component.onBlur())
      on-input(event => state.name = event.target.value)
    />
    <label for=\\"cars\\" key=\\"inputNoArgRef\\"> Choose a car: </label>
    <select name=\\"cars\\" id=\\"cars\\">
      <option value=\\"supra\\">GR Supra</option>
      <option value=\\"86\\">GR 86</option>
    </select></if>

  Hello \${component.lowerCaseName()} ! I can run in React, Qwik, Vue, Solid, or
  Web Component!
</div>"
`;

exports[`Marko > jsx > Javascript Test > Basic 1`] = `
"export const DEFAULT_VALUES = {
  name: \\"Steve\\",
};

class {
  underscore_fn_name() {
    return \\"bar\\";
  }

  onCreate() {
    this.state = { name: \\"Steve\\", age: 1, sports: [\\"\\"] };
  }
}

style { 
  .div-724f419e {
    padding: 10px;
  }
}
<div class=\\"test div-724f419e\\">
  <input
    value=(DEFAULT_VALUES.name || state.name)
    on-input(myEvent => state.name = myEvent.target.value)
  />

  Hello! I can run in React, Vue, Solid, or Liquid!
</div>"
`;

exports[`Marko > jsx > Javascript Test > Basic 2`] = `
"class {
  onCreate() {
    this.state = { name: \\"PatrickJS\\", names: [\\"Steve\\", \\"PatrickJS\\"] };
  }
}

<div>
  <for|person| of=(state.names)>
    <if(person === state.name)>
      <input
        value=(state.name)
        on-input(event => {
  state.name = event.target.value + ' and ' + person;
})
      />

      Hello \${person} ! I can run in Qwik, Web Component, React, Vue, Solid, or
      Liquid!
    </if>
  </for>
</div>"
`;

exports[`Marko > jsx > Javascript Test > Basic Context 1`] = `
"import { Injector, MyService, createInjector } from \\"@dummy/injection-js\\";

class {
  onChange = function onChange() {
    const change = myService.method(\\"change\\");
    console.log(change);
  };

  onCreate() {
    this.state = { name: \\"PatrickJS\\" };
  }

  onMount() {
    const bye = myService.method(\\"hi\\");
    console.log(bye);
  }
}

<div>
  \${myService.method('hello') + state.name} Hello! I can run in React, Vue,
  Solid, or Liquid!

  <input on-input(event => component.onChange) />
</div>"
`;

exports[`Marko > jsx > Javascript Test > Basic OnMount Update 1`] = `
"class {
  onCreate(input) {
    this.state = { name: \\"PatrickJS\\", names: [\\"Steve\\", \\"PatrickJS\\"] };
  }

  onMount() {
    this.state.name = \\"PatrickJS onMount\\" + this.input.bye;
  }
}

<div>Hello \${state.name}</div>"
`;

exports[`Marko > jsx > Javascript Test > Basic Outputs 1`] = `
"class {
  onCreate(input) {
    this.state = { name: \\"PatrickJS\\" };
  }

  onMount() {
    this.input.onMessage(this.state.name);
    this.input.onEvent(this.input.message);
  }
}

<div></div>"
`;

exports[`Marko > jsx > Javascript Test > Basic Outputs Meta 1`] = `
"class {
  onCreate(input) {
    this.state = { name: \\"PatrickJS\\" };
  }

  onMount() {
    this.input.onMessage(this.state.name);
    this.input.onEvent(this.input.message);
  }
}

<div></div>"
`;

exports[`Marko > jsx > Javascript Test > BasicAttribute 1`] = `
"class {}

<input autocapitalize=\\"on\\" autocomplete=\\"on\\" spellcheck=(true) />"
`;

exports[`Marko > jsx > Javascript Test > BasicBooleanAttribute 1`] = `
"import MyBooleanAttributeComponent from \\"./basic-boolean-attribute-component.raw\\";

class {}

<div>
  <if(input.children)> \${input.children} \${input.type}</if>

  <MyBooleanAttributeComponent toggle=(true)></MyBooleanAttributeComponent>
  <MyBooleanAttributeComponent toggle=(true)></MyBooleanAttributeComponent>
  <MyBooleanAttributeComponent list=(null)></MyBooleanAttributeComponent>
</div>"
`;

exports[`Marko > jsx > Javascript Test > BasicChildComponent 1`] = `
"import MyBasicOnMountUpdateComponent from \\"./basic-onMount-update.raw\\";
import MyBasicComponent from \\"./basic.raw\\";

class {
  onCreate() {
    this.state = { name: \\"Steve\\", dev: \\"PatrickJS\\" };
  }
}

<div>
  <MyBasicComponent id=(state.dev)></MyBasicComponent>
  <div>
    <MyBasicOnMountUpdateComponent
      hi=(state.name)
      bye=(state.dev)
    ></MyBasicOnMountUpdateComponent>
  </div>
</div>"
`;

exports[`Marko > jsx > Javascript Test > BasicFor 1`] = `
"class {
  onCreate() {
    this.state = { name: \\"PatrickJS\\", names: [\\"Steve\\", \\"PatrickJS\\"] };
  }

  onMount() {
    console.log(\\"onMount code\\");
  }
}

<div>
  <for|person| of=(state.names)>
    <input
      value=(state.name)
      on-input(event => {
  state.name = event.target.value + ' and ' + person;
})
    />

    Hello \${person} ! I can run in Qwik, Web Component, React, Vue, Solid, or
    Liquid!
  </for>
</div>"
`;

exports[`Marko > jsx > Javascript Test > BasicRef 1`] = `
"class {
  onBlur = function onBlur() {
    // Maintain focus
    this.inputRef.focus();
  };
  lowerCaseName = function lowerCaseName() {
    return this.state.name.toLowerCase();
  };

  onCreate(input) {
    this.state = { name: \\"PatrickJS\\" };
  }

  get inputRef() {
    return this.getEl(\\"inputRef\\");
  }
  get inputNoArgRef() {
    return this.getEl(\\"inputNoArgRef\\");
  }
}

style { 
  .input-38729636 {
    color: red;
  }
}
<div>
  <if(input.showInput)>
    <input
      class=\\"input-38729636\\"
      key=\\"inputRef\\"
      value=(state.name)
      on-blur(event => component.onBlur())
      on-input(event => state.name = event.target.value)
    />
    <label for=\\"cars\\" key=\\"inputNoArgRef\\"> Choose a car: </label>
    <select name=\\"cars\\" id=\\"cars\\">
      <option value=\\"supra\\">GR Supra</option>
      <option value=\\"86\\">GR 86</option>
    </select></if>

  Hello \${component.lowerCaseName()} ! I can run in React, Qwik, Vue, Solid, or
  Web Component!
</div>"
`;

exports[`Marko > jsx > Javascript Test > BasicRefAssignment 1`] = `
"class {
  handlerClick = function handlerClick(event) {
    event.preventDefault();
    console.log(\\"current value\\", this.holdValueRef);
    this.holdValueRef = this.holdValueRef + \\"JS\\";
  };
}

<div>
  <button on-click(evt => component.handlerClick(evt))>Click</button>
</div>"
`;

exports[`Marko > jsx > Javascript Test > BasicRefPrevious 1`] = `
"export function usePrevious(value) {
  // The ref object is a generic container whose current property is mutable ...
  // ... and can hold any value, similar to an instance property on a class
  let ref = useRef(null); // Store current value in ref

  onUpdate(() => {
    ref = value;
  }, [value]); // Only re-run if value changes
  // Return previous value (happens before update in useEffect above)

  return ref;
}

class {
  onCreate() {
    this.state = { count: 0 };
  }

  onRender() {
    this.prevCount = this.state.count;
  }
}

<div>
  <h1>Now: \${state.count} , before: \${this.prevCount}</h1>
  <button on-click(event => state.count += 1)>Increment</button>
</div>"
`;

exports[`Marko > jsx > Javascript Test > Button 1`] = `
"class {}

<div>
  <if(input.link)>
    <a
      ...(props.attributes)
      href=(input.link)
      target=(input.openLinkInNewTab ? '_blank' : undefined)
      >\${input.text}</a></if>

  <if(!input.link)>
    <button type=\\"button\\" ...(props.attributes)>\${input.text}</button></if>
</div>"
`;

exports[`Marko > jsx > Javascript Test > Columns 1`] = `
"class {
  getColumns() {
    return this.input.columns || [];
  }
  getGutterSize() {
    return typeof this.input.space === \\"number\\" ? this.input.space || 0 : 20;
  }
  getWidth(index) {
    const columns = this.getColumns();
    return (columns[index] && columns[index].width) || 100 / columns.length;
  }
  getColumnCssWidth(index) {
    const columns = this.getColumns();
    const gutterSize = this.getGutterSize();
    const subtractWidth = (gutterSize * (columns.length - 1)) / columns.length;
    return \`calc(\${this.getWidth(index)}% - \${subtractWidth}px)\`;
  }
}

style { 
  .div-8ebf4416 {
    display: flex;
    flex-direction: column;
    align-items: stretch;
    line-height: normal;
  }
  @media (max-width: 999px) {
    .div-8ebf4416 {
      flex-direction: row;
    }
  }
  @media (max-width: 639px) {
    .div-8ebf4416 {
      flex-direction: row-reverse;
    }
  }
  .div-8ebf4416-2 {
    flex-grow: 1;
  }
}
<div class=\\"builder-columns div-8ebf4416\\">
  <for|column,index| of=(input.columns)>
    <div class=\\"builder-column div-8ebf4416-2\\">\${column.content} \${index}</div>
  </for>
</div>"
`;

exports[`Marko > jsx > Javascript Test > ContentSlotHtml 1`] = `
"class {}

<div>
  <slot name=(input.slotTesting)></slot>
  <div><hr /></div>
  <div><slot></slot></div>
</div>"
`;

exports[`Marko > jsx > Javascript Test > ContentSlotJSX 1`] = `
"class {
  get cls() {
    return this.input.slotContent && this.input.children
      ? \`\${this.state.name}-content\`
      : \\"\\";
  }
  show() {
    this.input.slotContent ? 1 : \\"\\";
  }

  onCreate(input) {
    this.state = { name: \\"king\\", showContent: false };
  }
}

<if(input.slotReference)>
  <div
    name=(input.slotContent ? 'name1' : 'name2')
    title=(input.slotContent ? 'title1' : 'title2')  ...(props.attributes)
    on-click(event => component.show())
    class=(component.cls)
  >
    <if(state.showContent && input.slotContent)>
      <slot name=\\"content\\">\${input.content}</slot></if>

    <div><hr /></div>
    <div>\${input.children}</div>
  </div></if>"
`;

exports[`Marko > jsx > Javascript Test > CustomCode 1`] = `
"class {
  findAndRunScripts() {
    // TODO: Move this function to standalone one in '@builder.io/utils'
    if (this.elem && typeof window !== \\"undefined\\") {
      /** @type {HTMLScriptElement[]} */
      const scripts = this.elem.getElementsByTagName(\\"script\\");

      for (let i = 0; i < scripts.length; i++) {
        const script = scripts[i];

        if (script.src) {
          if (this.state.scriptsInserted.includes(script.src)) {
            continue;
          }

          this.state.scriptsInserted.push(script.src);
          const newScript = document.createElement(\\"script\\");
          newScript.async = true;
          newScript.src = script.src;
          document.head.appendChild(newScript);
        } else if (
          !script.type ||
          [
            \\"text/javascript\\",
            \\"application/javascript\\",
            \\"application/ecmascript\\",
          ].includes(script.type)
        ) {
          if (this.state.scriptsRun.includes(script.innerText)) {
            continue;
          }

          try {
            this.state.scriptsRun.push(script.innerText);
            new Function(script.innerText)();
          } catch (error) {
            console.warn(\\"\`CustomCode\`: Error running script:\\", error);
          }
        }
      }
    }
  }

  onCreate(input) {
    this.state = { scriptsInserted: [], scriptsRun: [] };
  }

  get elem() {
    return this.getEl(\\"elem\\");
  }

  onMount() {
    this.findAndRunScripts();
  }
}

<div
  key=\\"elem\\"
  class=('builder-custom-code' + (input.replaceNodes ? ' replace-nodes' : ''))
>
  $!{input.code}
</div>"
`;

exports[`Marko > jsx > Javascript Test > Embed 1`] = `
"class {
  findAndRunScripts() {
    // TODO: Move this function to standalone one in '@builder.io/utils'
    if (this.elem && typeof window !== \\"undefined\\") {
      /** @type {HTMLScriptElement[]} */
      const scripts = this.elem.getElementsByTagName(\\"script\\");

      for (let i = 0; i < scripts.length; i++) {
        const script = scripts[i];

        if (script.src) {
          if (this.state.scriptsInserted.includes(script.src)) {
            continue;
          }

          this.state.scriptsInserted.push(script.src);
          const newScript = document.createElement(\\"script\\");
          newScript.async = true;
          newScript.src = script.src;
          document.head.appendChild(newScript);
        } else if (
          !script.type ||
          [
            \\"text/javascript\\",
            \\"application/javascript\\",
            \\"application/ecmascript\\",
          ].includes(script.type)
        ) {
          if (this.state.scriptsRun.includes(script.innerText)) {
            continue;
          }

          try {
            this.state.scriptsRun.push(script.innerText);
            new Function(script.innerText)();
          } catch (error) {
            console.warn(\\"\`CustomCode\`: Error running script:\\", error);
          }
        }
      }
    }
  }

  onCreate(input) {
    this.state = { scriptsInserted: [], scriptsRun: [] };
  }

  get elem() {
    return this.getEl(\\"elem\\");
  }

  onMount() {
    this.findAndRunScripts();
  }
}

<div
  key=\\"elem\\"
  class=('builder-custom-code' + (input.replaceNodes ? ' replace-nodes' : ''))
>
  $!{input.code}
</div>"
`;

exports[`Marko > jsx > Javascript Test > Form 1`] = `
"import { Builder, builder } from \\"@builder.io/sdk\\";
import {
  BuilderBlock as BuilderBlockComponent,
  BuilderBlocks,
  get,
  set,
} from \\"@fake\\";

class {
  get submissionState() {
    return (
      (Builder.isEditing && this.input.previewState) || this.state.formState
    );
  }
  onSubmit(event) {
    const sendWithJs =
      this.input.sendWithJs || this.input.sendSubmissionsTo === \\"email\\";

    if (this.input.sendSubmissionsTo === \\"zapier\\") {
      event.preventDefault();
    } else if (sendWithJs) {
      if (!(this.input.action || this.input.sendSubmissionsTo === \\"email\\")) {
        event.preventDefault();
        return;
      }

      event.preventDefault();
      const el = event.currentTarget;
      const headers = this.input.customHeaders || {};
      let body;
      const formData = new FormData(el); // TODO: maybe support null

      const formPairs = Array.from(
        event.currentTarget.querySelectorAll(\\"input,select,textarea\\")
      )
        .filter((el) => !!el.name)
        .map((el) => {
          let value;
          const key = el.name;

          if (el instanceof HTMLInputElement) {
            if (el.type === \\"radio\\") {
              if (el.checked) {
                value = el.name;
                return {
                  key,
                  value,
                };
              }
            } else if (el.type === \\"checkbox\\") {
              value = el.checked;
            } else if (el.type === \\"number\\" || el.type === \\"range\\") {
              const num = el.valueAsNumber;

              if (!isNaN(num)) {
                value = num;
              }
            } else if (el.type === \\"file\\") {
              // TODO: one vs multiple files
              value = el.files;
            } else {
              value = el.value;
            }
          } else {
            value = el.value;
          }

          return {
            key,
            value,
          };
        });
      let contentType = this.input.contentType;

      if (this.input.sendSubmissionsTo === \\"email\\") {
        contentType = \\"multipart/form-data\\";
      }

      Array.from(formPairs).forEach(({ value }) => {
        if (
          value instanceof File ||
          (Array.isArray(value) && value[0] instanceof File) ||
          value instanceof FileList
        ) {
          contentType = \\"multipart/form-data\\";
        }
      }); // TODO: send as urlEncoded or multipart by default
      // because of ease of use and reliability in browser API
      // for encoding the form?

      if (contentType !== \\"application/json\\") {
        body = formData;
      } else {
        // Json
        const json = {};
        Array.from(formPairs).forEach(({ value, key }) => {
          set(json, key, value);
        });
        body = JSON.stringify(json);
      }

      if (contentType && contentType !== \\"multipart/form-data\\") {
        if (
          /* Zapier doesn't allow content-type header to be sent from browsers */
          !(sendWithJs && this.input.action?.includes(\\"zapier.com\\"))
        ) {
          headers[\\"content-type\\"] = contentType;
        }
      }

      const presubmitEvent = new CustomEvent(\\"presubmit\\", {
        detail: {
          body,
        },
      });

      if (this.formRef) {
        this.formRef.dispatchEvent(presubmitEvent);

        if (presubmitEvent.defaultPrevented) {
          return;
        }
      }

      this.state.formState = \\"sending\\";
      const formUrl = \`\${
        builder.env === \\"dev\\" ? \\"http://localhost:5000\\" : \\"https://builder.io\\"
      }/api/v1/form-submit?apiKey=\${builder.apiKey}&to=\${btoa(
        this.input.sendSubmissionsToEmail || \\"\\"
      )}&name=\${encodeURIComponent(this.input.name || \\"\\")}\`;
      fetch(
        this.input.sendSubmissionsTo === \\"email\\" ? formUrl : this.input.action,
        /* TODO: throw error if no action URL */
        {
          body,
          headers,
          method: this.input.method || \\"post\\",
        }
      ).then(
        async (res) => {
          let body;
          const contentType = res.headers.get(\\"content-type\\");

          if (contentType && contentType.indexOf(\\"application/json\\") !== -1) {
            body = await res.json();
          } else {
            body = await res.text();
          }

          if (!res.ok && this.input.errorMessagePath) {
            /* TODO: allow supplying an error formatter function */
            let message = get(body, this.input.errorMessagePath);

            if (message) {
              if (typeof message !== \\"string\\") {
                /* TODO: ideally convert json to yaml so it woul dbe like
            error: - email has been taken */
                message = JSON.stringify(message);
              }

              this.state.formErrorMessage = message;
            }
          }

          this.state.responseData = body;
          this.state.formState = res.ok ? \\"success\\" : \\"error\\";

          if (res.ok) {
            const submitSuccessEvent = new CustomEvent(\\"submit:success\\", {
              detail: {
                res,
                body,
              },
            });

            if (this.formRef) {
              this.formRef.dispatchEvent(submitSuccessEvent);

              if (submitSuccessEvent.defaultPrevented) {
                return;
              }
              /* TODO: option to turn this on/off? */

              if (this.input.resetFormOnSubmit !== false) {
                this.formRef.reset();
              }
            }
            /* TODO: client side route event first that can be preventDefaulted */

            if (this.input.successUrl) {
              if (this.formRef) {
                const event = new CustomEvent(\\"route\\", {
                  detail: {
                    url: this.input.successUrl,
                  },
                });
                this.formRef.dispatchEvent(event);

                if (!event.defaultPrevented) {
                  location.href = this.input.successUrl;
                }
              } else {
                location.href = this.input.successUrl;
              }
            }
          }
        },
        (err) => {
          const submitErrorEvent = new CustomEvent(\\"submit:error\\", {
            detail: {
              error: err,
            },
          });

          if (this.formRef) {
            this.formRef.dispatchEvent(submitErrorEvent);

            if (submitErrorEvent.defaultPrevented) {
              return;
            }
          }

          this.state.responseData = err;
          this.state.formState = \\"error\\";
        }
      );
    }
  }

  onCreate(input) {
    this.state = {
      formState: \\"unsubmitted\\",
      responseData: null,
      formErrorMessage: \\"\\",
    };
  }

  get formRef() {
    return this.getEl(\\"formRef\\");
  }
}

style { 
  .pre-13d8e5f6 {
    padding: 10px;
    color: red;
    text-align: center;
  }
}
<form
  validate=(input.validate)
  key=\\"formRef\\"
  action=(!input.sendWithJs && input.action)
  method=(input.method)
  name=(input.name)
  on-submit(event => component.onSubmit(event))  ...(props.attributes)
>
  <if(input.builderBlock && input.builderBlock.children)>
    <for|block,index| of=(input.builderBlock?.children)>
      <BuilderBlockComponent
        key=(block.id)
        block=(block)
        index=(index)
      ></BuilderBlockComponent> </for></if>

  <if(component.submissionState === 'error')>
    <BuilderBlocks
      dataPath=\\"errorMessage\\"
      blocks=(input.errorMessage)
    ></BuilderBlocks></if>

  <if(component.submissionState === 'sending')>
    <BuilderBlocks
      dataPath=\\"sendingMessage\\"
      blocks=(input.sendingMessage)
    ></BuilderBlocks></if>

  <if(component.submissionState === 'error' && state.responseData)>
    <pre class=\\"builder-form-error-text pre-13d8e5f6\\">
\${JSON.stringify(state.responseData, null, 2)}</pre>
  </if>

  <if(component.submissionState === 'success')>
    <BuilderBlocks
      dataPath=\\"successMessage\\"
      blocks=(input.successMessage)
    ></BuilderBlocks></if>
</form>"
`;

exports[`Marko > jsx > Javascript Test > Image 1`] = `
"class {
  setLoaded() {
    this.state.imageLoaded = true;
  }
  useLazyLoading() {
    // TODO: Add more checks here, like testing for real web browsers
    return !!this.input.lazy && this.isBrowser();
  }
  isBrowser = function isBrowser() {
    return (
      typeof window !== \\"undefined\\" && window.navigator.product != \\"ReactNative\\"
    );
  };

  onCreate(input) {
    this.state = { scrollListener: null, imageLoaded: false, load: false };
  }

  get pictureRef() {
    return this.getEl(\\"pictureRef\\");
  }

  onMount() {
    if (this.useLazyLoading()) {
      // throttled scroll capture listener
      const listener = () => {
        if (this.pictureRef) {
          const rect = this.pictureRef.getBoundingClientRect();
          const buffer = window.innerHeight / 2;

          if (rect.top < window.innerHeight + buffer) {
            this.state.load = true;
            this.state.scrollListener = null;
            window.removeEventListener(\\"scroll\\", listener);
          }
        }
      };

      this.state.scrollListener = listener;
      window.addEventListener(\\"scroll\\", listener, {
        capture: true,
        passive: true,
      });
      listener();
    }
  }
  onDestroy() {
    if (this.state.scrollListener) {
      window.removeEventListener(\\"scroll\\", this.state.scrollListener);
    }
  }
}

style { 
  .img-e6dfb5ae {
    opacity: 1;
    transition: opacity 0.2s ease-in-out;
    object-fit: cover;
    object-position: center;
  }
}
<div>
  <picture key=\\"pictureRef\\"
    ><if(!component.useLazyLoading() || state.load)>
      <img
        alt=(input.altText)
        aria-role=(input.altText ? 'presentation' : undefined)
        class=('builder-image' + (input._class ? ' ' + input._class : '') + ' img-e6dfb5ae')
        src=(input.image)
        on-load(event => component.setLoaded())
        srcset=(input.srcset)
        sizes=(input.sizes)
    /></if>

    <source srcset=(input.srcset)
  /></picture>
  \${input.children}
</div>"
`;

exports[`Marko > jsx > Javascript Test > Image State 1`] = `
"class {
  onCreate() {
    this.state = { canShow: true, images: [\\"http://example.com/qwik.png\\"] };
  }
}

<div>
  <for|item,itemIndex| of=(state.images)>
    <img class=\\"custom-class\\" src=(item) key=(itemIndex) />
  </for>
</div>"
`;

exports[`Marko > jsx > Javascript Test > Img 1`] = `
"import { Builder } from \\"@builder.io/sdk\\";

class {}

<img
  style=({
  objectFit: input.backgroundSize || 'cover',
  objectPosition: input.backgroundPosition || 'center'
})  ...(props.attributes)
  key=(Builder.isEditing && input.imgSrc || 'default-key')
  alt=(input.altText)
  src=(input.imgSrc)
/>"
`;

exports[`Marko > jsx > Javascript Test > Input 1`] = `
"import { Builder } from \\"@builder.io/sdk\\";

class {}

<input
  ...(props.attributes)
  key=(Builder.isEditing && input.defaultValue ? input.defaultValue : 'default-key')
  placeholder=(input.placeholder)
  type=(input.type)
  name=(input.name)
  value=(input.value)
  defaultValue=(input.defaultValue)
  required=(input.required)
  on-input(event => input.onChange?.(event.target.value))
/>"
`;

exports[`Marko > jsx > Javascript Test > InputParent 1`] = `
"import FormInputComponent from \\"./input.raw\\";

class {
  handleChange(value) {
    console.log(value);
  }
}

<FormInputComponent
  name=\\"kingzez\\"
  type=\\"text\\"
  on-change(value => component.handleChange(value))
></FormInputComponent>"
`;

exports[`Marko > jsx > Javascript Test > RawText 1`] = `
"class {}

<span class=(input.attributes?.class || input.attributes?.className)
  >$!{input.text || ''}</span>"
`;

exports[`Marko > jsx > Javascript Test > Section 1`] = `
"class {}

<section
  ...(props.attributes)
  style=(input.maxWidth && typeof input.maxWidth === 'number' ? {
  maxWidth: input.maxWidth
} : undefined)
>
  \${input.children}
</section>"
`;

exports[`Marko > jsx > Javascript Test > Section 2`] = `
"class {
  onCreate(input) {
    this.state = { max: 42, items: [42] };
  }
}

<if(state.max)>
  <for|item| of=(state.items)>
    <section
      ...(props.attributes)
      style=({
  maxWidth: item + state.max
})
    >
      \${input.children}
    </section>
  </for></if>"
`;

exports[`Marko > jsx > Javascript Test > Select 1`] = `
"import { Builder } from \\"@builder.io/sdk\\";

class {}

<select
  ...(props.attributes)
  value=(input.value)
  key=(Builder.isEditing && input.defaultValue ? input.defaultValue : 'default-key')
  defaultValue=(input.defaultValue)
  name=(input.name)
>
  <for|option,index| of=(input.options)>
    <option value=(option.value) data-index=(index)>
      \${option.name || option.value}
    </option>
  </for>
</select>"
`;

exports[`Marko > jsx > Javascript Test > SlotDefault 1`] = `
"class {}

<div>
  <slot><div class=\\"default-slot\\">Default content</div></slot>
</div>"
`;

exports[`Marko > jsx > Javascript Test > SlotHtml 1`] = `
"import ContentSlotCode from \\"./content-slot-jsx.raw\\";

class {}

<div>
  <ContentSlotCode><slot testing=(<div>Hello</div>)></slot></ContentSlotCode>
</div>"
`;

exports[`Marko > jsx > Javascript Test > SlotJsx 1`] = `
"import ContentSlotCode from \\"./content-slot-jsx.raw\\";

class {}

<div><ContentSlotCode slotTesting=(<div>Hello</div>)></ContentSlotCode></div>"
`;

exports[`Marko > jsx > Javascript Test > SlotNamed 1`] = `
"class {}

<div>
  <slot name=\\"myAwesomeSlot\\"></slot>
  <slot name=\\"top\\"></slot>
  <slot name=\\"left\\">Default left</slot>
  <slot>Default Child</slot>
</div>"
`;

exports[`Marko > jsx > Javascript Test > Stamped.io 1`] = `
"import { kebabCase, snakeCase } from \\"lodash\\";

class {
  kebabCaseValue() {
    return kebabCase(\\"testThat\\");
  }
  snakeCaseValue() {
    return snakeCase(\\"testThis\\");
  }

  onCreate(input) {
    this.state = { reviews: [], name: \\"test\\", showReviewPrompt: false };
  }

  onMount() {
    fetch(
      \`https://stamped.io/api/widget/reviews?storeUrl=builder-io.myshopify.com&apiKey=\${
        this.input.apiKey || \\"pubkey-8bbDq7W6w4sB3OWeM1HUy2s47702hM\\"
      }&productId=\${this.input.productId || \\"2410511106127\\"}\`
    )
      .then((res) => res.json())
      .then((data) => {
        this.state.reviews = data.data;
      });
  }
}

style { 
  .input-c36324fe {
    display: block;
  }
  .textarea-c36324fe {
    display: block;
  }
  .button-c36324fe {
    display: block;
  }
  .review-c36324fe {
    margin: 10px;
    padding: 10px;
    background: white;
    display: flex;
    border-radius: 5px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    -webkit-font-smoothing: antialiased;
  }
  .img-c36324fe {
    height: 30px;
    width: 30px;
    margin-right: 10px;
  }
}
<div data-user=(state.name)>
  <button on-click(event => state.showReviewPrompt = true)>
    Write a review
  </button>
  <if(state.showReviewPrompt || 'asdf')>
    <input placeholder=\\"Email\\" />
    <input placeholder=\\"Title\\" class=\\"input-c36324fe\\" />
    <textarea
      placeholder=\\"How was your experience?\\"
      class=\\"textarea-c36324fe\\"
    ></textarea>
    <button
      class=\\"button-c36324fe\\"
      on-click(event => {
  event.preventDefault();
  state.showReviewPrompt = false;
})
    >
      Submit
    </button></if>

  <for|review,index| of=(state.reviews)>
    <div class=\\"review-c36324fe\\" key=(review.id)>
      <img class=\\"img-c36324fe\\" src=(review.avatar) />
      <div class=(state.showReviewPrompt ? 'bg-primary' : 'bg-secondary')>
        <div>N: \${index}</div>
        <div>\${review.author}</div>
        <div>\${review.reviewMessage}</div>
      </div>
    </div>
  </for>
</div>"
`;

exports[`Marko > jsx > Javascript Test > Submit 1`] = `
"class {}

<button type=\\"submit\\" ...(props.attributes)>\${input.text}</button>"
`;

exports[`Marko > jsx > Javascript Test > Text 1`] = `
"import { Builder } from \\"@builder.io/sdk\\";

class {
  onCreate(input) {
    this.state = { name: \\"Decadef20\\" };
  }
}

<div
  contenteditable=(allowEditingText || undefined)
  data-name=({
  test: state.name || 'any name'
})
>
  $!{input.text || input.content || state.name || '
  <p class=\\"text-lg\\">my name</p>
  '}
</div>"
`;

exports[`Marko > jsx > Javascript Test > Textarea 1`] = `
"class {}

<textarea
  ...(props.attributes)
  placeholder=(input.placeholder)
  name=(input.name)
  value=(input.value)
  defaultValue=(input.defaultValue)
></textarea>"
`;

exports[`Marko > jsx > Javascript Test > Video 1`] = `
"class {}

<video
  preload=\\"none\\"
  ...(props.attributes)
  style=({
  width: '100%',
  height: '100%',
  ...input.attributes?.style,
  objectFit: input.fit,
  objectPosition: input.position,
  // Hack to get object fit to work as expected and
  // not have the video overflow
  borderRadius: 1
})
  key=(input.video || 'no-src')
  poster=(input.posterImage)
  autoplay=(input.autoPlay)
  muted=(input.muted)
  controls=(input.controls)
  loop=(input.loop)
></video>"
`;

exports[`Marko > jsx > Javascript Test > arrowFunctionInUseStore 1`] = `
"class {
  setName(value) {
    this.state.name = value;
  }
  updateNameWithArrowFn(value) {
    this.state.name = value;
  }

  onCreate() {
    this.state = { name: \\"steve\\" };
  }
}

<div>Hello \${state.name}</div>"
`;

exports[`Marko > jsx > Javascript Test > basicForNoTagReference 1`] = `
"class {
  get TagNameGetter() {
    return \\"span\\";
  }

  onCreate(input) {
    this.state = { name: \\"VincentW\\", TagName: \\"div\\", tag: \\"span\\" };
  }
}

<state.TagNameGetter>
  Hello
  <state.tag>\${state.name}</state.tag>
  <for|action| of=(input.actions)>
    <state.TagName
      ><action.icon></action.icon> <span>\${action.text}</span></state.TagName
    >
  </for></state.TagNameGetter
>"
`;

exports[`Marko > jsx > Javascript Test > basicForwardRef 1`] = `
"class {
  onCreate(input) {
    this.state = { name: \\"PatrickJS\\" };
  }

  get propsInputRef() {
    return this.getEl(\\"propsInputRef\\");
  }
}

style { 
  .input-02928ba3 {
    color: red;
  }
}
<div>
  <input
    class=\\"input-02928ba3\\"
    key=\\"propsInputRef\\"
    value=(state.name)
    on-input(event => state.name = event.target.value)
  />
</div>"
`;

exports[`Marko > jsx > Javascript Test > basicForwardRefMetadata 1`] = `
"class {
  onCreate(input) {
    this.state = { name: \\"PatrickJS\\" };
  }

  get propsInputRef() {
    return this.getEl(\\"propsInputRef\\");
  }
}

style { 
  .input-0a0d0fee {
    color: red;
  }
}
<div>
  <input
    class=\\"input-0a0d0fee\\"
    key=\\"propsInputRef\\"
    value=(state.name)
    on-input(event => state.name = event.target.value)
  />
</div>"
`;

exports[`Marko > jsx > Javascript Test > basicOnUpdateReturn 1`] = `
"class {
  onCreate() {
    this.state = { name: \\"PatrickJS\\" };
  }

  onRender() {
    const controller = new AbortController();
    const signal = controller.signal;
    fetch(\\"https://patrickjs.com/api/resource.json\\", {
      signal,
    })
      .then((response) => response.json())
      .then((data) => {
        this.state.name = data.name;
      });
    return () => {
      if (!signal.aborted) {
        controller.abort();
      }
    };
  }
}

<div>Hello! \${state.name}</div>"
`;

exports[`Marko > jsx > Javascript Test > class + ClassName + css 1`] = `
"class {}

style { 
  .div-6b6c27cc {
    padding: 10px;
  }
}
<div class=\\"test2 test div-6b6c27cc\\">
  Hello! I can run in React, Vue, Solid, or Liquid!
</div>"
`;

exports[`Marko > jsx > Javascript Test > class + css 1`] = `
"class {}

style { 
  .div-fb8d32e6 {
    padding: 10px;
  }
}
<div class=\\"test div-fb8d32e6\\">
  Hello! I can run in React, Vue, Solid, or Liquid!
</div>"
`;

exports[`Marko > jsx > Javascript Test > className + css 1`] = `
"class {}

style { 
  .div-fb8d32e6 {
    padding: 10px;
  }
}
<div class=\\"test div-fb8d32e6\\">
  Hello! I can run in React, Vue, Solid, or Liquid!
</div>"
`;

exports[`Marko > jsx > Javascript Test > className 1`] = `
"class {
  onCreate() {
    this.state = { bindings: \\"a binding\\" };
  }
}

<div>
  <div class=\\"no binding\\">Without Binding</div>
  <div class=(state.bindings)>With binding</div>
</div>"
`;

exports[`Marko > jsx > Javascript Test > classState 1`] = `
"class {
  onCreate() {
    this.state = {
      classState: \\"testClassName\\",
      styleState: {
        color: \\"red\\",
      },
    };
  }
}

style { 
  .div-1abc267a {
    padding: 10px;
  }
}
<div class=(state.classState + ' div-1abc267a') style=(state.styleState)>
  Hello! I can run in React, Vue, Solid, or Liquid!
</div>"
`;

exports[`Marko > jsx > Javascript Test > componentWithContext 1`] = `
"import Context1 from \\"@dummy/1\\";
import Context2 from \\"@dummy/2\\";

class {}

\${foo.value}"
`;

exports[`Marko > jsx > Javascript Test > componentWithContextMultiRoot 1`] = `
"import Context1 from \\"@dummy/1\\";
import Context2 from \\"@dummy/2\\";

class {}

\${foo.value}
<div>other</div>"
`;

exports[`Marko > jsx > Javascript Test > contentState 1`] = `
"import BuilderContext from \\"@dummy/context.js\\";

class {}

<div>setting context</div>"
`;

exports[`Marko > jsx > Javascript Test > defaultProps 1`] = `
"class {}

<div>
  <if(input.link)>
    <a
      ...(props.attributes)
      href=(input.link)
      target=(input.openLinkInNewTab ? '_blank' : undefined)
      >\${input.text}</a></if>

  <if(!input.link)>
    <button
      type=\\"button\\"
      ...(props.attributes)
      on-click(event => input.onClick(event))
    >
      \${input.buttonText}
    </button></if>
</div>"
`;

exports[`Marko > jsx > Javascript Test > defaultPropsOutsideComponent 1`] = `
"class {}

<div>
  <if(input.link)>
    <a
      ...(props.attributes)
      href=(input.link)
      target=(input.openLinkInNewTab ? '_blank' : undefined)
      >\${input.text}</a></if>

  <if(!input.link)>
    <button
      type=\\"button\\"
      ...(props.attributes)
      on-click(event => input.onClick(event))
    >
      \${input.text}
    </button></if>
</div>"
`;

exports[`Marko > jsx > Javascript Test > defaultValsWithTypes 1`] = `
"const DEFAULT_VALUES = {
  name: \\"Sami\\",
};

class {}

<div>Hello \${input.name || DEFAULT_VALUES.name}</div>"
`;

exports[`Marko > jsx > Javascript Test > expressionState 1`] = `
"class {
  onCreate(input) {
    this.state = {
      refToUse: !(input.componentRef instanceof Function)
        ? input.componentRef
        : null,
    };
  }
}

<div>\${state.refToUse}</div>"
`;

exports[`Marko > jsx > Javascript Test > getterState 1`] = `
"class {
  get foo2() {
    return this.input.foo + \\"foo\\";
  }
  get bar() {
    return \\"bar\\";
  }
  baz(i) {
    return i + this.foo2.length;
  }
}

<div>
  <p>\${component.foo2}</p>
  <p>\${component.bar}</p>
  <p>\${component.baz(1)}</p>
</div>"
`;

exports[`Marko > jsx > Javascript Test > import types 1`] = `
"import RenderBlock from \\"./builder-render-block.raw\\";

class {
  getRenderContentProps(block, index) {
    return {
      block: block,
      index: index,
    };
  }
}

<RenderBlock
  ...(state.getRenderContentProps(props.renderContentProps.block,
  0))
></RenderBlock>"
`;

exports[`Marko > jsx > Javascript Test > multipleOnUpdate 1`] = `
"class {
  onRender() {
    console.log(\\"Runs on every update/rerender\\");

    console.log(\\"Runs on every update/rerender as well\\");
  }
}

<div></div>"
`;

exports[`Marko > jsx > Javascript Test > multipleOnUpdateWithDeps 1`] = `
"class {
  onCreate() {
    this.state = { a: \\"a\\", b: \\"b\\", c: \\"c\\", d: \\"d\\" };
  }

  onRender() {
    console.log(\\"Runs when a or b changes\\", this.state.a, this.state.b);

    if (this.state.a === \\"a\\") {
      this.state.a = \\"b\\";
    }

    console.log(\\"Runs when c or d changes\\", this.state.c, this.state.d);

    if (this.state.a === \\"a\\") {
      this.state.a = \\"b\\";
    }
  }
}

<div></div>"
`;

exports[`Marko > jsx > Javascript Test > multipleSpreads 1`] = `
"class {
  onCreate() {
    this.state = {
      attrs: {
        hello: \\"world\\",
      },
    };
  }
}

<input ...(state.attrs) ...(props) />"
`;

exports[`Marko > jsx > Javascript Test > nestedShow 1`] = `
"class {}

<if(input.conditionA)>
  <if(!input.conditionB)> <div>if condition A and condition B</div></if>
  <else><div>else-condition-B</div></else></if>
<else><div>else-condition-A</div></else>"
`;

exports[`Marko > jsx > Javascript Test > nestedStyles 1`] = `
"class {}

style { 
  .div-7ff9918d {
    display: flex;
    --bar: red;
    color: var(--bar);
  }
  @media (max-width: env(--mobile)) {
    .div-7ff9918d {
      display: block;
    }
  }
  .div-7ff9918d:hover {
    display: flex;
  }
  .div-7ff9918d:active {
    display: inline;
  }
  .div-7ff9918d .nested-selector {
    display: grid;
  }
  .div-7ff9918d .nested-selector:hover {
    display: block;
  }
  .div-7ff9918d.nested-selector:active {
    display: inline-block;
  }
}
<div class=\\"div-7ff9918d\\">Hello world</div>"
`;

exports[`Marko > jsx > Javascript Test > onEvent 1`] = `
"class {
  foo(event) {
    console.log(\\"test2\\");
  }

  get elem() {
    return this.getEl(\\"elem\\");
  }

  onMount() {
    this.elem.dispatchEvent(new CustomEvent(\\"initEditingBldr\\"));
  }
}

<div class=\\"builder-embed\\" key=\\"elem\\"><div>Test</div></div>"
`;

exports[`Marko > jsx > Javascript Test > onInit & onMount 1`] = `
"class {
  onMount() {
    console.log(\\"onMount\\");
  }
}

<div></div>"
`;

exports[`Marko > jsx > Javascript Test > onInit 1`] = `
"export const defaultValues = {
  name: \\"PatrickJS\\",
};

class {
  onCreate(input) {
    this.state = { name: \\"\\" };
  }
}

<div>Default name defined by parent \${state.name}</div>"
`;

exports[`Marko > jsx > Javascript Test > onMount 1`] = `
"class {
  onMount() {
    console.log(\\"Runs on mount\\");
  }
  onDestroy() {
    console.log(\\"Runs on unMount\\");
  }
}

<div></div>"
`;

exports[`Marko > jsx > Javascript Test > onMountMultiple 1`] = `
"class {
  onMount() {
    const onMountHook_0 = () => {
      console.log(\\"Runs on mount\\");
    };

    onMountHook_0();

    const onMountHook_1 = () => {
      console.log(\\"Another one runs on Mount\\");
    };

    onMountHook_1();

    const onMountHook_2 = () => {
      console.log(\\"SSR runs on Mount\\");
    };

    onMountHook_2();
  }
}

<div></div>"
`;

exports[`Marko > jsx > Javascript Test > onUpdate 1`] = `
"class {
  onRender() {
    console.log(\\"Runs on every update/rerender\\");
  }
}

<div></div>"
`;

exports[`Marko > jsx > Javascript Test > onUpdateWithDeps 1`] = `
"class {
  onCreate(input) {
    this.state = { a: \\"a\\", b: \\"b\\" };
  }

  onRender() {
    console.log(
      \\"Runs when a, b or size changes\\",
      this.state.a,
      this.state.b,
      this.input.size
    );
  }
}

<div></div>"
`;

exports[`Marko > jsx > Javascript Test > preserveExportOrLocalStatement 1`] = `
"const b = 3;
const foo = () => {};
export const a = 3;
export const bar = () => {};
export function run(value) {}

class {}

<div></div>"
`;

exports[`Marko > jsx > Javascript Test > preserveTyping 1`] = `
"class {}

<div>Hello! I can run in React, Vue, Solid, or Liquid! \${input.name}</div>"
`;

exports[`Marko > jsx > Javascript Test > propsDestructure 1`] = `
"class {
  onCreate(input) {
    this.state = { name: \\"Decadef20\\" };
  }
}

<div>
  \${input.children} \${input.type} Hello! I can run in React, Vue, Solid, or
  Liquid!
</div>"
`;

exports[`Marko > jsx > Javascript Test > propsInterface 1`] = `
"class {}

<div>Hello! I can run in React, Vue, Solid, or Liquid! \${input.name}</div>"
`;

exports[`Marko > jsx > Javascript Test > propsType 1`] = `
"class {}

<div>Hello! I can run in React, Vue, Solid, or Liquid! \${input.name}</div>"
`;

exports[`Marko > jsx > Javascript Test > referencingFunInsideHook 1`] = `
"class {
  foo = function foo(params) {};
  bar = function bar() {};
  zoo = function zoo() {
    const params = {
      cb: this.bar,
    };
  };

  onRender() {
    this.foo({
      someOption: this.bar,
    });
  }
}

<div></div>"
`;

exports[`Marko > jsx > Javascript Test > renderBlock 1`] = `
"import { TARGET } from \\"../../constants/target.js\\";
import { evaluate } from \\"../../functions/evaluate.js\\";
import { extractTextStyles } from \\"../../functions/extract-text-styles.js\\";
import { getBlockActions } from \\"../../functions/get-block-actions.js\\";
import { getBlockComponentOptions } from \\"../../functions/get-block-component-options.js\\";
import { getBlockProperties } from \\"../../functions/get-block-properties.js\\";
import { getBlockTag } from \\"../../functions/get-block-tag.js\\";
import { getProcessedBlock } from \\"../../functions/get-processed-block.js\\";
import { getReactNativeBlockStyles } from \\"../../functions/get-react-native-block-styles.js\\";
import BlockStyles from \\"./block-styles.marko\\";
import { isEmptyHtmlElement } from \\"./render-block.helpers.js\\";
import RenderComponentWithContext from \\"./render-component-with-context.js\\";
import RenderComponent from \\"./render-component.marko\\";
import RenderRepeatedBlock from \\"./render-repeated-block.marko\\";

class {
  get component() {
    const componentName = getProcessedBlock({
      block: this.input.block,
      state: this.input.context.state,
      context: this.input.context.context,
      shouldEvaluateBindings: false,
    }).component?.name;

    if (!componentName) {
      return null;
    }

    const ref = this.input.context.registeredComponents[componentName];

    if (!ref) {
      // TODO: Public doc page with more info about this message
      console.warn(\`
          Could not find a registered component named \\"\${componentName}\\".
          If you registered it, is the file that registered it imported by the file that needs to render it?\`);
      return undefined;
    } else {
      return ref;
    }
  }
  get tag() {
    return getBlockTag(this.useBlock);
  }
  get useBlock() {
    return this.repeatItemData
      ? this.input.block
      : getProcessedBlock({
          block: this.input.block,
          state: this.input.context.state,
          context: this.input.context.context,
          shouldEvaluateBindings: true,
        });
  }
  get actions() {
    return getBlockActions({
      block: this.useBlock,
      state: this.input.context.state,
      context: this.input.context.context,
    });
  }
  get attributes() {
    const blockProperties = getBlockProperties(this.useBlock);
    return {
      ...blockProperties,
      ...(TARGET === \\"reactNative\\"
        ? {
            style: getReactNativeBlockStyles({
              block: this.useBlock,
              context: this.input.context,
              blockStyles: blockProperties.style,
            }),
          }
        : {}),
    };
  }
  get shouldWrap() {
    return !this.component?.noWrap;
  }
  get renderComponentProps() {
    return {
      blockChildren: this.useChildren,
      componentRef: this.component?.component,
      componentOptions: {
        ...getBlockComponentOptions(this.useBlock),

        /**
         * These attributes are passed to the wrapper element when there is one. If \`noWrap\` is set to true, then
         * they are provided to the component itself directly.
         */
        ...(this.shouldWrap
          ? {}
          : {
              attributes: { ...this.attributes, ...this.actions },
            }),
        customBreakpoints: this.childrenContext?.content?.meta?.breakpoints,
      },
      context: this.childrenContext,
    };
  }
  get useChildren() {
    // TO-DO: When should \`canHaveChildren\` dictate rendering?
    // This is currently commented out because some Builder components (e.g. Box) do not have \`canHaveChildren: true\`,
    // but still receive and need to render children.
    // return state.componentInfo?.canHaveChildren ? state.useBlock.children : [];
    return this.useBlock.children ?? [];
  }
  get childrenWithoutParentComponent() {
    /**
     * When there is no \`componentRef\`, there might still be children that need to be rendered. In this case,
     * we render them outside of \`componentRef\`.
     * NOTE: We make sure not to render this if \`repeatItemData\` is non-null, because that means we are rendering an array of
     * blocks, and the children will be repeated within those blocks.
     */
    const shouldRenderChildrenOutsideRef =
      !this.component?.component && !this.repeatItemData;
    return shouldRenderChildrenOutsideRef ? this.useChildren : [];
  }
  get repeatItemData() {
    /**
     * we don't use \`state.useBlock\` here because the processing done within its logic includes evaluating the block's bindings,
     * which will not work if there is a repeat.
     */
    const { repeat, ...blockWithoutRepeat } = this.input.block;

    if (!repeat?.collection) {
      return undefined;
    }

    const itemsArray = evaluate({
      code: repeat.collection,
      state: this.input.context.state,
      context: this.input.context.context,
    });

    if (!Array.isArray(itemsArray)) {
      return undefined;
    }

    const collectionName = repeat.collection.split(\\".\\").pop();
    const itemNameToUse =
      repeat.itemName || (collectionName ? collectionName + \\"Item\\" : \\"item\\");
    const repeatArray = itemsArray.map((item, index) => ({
      context: {
        ...this.input.context,
        state: {
          ...this.input.context.state,
          $index: index,
          $item: item,
          [itemNameToUse]: item,
          [\`$\${itemNameToUse}Index\`]: index,
        },
      },
      block: blockWithoutRepeat,
    }));
    return repeatArray;
  }
  get inheritedTextStyles() {
    if (TARGET !== \\"reactNative\\") {
      return {};
    }

    const styles = getReactNativeBlockStyles({
      block: this.useBlock,
      context: this.input.context,
      blockStyles: this.attributes.style,
    });
    return extractTextStyles(styles);
  }
  get childrenContext() {
    return {
      apiKey: this.input.context.apiKey,
      state: this.input.context.state,
      content: this.input.context.content,
      context: this.input.context.context,
      registeredComponents: this.input.context.registeredComponents,
      inheritedStyles: this.inheritedTextStyles,
    };
  }
  get renderComponentTag() {
    if (TARGET === \\"reactNative\\") {
      return RenderComponentWithContext;
    } else if (TARGET === \\"vue3\\") {
      // vue3 expects a string for the component tag
      return \\"RenderComponent\\";
    } else {
      return RenderComponent;
    }
  }
}

<if(component.shouldWrap)>
  <if(isEmptyHtmlElement(component.tag))>
    <state.tag ...(state.attributes) ...(state.actions)></state.tag
  ></if>

  <if(!isEmptyHtmlElement(component.tag) && component.repeatItemData)>
    <for|data,index| of=(component.repeatItemData)>
      <RenderRepeatedBlock
        key=(index)
        repeatContext=(data.context)
        block=(data.block)
      ></RenderRepeatedBlock> </for></if>

  <if(!isEmptyHtmlElement(component.tag) && !component.repeatItemData)>
    <state.tag ...(state.attributes) ...(state.actions)
      ><state.renderComponentTag
        ...(state.renderComponentProps)
      ></state.renderComponentTag>
      <for|child| of=(component.childrenWithoutParentComponent)>
        <RenderBlock
          key=('render-block-' + child.id)
          block=(child)
          context=(component.childrenContext)
        ></RenderBlock>
      </for>
      <for|child| of=(component.childrenWithoutParentComponent)>
        <BlockStyles
          key=('block-style-' + child.id)
          block=(child)
          context=(component.childrenContext)
        ></BlockStyles> </for></state.tag
  ></if>
</if>
<else
  ><state.renderComponentTag
    ...(state.renderComponentProps)
  ></state.renderComponentTag
></else>"
`;

exports[`Marko > jsx > Javascript Test > renderContentExample 1`] = `
"import BuilderContext from \\"@dummy/context.js\\";
import {
  dispatchNewContentToVisualEditor,
  sendComponentsToVisualEditor,
  trackClick,
} from \\"@dummy/injection-js\\";
import RenderBlocks from \\"@dummy/RenderBlocks.marko\\";

class {
  onMount() {
    sendComponentsToVisualEditor(this.input.customComponents);
  }

  onRender() {
    dispatchNewContentToVisualEditor(this.input.content);
  }
}

style { 
  .div-2f1bf84a {
    display: flex;
    flex-direction: columns;
  }
}
<div class=\\"div-2f1bf84a\\" on-click(event => trackClick(input.content.id))>
  <RenderBlocks blocks=(input.content.blocks)></RenderBlocks>
</div>"
`;

exports[`Marko > jsx > Javascript Test > rootFragmentMultiNode 1`] = `
"class {}

<if(input.link)>
  <a
    ...(props.attributes)
    href=(input.link)
    target=(input.openLinkInNewTab ? '_blank' : undefined)
    >\${input.text}</a></if>

<if(!input.link)>
  <button type=\\"button\\" ...(props.attributes)>\${input.text}</button></if>"
`;

exports[`Marko > jsx > Javascript Test > rootShow 1`] = `
"class {}

<if(input.foo === 'bar')> <div>Bar</div></if> <else><div>Foo</div></else>"
`;

exports[`Marko > jsx > Javascript Test > self-referencing component 1`] = `
"class {}

<div>
  \${input.name}
  <if(input.name === 'Batman')>
    <MyComponent name=\\"Bruce Wayne\\"></MyComponent></if>
</div>"
`;

exports[`Marko > jsx > Javascript Test > self-referencing component with children 1`] = `
"class {}

<div>
  \${input.name} \${input.children}
  <if(input.name === 'Batman')>
    <MyComponent name=\\"Bruce\\"><div>Wayne</div></MyComponent></if>
</div>"
`;

exports[`Marko > jsx > Javascript Test > showExpressions 1`] = `
"class {}

<div>
  <if(input.conditionA)> Content0</if>
  <else>ContentA</else>
  <if(input.conditionA)> ContentA</if>

  <if(input.conditionA)> </if>
  <else>ContentA</else>
  <if(input.conditionA)> ContentB</if>
  <else>\${undefined}</else>
  <if(input.conditionA)> \${undefined}</if>
  <else>ContentB</else>
  <if(input.conditionA)> ContentC</if>

  <if(input.conditionA)> </if>
  <else>ContentC</else>
  <if(input.conditionA)> ContentD</if>

  <if(input.conditionA)> </if>
  <else>ContentD</else>
  <if(input.conditionA)> ContentE</if>
  <else>hello</else>
  <if(input.conditionA)> hello</if>
  <else>ContentE</else>
  <if(input.conditionA)> ContentF</if>
  <else>123</else>
  <if(input.conditionA)> 123</if>
  <else>ContentF</else>
  <if(input.conditionA === 'Default')> 4mb</if>
  <else
    ><if(input.conditionB === 'Complete')> 20mb</if> <else>9mb</else></else>
  <if(input.conditionA === 'Default')>
    <if(input.conditionB === 'Complete')> 20mb</if>
    <else>9mb</else></if>
  <else>4mb</else>
</div>"
`;

exports[`Marko > jsx > Javascript Test > showWithFor 1`] = `
"class {}

<if(input.conditionA)>
  <for|item,idx| of=(input.items)>
    <div key=(idx)>\${item}</div>
  </for></if>
<else><div>else-condition-A</div></else>"
`;

exports[`Marko > jsx > Javascript Test > showWithOtherValues 1`] = `
"class {}

<div>
  <if(input.conditionA)> ContentA </if>

  <if(input.conditionA)> ContentB </if>
  <else>\${undefined}</else>
  <if(input.conditionA)> ContentC </if>

  <if(input.conditionA)> ContentD </if>

  <if(input.conditionA)> ContentE </if>
  <else>hello</else>
  <if(input.conditionA)> ContentF </if>
  <else>123</else>
</div>"
`;

exports[`Marko > jsx > Javascript Test > showWithRootText 1`] = `
"class {}

<if(input.conditionA)> ContentA </if>
<else><div>else-condition-A</div></else>"
`;

exports[`Marko > jsx > Javascript Test > signalsOnUpdate 1`] = `
"class {
  onRender() {
    console.log(\\"props.id changed\\", this.input.id);
    console.log(
      \\"props.foo.value.bar.baz changed\\",
      this.input.foo.value.bar.baz
    );
  }
}

style { 
  .div-120e4d4e {
    padding: 10px;
  }
}
<div class=\\"test div-120e4d4e\\">\${input.id} \${input.foo.value.bar.baz}</div>"
`;

exports[`Marko > jsx > Javascript Test > spreadAttrs 1`] = `
"class {}

<input ...(attrs) />"
`;

exports[`Marko > jsx > Javascript Test > spreadNestedProps 1`] = `
"class {}

<input ...(props.nested) />"
`;

exports[`Marko > jsx > Javascript Test > spreadProps 1`] = `
"class {}

<input ...(props) />"
`;

exports[`Marko > jsx > Javascript Test > string-literal-store 1`] = `
"class {
  onCreate() {
    this.state = { foo: 123 };
  }
}

<div>\${state.foo}</div>"
`;

exports[`Marko > jsx > Javascript Test > string-literal-store-kebab 1`] = `
"class {

    onCreate() {
      this.state = { foo-bar: 123,}
    }

}

<div>\${component.'foo-bar'}</div>"
`;

exports[`Marko > jsx > Javascript Test > styleClassAndCss 1`] = `
"class {}

style { 
  .div-53ff897e {
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
<div
  class=\\"builder-column div-53ff897e\\"
  style=({
  width: '100%'
})
></div>"
`;

exports[`Marko > jsx > Javascript Test > stylePropClassAndCss 1`] = `
"class {}

style { 
  .div-40d76e28 {
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
<div
  style=(input.attributes.style)
  class=(input.attributes.class + ' div-40d76e28')
></div>"
`;

exports[`Marko > jsx > Javascript Test > subComponent 1`] = `
"import Foo from \\"./foo-sub-component.marko\\";

class {}

<Foo></Foo>"
`;

exports[`Marko > jsx > Javascript Test > svgComponent 1`] = `
"class {}

<svg
  fill=\\"none\\"
  role=\\"img\\"
  viewBox=('0 0 ' + 42 + ' ' + 42)
  width=(42)
  height=(42)
>
  <defs>
    <filter id=\\"prefix__filter0_f\\" filterUnits=\\"userSpaceOnUse\\">
      <feFlood result=\\"BackgroundImageFix\\"></feFlood>
      <feBlend
        in=\\"SourceGraphic\\"
        in2=\\"BackgroundImageFix\\"
        result=\\"shape\\"
      ></feBlend>
      <feGaussianBlur
        result=\\"effect1_foregroundBlur\\"
        stdDeviation=(7)
      ></feGaussianBlur>
    </filter>
  </defs>
</svg>"
`;

exports[`Marko > jsx > Javascript Test > typeDependency 1`] = `
"class {}

<div>\${input.foo}</div>"
`;

exports[`Marko > jsx > Javascript Test > use-style 1`] = `
"class {}

style { 
  button {
    background: blue;
    color: white;
    font-size: 12px;
    outline: 1px solid black;
  }
}
<button type=\\"button\\">Button</button>"
`;

exports[`Marko > jsx > Javascript Test > use-style-and-css 1`] = `
"class {}

style { 
  button {
    font-size: 12px;
    outline: 1px solid black;
  }

  .button-11144e0c {
    background: blue;
    color: white;
  }
}
<button type=\\"button\\" class=\\"button-11144e0c\\">Button</button>"
`;

exports[`Marko > jsx > Javascript Test > use-style-outside-component 1`] = `
"class {}

style { 
  button {
    background: blue;
    color: white;
    font-size: 12px;
    outline: 1px solid black;
  }
}
<button type=\\"button\\">Button</button>"
`;

exports[`Marko > jsx > Javascript Test > useTarget 1`] = `
"class {
  get name() {
    const prefix = \\"m\\";
    return prefix + \\"foo\\";
  }

  onCreate() {
    this.state = { lastName: \\"bar\\" };
  }

  onMount() {}
}

<div>\${component.name}</div>"
`;

exports[`Marko > jsx > Javascript Test > webComponent 1`] = `
"import { register } from \\"swiper/element/bundle\\";

class {}

<swiper-container slides-per-view=\\"3\\" navigation=\\"true\\" pagination=\\"true\\"
  ><swiper-slide>Slide 1</swiper-slide>
  <swiper-slide>Slide 2</swiper-slide>
  <swiper-slide>Slide 3</swiper-slide></swiper-container
>"
`;

exports[`Marko > jsx > Remove Internal mitosis package 1`] = `
"class {
  onCreate() {
    this.state = { name: \\"PatrickJS\\" };
  }
}

<div>
  Hello \${state.name} ! I can run in React, Qwik, Vue, Solid, or Liquid!
</div>"
`;

exports[`Marko > jsx > Typescript Test > AdvancedRef 1`] = `
"class {
  onBlur = function onBlur() {
    // Maintain focus
    this.inputRef.focus();
  };
  lowerCaseName = function lowerCaseName() {
    return this.state.name.toLowerCase();
  };

  onCreate(input) {
    this.state = { name: \\"PatrickJS\\" };
  }

  get inputRef() {
    return this.getEl(\\"inputRef\\");
  }
  get inputNoArgRef() {
    return this.getEl(\\"inputNoArgRef\\");
  }

  onRender() {
    console.log(\\"Received an update\\");
  }
}

style { 
  .input-3b7b900d {
    color: red;
  }
}
<div>
  <if(input.showInput)>
    <input
      class=\\"input-3b7b900d\\"
      key=\\"inputRef\\"
      value=(state.name)
      on-blur(event => component.onBlur())
      on-input(event => state.name = event.target.value)
    />
    <label for=\\"cars\\" key=\\"inputNoArgRef\\"> Choose a car: </label>
    <select name=\\"cars\\" id=\\"cars\\">
      <option value=\\"supra\\">GR Supra</option>
      <option value=\\"86\\">GR 86</option>
    </select></if>

  Hello \${component.lowerCaseName()} ! I can run in React, Qwik, Vue, Solid, or
  Web Component!
</div>"
`;

exports[`Marko > jsx > Typescript Test > Basic 1`] = `
"export const DEFAULT_VALUES = {
  name: \\"Steve\\",
};

class {
  underscore_fn_name() {
    return \\"bar\\";
  }

  onCreate() {
    this.state = { name: \\"Steve\\", age: 1, sports: [\\"\\"] };
  }
}

style { 
  .div-f70acf48 {
    padding: 10px;
  }
}
<div class=\\"test div-f70acf48\\">
  <input
    value=(DEFAULT_VALUES.name || state.name)
    on-input(myEvent => state.name = myEvent.target.value)
  />

  Hello! I can run in React, Vue, Solid, or Liquid!
</div>"
`;

exports[`Marko > jsx > Typescript Test > Basic 2`] = `
"class {
  onCreate() {
    this.state = { name: \\"PatrickJS\\", names: [\\"Steve\\", \\"PatrickJS\\"] };
  }
}

<div>
  <for|person| of=(state.names)>
    <if(person === state.name)>
      <input
        value=(state.name)
        on-input(event => {
  state.name = event.target.value + ' and ' + person;
})
      />

      Hello \${person} ! I can run in Qwik, Web Component, React, Vue, Solid, or
      Liquid!
    </if>
  </for>
</div>"
`;

exports[`Marko > jsx > Typescript Test > Basic Context 1`] = `
"import { Injector, MyService, createInjector } from \\"@dummy/injection-js\\";

class {
  onChange = function onChange() {
    const change = myService.method(\\"change\\");
    console.log(change);
  };

  onCreate() {
    this.state = { name: \\"PatrickJS\\" };
  }

  onMount() {
    const bye = myService.method(\\"hi\\");
    console.log(bye);
  }
}

<div>
  \${myService.method('hello') + state.name} Hello! I can run in React, Vue,
  Solid, or Liquid!

  <input on-input(event => component.onChange) />
</div>"
`;

exports[`Marko > jsx > Typescript Test > Basic OnMount Update 1`] = `
"class {
  onCreate(input) {
    this.state = { name: \\"PatrickJS\\", names: [\\"Steve\\", \\"PatrickJS\\"] };
  }

  onMount() {
    this.state.name = \\"PatrickJS onMount\\" + this.input.bye;
  }
}

<div>Hello \${state.name}</div>"
`;

exports[`Marko > jsx > Typescript Test > Basic Outputs 1`] = `
"class {
  onCreate(input) {
    this.state = { name: \\"PatrickJS\\" };
  }

  onMount() {
    this.input.onMessage(this.state.name);
    this.input.onEvent(this.input.message);
  }
}

<div></div>"
`;

exports[`Marko > jsx > Typescript Test > Basic Outputs Meta 1`] = `
"class {
  onCreate(input) {
    this.state = { name: \\"PatrickJS\\" };
  }

  onMount() {
    this.input.onMessage(this.state.name);
    this.input.onEvent(this.input.message);
  }
}

<div></div>"
`;

exports[`Marko > jsx > Typescript Test > BasicAttribute 1`] = `
"class {}

<input autocapitalize=\\"on\\" autocomplete=\\"on\\" spellcheck=(true) />"
`;

exports[`Marko > jsx > Typescript Test > BasicBooleanAttribute 1`] = `
"import MyBooleanAttributeComponent from \\"./basic-boolean-attribute-component.raw\\";

class {}

<div>
  <if(input.children)> \${input.children} \${input.type}</if>

  <MyBooleanAttributeComponent toggle=(true)></MyBooleanAttributeComponent>
  <MyBooleanAttributeComponent toggle=(true)></MyBooleanAttributeComponent>
  <MyBooleanAttributeComponent list=(null)></MyBooleanAttributeComponent>
</div>"
`;

exports[`Marko > jsx > Typescript Test > BasicChildComponent 1`] = `
"import MyBasicOnMountUpdateComponent from \\"./basic-onMount-update.raw\\";
import MyBasicComponent from \\"./basic.raw\\";

class {
  onCreate() {
    this.state = { name: \\"Steve\\", dev: \\"PatrickJS\\" };
  }
}

<div>
  <MyBasicComponent id=(state.dev)></MyBasicComponent>
  <div>
    <MyBasicOnMountUpdateComponent
      hi=(state.name)
      bye=(state.dev)
    ></MyBasicOnMountUpdateComponent>
  </div>
</div>"
`;

exports[`Marko > jsx > Typescript Test > BasicFor 1`] = `
"class {
  onCreate() {
    this.state = { name: \\"PatrickJS\\", names: [\\"Steve\\", \\"PatrickJS\\"] };
  }

  onMount() {
    console.log(\\"onMount code\\");
  }
}

<div>
  <for|person| of=(state.names)>
    <input
      value=(state.name)
      on-input(event => {
  state.name = event.target.value + ' and ' + person;
})
    />

    Hello \${person} ! I can run in Qwik, Web Component, React, Vue, Solid, or
    Liquid!
  </for>
</div>"
`;

exports[`Marko > jsx > Typescript Test > BasicRef 1`] = `
"class {
  onBlur = function onBlur() {
    // Maintain focus
    this.inputRef.focus();
  };
  lowerCaseName = function lowerCaseName() {
    return this.state.name.toLowerCase();
  };

  onCreate(input) {
    this.state = { name: \\"PatrickJS\\" };
  }

  get inputRef() {
    return this.getEl(\\"inputRef\\");
  }
  get inputNoArgRef() {
    return this.getEl(\\"inputNoArgRef\\");
  }
}

style { 
  .input-77dfc7d6 {
    color: red;
  }
}
<div>
  <if(input.showInput)>
    <input
      class=\\"input-77dfc7d6\\"
      key=\\"inputRef\\"
      value=(state.name)
      on-blur(event => component.onBlur())
      on-input(event => state.name = event.target.value)
    />
    <label for=\\"cars\\" key=\\"inputNoArgRef\\"> Choose a car: </label>
    <select name=\\"cars\\" id=\\"cars\\">
      <option value=\\"supra\\">GR Supra</option>
      <option value=\\"86\\">GR 86</option>
    </select></if>

  Hello \${component.lowerCaseName()} ! I can run in React, Qwik, Vue, Solid, or
  Web Component!
</div>"
`;

exports[`Marko > jsx > Typescript Test > BasicRefAssignment 1`] = `
"class {
  handlerClick = function handlerClick(event: Event) {
    event.preventDefault();
    console.log(\\"current value\\", this.holdValueRef);
    this.holdValueRef = this.holdValueRef + \\"JS\\";
  };
}

<div>
  <button on-click(evt => component.handlerClick(evt))>Click</button>
</div>"
`;

exports[`Marko > jsx > Typescript Test > BasicRefPrevious 1`] = `
"export function usePrevious<T>(value: T) {
  // The ref object is a generic container whose current property is mutable ...
  // ... and can hold any value, similar to an instance property on a class
  let ref = useRef<T>(null); // Store current value in ref

  onUpdate(() => {
    ref = value;
  }, [value]); // Only re-run if value changes
  // Return previous value (happens before update in useEffect above)

  return ref;
}

class {
  onCreate() {
    this.state = { count: 0 };
  }

  onRender() {
    this.prevCount = this.state.count;
  }
}

<div>
  <h1>Now: \${state.count} , before: \${this.prevCount}</h1>
  <button on-click(event => state.count += 1)>Increment</button>
</div>"
`;

exports[`Marko > jsx > Typescript Test > Button 1`] = `
"class {}

<div>
  <if(input.link)>
    <a
      ...(props.attributes)
      href=(input.link)
      target=(input.openLinkInNewTab ? '_blank' : undefined)
      >\${input.text}</a></if>

  <if(!input.link)>
    <button type=\\"button\\" ...(props.attributes)>\${input.text}</button></if>
</div>"
`;

exports[`Marko > jsx > Typescript Test > Columns 1`] = `
"class {
  getColumns() {
    return this.input.columns || [];
  }
  getGutterSize() {
    return typeof this.input.space === \\"number\\" ? this.input.space || 0 : 20;
  }
  getWidth(index: number) {
    const columns = this.getColumns();
    return (columns[index] && columns[index].width) || 100 / columns.length;
  }
  getColumnCssWidth(index: number) {
    const columns = this.getColumns();
    const gutterSize = this.getGutterSize();
    const subtractWidth = (gutterSize * (columns.length - 1)) / columns.length;
    return \`calc(\${this.getWidth(index)}% - \${subtractWidth}px)\`;
  }
}

style { 
  .div-589a139a {
    display: flex;
    flex-direction: column;
    align-items: stretch;
    line-height: normal;
  }
  @media (max-width: 999px) {
    .div-589a139a {
      flex-direction: row;
    }
  }
  @media (max-width: 639px) {
    .div-589a139a {
      flex-direction: row-reverse;
    }
  }
  .div-589a139a-2 {
    flex-grow: 1;
  }
}
<div class=\\"builder-columns div-589a139a\\">
  <for|column,index| of=(input.columns)>
    <div class=\\"builder-column div-589a139a-2\\">\${column.content} \${index}</div>
  </for>
</div>"
`;

exports[`Marko > jsx > Typescript Test > ContentSlotHtml 1`] = `
"import type { JSX } from \\"../../../../jsx-runtime\\";

class {}

<div>
  <slot name=(input.slotTesting)></slot>
  <div><hr /></div>
  <div><slot></slot></div>
</div>"
`;

exports[`Marko > jsx > Typescript Test > ContentSlotJSX 1`] = `
"import type { JSX } from \\"../../../../jsx-runtime\\";

class {
  get cls() {
    return this.input.slotContent && this.input.children
      ? \`\${this.state.name}-content\`
      : \\"\\";
  }
  show() {
    this.input.slotContent ? 1 : \\"\\";
  }

  onCreate(input) {
    this.state = { name: \\"king\\", showContent: false };
  }
}

<if(input.slotReference)>
  <div
    name=(input.slotContent ? 'name1' : 'name2')
    title=(input.slotContent ? 'title1' : 'title2')  ...(props.attributes)
    on-click(event => component.show())
    class=(component.cls)
  >
    <if(state.showContent && input.slotContent)>
      <slot name=\\"content\\">\${input.content}</slot></if>

    <div><hr /></div>
    <div>\${input.children}</div>
  </div></if>"
`;

exports[`Marko > jsx > Typescript Test > CustomCode 1`] = `
"class {
  findAndRunScripts() {
    // TODO: Move this function to standalone one in '@builder.io/utils'
    if (this.elem && typeof window !== \\"undefined\\") {
      /** @type {HTMLScriptElement[]} */
      const scripts = this.elem.getElementsByTagName(\\"script\\");

      for (let i = 0; i < scripts.length; i++) {
        const script = scripts[i];

        if (script.src) {
          if (this.state.scriptsInserted.includes(script.src)) {
            continue;
          }

          this.state.scriptsInserted.push(script.src);
          const newScript = document.createElement(\\"script\\");
          newScript.async = true;
          newScript.src = script.src;
          document.head.appendChild(newScript);
        } else if (
          !script.type ||
          [
            \\"text/javascript\\",
            \\"application/javascript\\",
            \\"application/ecmascript\\",
          ].includes(script.type)
        ) {
          if (this.state.scriptsRun.includes(script.innerText)) {
            continue;
          }

          try {
            this.state.scriptsRun.push(script.innerText);
            new Function(script.innerText)();
          } catch (error) {
            console.warn(\\"\`CustomCode\`: Error running script:\\", error);
          }
        }
      }
    }
  }

  onCreate(input) {
    this.state = { scriptsInserted: [], scriptsRun: [] };
  }

  get elem() {
    return this.getEl(\\"elem\\");
  }

  onMount() {
    this.findAndRunScripts();
  }
}

<div
  key=\\"elem\\"
  class=('builder-custom-code' + (input.replaceNodes ? ' replace-nodes' : ''))
>
  $!{input.code}
</div>"
`;

exports[`Marko > jsx > Typescript Test > Embed 1`] = `
"class {
  findAndRunScripts() {
    // TODO: Move this function to standalone one in '@builder.io/utils'
    if (this.elem && typeof window !== \\"undefined\\") {
      /** @type {HTMLScriptElement[]} */
      const scripts = this.elem.getElementsByTagName(\\"script\\");

      for (let i = 0; i < scripts.length; i++) {
        const script = scripts[i];

        if (script.src) {
          if (this.state.scriptsInserted.includes(script.src)) {
            continue;
          }

          this.state.scriptsInserted.push(script.src);
          const newScript = document.createElement(\\"script\\");
          newScript.async = true;
          newScript.src = script.src;
          document.head.appendChild(newScript);
        } else if (
          !script.type ||
          [
            \\"text/javascript\\",
            \\"application/javascript\\",
            \\"application/ecmascript\\",
          ].includes(script.type)
        ) {
          if (this.state.scriptsRun.includes(script.innerText)) {
            continue;
          }

          try {
            this.state.scriptsRun.push(script.innerText);
            new Function(script.innerText)();
          } catch (error) {
            console.warn(\\"\`CustomCode\`: Error running script:\\", error);
          }
        }
      }
    }
  }

  onCreate(input) {
    this.state = { scriptsInserted: [], scriptsRun: [] };
  }

  get elem() {
    return this.getEl(\\"elem\\");
  }

  onMount() {
    this.findAndRunScripts();
  }
}

<div
  key=\\"elem\\"
  class=('builder-custom-code' + (input.replaceNodes ? ' replace-nodes' : ''))
>
  $!{input.code}
</div>"
`;

exports[`Marko > jsx > Typescript Test > Form 1`] = `
"import { Builder, BuilderElement, builder } from \\"@builder.io/sdk\\";
import {
  BuilderBlock as BuilderBlockComponent,
  BuilderBlocks,
  get,
  set,
} from \\"@fake\\";

class {
  get submissionState() {
    return (
      (Builder.isEditing && this.input.previewState) || this.state.formState
    );
  }
  onSubmit(
    event: Event & {
      currentTarget: HTMLFormElement;
    }
  ) {
    const sendWithJs =
      this.input.sendWithJs || this.input.sendSubmissionsTo === \\"email\\";

    if (this.input.sendSubmissionsTo === \\"zapier\\") {
      event.preventDefault();
    } else if (sendWithJs) {
      if (!(this.input.action || this.input.sendSubmissionsTo === \\"email\\")) {
        event.preventDefault();
        return;
      }

      event.preventDefault();
      const el = event.currentTarget;
      const headers = this.input.customHeaders || {};
      let body: any;
      const formData = new FormData(el); // TODO: maybe support null

      const formPairs: {
        key: string;
        value: File | boolean | number | string | FileList;
      }[] = Array.from(
        event.currentTarget.querySelectorAll(\\"input,select,textarea\\")
      )
        .filter((el) => !!(el as HTMLInputElement).name)
        .map((el) => {
          let value: any;
          const key = (el as HTMLImageElement).name;

          if (el instanceof HTMLInputElement) {
            if (el.type === \\"radio\\") {
              if (el.checked) {
                value = el.name;
                return {
                  key,
                  value,
                };
              }
            } else if (el.type === \\"checkbox\\") {
              value = el.checked;
            } else if (el.type === \\"number\\" || el.type === \\"range\\") {
              const num = el.valueAsNumber;

              if (!isNaN(num)) {
                value = num;
              }
            } else if (el.type === \\"file\\") {
              // TODO: one vs multiple files
              value = el.files;
            } else {
              value = el.value;
            }
          } else {
            value = (el as HTMLInputElement).value;
          }

          return {
            key,
            value,
          };
        });
      let contentType = this.input.contentType;

      if (this.input.sendSubmissionsTo === \\"email\\") {
        contentType = \\"multipart/form-data\\";
      }

      Array.from(formPairs).forEach(({ value }) => {
        if (
          value instanceof File ||
          (Array.isArray(value) && value[0] instanceof File) ||
          value instanceof FileList
        ) {
          contentType = \\"multipart/form-data\\";
        }
      }); // TODO: send as urlEncoded or multipart by default
      // because of ease of use and reliability in browser API
      // for encoding the form?

      if (contentType !== \\"application/json\\") {
        body = formData;
      } else {
        // Json
        const json = {};
        Array.from(formPairs).forEach(({ value, key }) => {
          set(json, key, value);
        });
        body = JSON.stringify(json);
      }

      if (contentType && contentType !== \\"multipart/form-data\\") {
        if (
          /* Zapier doesn't allow content-type header to be sent from browsers */
          !(sendWithJs && this.input.action?.includes(\\"zapier.com\\"))
        ) {
          headers[\\"content-type\\"] = contentType;
        }
      }

      const presubmitEvent = new CustomEvent(\\"presubmit\\", {
        detail: {
          body,
        },
      });

      if (this.formRef) {
        this.formRef.dispatchEvent(presubmitEvent);

        if (presubmitEvent.defaultPrevented) {
          return;
        }
      }

      this.state.formState = \\"sending\\";
      const formUrl = \`\${
        builder.env === \\"dev\\" ? \\"http://localhost:5000\\" : \\"https://builder.io\\"
      }/api/v1/form-submit?apiKey=\${builder.apiKey}&to=\${btoa(
        this.input.sendSubmissionsToEmail || \\"\\"
      )}&name=\${encodeURIComponent(this.input.name || \\"\\")}\`;
      fetch(
        this.input.sendSubmissionsTo === \\"email\\" ? formUrl : this.input.action!,
        /* TODO: throw error if no action URL */
        {
          body,
          headers,
          method: this.input.method || \\"post\\",
        }
      ).then(
        async (res) => {
          let body;
          const contentType = res.headers.get(\\"content-type\\");

          if (contentType && contentType.indexOf(\\"application/json\\") !== -1) {
            body = await res.json();
          } else {
            body = await res.text();
          }

          if (!res.ok && this.input.errorMessagePath) {
            /* TODO: allow supplying an error formatter function */
            let message = get(body, this.input.errorMessagePath);

            if (message) {
              if (typeof message !== \\"string\\") {
                /* TODO: ideally convert json to yaml so it woul dbe like
            error: - email has been taken */
                message = JSON.stringify(message);
              }

              this.state.formErrorMessage = message;
            }
          }

          this.state.responseData = body;
          this.state.formState = res.ok ? \\"success\\" : \\"error\\";

          if (res.ok) {
            const submitSuccessEvent = new CustomEvent(\\"submit:success\\", {
              detail: {
                res,
                body,
              },
            });

            if (this.formRef) {
              this.formRef.dispatchEvent(submitSuccessEvent);

              if (submitSuccessEvent.defaultPrevented) {
                return;
              }
              /* TODO: option to turn this on/off? */

              if (this.input.resetFormOnSubmit !== false) {
                this.formRef.reset();
              }
            }
            /* TODO: client side route event first that can be preventDefaulted */

            if (this.input.successUrl) {
              if (this.formRef) {
                const event = new CustomEvent(\\"route\\", {
                  detail: {
                    url: this.input.successUrl,
                  },
                });
                this.formRef.dispatchEvent(event);

                if (!event.defaultPrevented) {
                  location.href = this.input.successUrl;
                }
              } else {
                location.href = this.input.successUrl;
              }
            }
          }
        },
        (err) => {
          const submitErrorEvent = new CustomEvent(\\"submit:error\\", {
            detail: {
              error: err,
            },
          });

          if (this.formRef) {
            this.formRef.dispatchEvent(submitErrorEvent);

            if (submitErrorEvent.defaultPrevented) {
              return;
            }
          }

          this.state.responseData = err;
          this.state.formState = \\"error\\";
        }
      );
    }
  }

  onCreate(input) {
    this.state = {
      formState: \\"unsubmitted\\",
      responseData: null,
      formErrorMessage: \\"\\",
    };
  }

  get formRef() {
    return this.getEl(\\"formRef\\");
  }
}

style { 
  .pre-6976c39e {
    padding: 10px;
    color: red;
    text-align: center;
  }
}
<form
  validate=(input.validate)
  key=\\"formRef\\"
  action=(!input.sendWithJs && input.action)
  method=(input.method)
  name=(input.name)
  on-submit(event => component.onSubmit(event))  ...(props.attributes)
>
  <if(input.builderBlock && input.builderBlock.children)>
    <for|block,index| of=(input.builderBlock?.children)>
      <BuilderBlockComponent
        key=(block.id)
        block=(block)
        index=(index)
      ></BuilderBlockComponent> </for></if>

  <if(component.submissionState === 'error')>
    <BuilderBlocks
      dataPath=\\"errorMessage\\"
      blocks=(input.errorMessage!)
    ></BuilderBlocks></if>

  <if(component.submissionState === 'sending')>
    <BuilderBlocks
      dataPath=\\"sendingMessage\\"
      blocks=(input.sendingMessage!)
    ></BuilderBlocks></if>

  <if(component.submissionState === 'error' && state.responseData)>
    <pre class=\\"builder-form-error-text pre-6976c39e\\">
\${JSON.stringify(state.responseData, null, 2)}</pre>
  </if>

  <if(component.submissionState === 'success')>
    <BuilderBlocks
      dataPath=\\"successMessage\\"
      blocks=(input.successMessage!)
    ></BuilderBlocks></if>
</form>"
`;

exports[`Marko > jsx > Typescript Test > Image 1`] = `
"class {
  setLoaded() {
    this.state.imageLoaded = true;
  }
  useLazyLoading() {
    // TODO: Add more checks here, like testing for real web browsers
    return !!this.input.lazy && this.isBrowser();
  }
  isBrowser = function isBrowser() {
    return (
      typeof window !== \\"undefined\\" && window.navigator.product != \\"ReactNative\\"
    );
  };

  onCreate(input) {
    this.state = { scrollListener: null, imageLoaded: false, load: false };
  }

  get pictureRef() {
    return this.getEl(\\"pictureRef\\");
  }

  onMount() {
    if (this.useLazyLoading()) {
      // throttled scroll capture listener
      const listener = () => {
        if (this.pictureRef) {
          const rect = this.pictureRef.getBoundingClientRect();
          const buffer = window.innerHeight / 2;

          if (rect.top < window.innerHeight + buffer) {
            this.state.load = true;
            this.state.scrollListener = null;
            window.removeEventListener(\\"scroll\\", listener);
          }
        }
      };

      this.state.scrollListener = listener;
      window.addEventListener(\\"scroll\\", listener, {
        capture: true,
        passive: true,
      });
      listener();
    }
  }
  onDestroy() {
    if (this.state.scrollListener) {
      window.removeEventListener(\\"scroll\\", this.state.scrollListener);
    }
  }
}

style { 
  .img-22f3c8d4 {
    opacity: 1;
    transition: opacity 0.2s ease-in-out;
    object-fit: cover;
    object-position: center;
  }
}
<div>
  <picture key=\\"pictureRef\\"
    ><if(!component.useLazyLoading() || state.load)>
      <img
        alt=(input.altText)
        aria-role=(input.altText ? 'presentation' : undefined)
        class=('builder-image' + (input._class ? ' ' + input._class : '') + ' img-22f3c8d4')
        src=(input.image)
        on-load(event => component.setLoaded())
        srcset=(input.srcset)
        sizes=(input.sizes)
    /></if>

    <source srcset=(input.srcset)
  /></picture>
  \${input.children}
</div>"
`;

exports[`Marko > jsx > Typescript Test > Image State 1`] = `
"class {
  onCreate() {
    this.state = { canShow: true, images: [\\"http://example.com/qwik.png\\"] };
  }
}

<div>
  <for|item,itemIndex| of=(state.images)>
    <img class=\\"custom-class\\" src=(item) key=(itemIndex) />
  </for>
</div>"
`;

exports[`Marko > jsx > Typescript Test > Img 1`] = `
"import { Builder } from \\"@builder.io/sdk\\";

class {}

<img
  style=({
  objectFit: input.backgroundSize || 'cover',
  objectPosition: input.backgroundPosition || 'center'
})  ...(props.attributes)
  key=(Builder.isEditing && input.imgSrc || 'default-key')
  alt=(input.altText)
  src=(input.imgSrc)
/>"
`;

exports[`Marko > jsx > Typescript Test > Input 1`] = `
"import { Builder } from \\"@builder.io/sdk\\";

class {}

<input
  ...(props.attributes)
  key=(Builder.isEditing && input.defaultValue ? input.defaultValue : 'default-key')
  placeholder=(input.placeholder)
  type=(input.type)
  name=(input.name)
  value=(input.value)
  defaultValue=(input.defaultValue)
  required=(input.required)
  on-input(event => input.onChange?.(event.target.value))
/>"
`;

exports[`Marko > jsx > Typescript Test > InputParent 1`] = `
"import FormInputComponent from \\"./input.raw\\";

class {
  handleChange(value: string) {
    console.log(value);
  }
}

<FormInputComponent
  name=\\"kingzez\\"
  type=\\"text\\"
  on-change(value => component.handleChange(value))
></FormInputComponent>"
`;

exports[`Marko > jsx > Typescript Test > RawText 1`] = `
"class {}

<span class=(input.attributes?.class || input.attributes?.className)
  >$!{input.text || ''}</span>"
`;

exports[`Marko > jsx > Typescript Test > Section 1`] = `
"class {}

<section
  ...(props.attributes)
  style=(input.maxWidth && typeof input.maxWidth === 'number' ? {
  maxWidth: input.maxWidth
} : undefined)
>
  \${input.children}
</section>"
`;

exports[`Marko > jsx > Typescript Test > Section 2`] = `
"class {
  onCreate(input) {
    this.state = { max: 42, items: [42] };
  }
}

<if(state.max)>
  <for|item| of=(state.items)>
    <section
      ...(props.attributes)
      style=({
  maxWidth: item + state.max
})
    >
      \${input.children}
    </section>
  </for></if>"
`;

exports[`Marko > jsx > Typescript Test > Select 1`] = `
"import { Builder } from \\"@builder.io/sdk\\";

class {}

<select
  ...(props.attributes)
  value=(input.value)
  key=(Builder.isEditing && input.defaultValue ? input.defaultValue : 'default-key')
  defaultValue=(input.defaultValue)
  name=(input.name)
>
  <for|option,index| of=(input.options)>
    <option value=(option.value) data-index=(index)>
      \${option.name || option.value}
    </option>
  </for>
</select>"
`;

exports[`Marko > jsx > Typescript Test > SlotDefault 1`] = `
"class {}

<div>
  <slot><div class=\\"default-slot\\">Default content</div></slot>
</div>"
`;

exports[`Marko > jsx > Typescript Test > SlotHtml 1`] = `
"import ContentSlotCode from \\"./content-slot-jsx.raw\\";

class {}

<div>
  <ContentSlotCode><slot testing=(<div>Hello</div>)></slot></ContentSlotCode>
</div>"
`;

exports[`Marko > jsx > Typescript Test > SlotJsx 1`] = `
"import ContentSlotCode from \\"./content-slot-jsx.raw\\";

class {}

<div><ContentSlotCode slotTesting=(<div>Hello</div>)></ContentSlotCode></div>"
`;

exports[`Marko > jsx > Typescript Test > SlotNamed 1`] = `
"class {}

<div>
  <slot name=\\"myAwesomeSlot\\"></slot>
  <slot name=\\"top\\"></slot>
  <slot name=\\"left\\">Default left</slot>
  <slot>Default Child</slot>
</div>"
`;

exports[`Marko > jsx > Typescript Test > Stamped.io 1`] = `
"import { kebabCase, snakeCase } from \\"lodash\\";

class {
  kebabCaseValue() {
    return kebabCase(\\"testThat\\");
  }
  snakeCaseValue() {
    return snakeCase(\\"testThis\\");
  }

  onCreate(input) {
    this.state = { reviews: [], name: \\"test\\", showReviewPrompt: false };
  }

  onMount() {
    fetch(
      \`https://stamped.io/api/widget/reviews?storeUrl=builder-io.myshopify.com&apiKey=\${
        this.input.apiKey || \\"pubkey-8bbDq7W6w4sB3OWeM1HUy2s47702hM\\"
      }&productId=\${this.input.productId || \\"2410511106127\\"}\`
    )
      .then((res) => res.json())
      .then((data) => {
        this.state.reviews = data.data;
      });
  }
}

style { 
  .input-6d576eee {
    display: block;
  }
  .textarea-6d576eee {
    display: block;
  }
  .button-6d576eee {
    display: block;
  }
  .review-6d576eee {
    margin: 10px;
    padding: 10px;
    background: white;
    display: flex;
    border-radius: 5px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    -webkit-font-smoothing: antialiased;
  }
  .img-6d576eee {
    height: 30px;
    width: 30px;
    margin-right: 10px;
  }
}
<div data-user=(state.name)>
  <button on-click(event => state.showReviewPrompt = true)>
    Write a review
  </button>
  <if(state.showReviewPrompt || 'asdf')>
    <input placeholder=\\"Email\\" />
    <input placeholder=\\"Title\\" class=\\"input-6d576eee\\" />
    <textarea
      placeholder=\\"How was your experience?\\"
      class=\\"textarea-6d576eee\\"
    ></textarea>
    <button
      class=\\"button-6d576eee\\"
      on-click(event => {
  event.preventDefault();
  state.showReviewPrompt = false;
})
    >
      Submit
    </button></if>

  <for|review,index| of=(state.reviews)>
    <div class=\\"review-6d576eee\\" key=(review.id)>
      <img class=\\"img-6d576eee\\" src=(review.avatar) />
      <div class=(state.showReviewPrompt ? 'bg-primary' : 'bg-secondary')>
        <div>N: \${index}</div>
        <div>\${review.author}</div>
        <div>\${review.reviewMessage}</div>
      </div>
    </div>
  </for>
</div>"
`;

exports[`Marko > jsx > Typescript Test > Submit 1`] = `
"class {}

<button type=\\"submit\\" ...(props.attributes)>\${input.text}</button>"
`;

exports[`Marko > jsx > Typescript Test > Text 1`] = `
"import { Builder } from \\"@builder.io/sdk\\";

class {
  onCreate(input) {
    this.state = { name: \\"Decadef20\\" };
  }
}

<div
  contenteditable=(allowEditingText || undefined)
  data-name=({
  test: state.name || 'any name'
})
>
  $!{input.text || input.content || state.name || '
  <p class=\\"text-lg\\">my name</p>
  '}
</div>"
`;

exports[`Marko > jsx > Typescript Test > Textarea 1`] = `
"class {}

<textarea
  ...(props.attributes)
  placeholder=(input.placeholder)
  name=(input.name)
  value=(input.value)
  defaultValue=(input.defaultValue)
></textarea>"
`;

exports[`Marko > jsx > Typescript Test > Video 1`] = `
"class {}

<video
  preload=\\"none\\"
  ...(props.attributes)
  style=({
  width: '100%',
  height: '100%',
  ...input.attributes?.style,
  objectFit: input.fit,
  objectPosition: input.position,
  // Hack to get object fit to work as expected and
  // not have the video overflow
  borderRadius: 1
})
  key=(input.video || 'no-src')
  poster=(input.posterImage)
  autoplay=(input.autoPlay)
  muted=(input.muted)
  controls=(input.controls)
  loop=(input.loop)
></video>"
`;

exports[`Marko > jsx > Typescript Test > arrowFunctionInUseStore 1`] = `
"class {
  setName(value) {
    this.state.name = value;
  }
  updateNameWithArrowFn(value) {
    this.state.name = value;
  }

  onCreate() {
    this.state = { name: \\"steve\\" };
  }
}

<div>Hello \${state.name}</div>"
`;

exports[`Marko > jsx > Typescript Test > basicForNoTagReference 1`] = `
"class {
  get TagNameGetter() {
    return \\"span\\";
  }

  onCreate(input) {
    this.state = { name: \\"VincentW\\", TagName: \\"div\\", tag: \\"span\\" };
  }
}

<state.TagNameGetter>
  Hello
  <state.tag>\${state.name}</state.tag>
  <for|action| of=(input.actions)>
    <state.TagName
      ><action.icon></action.icon> <span>\${action.text}</span></state.TagName
    >
  </for></state.TagNameGetter
>"
`;

exports[`Marko > jsx > Typescript Test > basicForwardRef 1`] = `
"class {
  onCreate(input) {
    this.state = { name: \\"PatrickJS\\" };
  }

  get propsInputRef() {
    return this.getEl(\\"propsInputRef\\");
  }
}

style { 
  .input-41e589d4 {
    color: red;
  }
}
<div>
  <input
    class=\\"input-41e589d4\\"
    key=\\"propsInputRef\\"
    value=(state.name)
    on-input(event => state.name = event.target.value)
  />
</div>"
`;

exports[`Marko > jsx > Typescript Test > basicForwardRefMetadata 1`] = `
"class {
  onCreate(input) {
    this.state = { name: \\"PatrickJS\\" };
  }

  get propsInputRef() {
    return this.getEl(\\"propsInputRef\\");
  }
}

style { 
  .input-2da13ec2 {
    color: red;
  }
}
<div>
  <input
    class=\\"input-2da13ec2\\"
    key=\\"propsInputRef\\"
    value=(state.name)
    on-input(event => state.name = event.target.value)
  />
</div>"
`;

exports[`Marko > jsx > Typescript Test > basicOnUpdateReturn 1`] = `
"class {
  onCreate() {
    this.state = { name: \\"PatrickJS\\" };
  }

  onRender() {
    const controller = new AbortController();
    const signal = controller.signal;
    fetch(\\"https://patrickjs.com/api/resource.json\\", {
      signal,
    })
      .then((response) => response.json())
      .then((data) => {
        this.state.name = data.name;
      });
    return () => {
      if (!signal.aborted) {
        controller.abort();
      }
    };
  }
}

<div>Hello! \${state.name}</div>"
`;

exports[`Marko > jsx > Typescript Test > class + ClassName + css 1`] = `
"class {}

style { 
  .div-6b6c27cc {
    padding: 10px;
  }
}
<div class=\\"test2 test div-6b6c27cc\\">
  Hello! I can run in React, Vue, Solid, or Liquid!
</div>"
`;

exports[`Marko > jsx > Typescript Test > class + css 1`] = `
"class {}

style { 
  .div-fb8d32e6 {
    padding: 10px;
  }
}
<div class=\\"test div-fb8d32e6\\">
  Hello! I can run in React, Vue, Solid, or Liquid!
</div>"
`;

exports[`Marko > jsx > Typescript Test > className + css 1`] = `
"class {}

style { 
  .div-fb8d32e6 {
    padding: 10px;
  }
}
<div class=\\"test div-fb8d32e6\\">
  Hello! I can run in React, Vue, Solid, or Liquid!
</div>"
`;

exports[`Marko > jsx > Typescript Test > className 1`] = `
"import type { JSX } from \\"../../../../jsx-runtime\\";

class {
  onCreate() {
    this.state = { bindings: \\"a binding\\" };
  }
}

<div>
  <div class=\\"no binding\\">Without Binding</div>
  <div class=(state.bindings)>With binding</div>
</div>"
`;

exports[`Marko > jsx > Typescript Test > classState 1`] = `
"class {
  onCreate() {
    this.state = {
      classState: \\"testClassName\\",
      styleState: {
        color: \\"red\\",
      },
    };
  }
}

style { 
  .div-1abc267a {
    padding: 10px;
  }
}
<div class=(state.classState + ' div-1abc267a') style=(state.styleState)>
  Hello! I can run in React, Vue, Solid, or Liquid!
</div>"
`;

exports[`Marko > jsx > Typescript Test > componentWithContext 1`] = `
"import Context1 from \\"@dummy/1\\";
import Context2 from \\"@dummy/2\\";

class {}

\${foo.value}"
`;

exports[`Marko > jsx > Typescript Test > componentWithContextMultiRoot 1`] = `
"import Context1 from \\"@dummy/1\\";
import Context2 from \\"@dummy/2\\";

class {}

\${foo.value}
<div>other</div>"
`;

exports[`Marko > jsx > Typescript Test > contentState 1`] = `
"import BuilderContext from \\"@dummy/context.js\\";

class {}

<div>setting context</div>"
`;

exports[`Marko > jsx > Typescript Test > defaultProps 1`] = `
"class {}

<div>
  <if(input.link)>
    <a
      ...(props.attributes)
      href=(input.link)
      target=(input.openLinkInNewTab ? '_blank' : undefined)
      >\${input.text}</a></if>

  <if(!input.link)>
    <button
      type=\\"button\\"
      ...(props.attributes)
      on-click(event => input.onClick(event))
    >
      \${input.buttonText}
    </button></if>
</div>"
`;

exports[`Marko > jsx > Typescript Test > defaultPropsOutsideComponent 1`] = `
"class {}

<div>
  <if(input.link)>
    <a
      ...(props.attributes)
      href=(input.link)
      target=(input.openLinkInNewTab ? '_blank' : undefined)
      >\${input.text}</a></if>

  <if(!input.link)>
    <button
      type=\\"button\\"
      ...(props.attributes)
      on-click(event => input.onClick(event))
    >
      \${input.text}
    </button></if>
</div>"
`;

exports[`Marko > jsx > Typescript Test > defaultValsWithTypes 1`] = `
"const DEFAULT_VALUES: Props = {
  name: \\"Sami\\",
};

class {}

<div>Hello \${input.name || DEFAULT_VALUES.name}</div>"
`;

exports[`Marko > jsx > Typescript Test > expressionState 1`] = `
"class {
  onCreate(input) {
    this.state = {
      refToUse: !(input.componentRef instanceof Function)
        ? input.componentRef
        : null,
    };
  }
}

<div>\${state.refToUse}</div>"
`;

exports[`Marko > jsx > Typescript Test > getterState 1`] = `
"class {
  get foo2() {
    return this.input.foo + \\"foo\\";
  }
  get bar() {
    return \\"bar\\";
  }
  baz(i: number) {
    return i + this.foo2.length;
  }
}

<div>
  <p>\${component.foo2}</p>
  <p>\${component.bar}</p>
  <p>\${component.baz(1)}</p>
</div>"
`;

exports[`Marko > jsx > Typescript Test > import types 1`] = `
"import { BuilderContent, GetContentOptions } from \\"@builder.io/sdk\\";
import RenderBlock, { RenderBlockProps } from \\"./builder-render-block.raw\\";

class {
  getRenderContentProps(block, index) {
    return {
      block: block,
      index: index,
    };
  }
}

<RenderBlock
  ...(state.getRenderContentProps(props.renderContentProps.block,
  0))
></RenderBlock>"
`;

exports[`Marko > jsx > Typescript Test > multipleOnUpdate 1`] = `
"class {
  onRender() {
    console.log(\\"Runs on every update/rerender\\");

    console.log(\\"Runs on every update/rerender as well\\");
  }
}

<div></div>"
`;

exports[`Marko > jsx > Typescript Test > multipleOnUpdateWithDeps 1`] = `
"class {
  onCreate() {
    this.state = { a: \\"a\\", b: \\"b\\", c: \\"c\\", d: \\"d\\" };
  }

  onRender() {
    console.log(\\"Runs when a or b changes\\", this.state.a, this.state.b);

    if (this.state.a === \\"a\\") {
      this.state.a = \\"b\\";
    }

    console.log(\\"Runs when c or d changes\\", this.state.c, this.state.d);

    if (this.state.a === \\"a\\") {
      this.state.a = \\"b\\";
    }
  }
}

<div></div>"
`;

exports[`Marko > jsx > Typescript Test > multipleSpreads 1`] = `
"class {
  onCreate() {
    this.state = {
      attrs: {
        hello: \\"world\\",
      },
    };
  }
}

<input ...(state.attrs) ...(props) />"
`;

exports[`Marko > jsx > Typescript Test > nestedShow 1`] = `
"class {}

<if(input.conditionA)>
  <if(!input.conditionB)> <div>if condition A and condition B</div></if>
  <else><div>else-condition-B</div></else></if>
<else><div>else-condition-A</div></else>"
`;

exports[`Marko > jsx > Typescript Test > nestedStyles 1`] = `
"class {}

style { 
  .div-7ff9918d {
    display: flex;
    --bar: red;
    color: var(--bar);
  }
  @media (max-width: env(--mobile)) {
    .div-7ff9918d {
      display: block;
    }
  }
  .div-7ff9918d:hover {
    display: flex;
  }
  .div-7ff9918d:active {
    display: inline;
  }
  .div-7ff9918d .nested-selector {
    display: grid;
  }
  .div-7ff9918d .nested-selector:hover {
    display: block;
  }
  .div-7ff9918d.nested-selector:active {
    display: inline-block;
  }
}
<div class=\\"div-7ff9918d\\">Hello world</div>"
`;

exports[`Marko > jsx > Typescript Test > onEvent 1`] = `
"class {
  foo(event) {
    console.log(\\"test2\\");
  }

  get elem() {
    return this.getEl(\\"elem\\");
  }

  onMount() {
    this.elem.dispatchEvent(new CustomEvent(\\"initEditingBldr\\"));
  }
}

<div class=\\"builder-embed\\" key=\\"elem\\"><div>Test</div></div>"
`;

exports[`Marko > jsx > Typescript Test > onInit & onMount 1`] = `
"class {
  onMount() {
    console.log(\\"onMount\\");
  }
}

<div></div>"
`;

exports[`Marko > jsx > Typescript Test > onInit 1`] = `
"export const defaultValues = {
  name: \\"PatrickJS\\",
};

class {
  onCreate(input) {
    this.state = { name: \\"\\" };
  }
}

<div>Default name defined by parent \${state.name}</div>"
`;

exports[`Marko > jsx > Typescript Test > onMount 1`] = `
"class {
  onMount() {
    console.log(\\"Runs on mount\\");
  }
  onDestroy() {
    console.log(\\"Runs on unMount\\");
  }
}

<div></div>"
`;

exports[`Marko > jsx > Typescript Test > onMountMultiple 1`] = `
"class {
  onMount() {
    const onMountHook_0 = () => {
      console.log(\\"Runs on mount\\");
    };

    onMountHook_0();

    const onMountHook_1 = () => {
      console.log(\\"Another one runs on Mount\\");
    };

    onMountHook_1();

    const onMountHook_2 = () => {
      console.log(\\"SSR runs on Mount\\");
    };

    onMountHook_2();
  }
}

<div></div>"
`;

exports[`Marko > jsx > Typescript Test > onUpdate 1`] = `
"class {
  onRender() {
    console.log(\\"Runs on every update/rerender\\");
  }
}

<div></div>"
`;

exports[`Marko > jsx > Typescript Test > onUpdateWithDeps 1`] = `
"class {
  onCreate(input) {
    this.state = { a: \\"a\\", b: \\"b\\" };
  }

  onRender() {
    console.log(
      \\"Runs when a, b or size changes\\",
      this.state.a,
      this.state.b,
      this.input.size
    );
  }
}

<div></div>"
`;

exports[`Marko > jsx > Typescript Test > preserveExportOrLocalStatement 1`] = `
"const b = 3;
const foo = () => {};
export const a = 3;
export const bar = () => {};
export function run<T>(value: T) {}

class {}

<div></div>"
`;

exports[`Marko > jsx > Typescript Test > preserveTyping 1`] = `
"class {}

<div>Hello! I can run in React, Vue, Solid, or Liquid! \${input.name}</div>"
`;

exports[`Marko > jsx > Typescript Test > propsDestructure 1`] = `
"class {
  onCreate(input) {
    this.state = { name: \\"Decadef20\\" };
  }
}

<div>
  \${input.children} \${input.type} Hello! I can run in React, Vue, Solid, or
  Liquid!
</div>"
`;

exports[`Marko > jsx > Typescript Test > propsInterface 1`] = `
"class {}

<div>Hello! I can run in React, Vue, Solid, or Liquid! \${input.name}</div>"
`;

exports[`Marko > jsx > Typescript Test > propsType 1`] = `
"class {}

<div>Hello! I can run in React, Vue, Solid, or Liquid! \${input.name}</div>"
`;

exports[`Marko > jsx > Typescript Test > referencingFunInsideHook 1`] = `
"class {
  foo = function foo(params) {};
  bar = function bar() {};
  zoo = function zoo() {
    const params = {
      cb: this.bar,
    };
  };

  onRender() {
    this.foo({
      someOption: this.bar,
    });
  }
}

<div></div>"
`;

exports[`Marko > jsx > Typescript Test > renderBlock 1`] = `
"import { TARGET } from \\"../../constants/target.js\\";
import type {
  BuilderContextInterface,
  RegisteredComponent,
} from \\"../../context/types.js\\";
import { evaluate } from \\"../../functions/evaluate.js\\";
import { extractTextStyles } from \\"../../functions/extract-text-styles.js\\";
import { getBlockActions } from \\"../../functions/get-block-actions.js\\";
import { getBlockComponentOptions } from \\"../../functions/get-block-component-options.js\\";
import { getBlockProperties } from \\"../../functions/get-block-properties.js\\";
import { getBlockTag } from \\"../../functions/get-block-tag.js\\";
import { getProcessedBlock } from \\"../../functions/get-processed-block.js\\";
import { getReactNativeBlockStyles } from \\"../../functions/get-react-native-block-styles.js\\";
import type { BuilderBlock } from \\"../../types/builder-block.js\\";
import type { Nullable } from \\"../../types/typescript.js\\";
import BlockStyles from \\"./block-styles.marko\\";
import { isEmptyHtmlElement } from \\"./render-block.helpers.js\\";
import RenderComponentWithContext from \\"./render-component-with-context.js\\";
import type { RenderComponentProps } from \\"./render-component.marko\\";
import RenderComponent from \\"./render-component.marko\\";
import RenderRepeatedBlock from \\"./render-repeated-block.marko\\";
import type { RepeatData } from \\"./types.js\\";

class {
  get component() {
    const componentName = getProcessedBlock({
      block: this.input.block,
      state: this.input.context.state,
      context: this.input.context.context,
      shouldEvaluateBindings: false,
    }).component?.name;

    if (!componentName) {
      return null;
    }

    const ref = this.input.context.registeredComponents[componentName];

    if (!ref) {
      // TODO: Public doc page with more info about this message
      console.warn(\`
          Could not find a registered component named \\"\${componentName}\\".
          If you registered it, is the file that registered it imported by the file that needs to render it?\`);
      return undefined;
    } else {
      return ref;
    }
  }
  get tag() {
    return getBlockTag(this.useBlock);
  }
  get useBlock() {
    return this.repeatItemData
      ? this.input.block
      : getProcessedBlock({
          block: this.input.block,
          state: this.input.context.state,
          context: this.input.context.context,
          shouldEvaluateBindings: true,
        });
  }
  get actions() {
    return getBlockActions({
      block: this.useBlock,
      state: this.input.context.state,
      context: this.input.context.context,
    });
  }
  get attributes() {
    const blockProperties = getBlockProperties(this.useBlock);
    return {
      ...blockProperties,
      ...(TARGET === \\"reactNative\\"
        ? {
            style: getReactNativeBlockStyles({
              block: this.useBlock,
              context: this.input.context,
              blockStyles: blockProperties.style,
            }),
          }
        : {}),
    };
  }
  get shouldWrap() {
    return !this.component?.noWrap;
  }
  get renderComponentProps() {
    return {
      blockChildren: this.useChildren,
      componentRef: this.component?.component,
      componentOptions: {
        ...getBlockComponentOptions(this.useBlock),

        /**
         * These attributes are passed to the wrapper element when there is one. If \`noWrap\` is set to true, then
         * they are provided to the component itself directly.
         */
        ...(this.shouldWrap
          ? {}
          : {
              attributes: { ...this.attributes, ...this.actions },
            }),
        customBreakpoints: this.childrenContext?.content?.meta?.breakpoints,
      },
      context: this.childrenContext,
    };
  }
  get useChildren() {
    // TO-DO: When should \`canHaveChildren\` dictate rendering?
    // This is currently commented out because some Builder components (e.g. Box) do not have \`canHaveChildren: true\`,
    // but still receive and need to render children.
    // return state.componentInfo?.canHaveChildren ? state.useBlock.children : [];
    return this.useBlock.children ?? [];
  }
  get childrenWithoutParentComponent() {
    /**
     * When there is no \`componentRef\`, there might still be children that need to be rendered. In this case,
     * we render them outside of \`componentRef\`.
     * NOTE: We make sure not to render this if \`repeatItemData\` is non-null, because that means we are rendering an array of
     * blocks, and the children will be repeated within those blocks.
     */
    const shouldRenderChildrenOutsideRef =
      !this.component?.component && !this.repeatItemData;
    return shouldRenderChildrenOutsideRef ? this.useChildren : [];
  }
  get repeatItemData() {
    /**
     * we don't use \`state.useBlock\` here because the processing done within its logic includes evaluating the block's bindings,
     * which will not work if there is a repeat.
     */
    const { repeat, ...blockWithoutRepeat } = this.input.block;

    if (!repeat?.collection) {
      return undefined;
    }

    const itemsArray = evaluate({
      code: repeat.collection,
      state: this.input.context.state,
      context: this.input.context.context,
    });

    if (!Array.isArray(itemsArray)) {
      return undefined;
    }

    const collectionName = repeat.collection.split(\\".\\").pop();
    const itemNameToUse =
      repeat.itemName || (collectionName ? collectionName + \\"Item\\" : \\"item\\");
    const repeatArray = itemsArray.map<RepeatData>((item, index) => ({
      context: {
        ...this.input.context,
        state: {
          ...this.input.context.state,
          $index: index,
          $item: item,
          [itemNameToUse]: item,
          [\`$\${itemNameToUse}Index\`]: index,
        },
      },
      block: blockWithoutRepeat,
    }));
    return repeatArray;
  }
  get inheritedTextStyles() {
    if (TARGET !== \\"reactNative\\") {
      return {};
    }

    const styles = getReactNativeBlockStyles({
      block: this.useBlock,
      context: this.input.context,
      blockStyles: this.attributes.style,
    });
    return extractTextStyles(styles);
  }
  get childrenContext() {
    return {
      apiKey: this.input.context.apiKey,
      state: this.input.context.state,
      content: this.input.context.content,
      context: this.input.context.context,
      registeredComponents: this.input.context.registeredComponents,
      inheritedStyles: this.inheritedTextStyles,
    };
  }
  get renderComponentTag() {
    if (TARGET === \\"reactNative\\") {
      return RenderComponentWithContext;
    } else if (TARGET === \\"vue3\\") {
      // vue3 expects a string for the component tag
      return \\"RenderComponent\\";
    } else {
      return RenderComponent;
    }
  }
}

<if(component.shouldWrap)>
  <if(isEmptyHtmlElement(component.tag))>
    <state.tag ...(state.attributes) ...(state.actions)></state.tag
  ></if>

  <if(!isEmptyHtmlElement(component.tag) && component.repeatItemData)>
    <for|data,index| of=(component.repeatItemData)>
      <RenderRepeatedBlock
        key=(index)
        repeatContext=(data.context)
        block=(data.block)
      ></RenderRepeatedBlock> </for></if>

  <if(!isEmptyHtmlElement(component.tag) && !component.repeatItemData)>
    <state.tag ...(state.attributes) ...(state.actions)
      ><state.renderComponentTag
        ...(state.renderComponentProps)
      ></state.renderComponentTag>
      <for|child| of=(component.childrenWithoutParentComponent)>
        <RenderBlock
          key=('render-block-' + child.id)
          block=(child)
          context=(component.childrenContext)
        ></RenderBlock>
      </for>
      <for|child| of=(component.childrenWithoutParentComponent)>
        <BlockStyles
          key=('block-style-' + child.id)
          block=(child)
          context=(component.childrenContext)
        ></BlockStyles> </for></state.tag
  ></if>
</if>
<else
  ><state.renderComponentTag
    ...(state.renderComponentProps)
  ></state.renderComponentTag
></else>"
`;

exports[`Marko > jsx > Typescript Test > renderContentExample 1`] = `
"import BuilderContext from \\"@dummy/context.js\\";
import {
  dispatchNewContentToVisualEditor,
  sendComponentsToVisualEditor,
  trackClick,
} from \\"@dummy/injection-js\\";
import RenderBlocks from \\"@dummy/RenderBlocks.marko\\";

class {
  onMount() {
    sendComponentsToVisualEditor(this.input.customComponents);
  }

  onRender() {
    dispatchNewContentToVisualEditor(this.input.content);
  }
}

style { 
  .div-6b87b95c {
    display: flex;
    flex-direction: columns;
  }
}
<div class=\\"div-6b87b95c\\" on-click(event => trackClick(input.content.id))>
  <RenderBlocks blocks=(input.content.blocks)></RenderBlocks>
</div>"
`;

exports[`Marko > jsx > Typescript Test > rootFragmentMultiNode 1`] = `
"class {}

<if(input.link)>
  <a
    ...(props.attributes)
    href=(input.link)
    target=(input.openLinkInNewTab ? '_blank' : undefined)
    >\${input.text}</a></if>

<if(!input.link)>
  <button type=\\"button\\" ...(props.attributes)>\${input.text}</button></if>"
`;

exports[`Marko > jsx > Typescript Test > rootShow 1`] = `
"class {}

<if(input.foo === 'bar')> <div>Bar</div></if> <else><div>Foo</div></else>"
`;

exports[`Marko > jsx > Typescript Test > self-referencing component 1`] = `
"class {}

<div>
  \${input.name}
  <if(input.name === 'Batman')>
    <MyComponent name=\\"Bruce Wayne\\"></MyComponent></if>
</div>"
`;

exports[`Marko > jsx > Typescript Test > self-referencing component with children 1`] = `
"class {}

<div>
  \${input.name} \${input.children}
  <if(input.name === 'Batman')>
    <MyComponent name=\\"Bruce\\"><div>Wayne</div></MyComponent></if>
</div>"
`;

exports[`Marko > jsx > Typescript Test > showExpressions 1`] = `
"class {}

<div>
  <if(input.conditionA)> Content0</if>
  <else>ContentA</else>
  <if(input.conditionA)> ContentA</if>

  <if(input.conditionA)> </if>
  <else>ContentA</else>
  <if(input.conditionA)> ContentB</if>
  <else>\${undefined}</else>
  <if(input.conditionA)> \${undefined}</if>
  <else>ContentB</else>
  <if(input.conditionA)> ContentC</if>

  <if(input.conditionA)> </if>
  <else>ContentC</else>
  <if(input.conditionA)> ContentD</if>

  <if(input.conditionA)> </if>
  <else>ContentD</else>
  <if(input.conditionA)> ContentE</if>
  <else>hello</else>
  <if(input.conditionA)> hello</if>
  <else>ContentE</else>
  <if(input.conditionA)> ContentF</if>
  <else>123</else>
  <if(input.conditionA)> 123</if>
  <else>ContentF</else>
  <if(input.conditionA === 'Default')> 4mb</if>
  <else
    ><if(input.conditionB === 'Complete')> 20mb</if> <else>9mb</else></else>
  <if(input.conditionA === 'Default')>
    <if(input.conditionB === 'Complete')> 20mb</if>
    <else>9mb</else></if>
  <else>4mb</else>
</div>"
`;

exports[`Marko > jsx > Typescript Test > showWithFor 1`] = `
"class {}

<if(input.conditionA)>
  <for|item,idx| of=(input.items)>
    <div key=(idx)>\${item}</div>
  </for></if>
<else><div>else-condition-A</div></else>"
`;

exports[`Marko > jsx > Typescript Test > showWithOtherValues 1`] = `
"class {}

<div>
  <if(input.conditionA)> ContentA </if>

  <if(input.conditionA)> ContentB </if>
  <else>\${undefined}</else>
  <if(input.conditionA)> ContentC </if>

  <if(input.conditionA)> ContentD </if>

  <if(input.conditionA)> ContentE </if>
  <else>hello</else>
  <if(input.conditionA)> ContentF </if>
  <else>123</else>
</div>"
`;

exports[`Marko > jsx > Typescript Test > showWithRootText 1`] = `
"class {}

<if(input.conditionA)> ContentA </if>
<else><div>else-condition-A</div></else>"
`;

exports[`Marko > jsx > Typescript Test > signalsOnUpdate 1`] = `
"class {
  onRender() {
    console.log(\\"props.id changed\\", this.input.id);
    console.log(\\"props.foo.value.bar.baz changed\\", this.input.foo.bar.baz);
  }
}

style { 
  .div-52492278 {
    padding: 10px;
  }
}
<div class=\\"test div-52492278\\">\${input.id} \${input.foo.bar.baz}</div>"
`;

exports[`Marko > jsx > Typescript Test > spreadAttrs 1`] = `
"class {}

<input ...(attrs) />"
`;

exports[`Marko > jsx > Typescript Test > spreadNestedProps 1`] = `
"class {}

<input ...(props.nested) />"
`;

exports[`Marko > jsx > Typescript Test > spreadProps 1`] = `
"class {}

<input ...(props) />"
`;

exports[`Marko > jsx > Typescript Test > string-literal-store 1`] = `
"class {
  onCreate() {
    this.state = { foo: 123 };
  }
}

<div>\${state.foo}</div>"
`;

exports[`Marko > jsx > Typescript Test > string-literal-store-kebab 1`] = `
"class {

    onCreate() {
      this.state = { foo-bar: 123,}
    }

}

<div>\${component.'foo-bar'}</div>"
`;

exports[`Marko > jsx > Typescript Test > styleClassAndCss 1`] = `
"class {}

style { 
  .div-53ff897e {
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
<div
  class=\\"builder-column div-53ff897e\\"
  style=({
  width: '100%'
})
></div>"
`;

exports[`Marko > jsx > Typescript Test > stylePropClassAndCss 1`] = `
"class {}

style { 
  .div-40d76e28 {
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
<div
  style=(input.attributes.style)
  class=(input.attributes.class + ' div-40d76e28')
></div>"
`;

exports[`Marko > jsx > Typescript Test > subComponent 1`] = `
"import Foo from \\"./foo-sub-component.marko\\";

class {}

<Foo></Foo>"
`;

exports[`Marko > jsx > Typescript Test > svgComponent 1`] = `
"class {}

<svg
  fill=\\"none\\"
  role=\\"img\\"
  viewBox=('0 0 ' + 42 + ' ' + 42)
  width=(42)
  height=(42)
>
  <defs>
    <filter id=\\"prefix__filter0_f\\" filterUnits=\\"userSpaceOnUse\\">
      <feFlood result=\\"BackgroundImageFix\\"></feFlood>
      <feBlend
        in=\\"SourceGraphic\\"
        in2=\\"BackgroundImageFix\\"
        result=\\"shape\\"
      ></feBlend>
      <feGaussianBlur
        result=\\"effect1_foregroundBlur\\"
        stdDeviation=(7)
      ></feGaussianBlur>
    </filter>
  </defs>
</svg>"
`;

exports[`Marko > jsx > Typescript Test > typeDependency 1`] = `
"import type { Foo } from \\"./foo-type\\";
import type { Foo as Foo2 } from \\"./type-export.marko\\";

class {}

<div>\${input.foo}</div>"
`;

exports[`Marko > jsx > Typescript Test > use-style 1`] = `
"class {}

style { 
  button {
    background: blue;
    color: white;
    font-size: 12px;
    outline: 1px solid black;
  }
}
<button type=\\"button\\">Button</button>"
`;

exports[`Marko > jsx > Typescript Test > use-style-and-css 1`] = `
"class {}

style { 
  button {
    font-size: 12px;
    outline: 1px solid black;
  }

  .button-11144e0c {
    background: blue;
    color: white;
  }
}
<button type=\\"button\\" class=\\"button-11144e0c\\">Button</button>"
`;

exports[`Marko > jsx > Typescript Test > use-style-outside-component 1`] = `
"class {}

style { 
  button {
    background: blue;
    color: white;
    font-size: 12px;
    outline: 1px solid black;
  }
}
<button type=\\"button\\">Button</button>"
`;

exports[`Marko > jsx > Typescript Test > useTarget 1`] = `
"class {
  get name() {
    const prefix = \\"m\\";
    return prefix + \\"foo\\";
  }

  onCreate() {
    this.state = { lastName: \\"bar\\" };
  }

  onMount() {}
}

<div>\${component.name}</div>"
`;

exports[`Marko > jsx > Typescript Test > webComponent 1`] = `
"import { register } from \\"swiper/element/bundle\\";

class {}

<swiper-container slides-per-view=\\"3\\" navigation=\\"true\\" pagination=\\"true\\"
  ><swiper-slide>Slide 1</swiper-slide>
  <swiper-slide>Slide 2</swiper-slide>
  <swiper-slide>Slide 3</swiper-slide></swiper-container
>"
`;

exports[`Marko > svelte > Javascript Test > basic 1`] = `
"class {
  onCreate() {
    this.state = { name: \\"Steve\\" };
  }
}

<div>
  <input
    on-input(event => state.name = event.target.value)
    value=(state.name)
  />

  Hello! I can run in React, Vue, Solid, or Liquid!
</div>"
`;

exports[`Marko > svelte > Javascript Test > bindGroup 1`] = `
"class {
  onCreate() {
    this.state = { tortilla: \\"Plain\\", fillings: [] };
  }
}

<div>
  <input
    type=\\"radio\\"
    value=\\"Plain\\"
    checked=(state.tortilla === 'Plain')
    on-input(event => state.tortilla = event.target.value)
  />
  <input
    type=\\"radio\\"
    value=\\"Whole wheat\\"
    checked=(state.tortilla === 'Whole wheat')
    on-input(event => state.tortilla = event.target.value)
  />
  <input
    type=\\"radio\\"
    value=\\"Spinach\\"
    checked=(state.tortilla === 'Spinach')
    on-input(event => state.tortilla = event.target.value)
  />
  <br />
  <br />
  <input
    type=\\"checkbox\\"
    value=\\"Rice\\"
    checked=(state.fillings === 'Rice')
    on-input(event => state.fillings = event.target.value)
  />
  <input
    type=\\"checkbox\\"
    value=\\"Beans\\"
    checked=(state.fillings === 'Beans')
    on-input(event => state.fillings = event.target.value)
  />
  <input
    type=\\"checkbox\\"
    value=\\"Cheese\\"
    checked=(state.fillings === 'Cheese')
    on-input(event => state.fillings = event.target.value)
  />
  <input
    type=\\"checkbox\\"
    value=\\"Guac (extra)\\"
    checked=(state.fillings === 'Guac (extra)')
    on-input(event => state.fillings = event.target.value)
  />
  <p>Tortilla: \${state.tortilla}</p>
  <p>Fillings: \${state.fillings}</p>
</div>"
`;

exports[`Marko > svelte > Javascript Test > bindProperty 1`] = `
"class {
  onCreate() {
    this.state = { value: \\"hello\\" };
  }
}

<input value=(state.value) />"
`;

exports[`Marko > svelte > Javascript Test > classDirective 1`] = `
"class {
  onCreate(input) {
    this.state = { focus: true };
  }
}

<input
  class=(\`form-input \${input.disabled ? 'disabled' : ''} \${state.focus ? 'focus' : ''}\`)
/>"
`;

exports[`Marko > svelte > Javascript Test > context 1`] = `
"class {
  onCreate() {
    this.state = { activeTab: 0 };
  }
}

<div>\${state.activeTab}</div>"
`;

exports[`Marko > svelte > Javascript Test > each 1`] = `
"class {
  onCreate() {
    this.state = { numbers: [\\"one\\", \\"two\\", \\"three\\"] };
  }
}

<ul>
  <for|num| of=(state.numbers)>
    <li>\${num}</li>
  </for>
</ul>"
`;

exports[`Marko > svelte > Javascript Test > eventHandlers 1`] = `
"class {
  log = function log(msg = \\"hello\\") {
    console.log(msg);
  };
}

<div>
  <button on-click(a => component.log('hi'))>Log</button>
  <button on-click(event => component.log(event))>Log</button>
  <button on-click(event => component.log(event))>Log</button>
</div>"
`;

exports[`Marko > svelte > Javascript Test > html 1`] = `
"class {
  onCreate() {
    this.state = { html: \\"<b>bold</b>\\" };
  }
}

<div>$!{state.html}</div>"
`;

exports[`Marko > svelte > Javascript Test > ifElse 1`] = `
"class {
  toggle = function toggle() {
    this.state.show = !this.state.show;
  };

  onCreate() {
    this.state = { show: true };
  }
}

<if(state.show)>
  <button on-click(event => component.toggle(event))>Hide</button></if>
<else><button on-click(event => component.toggle(event))>Show</button></else>"
`;

exports[`Marko > svelte > Javascript Test > imports 1`] = `
"import Button from \\"./Button.marko\\";

class {
  onCreate() {
    this.state = { disabled: false };
  }
}

<div>
  <button type=\\"button\\" disabled=(state.disabled)><slot></slot></button>
</div>"
`;

exports[`Marko > svelte > Javascript Test > lifecycleHooks 1`] = `
"class {
  onMount() {
    console.log(\\"onMount\\");
  }
  onDestroy() {
    console.log(\\"onDestroy\\");
  }
  onRender() {
    console.log(\\"onAfterUpdate\\");
  }
}

<div></div>"
`;

exports[`Marko > svelte > Javascript Test > reactive 1`] = `
"class {
  get lowercaseName() {
    return this.state.name.toLowerCase();
  }

  onCreate() {
    this.state = { name: \\"Steve\\" };
  }
}

<div>
  <input value=(state.name) />

  Lowercase: \${component.lowercaseName}
</div>"
`;

exports[`Marko > svelte > Javascript Test > reactiveWithFn 1`] = `
"class {
  calculateResult = function calculateResult(a_, b_) {
    this.state.result = a_ * b_;
  };

  onCreate() {
    this.state = { a: 2, b: 5, result: null };
  }

  onRender() {
    this.calculateResult(this.state.a, this.state.b);
  }
}

<div>
  <input
    type=\\"number\\"
    on-input(event => state.a = event.target.value)
    value=(state.a)
  />
  <input
    type=\\"number\\"
    on-input(event => state.b = event.target.value)
    value=(state.b)
  />

  Result: \${state.result}
</div>"
`;

exports[`Marko > svelte > Javascript Test > slots 1`] = `
"class {}

<div>
  <slot>default</slot> <slot name=\\"Test\\"><div>default</div></slot>
</div>"
`;

exports[`Marko > svelte > Javascript Test > style 1`] = `
"class {}

style { 
  input {
    color: red;
    font-size: 12px;
  }

  .form-input:focus {
    outline: 1px solid blue;
  }
}
<input class=\\"form-input\\" />"
`;

exports[`Marko > svelte > Javascript Test > textExpressions 1`] = `
"class {
  onCreate() {
    this.state = { a: 5, b: 12 };
  }
}

<div>
  normal: \${state.a + state.b}
  <br />

  conditional \${state.a > 2 ? 'hello' : 'bye'}
</div>"
`;

exports[`Marko > svelte > Typescript Test > basic 1`] = `
"class {
  onCreate() {
    this.state = { name: \\"Steve\\" };
  }
}

<div>
  <input
    on-input(event => state.name = event.target.value)
    value=(state.name)
  />

  Hello! I can run in React, Vue, Solid, or Liquid!
</div>"
`;

exports[`Marko > svelte > Typescript Test > bindGroup 1`] = `
"class {
  onCreate() {
    this.state = { tortilla: \\"Plain\\", fillings: [] };
  }
}

<div>
  <input
    type=\\"radio\\"
    value=\\"Plain\\"
    checked=(state.tortilla === 'Plain')
    on-input(event => state.tortilla = event.target.value)
  />
  <input
    type=\\"radio\\"
    value=\\"Whole wheat\\"
    checked=(state.tortilla === 'Whole wheat')
    on-input(event => state.tortilla = event.target.value)
  />
  <input
    type=\\"radio\\"
    value=\\"Spinach\\"
    checked=(state.tortilla === 'Spinach')
    on-input(event => state.tortilla = event.target.value)
  />
  <br />
  <br />
  <input
    type=\\"checkbox\\"
    value=\\"Rice\\"
    checked=(state.fillings === 'Rice')
    on-input(event => state.fillings = event.target.value)
  />
  <input
    type=\\"checkbox\\"
    value=\\"Beans\\"
    checked=(state.fillings === 'Beans')
    on-input(event => state.fillings = event.target.value)
  />
  <input
    type=\\"checkbox\\"
    value=\\"Cheese\\"
    checked=(state.fillings === 'Cheese')
    on-input(event => state.fillings = event.target.value)
  />
  <input
    type=\\"checkbox\\"
    value=\\"Guac (extra)\\"
    checked=(state.fillings === 'Guac (extra)')
    on-input(event => state.fillings = event.target.value)
  />
  <p>Tortilla: \${state.tortilla}</p>
  <p>Fillings: \${state.fillings}</p>
</div>"
`;

exports[`Marko > svelte > Typescript Test > bindProperty 1`] = `
"class {
  onCreate() {
    this.state = { value: \\"hello\\" };
  }
}

<input value=(state.value) />"
`;

exports[`Marko > svelte > Typescript Test > classDirective 1`] = `
"class {
  onCreate(input) {
    this.state = { focus: true };
  }
}

<input
  class=(\`form-input \${input.disabled ? 'disabled' : ''} \${state.focus ? 'focus' : ''}\`)
/>"
`;

exports[`Marko > svelte > Typescript Test > context 1`] = `
"class {
  onCreate() {
    this.state = { activeTab: 0 };
  }
}

<div>\${state.activeTab}</div>"
`;

exports[`Marko > svelte > Typescript Test > each 1`] = `
"class {
  onCreate() {
    this.state = { numbers: [\\"one\\", \\"two\\", \\"three\\"] };
  }
}

<ul>
  <for|num| of=(state.numbers)>
    <li>\${num}</li>
  </for>
</ul>"
`;

exports[`Marko > svelte > Typescript Test > eventHandlers 1`] = `
"class {
  log = function log(msg = \\"hello\\") {
    console.log(msg);
  };
}

<div>
  <button on-click(a => component.log('hi'))>Log</button>
  <button on-click(event => component.log(event))>Log</button>
  <button on-click(event => component.log(event))>Log</button>
</div>"
`;

exports[`Marko > svelte > Typescript Test > html 1`] = `
"class {
  onCreate() {
    this.state = { html: \\"<b>bold</b>\\" };
  }
}

<div>$!{state.html}</div>"
`;

exports[`Marko > svelte > Typescript Test > ifElse 1`] = `
"class {
  toggle = function toggle() {
    this.state.show = !this.state.show;
  };

  onCreate() {
    this.state = { show: true };
  }
}

<if(state.show)>
  <button on-click(event => component.toggle(event))>Hide</button></if>
<else><button on-click(event => component.toggle(event))>Show</button></else>"
`;

exports[`Marko > svelte > Typescript Test > imports 1`] = `
"import Button from \\"./Button.marko\\";

class {
  onCreate() {
    this.state = { disabled: false };
  }
}

<div>
  <button type=\\"button\\" disabled=(state.disabled)><slot></slot></button>
</div>"
`;

exports[`Marko > svelte > Typescript Test > lifecycleHooks 1`] = `
"class {
  onMount() {
    console.log(\\"onMount\\");
  }
  onDestroy() {
    console.log(\\"onDestroy\\");
  }
  onRender() {
    console.log(\\"onAfterUpdate\\");
  }
}

<div></div>"
`;

exports[`Marko > svelte > Typescript Test > reactive 1`] = `
"class {
  get lowercaseName() {
    return this.state.name.toLowerCase();
  }

  onCreate() {
    this.state = { name: \\"Steve\\" };
  }
}

<div>
  <input value=(state.name) />

  Lowercase: \${component.lowercaseName}
</div>"
`;

exports[`Marko > svelte > Typescript Test > reactiveWithFn 1`] = `
"class {
  calculateResult = function calculateResult(a_, b_) {
    this.state.result = a_ * b_;
  };

  onCreate() {
    this.state = { a: 2, b: 5, result: null };
  }

  onRender() {
    this.calculateResult(this.state.a, this.state.b);
  }
}

<div>
  <input
    type=\\"number\\"
    on-input(event => state.a = event.target.value)
    value=(state.a)
  />
  <input
    type=\\"number\\"
    on-input(event => state.b = event.target.value)
    value=(state.b)
  />

  Result: \${state.result}
</div>"
`;

exports[`Marko > svelte > Typescript Test > slots 1`] = `
"class {}

<div>
  <slot>default</slot> <slot name=\\"Test\\"><div>default</div></slot>
</div>"
`;

exports[`Marko > svelte > Typescript Test > style 1`] = `
"class {}

style { 
  input {
    color: red;
    font-size: 12px;
  }

  .form-input:focus {
    outline: 1px solid blue;
  }
}
<input class=\\"form-input\\" />"
`;

exports[`Marko > svelte > Typescript Test > textExpressions 1`] = `
"class {
  onCreate() {
    this.state = { a: 5, b: 12 };
  }
}

<div>
  normal: \${state.a + state.b}
  <br />

  conditional \${state.a > 2 ? 'hello' : 'bye'}
</div>"
`;
